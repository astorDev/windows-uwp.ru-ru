---
title: Настройка Node.js в подсистеме Windows для Linux версии 2
description: Руководство по настройке среды разработки Node.js в подсистеме Windows для Linux.
author: mattwojo
ms.author: mattwoj
manager: jken
ms.topic: article
keywords: NodeJS, Node.js, windows 10, microsoft, обучение по nodejs, узел в windows, node в wsl, node в windows для linux, установка node в windows, nodejs с vs code, разработка с использованием node в windows, разработка с использованием nodejs в windows, установка node в WSL, NodeJS в подсистеме Windows для Linux
ms.localizationpriority: medium
ms.date: 09/19/2019
ms.openlocfilehash: 1ea8973e1db665d1fe66ef6b5f5699319131d605
ms.sourcegitcommit: 2af814b7f94ee882f42fae8f61130b9cc9833256
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2020
ms.locfileid: "83717133"
---
# <a name="set-up-your-nodejs-development-environment-with-wsl-2"></a>Настройка среды разработки Node.js в подсистеме Windows для Linux версии 2

В этом пошаговом руководстве содержатся инструкции по настройке среды разработки Node.js с помощью подсистемы Windows для Linux (WSL).

Мы рекомендуем вам установить и запустить обновленную версию WSL 2, чтобы пользоваться преимуществами, связанными с существенной оптимизацией производительности и совместимости системных вызовов, включая возможность запуска [Docker Desktop](https://docs.docker.com/docker-for-windows/wsl-tech-preview/#download). Многие модули npm и руководства для разработки веб-приложений на Node.js написаны для пользователей Linux, и поэтому в них используются средства упаковки и установки на основе Linux. Большинство веб-приложений также развертываются в Linux, поэтому использование WSL 2 обеспечит согласованность между рабочей средой и средой разработки.

> [!NOTE]
> Если вы намерены использовать Node.js напрямую в Windows или в рабочей среде Windows Server, см. руководство по [настройке среды разработки Node.js непосредственно в Windows](./setup-on-windows.md).

## <a name="install-wsl-2"></a>Установка WSL 2

Чтобы включить и установить WSL 2, выполните инструкции из [документации по установке WSL](https://docs.microsoft.com/windows/wsl/install-win10). Эти инструкции включают возможность выбора дистрибутива Linux (например, Ubuntu).

Установив WSL 2 и дистрибутив Linux, откройте дистрибутив Linux (его можно найти в меню "Пуск" в Windows) и проверьте версию и кодовое имя с помощью команды `lsb_release -dc`.

Мы рекомендуем не просто регулярно обновлять дистрибутив Linux, а сделать это сразу после установки. Так вы убедитесь в том, что у вас есть последние версии пакетов. Windows не обрабатывает это обновление автоматически. Чтобы обновить дистрибутив, используйте команду `sudo apt update && sudo apt upgrade`.  

## <a name="install-windows-terminal-optional"></a>Установка Терминала Windows (необязательно)

В новом Терминале Windows можно использовать несколько вкладок (чтобы быстро переходить между несколькими командным строками Linux, командной строкой Windows, PowerShell, Azure CLI и т. д.), создавать пользовательские сочетания клавиш (для открытия и закрытия вкладок, копирования и вставки и т. п.), а также применять функцию поиска и пользовательские темы (цветовые схемы, стили и размеры шрифтов, а также фоновое изображение, размытие и прозрачность). [Подробнее.](https://docs.microsoft.com/windows/terminal)

1. Скачайте [Терминал Windows (предварительная версия) из Microsoft Store](https://www.microsoft.com/store/apps/9n0dx20hk701). При установке через магазин обновления выполняются автоматически.

2. После установки откройте Терминал Windows и щелкните **Параметры**, чтобы настроить Терминал использовать файл `settings.json`.

    ![Параметры Терминала Windows](../images/windows-terminal-settings.png)

## <a name="install-nvm-nodejs-and-npm"></a>Установка nvm, Node.js и npm

Существует несколько способов установки Node.js. Мы рекомендуем использовать диспетчер версий, так как версии меняются достаточно быстро. Вероятно, вам придется переключаться между несколькими версиями в зависимости от потребностей для различных проектов, над которыми вы работаете. Диспетчер версий Node Version Manager, чаще называемый nvm, является наиболее популярным средством установки нескольких версий Node.js. Мы выполним описанные ниже шаги, чтобы установить nvm, а затем используем его для установки Node.js и диспетчера пакетов Node Package Manager (npm). Существуют также [альтернативные диспетчеры версий](#alternative-version-managers), которые описаны в следующем разделе.

> [!IMPORTANT]
> Рекомендуем всегда удалять любые имеющиеся установки Node.js или npm из операционной системы перед установкой диспетчера версий, так как эти установки могут создавать необычные и запутанные конфликты. Например, версия Node, которую можно установить с помощью команды `apt-get` в Ubuntu, уже устарела. Справку по удалению предыдущих установок см. на странице об [удалении Node.js из Ubuntu](https://askubuntu.com/questions/786015/how-to-remove-nodejs-from-ubuntu-16-04).

1. Откройте командную строку Ubuntu 18.04.
2. Установите cURL (инструмент, используемый для скачивания содержимого из Интернета в командной строке), выполнив команду `sudo apt-get install curl`.
3. Установите nvm с помощью команды `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash`.
4. Чтобы проверить установку, введите `command -v nvm`. Команда должна вернуть nvm. В случае возврата command not found (команда не найдена) или отсутствия ответа закройте терминал, откройте его снова и повторите попытку. [Дополнительные сведения см. в репозитории nvm на сайте GitHub](https://github.com/nvm-sh/nvm).
5. Вызовите список установленных на данный момент версий Node с помощью команды `nvm ls`. На этом этапе список должен быть пуст.

    ![Список nvm без версий Node](../images/nvm-no-node.png)

6. Установите текущий выпуск Node.js (в нем вы сможете протестировать новейшие улучшения возможностей, но вероятность возникновения проблем при этом будет велика) с помощью команды `nvm install node`.
7. Установите последний стабильный выпуск (LTS) для Node.js (рекомендуется) с помощью команды `nvm install --lts`.
8. Вызовите список установленных версий Node, выполнив команду `nvm ls`. Теперь в нем должны отображаться две недавно установленные версии.

    ![Список nvm с версией LTS и текущими версиями Node](../images/nvm-node-installed.png)

9. Проверьте установку Node.js и текущую версию по умолчанию с помощью команды `node --version`. Затем проверьте наличие npm, выполнив команду `npm --version` (вы также можете использовать `which node` или `which npm`, чтобы получить путь, используемый для версий по умолчанию).
10. Чтобы изменить версию Node.js на ту, которую вы хотите использовать для проекта, создайте каталог проекта с помощью команды `mkdir NodeTest` и укажите каталог, выполнив команду `cd NodeTest`. Затем введите `nvm use node`, чтобы переключиться на текущую версию, или `nvm use --lts`, чтобы переключиться на версию LTS. Вы также можете использовать определенный номер для любых установленных дополнительных версий, например `nvm use v8.2.1`. (Чтобы просмотреть все доступные версии Node.js, используйте команду `nvm ls-remote`.)

Если вы используете nvm для установки Node.js и npm, не следует выполнять команду SUDO для установки новых пакетов.

> [!NOTE]
> На момент публикации этого руководства самой последней доступной версией nvm была версия 0.35.2. На этой [странице проекта GitHub](https://github.com/nvm-sh/nvm) можно проверить наличие последнего выпуска nvm. Вы можете настроить команду выше, чтобы она включала в себя последнюю версию.
Установка новой версии nvm с помощью cURL заменит старую версию, оставив без изменений версию Node, для установки которой вы использовали nvm. Пример: `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.36.0/install.sh | bash`

## <a name="alternative-version-managers"></a>Альтернативные диспетчеры версий

Несмотря на то что nvm в настоящее время является самым популярным менеджером версий для Node, есть несколько альтернативных вариантов:

- [n](https://www.npmjs.com/package/n#installation) — это давняя альтернатива `nvm`, которая выполняет те же процессы с помощью немного отличающихся команд и устанавливается с помощью `npm`, а не скрипта bash.
- [fnm](https://github.com/Schniz/fnm#using-a-script) —это более новый диспетчер версий, заявленный как более быстрый, чем `nvm`. (Он также использует [конвейеры Azure](https://docs.microsoft.com/azure/devops/pipelines/get-started/what-is-azure-pipelines?view=azure-devops).)
- [Volta](https://github.com/volta-cli/volta#installing-volta) — это новый диспетчер версий, созданный командой LinkedIn. Заявлено, что он отличается увеличенной скоростью и межплатформенной поддержкой.
- [asdf-vm](https://asdf-vm.com/#/core-manage-asdf-vm) — это единый интерфейс командной строки для нескольких языков, объединяющий в себе gvm, nvm, rbenv и pyenv (и много других диспетчеров).
- [nvs](https://github.com/jasongin/nvs) (Node Version Switcher) — это кроссплатформенный вариант `nvm` с возможностью [интеграции с VS Code](https://github.com/jasongin/nvs/blob/master/doc/VSCODE.md).

## <a name="install-your-favorite-code-editor"></a>Установка предпочтительного редактора кода

Для проектов Node.js мы рекомендуем использовать **Visual Studio Code** с расширением **Remote-WSL**. Это расширение преобразовывает VS Code в архитектуру "клиент-сервер", где клиент (пользовательский интерфейс) выполняется на вашем компьютере с Windows, а сервер (ваш код, Git, плагины и т. д.) — удаленно.

- Поддерживаются IntelliSense и анализ кода на основе Linux.
- Проекты автоматически встраиваются в Linux.
- Можно использовать расширения, работающие в Linux ([ES Lint, NPM Intellisense, фрагменты ES6 и т. д.](https://marketplace.visualstudio.com/items?itemName=waderyan.nodejs-extension-pack)).

Текстовые редакторы на основе терминала (Vim, Emacs, nano) также полезны для внесения быстрых изменений прямо из консоли. ([В этой статье](https://medium.com/linode-cube/emacs-nano-or-vim-choose-your-terminal-based-text-editor-wisely-8f3826c92a68) можно ознакомиться с описанием их различий и инструкциями по использованию каждого редактора.)

> [!NOTE]
> При использовании некоторых редакторов графических пользовательских интерфейсов (Atom, Sublime Text, Eclipse) могут возникнуть проблемы с доступом к общему сетевому расположению WSL (\\wsl$\Ubuntu\home\)). В этом случае редактор попытается создать файлы Linux с помощью инструментов Windows, которые могут оказаться нежелательными для вас. Расширение Remote-WSL в VS Code может устранить эту проблему.

Чтобы установить VS Code и расширение Remote-WSL, сделайте следующее:

1. [Скачивание и установка VS Code для Windows](https://code.visualstudio.com). VS Code также доступен для Linux, но подсистема Windows для Linux не поддерживает приложения с графическим пользовательским интерфейсом, поэтому нам нужно установить его в Windows. Не волнуйтесь, вы по-прежнему сможете выполнить интеграцию с командной строкой и инструментами Linux с помощью расширения Remote — WSL.

2. Установите [расширение Remote — WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl) в VS Code. Это позволит вам использовать WSL в качестве интегрированной среды разработки и обеспечит совместимость и путь к ней. [Подробнее.](https://code.visualstudio.com/docs/remote/remote-overview)

> [!IMPORTANT]
> Если у вас уже установлен VS Code, убедитесь, что имеете [выпуск 1.35 от мая](https://code.visualstudio.com/updates/v1_35) или более поздней версии, чтобы установить [расширение Remote — WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl). Мы не рекомендуем использовать WSL в VS Code без расширения Remote — WSL, так как вы потеряете поддержку автозавершения, отладки, анализа кода и т. д. Интересный факт: это расширение WSL устанавливается в $HOME/.vscode-server/extensions.

### <a name="helpful-vs-code-extensions"></a>Полезные расширения VS Code

Несмотря на то что VS Code поставляется с множеством возможностей для разработки Node.js, есть несколько полезных рекомендуемых расширений, доступных в [пакете расширений Node.js](https://marketplace.visualstudio.com/items?itemName=waderyan.nodejs-extension-pack). Установите их все или выберите наиболее полезные для вас.

Чтобы установить пакет расширений Node.js, сделайте следующее:

1. Откройте в VS Code окно **Расширения** (нажав клавиши CTRL+SHIFT+X).

    Окно расширений теперь разделено на три раздела (так как вы установили расширение Remote-WSL).
    - "Local - Installed" (Локальные — установленные) — расширения, установленные для использования с операционной системой Windows.
    - WSL:Ubuntu-18.04-Installed — расширения, установленные для использования с операционной системой Ubuntu (WSL).
    - "Рекомендуется" — рекомендованные VS Code расширения на основе типов файлов в текущем проекте.

    ![Сравнение расширений VS Code для локальной и удаленной среды](../images/vscode-extensions-local-remote.png)

2. В поле поиска в верхней части окна расширений введите: **Node Extension Pack** (Пакет расширений Node) (или имя любого расширения, которое необходимо найти). Расширение будет установлено для локальных экземпляров или WSL-экземпляров VS Code (в зависимости от того, где открыт текущий проект). Это можно проверить, щелкнув удаленную ссылку в нижнем левом углу окна VS Code (выделенную зеленым цветом). Эта ссылка позволяет открыть или закрыть удаленное подключение. Установите расширения Node.js в среде WSL:Ubuntu-18.04.

    ![Ссылка VS Code на удаленную среду](../images/wsl-remote-extension.png)

К дополнительным рекомендуемым расширениям относятся следующие:

- [Отладчик для Chrome](https://code.visualstudio.com/blogs/2016/02/23/introducing-chrome-debugger-for-vs-code) — после завершения разработки на стороне сервера с помощью Node.js вам нужно будет выполнить разработку и тестирование на стороне клиента. Это расширение интегрирует редактор VS Code со службой отладки браузера Chrome, что увеличивает эффективность выполнения операций.
- [Раскладки клавиатуры других редакторов](https://marketplace.visualstudio.com/search?target=VSCode&category=Keymaps&sortBy=Downloads) — эти расширения позволят использовать необходимую раскладку при переходе в другой текстовый редактор (например, Atom, Sublime, Vim, eMacs, Notepad++ и т. п.).
- [Расширение синхронизации параметров](https://marketplace.visualstudio.com/items?itemName=Shan.code-settings-sync) — позволяет синхронизировать параметры VS Code в разных установках, используя GitHub. Если вы работаете на разных компьютерах, это обеспечит согласованность среды между ними.

## <a name="set-up-git-optional"></a>Настройка Git (необязательно)

Если вы планируете работать совместно с другими пользователями или размещать проект на сайте с открытым исходным кодом (например, GitHub), примите во внимание, что VS Code поддерживает [управление версиями с помощью Git](https://code.visualstudio.com/docs/editor/versioncontrol#_git-support). Вкладка системы управления версиями в VS Code отслеживает все изменения и содержит общие команды Git (добавление, фиксация, принудительная отправка, извлечение) прямо в пользовательском интерфейсе.

1. Git поставляется с установленным дистрибутивом подсистемы Windows для Linux, но вам все же необходимо настроить файл конфигурации Git. Для этого в терминале введите `git config --global user.name "Your Name"`, а затем — `git config --global user.email "youremail@domain.com"`. Если у вас еще нет учетной записи Git, вы можете [зарегистрироваться на сайте GitHub](https://github.com/join). Если вы никогда не использовали Git, обратитесь к [руководствам по GitHub](https://guides.github.com/). Они помогут вам приступить к работе. Если вам нужно изменить файл конфигурации Git, это можно сделать с помощью встроенного текстового редактора, такого как nano: `nano ~/.gitconfig`.

2. Мы рекомендуем добавлять [GITIGNORE-файл](https://help.github.com/en/articles/ignoring-files) в проекты Node. [На сайте GitHub вы можете найти GITIGNORE-шаблон по умолчанию для Node.js](https://github.com/github/gitignore/blob/master/Node.gitignore). Если вы решите [создать репозиторий на веб-сайте GitHub](https://help.github.com/articles/create-a-repo), для вас будут доступны параметры с флажками для инициализации репозитория с помощью файла сведений и настройки GITIGNORE-файлов для проектов Node.js, а также параметры добавления лицензии (если она вам нужна).

## <a name="next-steps"></a>Дальнейшие действия

Теперь у вас есть настроенная среда разработки Node.js. Сведения об использовании среды Node.js см. в одном из следующих руководств:

- [Приступая к работе с Node.js: инструкции для начинающих](./beginners.md)
- [Начало работы с веб-платформами Node.js в Windows](./web-frameworks.md)
- [Начало работы с подключениями приложений Node.js к базе данных](./databases.md)
- [Начало работы с контейнерами Docker для Node.js](./containers.md)
