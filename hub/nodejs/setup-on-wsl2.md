---
title: Настройка Node.js в подсистеме Windows для Linux версии 2
description: Руководство по настройке среды разработки Node.js в подсистеме Windows для Linux.
author: mattwojo
ms.author: mattwoj
manager: jken
ms.topic: article
keywords: NodeJS, Node.js, windows 10, microsoft, обучение по nodejs, узел в windows, node в wsl, node в windows для linux, установка node в windows, nodejs с vs code, разработка с использованием node в windows, разработка с использованием nodejs в windows, установка node в WSL, NodeJS в подсистеме Windows для Linux
ms.localizationpriority: medium
ms.date: 09/19/2019
ms.openlocfilehash: c987f5bea387c630a1b9ef23c928d7a1bb8fadfc
ms.sourcegitcommit: 76e8b4fb3f76cc162aab80982a441bfc18507fb4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "75835382"
---
# <a name="set-up-your-nodejs-development-environment-with-wsl-2"></a>Настройка среды разработки Node.js в подсистеме Windows для Linux версии 2

В этом пошаговом руководстве содержатся инструкции по настройке среды разработки Node.js с помощью подсистемы Windows для Linux (WSL). Для установки и использования [WSL 2](https://devblogs.microsoft.com/commandline/wsl-2-is-now-available-in-windows-insiders/) согласно этим инструкциям необходимо установить и запустить сборку Windows Insider Preview. По сравнению с подсистемой WSL 1 в WSL 2 существенно увеличена скорость работы и производительность, особенно в отношении Node.js. Многие модули npm и руководства для разработки веб-приложений на Node.js написаны для пользователей Linux, и поэтому в них используются средства упаковки и установки на основе Linux. Большинство веб-приложений также развертываются в Linux, поэтому использование WSL 2 обеспечит согласованность между рабочей средой и средой разработки.

> [!NOTE]
> Если вы намерены использовать Node.js напрямую в Windows или в рабочей среде Windows Server, см. руководство по [настройке среды разработки Node.js непосредственно в Windows](./setup-on-windows.md).

## <a name="install-windows-10-insider-preview-build"></a>Установка сборки Windows 10 Insider Preview

1. **[Установите последнюю версию Windows 10](https://www.microsoft.com/software-download/windows10)** . Нажмите кнопку **Обновить сейчас**, чтобы скачать помощник по обновлению. После скачивания откройте этот помощник, чтобы проверить, используете ли вы в настоящее время последнюю версию Windows. Если нет, в окне помощника нажмите кнопку **Обновить сейчас**, чтобы обновить ОС своего компьютера. *(Это необязательно, если вы используете одну из последних версий Windows 10.)*

    ![Помощник по обновлению Windows](../images/windows-update-assistant2019.png)

2. Выберите элементы **[Пуск > Параметры > Программа предварительной оценки Windows](ms-settings:windowsinsider)** . В окне программы предварительной оценки Windows нажмите кнопку **Начало работы**, а затем щелкните **Связывание учетной записи**.

    ![Параметры Программы предварительной оценки Windows](../images/windows-insider-program-settings.png)

3. **[Зарегистрируйтесь в качестве участника программы предварительной оценки Windows](https://insider.windows.com/getting-started/#register)** . Если вы не зарегистрированы в этой программе, зарегистрируйтесь, используя [учетную запись Microsoft](https://account.microsoft.com/account).

    ![Регистрация участника программы предварительной оценки Windows](../images/windows-insider-account.png)

4. Укажите, необходимо ли получать обновления: **Fast Ring** (Круг раннего доступа) или **Skip ahead to the next Windows release** (Переход к следующему выпуску Windows). Подтвердите выбор и щелкните **Перезагрузить позже**. Нам нужно будет изменить несколько дополнительных параметров перед перезагрузкой.

    ![Круг раннего доступа участника программы предварительной оценки Windows](../images/windows-insider-fast.png)

## <a name="enable-windows-subsystem-for-linux-and-virtual-machine-platform"></a>Включение подсистемы Windows для Linux и платформы виртуальных машин

1. В разделе **Параметры Windows** найдите раздел **Включение или отключение компонентов Windows**.
2. Прокрутите открывшийся список **Компоненты Windows**, чтобы найти **Virtual Machine Platform** (Платформа виртуальных машин) и **Подсистема Windows для Linux**. Установите оба флажка, а затем нажмите кнопку **ОК**.
3. При появлении соответствующего запроса перезагрузите компьютер.

    ![Включение компонентов Windows](../images/windows-feature-settings.png)

## <a name="install-a-linux-distribution"></a>Установка дистрибутива Linux

Для запуска в WSL доступно несколько дистрибутивов Linux. Вы можете найти и установить необходимый дистрибутив в Microsoft Store. Мы рекомендуем начать с [Ubuntu 18.04 LTS](https://www.microsoft.com/store/productId/9N9TNGVNDL3Q), так как он является актуальным, популярным и хорошо поддерживаемым.

1. Перейдите по ссылке на [Ubuntu 18.04 LTS](https://www.microsoft.com/store/productId/9N9TNGVNDL3Q), откройте Microsoft Store и выберите **Получить**. *(Файл загрузки имеет довольно большой размер, поэтому установка может занять некоторое время.)*

2. После завершения загрузки выберите **Запустить** в Microsoft Store или запустите, введя "Ubuntu 18.04 LTS" в меню **Пуск**.

3. При первом запуске дистрибутива вам будет предложено создать имя учетной записи и пароль. После этого вы автоматически войдете в систему с данными этого пользователя по умолчанию. Вы можете выбрать любые имя пользователя и пароль. Они не имеют никакого отношения к вашему имени пользователя Windows.

    ![Дистрибутивы Linux в Microsoft Store](../images/store-linux-distros.png)

Вы можете проверить дистрибутив Linux, который используется в данный момент, введя: `lsb_release -dc`. Чтобы обновить дистрибутив Ubuntu, используйте: `sudo apt update && sudo apt upgrade`. Мы рекомендуем выполнять обновление регулярно, чтобы гарантировать, что вы имеете самые последние пакеты. Windows не обрабатывает это обновление автоматически. Ссылки на другие дистрибутивы Linux, доступные в Microsoft Store, сведения об альтернативных методах установки или устранении неполадок см. в разделе [Руководство по установке подсистемы Windows для Linux в Windows 10](https://docs.microsoft.com/windows/wsl/install-win10).

## <a name="install-wsl-2"></a>Установка WSL 2

WSL 2 — [это новая версия архитектуры](https://docs.microsoft.com/windows/wsl/wsl2-about) WSL, которая изменяет способ взаимодействия дистрибутивов Linux с Windows, повышая уровень производительности и обеспечивая совместимость с системными вызовами.

1. В PowerShell введите команду `wsl -l`, чтобы просмотреть список дистрибутивов WSL, установленных на вашем компьютере. Теперь в этом списке должна отображаться ОС Ubuntu-18.04.
2. Теперь введите команду `wsl --set-version Ubuntu-18.04 2`, чтобы настроить использование WSL 2 в установке Ubuntu.
3. Проверьте версию WSL, которую использует каждый из установленных дистрибутивов, выполнив команду `wsl --list --verbose` (или `wsl -l -v`).

    ![Установленная версия подсистемы Windows для Linux](../images/wsl-versions.png)

> [!TIP]
> Вы можете задать любой дистрибутив Linux, установленный в WSL 2, выполнив те же инструкции (используя PowerShell). Просто замените Ubuntu-18.04 на имя необходимого установленного дистрибутива. Чтобы вернуться к использованию WSL 1, выполните приведенную выше команду, заменив "2" на "1".  Вы также можете задать WSL 2 по умолчанию для всех новых устанавливаемых дистрибутивов, введя `wsl --set-default-version 2`.

## <a name="install-nvm-nodejs-and-npm"></a>Установка nvm, Node.js и npm

Существует несколько способов установки Node.js. Мы рекомендуем использовать диспетчер версий, так как версии меняются достаточно быстро. Вероятно, вам придется переключаться между несколькими версиями в зависимости от потребностей для различных проектов, над которыми вы работаете. Диспетчер версий Node Version Manager, чаще называемый nvm, является наиболее популярным средством установки нескольких версий Node.js. Мы выполним описанные ниже шаги, чтобы установить nvm, а затем используем его для установки Node.js и диспетчера пакетов Node Package Manager (npm). Существуют также [альтернативные диспетчеры версий](#alternative-version-managers), которые описаны в следующем разделе.

> [!IMPORTANT]
> Рекомендуем всегда удалять любые имеющиеся установки Node.js или npm из операционной системы перед установкой диспетчера версий, так как эти установки могут создавать необычные и запутанные конфликты. Например, версия Node, которую можно установить с помощью команды `apt-get` в Ubuntu, уже устарела. Справку по удалению предыдущих установок см. на странице об [удалении Node.js из Ubuntu](https://askubuntu.com/questions/786015/how-to-remove-nodejs-from-ubuntu-16-04).

1. Откройте командную строку Ubuntu 18.04.
2. Установите cURL (инструмент, используемый для скачивания содержимого из Интернета в командной строке), выполнив команду `sudo apt-get install curl`.
3. Установите nvm с помощью команды `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash`.
4. Чтобы проверить установку, введите `command -v nvm`. Команда должна вернуть nvm. В случае возврата command not found (команда не найдена) или отсутствия ответа закройте терминал, откройте его снова и повторите попытку. [Дополнительные сведения см. в репозитории nvm на сайте GitHub](https://github.com/nvm-sh/nvm).
5. Вызовите список установленных на данный момент версий Node с помощью команды `nvm ls`. На этом этапе список должен быть пуст.

    ![Список nvm без версий Node](../images/nvm-no-node.png)

6. Установите текущий выпуск Node.js (в нем вы сможете протестировать новейшие улучшения возможностей, но вероятность возникновения проблем при этом будет велика) с помощью команды `nvm install node`.
7. Установите последний стабильный выпуск (LTS) для Node.js (рекомендуется) с помощью команды `nvm install --lts`.
8. Вызовите список установленных версий Node, выполнив команду `nvm ls`. Теперь в нем должны отображаться две недавно установленные версии.

    ![Список nvm с версией LTS и текущими версиями Node](../images/nvm-node-installed.png)

9. Проверьте установку Node.js и текущую версию по умолчанию с помощью команды `node --version`. Затем проверьте наличие npm, выполнив команду `npm --version` (вы также можете использовать `which node` или `which npm`, чтобы получить путь, используемый для версий по умолчанию).
10. Чтобы изменить версию Node.js на ту, которую вы хотите использовать для проекта, создайте каталог проекта с помощью команды `mkdir NodeTest` и укажите каталог, выполнив команду `cd NodeTest`. Затем введите `nvm use node`, чтобы переключиться на текущую версию, или `nvm use --lts`, чтобы переключиться на версию LTS. Вы также можете использовать определенный номер для любых установленных дополнительных версий, например `nvm use v8.2.1`. (Чтобы просмотреть все доступные версии Node.js, используйте команду `nvm ls-remote`.)

> [!TIP]
> Если вы используете nvm для установки Node.js и npm, не следует выполнять команду SUDO для установки новых пакетов.

> [!NOTE]
> На момент публикации этого руководства самой последней доступной версией nvm была версия 0.35.2. На этой [странице проекта GitHub](https://github.com/nvm-sh/nvm) можно проверить наличие последнего выпуска nvm. Вы можете настроить команду выше, чтобы она включала в себя последнюю версию.
Установка новой версии nvm с помощью cURL заменит старую версию, оставив без изменений версию Node, для установки которой вы использовали nvm. Пример: `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.36.0/install.sh | bash`

## <a name="alternative-version-managers"></a>Альтернативные диспетчеры версий

Несмотря на то что nvm в настоящее время является самым популярным менеджером версий для Node, есть несколько альтернативных вариантов:

- [n](https://www.npmjs.com/package/n#installation) — это давняя альтернатива `nvm`, которая выполняет те же процессы с помощью немного отличающихся команд и устанавливается с помощью `npm`, а не скрипта bash.
- [fnm](https://github.com/Schniz/fnm#using-a-script) —это более новый диспетчер версий, заявленный как более быстрый, чем `nvm`. (Он также использует [конвейеры Azure](https://docs.microsoft.com/azure/devops/pipelines/get-started/what-is-azure-pipelines?view=azure-devops).)
- [Volta](https://github.com/volta-cli/volta#installing-volta) — это новый диспетчер версий, созданный командой LinkedIn. Заявлено, что он отличается увеличенной скоростью и межплатформенной поддержкой.
- [asdf-vm](https://asdf-vm.com/#/core-manage-asdf-vm) — это единый интерфейс командной строки для нескольких языков, объединяющий в себе gvm, nvm, rbenv и pyenv (и много других диспетчеров).
- [nvs](https://github.com/jasongin/nvs) (Node Version Switcher) — это кроссплатформенный вариант `nvm` с возможностью [интеграции с VS Code](https://github.com/jasongin/nvs/blob/master/doc/VSCODE.md).

## <a name="install-your-favorite-code-editor"></a>Установка предпочтительного редактора кода

Для проектов Node.js мы рекомендуем использовать **Visual Studio Code** с расширением **Remote-WSL**. Это расширение преобразовывает VS Code в архитектуру "клиент-сервер", где клиент (пользовательский интерфейс) выполняется на вашем компьютере с Windows, а сервер (ваш код, Git, плагины и т. д.) — удаленно.

- Поддерживаются IntelliSense и анализ кода на основе Linux.
- Проекты автоматически встраиваются в Linux.
- Можно использовать расширения, работающие в Linux ([ES Lint, NPM Intellisense, фрагменты ES6 и т. д.](https://marketplace.visualstudio.com/items?itemName=waderyan.nodejs-extension-pack)).

Текстовые редакторы на основе терминала (Vim, Emacs, nano) также полезны для внесения быстрых изменений прямо из консоли. ([В этой статье](https://medium.com/linode-cube/emacs-nano-or-vim-choose-your-terminal-based-text-editor-wisely-8f3826c92a68) можно ознакомиться с описанием их различий и инструкциями по использованию каждого редактора.)

> [!NOTE]
> При использовании некоторых редакторов графических пользовательских интерфейсов (Atom, Sublime Text, Eclipse) могут возникнуть проблемы с доступом к общему сетевому расположению WSL (\\wsl$\Ubuntu\home\)). В этом случае редактор попытается создать файлы Linux с помощью инструментов Windows, которые могут оказаться нежелательными для вас. Расширение Remote-WSL в VS Code может устранить эту проблему.

Чтобы установить VS Code и расширение Remote-WSL, сделайте следующее:

1. [Скачивание и установка VS Code для Windows](https://code.visualstudio.com). VS Code также доступен для Linux, но подсистема Windows для Linux не поддерживает приложения с графическим пользовательским интерфейсом, поэтому нам нужно установить его в Windows. Не волнуйтесь, вы по-прежнему сможете выполнить интеграцию с командной строкой и инструментами Linux с помощью расширения Remote — WSL.

2. Установите [расширение Remote — WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl) в VS Code. Это позволит вам использовать WSL в качестве интегрированной среды разработки и обеспечит совместимость и путь к ней. [Подробнее.](https://code.visualstudio.com/docs/remote/remote-overview)

> [!IMPORTANT]
> Если у вас уже установлен VS Code, убедитесь, что имеете [выпуск 1.35 от мая](https://code.visualstudio.com/updates/v1_35) или более поздней версии, чтобы установить [расширение Remote — WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl). Мы не рекомендуем использовать WSL в VS Code без расширения Remote — WSL, так как вы потеряете поддержку автозавершения, отладки, анализа кода и т. д. Интересный факт: это расширение WSL устанавливается в $HOME/.vscode-server/extensions.

### <a name="helpful-vs-code-extensions"></a>Полезные расширения VS Code

Несмотря на то что VS Code поставляется с множеством возможностей для разработки Node.js, есть несколько полезных рекомендуемых расширений, доступных в [пакете расширений Node.js](https://marketplace.visualstudio.com/items?itemName=waderyan.nodejs-extension-pack). Установите их все или выберите наиболее полезные для вас.

Чтобы установить пакет расширений Node.js, сделайте следующее:

1. Откройте в VS Code окно **Расширения** (нажав клавиши CTRL+SHIFT+X).

    Окно расширений теперь разделено на три раздела (так как вы установили расширение Remote-WSL).
    - "Local - Installed" (Локальные — установленные) — расширения, установленные для использования с операционной системой Windows.
    - WSL:Ubuntu-18.04-Installed — расширения, установленные для использования с операционной системой Ubuntu (WSL).
    - "Рекомендуется" — рекомендованные VS Code расширения на основе типов файлов в текущем проекте.

    ![Сравнение расширений VS Code для локальной и удаленной среды](../images/vscode-extensions-local-remote.png)

2. В поле поиска в верхней части окна расширений введите: **Node Extension Pack** (Пакет расширений Node) (или имя любого расширения, которое необходимо найти). Расширение будет установлено для локальных экземпляров или WSL-экземпляров VS Code (в зависимости от того, где открыт текущий проект). Это можно проверить, щелкнув удаленную ссылку в нижнем левом углу окна VS Code (выделенную зеленым цветом). Эта ссылка позволяет открыть или закрыть удаленное подключение. Установите расширения Node.js в среде WSL:Ubuntu-18.04.

    ![Ссылка VS Code на удаленную среду](../images/wsl-remote-extension.png)

К дополнительным рекомендуемым расширениям относятся следующие:

- [Отладчик для Chrome](https://code.visualstudio.com/blogs/2016/02/23/introducing-chrome-debugger-for-vs-code) — после завершения разработки на стороне сервера с помощью Node.js вам нужно будет выполнить разработку и тестирование на стороне клиента. Это расширение интегрирует редактор VS Code со службой отладки браузера Chrome, что увеличивает эффективность выполнения операций.
- [Раскладки клавиатуры других редакторов](https://marketplace.visualstudio.com/search?target=VSCode&category=Keymaps&sortBy=Downloads) — эти расширения позволят использовать необходимую раскладку при переходе в другой текстовый редактор (например, Atom, Sublime, Vim, eMacs, Notepad++ и т. п.).
- [Расширение синхронизации параметров](https://marketplace.visualstudio.com/items?itemName=Shan.code-settings-sync) — позволяет синхронизировать параметры VS Code в разных установках, используя GitHub. Если вы работаете на разных компьютерах, это обеспечит согласованность среды между ними.

## <a name="install-windows-terminal-optional"></a>Установка Терминала Windows (необязательно)

Новый Терминал Windows позволяет использовать несколько вкладок (чтобы быстро переходить между командной строкой, PowerShell или несколькими дистрибутивами Linux), настраивать сочетания клавиш (для открытия или закрытия вкладок, копирования-вставки и т. п.), а также применять эмодзи ☺ и пользовательские темы (цветовые схемы, стили и размеры шрифтов, фоновое изображение, размытие, прозрачность). [Подробнее.](https://devblogs.microsoft.com/commandline/)

1. Скачайте [Терминал Windows (предварительная версия) из Microsoft Store](https://www.microsoft.com/store/apps/9n0dx20hk701). При установке через магазин обновления выполняются автоматически.

2. После установки откройте Терминал Windows и щелкните **Параметры**, чтобы настроить Терминал использовать файл `profile.json`. [См. дополнительные сведения об изменении параметров Терминала Windows](https://github.com/microsoft/terminal/blob/master/doc/user-docs/UsingJsonSettings.md).

    ![Параметры Терминала Windows](../images/windows-terminal-settings.png)

## <a name="set-up-git-optional"></a>Настройка Git (необязательно)

Если вы планируете работать совместно с другими пользователями или размещать проект на сайте с открытым исходным кодом (например, GitHub), примите во внимание, что VS Code поддерживает [управление версиями с помощью Git](https://code.visualstudio.com/docs/editor/versioncontrol#_git-support). Вкладка системы управления версиями в VS Code отслеживает все изменения и содержит общие команды Git (добавление, фиксация, принудительная отправка, извлечение) прямо в пользовательском интерфейсе.

1. Git поставляется с установленным дистрибутивом подсистемы Windows для Linux, но вам все же необходимо настроить файл конфигурации Git. Для этого в терминале введите `git config --global user.name "Your Name"`, а затем — `git config --global user.email "youremail@domain.com"`. Если у вас еще нет учетной записи Git, вы можете [зарегистрироваться на сайте GitHub](https://github.com/join). Если вы никогда не использовали Git, обратитесь к [руководствам по GitHub](https://guides.github.com/). Они помогут вам приступить к работе. Если вам нужно изменить файл конфигурации Git, это можно сделать с помощью встроенного текстового редактора, такого как nano: `nano ~/.gitconfig`.

2. Мы рекомендуем добавлять [GITIGNORE-файл](https://help.github.com/en/articles/ignoring-files) в проекты Node. [На сайте GitHub вы можете найти GITIGNORE-шаблон по умолчанию для Node.js](https://github.com/github/gitignore/blob/master/Node.gitignore). Если вы решите [создать репозиторий на веб-сайте GitHub](https://help.github.com/articles/create-a-repo), для вас будут доступны параметры с флажками для инициализации репозитория с помощью файла сведений и настройки GITIGNORE-файлов для проектов Node.js, а также параметры добавления лицензии (если она вам нужна).

## <a name="next-steps"></a>Дальнейшие действия

Теперь у вас есть настроенная среда разработки Node.js. Сведения об использовании среды Node.js см. в одном из следующих руководств:

- [Приступая к работе с Node.js: инструкции для начинающих](./beginners.md)
- [Начало работы с веб-платформами Node.js в Windows](./web-frameworks.md)
- [Начало работы с подключениями приложений Node.js к базе данных](./databases.md)
- [Начало работы с контейнерами Docker для Node.js](./containers.md)
