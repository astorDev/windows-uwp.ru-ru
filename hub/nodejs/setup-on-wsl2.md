---
title: Настройка NodeJS в WSL 2
description: Справочные сведения о настройке среды разработки Node. js в подсистеме Windows для Linux (WSL).
author: mattwojo
ms.author: mattwoj
manager: jken
ms.topic: article
keywords: NodeJS, Node. js, Windows 10, Майкрософт, Learning NodeJS, Node в Windows, Node на WSL, Node в Linux в Windows, Установка узла в Windows, NodeJS с VS Code, разработка с помощью узла в Windows, разработка с помощью NodeJS в Windows, установка node на WSL, NodeJS в Windows Подсистема для Linux
ms.localizationpriority: medium
ms.date: 09/19/2019
ms.openlocfilehash: e5875f0bf7ce73d3615aa131d57c2384c73dd8a1
ms.sourcegitcommit: 60d2d15dd0d365f82e4e90e4bc34b40cf5b4a247
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2019
ms.locfileid: "72517837"
---
# <a name="set-up-your-nodejs-development-environment-with-wsl-2"></a>Настройка среды разработки Node. js с помощью WSL 2

Ниже приведены пошаговые инструкции по настройке среды разработки Node. js с помощью подсистемы Windows для Linux (WSL). В настоящее время для установки и использования [WSL 2](https://devblogs.microsoft.com/commandline/wsl-2-is-now-available-in-windows-insiders/)в этом справочном материале необходимо установить и запустить сборку предварительной версии Windows. WSL 2 существенно улучшила скорость и производительность по сравнению с WSL 1, особенно в отношении Node. js. Многие модули и учебники NPM для веб-разработки на Node. js написаны для пользователей Linux и используют средства упаковки и установки на основе Linux. Большинство веб-приложений также развертываются в Linux, поэтому использование WSL 2 обеспечит согласованность между средой разработки и рабочими средами.

> [!NOTE]
> Если вы захотите использовать Node. js непосредственно в Windows или планируете использование рабочей среды Windows Server, ознакомьтесь с нашим руководством по [настройке среды разработки Node. js непосредственно в Windows](./setup-on-windows.md).

## <a name="install-windows-10-insider-preview-build"></a>Установка сборки Windows 10 Insider Preview

1. **[Установите последнюю версию Windows 10](https://www.microsoft.com/software-download/windows10)** : выберите **Обновить сейчас** , чтобы скачать помощник по обновлению. После загрузки откройте помощник по обновлению, чтобы узнать, используете ли вы последнюю версию Windows, и, если нет, выберите **Обновить сейчас** в окне помощника, чтобы обновить компьютер. *(Этот шаг является необязательным, если вы используете очень последнюю версию Windows 10.)*

    ![Помощник по Центр обновления Windows](../images/windows-update-assistant2019.png)

2. Выберите **[пуск > параметры > программе предварительной оценки Windows](ms-settings:windowsinsider)** : в окне программы предварительной оценки Windows щелкните **Начало работы** , а затем **свяжите учетную запись**.

    ![Параметры программы предварительной оценки Windows](../images/windows-insider-program-settings.png)

3. **[Регистрация в качестве средства предварительной оценки Windows](https://insider.windows.com/getting-started/#register)** . Если вы не зарегистрировались в программе предварительной оценки, это необходимо сделать с помощью [учетная запись Майкрософт](https://account.microsoft.com/account).

    ![Регистрация программы предварительной оценки Windows](../images/windows-insider-account.png)

4. Выберите получение обновлений для **быстрого звонка** или **Переход к следующему содержимому выпуска Windows** . Подтвердите и выберите **перезапуск позже**. Прежде чем перезапускать, необходимо изменить несколько дополнительных параметров.

    ![Быстрый звонок по программе предварительной оценки Windows](../images/windows-insider-fast.png)

## <a name="enable-windows-subsystem-for-linux-and-virtual-machine-platform"></a>Включение подсистемы Windows для Linux и платформы виртуальных машин

1. По-прежнему в **параметрах Windows**выполните поиск по запросу **Включение или отключение компонентов Windows**.
2. После появления списка **компонентов Windows** прокрутите экран, чтобы найти **платформу виртуальных машин** и **подсистему Windows для Linux**, убедитесь, что флажок установлен, и нажмите кнопку **ОК**.
3. При появлении соответствующего запроса перезагрузите компьютер.

    ![Включить компоненты Windows](../images/windows-feature-settings.png)

## <a name="install-a-linux-distribution"></a>Установка дистрибутива Linux

Для работы в WSL доступно несколько дистрибутивов Linux. Вы можете найти и установить Избранное в Microsoft Store. Мы рекомендуем начать с [Ubuntu 18,04 LTS](https://www.microsoft.com/store/productId/9N9TNGVNDL3Q) , так как он является актуальным, популярным и хорошо поддерживаемым.

1. Откройте эту ссылку [Ubuntu 18,04 LTS](https://www.microsoft.com/store/productId/9N9TNGVNDL3Q) , откройте Microsoft Store и выберите **получить**. *(Это довольно большая загрузка, и для установки может потребоваться некоторое время.)*

2. После завершения скачивания выберите **запустить** из Microsoft Store или запустите, введя "Ubuntu 18,04 LTS" в меню " **Пуск** ".

3. При первом запуске распределения вам будет предложено создать имя учетной записи и пароль. После этого вы автоматически войдете в систему от имени этого пользователя по умолчанию. Можно выбрать любое имя пользователя и пароль. Они не влияют на имя пользователя Windows.

    ![Дистрибутивы Linux в Microsoft Store](../images/store-linux-distros.png)

Вы можете проверить дистрибутив Linux, который используется в данный момент, введя: `lsb_release -dc`. Чтобы обновить дистрибутив Ubuntu, используйте команду: `sudo apt update && sudo apt upgrade`. Рекомендуем регулярно обновлять, чтобы убедиться, что у вас есть самые последние пакеты. Windows не обрабатывает это обновление автоматически. Ссылки на другие дистрибутивы Linux, доступные в Microsoft Store, альтернативных методах установки или устранении неполадок см. в статье [руководство по установке подсистемы Windows для Linux для Windows 10](https://docs.microsoft.com/windows/wsl/install-win10).

## <a name="install-wsl-2"></a>Установка WSL 2

WSL 2 — это [Новая версия архитектуры](https://docs.microsoft.com/windows/wsl/wsl2-about) в WSL, которая изменяет способ взаимодействия Linux дистрибутивов с Windows, повышает производительность и совместимость с полными системными вызовами.

1. В PowerShell введите команду: `wsl -l`, чтобы просмотреть список дистрибутивов WSL, установленных на компьютере. В этом списке должен появиться Ubuntu-18,04.
2. Теперь введите команду: `wsl --set-version Ubuntu-18.04 2`, чтобы настроить установку Ubuntu для использования WSL 2.
3. Проверьте версию WSL, используемую для каждого из установленных дистрибутивов: `wsl --list --verbose` (или `wsl -l -v`).

    ![Версия подсистемы Windows для Linux](../images/wsl-versions.png)

> [!TIP]
> Вы можете установить любой дистрибутив Linux, установленный в WSL 2, следуя тем же инструкциям (с помощью PowerShell), просто измените "Ubuntu-18,04" на имя установленного дистрибутив, которое вы хотите использовать. Чтобы вернуться к WSL 1, выполните ту же команду, что и выше, но заменив "2" на "1".  Вы также можете задать WSL 2 в качестве значения по умолчанию для всех вновь установленных дистрибутивов, введя: `wsl --set-default-version 2`.

## <a name="install-nvm-nodejs-and-npm"></a>Установка НВМ, Node. js и NPM

Существует несколько способов установки Node. js. Мы рекомендуем использовать диспетчер версий, так как версии очень быстро изменяются. Вам, скорее всего, потребуется переключиться между несколькими версиями в зависимости от потребностей различных проектов, над которыми вы работаете. Диспетчер версий узла, чаще именуемый НВМ, является самым популярным способом установки нескольких версий Node. js. Мы рассмотрим шаги по установке НВМ, а затем используем его для установки Node. js и диспетчера пакетов node (NPM). Существуют [Альтернативные диспетчеры версий](#alternative-version-managers) , которые следует учитывать в следующем разделе.

> [!IMPORTANT]
> Всегда рекомендуется удалить все существующие установки Node. js или NPM из операционной системы перед установкой диспетчера версий, так как различные типы установки могут привести к необычным и запутанным конфликтам. Например, версия узла, которая может быть установлена с помощью команды `apt-get` Ubuntu, в настоящее время устарела. Справку по удалению предыдущих установок см. [в статье Удаление NodeJS из Ubuntu](https://askubuntu.com/questions/786015/how-to-remove-nodejs-from-ubuntu-16-04).

1. Откройте командную строку Ubuntu 18,04.
2. Установить фигуру (средство, используемое для загрузки содержимого из Интернета в командной строке) с помощью: `sudo apt-get install curl`
3. Установить НВМ с: `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash`
4. Чтобы проверить установку, введите: `command -v nvm`... Это должно вернуть значение "НВМ", если вы получили команду "команда не найдена" или не отвечаете вообще, закройте текущий терминал, снова откройте его и повторите попытку. [Дополнительные сведения см. в репозитории НВМ GitHub](https://github.com/nvm-sh/nvm).
5. Список установленных на данный момент версий узла (на этом этапе в настоящее время они должны быть отсутствуют): `nvm ls`

    ![Список НВМ без версий узлов](../images/nvm-no-node.png)

6. Установите текущий выпуск Node. js (для тестирования последних улучшений функций, но с большей вероятностью возникают проблемы): `nvm install node`
7. Установите последнюю версию стабильного LTSного выпуска Node. js (рекомендуется): `nvm install --lts`
8. Список установленных версий узла: `nvm ls`... Теперь вы должны увидеть две версии, которые были установлены в списке.

    ![Список НВМ, отображающий версии LTS и текущего узла](../images/nvm-node-installed.png)

9. Убедитесь, что установлен Node. js и текущая версия по умолчанию: `node --version`. Затем убедитесь, что у вас также есть NPM: `npm --version` (для просмотра пути, используемого для версий по умолчанию) можно также использовать `which node` или `which npm`.
10. Чтобы изменить версию Node. js, которую вы хотите использовать для проекта, создайте новый каталог проекта `mkdir NodeTest`и введите `cd NodeTest`каталога, а затем введите `nvm use node`, чтобы перейти к текущей версии, или `nvm use --lts`, чтобы переключиться на версию LTS. Вы также можете использовать конкретное число для всех установленных дополнительных версий, например `nvm use v8.2.1`. (Чтобы вывести список всех доступных версий Node. js, используйте команду: `nvm ls-remote`).

> [!TIP]
> Если вы используете НВМ для установки Node. js и NPM, не нужно использовать команду SUDO для установки новых пакетов.

> [!NOTE]
> На момент публикации НВМ v 0.34.0 был последней доступной версией. На [странице проекта GitHub можно просмотреть последний выпуск НВМ](https://github.com/nvm-sh/nvm)и настроить приведенную выше команду, включив в нее последнюю версию.
При установке новой версии НВМ с помощью функции «перелистывание» будет заменена Предыдущая, а версия узла, используемая для установки НВМ, останется неизменной. Пример: `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.0/install.sh | bash`

## <a name="alternative-version-managers"></a>Альтернативные диспетчеры версий

Хотя НВМ в настоящее время является наиболее популярным диспетчером версий для Node, существует несколько альтернатив, которые следует учитывать:

- [n](https://www.npmjs.com/package/n#installation) — это долгосрочная `nvm`ная альтернатива, которая делает то же самое с несколькими различными командами и устанавливается с помощью `npm`, а не сценария Bash.
- [ФНМ](https://github.com/Schniz/fnm#using-a-script) — более новая версия диспетчера версий, которая требует гораздо меньше `nvm`. (Он также использует [Azure pipelines](https://docs.microsoft.com/azure/devops/pipelines/get-started/what-is-azure-pipelines?view=azure-devops).)
- [Волта](https://github.com/volta-cli/volta#installing-volta) — это новый диспетчер версий от команды LinkedIn, который заявляет улучшенную скорость и кросс-платформенную поддержку.
- [ASDF-VM](https://asdf-vm.com/#/core-manage-asdf-vm) — это единый интерфейс командной строки для нескольких языков, таких как IKE гвм, НВМ, rbenv & пенв (и многое другое) в одном.
- [НВС](https://github.com/jasongin/nvs) (переключатель версии узла) — это межплатформенный `nvm` альтернативный способ [интеграции с VS Code](https://github.com/jasongin/nvs/blob/master/doc/VSCODE.md).

## <a name="install-your-favorite-code-editor"></a>Установка предпочтительного редактора кода

Для проектов Node. js рекомендуется использовать **Visual Studio Code** с **РАСШИРЕНИЕМ Remote-WSL** . Это разделяет VS Code в архитектуру "клиент-сервер" с помощью клиента (пользовательского интерфейса), работающего на компьютере Windows, и сервера (код, Git, подключаемые модули и т. д.), запускаемые удаленно.

- IntelliSense и linting на основе Linux поддерживаются.
- Проект будет автоматически построен в Linux.
- Вы можете использовать все расширения, работающие в Linux ([ES Lint, IntelliSense, NPM, фрагменты кода ES6 и т. д.](https://marketplace.visualstudio.com/items?itemName=waderyan.nodejs-extension-pack)).

Текстовые редакторы на основе терминала (VIM, Emacs, Nano) также полезны для внесения быстрых изменений непосредственно в консоли. ([Эта статья](https://medium.com/linode-cube/emacs-nano-or-vim-choose-your-terminal-based-text-editor-wisely-8f3826c92a68) является хорошим заданием, объясняющим разницу и немного, как использовать каждую из них.)

> [!NOTE]
> Некоторые редакторы графического пользовательского интерфейса (Atom, подтравяной текст, Eclipse) могут столкнуться с проблемами при доступе к расположению общей сетевой папки WSL (\\WSL $ \Убунту\хоме\) и попытается создать файлы Linux с помощью средств Windows, которые могут быть не нужны. Расширение Remote-WSL в VS Code будет работать с этой совместимостью.

Чтобы установить VS Code и расширение Remote-WSL, выполните следующие действия.

1. [Скачайте и установите VS Code для Windows](https://code.visualstudio.com). VS Code также доступен для Linux, но подсистема Windows для Linux не поддерживает приложения GUI, поэтому нам нужно установить ее в Windows. Не волнуйтесь, вы по-прежнему сможете интегрироваться с командной строкой и инструментами Linux с помощью расширения Remote-WSL.

2. Установите [расширение Remote-WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl) на VS Code. Это позволяет использовать WSL в качестве интегрированной среды разработки и будет работать с совместимостью и путем. [Подробнее](https://code.visualstudio.com/docs/remote/remote-overview).

> [!IMPORTANT]
> Если у вас уже установлен VS Code, то для установки [расширения Remote-WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl)необходимо убедиться в наличии [версии 1,35](https://code.visualstudio.com/updates/v1_35) или более поздней версии. Не рекомендуется использовать WSL в VS Code без расширения Remote-WSL, так как будет потеряна поддержка автоматического завершения, отладки, linting и т. д. Забавный факт. это расширение WSL устанавливается в $HOME/.вскоде-сервер/екстенсионс.

### <a name="helpful-vs-code-extensions"></a>Полезные расширения VS Code

Хотя VS Code поставляется с множеством функций для разработки Node. js, существует несколько полезных расширений, которые можно установить в [пакете расширения Node. js](https://marketplace.visualstudio.com/items?itemName=waderyan.nodejs-extension-pack). Установите их все или выберите, чтобы выбрать наиболее полезные данные.

Чтобы установить пакет расширений Node. js, выполните следующие действия.

1. Откройте окно **расширения** (CTRL + SHIFT + X) в VS Code.

    Окно расширения теперь делится на три раздела (так как вы установили расширение Remote-WSL).
    - "Локально установленные": расширения, установленные для использования с операционной системой Windows.
    - "WSL: Ubuntu-18,04-installed": расширения, установленные для использования с операционной системой Ubuntu (WSL).
    - "Рекомендуемые": расширения рекомендуются VS Code на основе типов файлов в текущем проекте.

    ![Локальные и удаленные расширения VS Code](../images/vscode-extensions-local-remote.png)

2. В поле поиска в верхней части окна расширения введите: **пакет расширения узла** (или имя любого искомого расширения). Расширение будет установлено для локальных или WSL экземпляров VS Code в зависимости от того, где открыт текущий проект. Вы можете выбрать удаленную ссылку в левом нижнем углу окна VS Code (зеленым цветом). Он позволяет открыть или закрыть удаленное подключение. Установите расширения Node. js в среде "WSL: Ubuntu-18,04".

    ![Удаленная ссылка VS Code](../images/wsl-remote-extension.png)

Некоторые дополнительные расширения можно использовать в следующих случаях:

- [Отладчик для Chrome](https://code.visualstudio.com/blogs/2016/02/23/introducing-chrome-debugger-for-vs-code). После завершения разработки на стороне сервера с помощью Node. js необходимо разработать и протестировать клиентскую часть. Это расширение интегрирует редактор VS Code в службу отладки браузера Chrome, делая их более эффективными.
- [Раскладки клавиатуры из других редакторов](https://marketplace.visualstudio.com/search?target=VSCode&category=Keymaps&sortBy=Downloads): эти расширения могут помочь вашей среде, если вы перейдете из другого текстового редактора (например, Atom, подтравя, Vim, EMacs, Notepad + + и т. д.).
- [Синхронизация параметров](https://marketplace.visualstudio.com/items?itemName=Shan.code-settings-sync): позволяет синхронизировать параметры VS Code в разных установках с помощью GitHub. Если вы работаете на разных компьютерах, это обеспечит согласованность среды между собой.

## <a name="install-windows-terminal-optional"></a>Установка терминала Windows (необязательно)

Новый терминал Windows включает несколько вкладок (для быстрого переключения между командной строкой, PowerShell или несколькими дистрибутивами Linux), настраиваемыми пользовательскими привязками клавиш (создайте собственные сочетания клавиш для открытия и закрытия вкладок, копирования и вставки и т. д.), эмодзи ☺ и пользовательские темы (цветовые схемы, стили и размеры шрифтов, фоновое изображение, размытие и прозрачность). [Подробнее](https://devblogs.microsoft.com/commandline/).

1. Получение [терминала Windows (Предварительная версия) в Microsoft Store](https://www.microsoft.com/store/apps/9n0dx20hk701): путем установки через магазин обновления автоматически обрабатываются.

2. После установки откройте окно терминала Windows и выберите **Параметры** для настройки терминала с помощью файла `profile.json`. Дополнительные [сведения об изменении параметров терминала Windows](https://github.com/microsoft/terminal/blob/master/doc/user-docs/UsingJsonSettings.md).

    ![Параметры терминала Windows](../images/windows-terminal-settings.png)

## <a name="set-up-git-optional"></a>Настройка Git (необязательно)

Если планируется совместная работа с другими пользователями или размещение проекта на сайте с открытым исходным кодом (например, GitHub), VS Code поддерживает [Управление версиями с помощью Git](https://code.visualstudio.com/docs/editor/versioncontrol#_git-support). Вкладка система управления версиями в VS Code отслеживает все изменения и содержит общие команды git (Добавление, фиксация, принудительная отправка, извлечение), встроенные прямо в пользовательский интерфейс.

1. Git устанавливается вместе с подсистемой Windows для Linux дистрибутивов. Однако вам потребуется настроить файл конфигурации Git. Для этого в окне терминала введите: `git config --global user.name "Your Name"` а затем `git config --global user.email "youremail@domain.com"`. Если у вас еще нет учетной записи Git, вы можете [зарегистрироваться на сайте GitHub](https://github.com/join). Если вы еще не работали с Git, [руководства по GitHub](https://guides.github.com/) помогут вам приступить к работе. Если необходимо изменить конфигурацию Git, это можно сделать с помощью встроенного текстового редактора, например Nano: `nano ~/.gitconfig`.

2. Рекомендуется добавить gitignore- [файл](https://help.github.com/en/articles/ignoring-files) в проекты узлов. Вот [шаблон gitignore по умолчанию GitHub для Node. js](https://github.com/github/gitignore/blob/master/Node.gitignore). Если вы решили [создать репозиторий с помощью веб-сайта GitHub](https://help.github.com/articles/create-a-repo), доступны флажки для инициализации репозитория с файлом readme,. gitignore-файлом, настроенным для проектов Node. js, и вариантами добавления лицензии, если это необходимо.

## <a name="next-steps"></a>Дальнейшие действия

Теперь настраивается среда разработки Node. js. Чтобы приступить к работе с средой Node. js, попробуйте выполнить одно из следующих руководств:

- [Начало работы с Node. js для начинающих](./beginners.md)
- [Приступая к работе с веб-платформами Node. js в Windows](./web-frameworks.md)
- [Приступая к подключению приложений Node. js к базе данных](./databases.md)
- [Приступая к работе с контейнерами DOCKER с Node. js](./containers.md)
