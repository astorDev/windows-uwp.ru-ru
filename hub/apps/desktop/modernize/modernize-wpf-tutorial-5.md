---
description: В этом руководстве показано, как добавлять пользовательские интерфейсы XAML UWP, создавать MSIX-пакеты и включать другие актуальные компоненты в приложения WPF.
title: Упаковка и развертывание с помощью MSIX
ms.topic: article
ms.date: 01/23/2020
ms.author: mcleans
author: mcleanbyron
keywords: Windows 10, UWP, Windows Forms, WPF, объекты XAML Island
ms.localizationpriority: medium
ms.custom: RS5, 19H1
ms.openlocfilehash: 27906d9d389c065ab1fdf7124151cd1915f850eb
ms.sourcegitcommit: 76e8b4fb3f76cc162aab80982a441bfc18507fb4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "76726017"
---
# <a name="part-5-package-and-deploy-with-msix"></a>Часть 5. Упаковка и развертывание с помощью MSIX

Это заключительная часть учебника, в котором рассматривается модернизация примера классического приложения WPF с именем Contoso Expenses. Общие сведения об этом учебнике, предварительные требования и инструкции по скачиванию примера приложения см. в [учебнике по модернизации приложения WPF](modernize-wpf-tutorial.md). В этой статье предполагается, что вы уже выполнили инструкции из [части 4](modernize-wpf-tutorial-4.md).

В [части 4](modernize-wpf-tutorial-4.md) вы узнали, что для использования в приложении некоторых API WinRT, включая API уведомлений, требуется удостоверение пакета. Вы можете получить удостоверение пакета, выполнив упаковку Contoso Expenses в формате [MSIX](https://docs.microsoft.com/windows/msix), который был реализован в Windows 10 для упаковки и развертывания приложений Windows. MSIX дает разработчикам и ИТ-специалистам ряд преимуществ, в том числе:

- оптимизированное использование сети и дискового пространства;
- полное удаление с очисткой благодаря упрощенному контейнеру, в котором выполняется приложение; отсутствие разделов реестра и временных файлов, которые остаются в системе;
- отделение обновлений ОС от обновлений и настроек приложения;
- упрощенный процесс установки, обновления и удаления.

В этой части учебника вы узнаете, как упаковать приложение Contoso Expenses в пакет MSIX.

## <a name="package-the-application"></a>Создание пакета приложения

Visual Studio 2019 предоставляет простой способ для упаковки классического приложения через проект упаковки приложений Windows. 

1. В **обозревателе решений** щелкните правой кнопкой мыши решение **ContosoExpenses** и выберите команду **Добавить > Новый проект**.

    ![Добавление проекта](images/wpf-modernize-tutorial/AddNewProject.png)

3. В диалоговом окне **Добавление нового проекта** выполните поиск по запросу `packaging`, затем выберите шаблон **Windows Application Packaging Project** (Проект упаковки приложений Windows) в категории C# и нажмите **Далее**.

    ![Проект упаковки приложений Windows](images/wpf-modernize-tutorial/WAP.png)

4. Присвойте проекту имя `ContosoExpenses.Package` и нажмите **Создать**.

5. Выберите **Windows 10 версии 1903 (10.0; сборка 18362)** в полях для выбора **целевой** и **минимальной** версии, затем нажмите **OK**.

    Проект **ContosoExpenses.Package** будет добавлен в решение **ContosoExpenses**. Этот проект содержит [манифест пакета](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/schema-root) с описанием приложения и некоторые стандартные ресурсы для таких элементов, например значок в меню "Программы" и плитку на начальном экране. Но в отличие от проекта UWP, проект упаковки не содержит кода. Он предназначен для упаковки существующего классического приложения.

6. В проекте **ContosoExpenses.Package** щелкните правой кнопкой мыши узел **Приложения** и выберите **Добавить ссылку**. Этот узел указывает, какие приложения из решения будут включены в пакет.

6. В списке проектов выберите **ContosoExpenses.Core** и нажмите **OK**.

7. Разверните узел **Приложения** и убедитесь, что в нем есть ссылка на проект **ContosoExpense.Core**, выделенная полужирным шрифтом. Это означает, что он будет использоваться в качестве стартовой точки пакета.

8. Щелкните проект **ContosoExpenses.Package** правой кнопкой мыши и выберите **Назначить запускаемым проектом**.

9. Нажмите клавишу **F5**, чтобы запустить упакованное приложение в отладчике.

На этом этапе вы можете заметить некоторые изменения, характерные для упакованных приложений.

- Значок на панели задач или в меню "Пуск" теперь считается ресурсом по умолчанию и включается в каждый **проект упаковки приложений Windows**.
- Если щелкнуть правой кнопкой мыши приложение **ContosoExpense.Package**, указанное в меню "Пуск", вы увидите параметры, которые обычно зарезервированы для скачанных из Microsoft Store приложений, например **Параметры приложения**, **Оценки и отзывы** и **Поделиться**.

    ![ContosoExpenses в меню "Пуск"](images/wpf-modernize-tutorial/StartMenu.png)

- Если вы хотите удалить приложение, щелкните правой кнопкой мыши **ContosoExpenses.Package** в меню "Пуск" и выберите **Удалить**. Приложение будет немедленно удалено и не оставит никаких следов в системе.

## <a name="test-the-notification"></a>Проверка уведомления

Теперь, когда вы создали пакет MSIX приложения Contoso Expenses, вы можете протестировать сценарий уведомления, который не работал после завершения [части 4](modernize-wpf-tutorial-4.md).

1. В приложении Contoso Expenses выберите из списка сотрудника и нажмите кнопку **Добавить новый расход**.
2. Заполните все поля в этой форме и нажмите **Сохранить**.
3. Убедитесь, что уведомление операционной системы показывается.

![Всплывающее уведомление](images/wpf-modernize-tutorial/ToastNotification.png)
