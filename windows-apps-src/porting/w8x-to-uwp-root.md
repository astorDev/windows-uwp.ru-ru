---
author: stevewhims
description: Если у вас имеется универсальное приложение версии 8.1 \#8212;whether, ориентированное на Windows8.1, Windows Phone 8.1 или на обе & \#8212;then, вы обнаружите, что ваш исходный код можно с легкостью перенести на Windows10.
title: Переход со среды выполнения Windows 8.x на UWP
ms.assetid: ac163b57-dee0-43fa-bab9-8c37fbee3913
ms.author: stwhi
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: eebd0467696b78458835425f7feac903ba435f42
ms.sourcegitcommit: 4d88adfaf544a3dab05f4660e2f59bbe60311c00
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/13/2018
ms.locfileid: "6466697"
---
# <a name="move-from-windows-runtime-8x-to-uwp"></a>Переход со среды выполнения Windows 8.x на UWP


Если у вас универсальное приложение версии 8.1, ориентированное на Windows8.1, Windows Phone 8.1 или оба — вы обнаружите, что ваш исходный код можно с легкостью перенести на Windows10. В Windows10 можно создать приложение универсальной платформы Windows (UWP), включающее одно приложение пакет, который покупатели могут установить на любое устройство. Дополнительную информацию о Windows10 приложений UWP и концепциях адаптивного кода и пользовательского интерфейса, который мы будем говорить в этом руководстве по переносу, см. [руководство по приложениям UWP](https://msdn.microsoft.com/library/windows/apps/dn894631).

Во время переноса, вы найдете Windows10 используют большинство API предыдущих платформ, а также разметки XAML, инфраструктура пользовательского интерфейса и инструменты, что вы найдете вам покажется знакомым. Как и ранее, вы можете выбрать язык программирования (C++, C# и Visual Basic), который будет использоваться с инфраструктурой пользовательского интерфейса XAML. Первые этапы планирования того, что следует делать с текущим приложением или приложениями, будут зависеть от того, какие типы приложений и проектов у вас имеются. Это объясняется в следующих разделах.

## <a name="if-you-have-a-universal-81-app"></a>Если у вас универсальное приложение для версии 8.1

Универсальное приложение для версии 8.1 создается из проекта универсального приложения для Windows 8.1. Предположим, проект называется AppName\_81. Он содержит следующие вспомогательные проекты.

-   AppName\_81.Windows. Этот проект создает пакет приложения для Windows8.1 является.
-   AppName\_81.WindowsPhone. Этот проект создает пакет приложения для Windows Phone 8.1.
-   AppName\_81.Shared. Этот проект содержит исходный код, файлы разметки и другие ресурсы, которые используются обоими приложениями.

Часто универсальное приложение предоставляет те же самые функции — и делает это при помощи того же кода и разметки, как его Windows8.1, так и для Windows Phone 8.1. Такое приложение – идеальный кандидат для переноса в единое приложение Windows10, которое ориентировано на универсальное семейство устройств (, которую можно установить на самый широкий спектр устройств). По сути, вы переносите содержимое общего проекта. Двумя другими проектами вам пользоваться практически не придется, потому что они практически ничего не содержат.

В других случаях, Windows8.1 и Windows Phone 8.1 приложения содержать уникальные функции. Или же они содержат те же самые функции, но реализуют их при помощи разных методов и технологий. В случае таких приложений при переносе вы можете создать одно приложение, которое будет ориентировано на все семейства устройств (в этом случае вам потребуется, чтобы приложение адаптировалось к различным устройствам) или же создать несколько приложений. Например, одно будет предназначено для семейства настольных, а второе— для семейства мобильных устройств. Характер универсального приложения для версии 8.1 определит, какой из этих вариантов подходит вам больше.

1.  Переносите содержимое общего проекта в приложение, ориентированное на все семейства устройств. Если это возможно, сохраняйте любое содержимое проектов для Windows и WindowsPhone и используйте его либо безусловно в приложении, либо условно на том устройстве, на котором оно работает в конкретный момент времени (этот тип поведения называется *адаптивным*).
2.  Переносите содержимое проекта WindowsPhone в приложение, ориентированное на все семейства устройств. Если это возможно, сохраняйте любое другое содержимое проекта Windows и используйте его безусловно или адаптивно.
3.  Переносите содержимое проекта Windows в приложение, ориентированное на все семейства устройств. Если это возможно, сохраняйте любое другое содержимое проекта WindowsPhone и используйте его безусловно или адаптивно.
4.  Переносите содержимое проекта Windows в приложение, ориентированное на все устройства или на семейство настольных устройств. Также переносите содержимое проекта WindowsPhone в приложение, ориентированное на все устройства или на семейство мобильных устройств. Вы можете создать приложение, используя общий проект, и по-прежнему использовать один и тот же исходный код, файлы разметки и другие ресурсы в обоих приложениях. В качестве альтернативы вы можете создать отдельные решения и так же использовать эти элементы при помощи ссылок.

## <a name="if-you-have-a-windows-81-app"></a>Если у вас приложение для Windows 8.1

Перенесите проект в приложение, ориентированное на все устройства или семейство настольных устройств. Если вы остановите выбор на поддержке всех устройств и ваше приложение будет вызывать API, реализуемые только на настольных устройствах, вы сможете обрабатывать эти вызовы с помощью адаптивного кода.

## <a name="if-you-have-a-windows-phone-81-app"></a>Для приложений Windows Phone8.1

Перенесите проект в приложение, ориентированное на все устройства или семейство мобильных устройств. Если вы остановите выбор на поддержке всех устройств и ваше приложение будет вызывать API, реализуемые только на мобильных устройствах, вы сможете обрабатывать эти вызовы с помощью адаптивного кода.

## <a name="adapting-your-app-to-multiple-form-factors"></a>Адаптация приложения для нескольких форм-факторов

Вариант, выбранный вами в предыдущих разделах, определит спектр устройств, на которых будет работать ваше приложение, и этот спектр может быть очень широк. Даже если вы ограничитесь поддержкой мобильных устройств, вам по-прежнему придется иметь дело с широким диапазоном размеров экрана. Поэтому если приложение будет работать на устройствах тех форм-факторов, которые оно раньше не поддерживало, протестируйте на них пользовательский интерфейс и внесите необходимые изменения, чтобы последний мог адаптироваться к каждому из форм-факторов соответствующим образом. Это можно представить как задачу после переноса. Ряд практических примеров представлен в описании приложений [Bookstore2](w8x-to-uwp-case-study-bookstore2.md) и [QuizGame](w8x-to-uwp-case-study-quizgame.md).

## <a name="approaching-porting-layer-by-layer"></a>Поуровневый перенос

Для переноса универсального приложения для версии 8.1 в модель приложения UWP вам практически не понадобится новых знаний и навыков. Точно также вы будете использовать большую часть уже имеющегося исходного кода, разметки и шаблонов программного обеспечения.

-   **Представление**. Представление (вместе с моделью представления) составляет пользовательский интерфейс вашего приложения. В идеале представление состоит из разметки, привязанной к наблюдаемым свойствам модели представления. Другой шаблон (общий и удобный, но только в краткосрочной перспективе) предназначен для императивного кода в файле кода программной части для непосредственного управления элементами пользовательского интерфейса. В любом случае, вашу разметку и оформление пользовательского интерфейса и даже императивный код, который управляет элементами пользовательского интерфейса, будет легко перенести.
-   **Модели представления и модели данных**. Даже если вы формально не используете шаблоны разделения задач (типа MVVM), в вашем приложении неизбежно присутствует код, который выполняет функцию модели представления и модели данных. Код модели представления использует типы в пространствах имен инфраструктуры пользовательского интерфейса. Код модели представления и код модели данных также используют операционную систему без визуального представления и API .NET Framework (включая API для доступа к данным). И эти API [также доступны для приложений UWP](https://msdn.microsoft.com/library/windows/apps/br211369), поэтому большая часть кода будет перенесена без изменений.
-   **Облачные службы**. Вполне возможно, что некоторая часть вашего приложения (а может и большая его часть) выполняется в облаке в форме служб. Часть приложения, запущенная на клиентском устройстве, подключается к ним. Это часть распределенного приложения, скорее всего, останется неизменной при переносе клиентской части. Если у вас ее еще нет, удобным вариантом облачных служб для вашего приложения UWP являются [Мобильные службы Microsoft Azure](http://azure.microsoft.com/services/mobile-services/), предоставляющие мощные серверные компоненты, которые ваши приложения могут вызывать для служб, начиная с простых уведомлений для обновления живых плиток и до требующего больших усилий масштабирования, которое может предоставить ферма серверов.

Перед переносом или в процессе переноса подумайте, можно ли улучшить ваше приложение с помощью оптимизации таким образом, чтобы код с похожей целью собирался вместе в уровни, а не был разбросан произвольно. Разложение вашего приложения по уровням, как описано выше, поможет вам сделать приложение более правильным, проверить его, а затем читать и поддерживать его. Вы можете обеспечить повторное использование функционала благодаря шаблону Model-View-ViewModel ([MVVM](http://msdn.microsoft.com/magazine/dd419663.aspx)). Этот шаблон хранит части данных, пользовательского интерфейса и бизнес-части вашего приложения отдельно друг от друга. Даже в пользовательском интерфейсе он может хранить состояние и поведение отдельно друг от друга, и отдельно визуальные и доступные для тестирования элементы. Благодаря MVVM, однажды определив логику данных и бизнес-логику, вы сможете использовать ее на всех устройствах вне зависимости от пользовательского интерфейса. Вероятно, вы сможете также в значительной степени использовать ту же самую модель представления и его части на различных устройствах.

| Статья | Описание |
|-------|-------------|
| [Перенос проекта](w8x-to-uwp-porting-to-a-uwp-project.md) | У вас есть два варианта разработки процесса переноса. Первый— изменить копии существующих файлов проекта, в том числе манифест пакета приложения (для этого варианта см. сведения об обновлении файлов проекта в разделе [Перенос приложений на универсальную платформу Windows (UWP)](https://msdn.microsoft.com/library/mt148501.aspx)). Второй – создать новый проект Windows 10 в Visual Studio и скопировать файлы в него. |
| [Устранение неполадок](w8x-to-uwp-troubleshooting.md) | Мы настоятельно рекомендуем прочитать до конца это руководство по переносу, но мы также понимаем, что вы жаждете двигаться вперед и добраться до этапа, на котором выполняется построение и запуск вашего проекта. До этого момента вы можете достичь временного прогресса с помощью комментирования и создания заглушек для любого ненужного кода, а затем вернуться, чтобы уплатить этот долг позже. Таблица симптомов и средств устранения неполадок в этом разделе может быть полезна на этом этапе, хотя она не является заменой прочтению следующих нескольких разделов. Вы всегда можете обратиться к таблице по мере продвижения по последующим разделам. |
| [Перенос XAML и пользовательского интерфейса](w8x-to-uwp-porting-xaml-and-ui.md) | Практика определения пользовательского интерфейса в форме декларативной разметки XAML очень хорошо преобразуется из универсальных приложений для версии 8.1 в приложения универсальной платформы Windows (UWP). Вы увидите, что большая часть вашей разметки совместима, хотя может потребоваться внести некоторые изменения в ключи системных ресурсов или используемые настраиваемые шаблоны. |
| [Перенос для ввода-вывода, устройств и моделей приложений](w8x-to-uwp-input-and-sensors.md) | Код, интегрирующийся с устройством и его датчиками, включает ввод от пользователя и вывод к нему. Он может также включать обработку данных. Но в целом этот код не считается уровнем пользовательского интерфейса или уровнем данных. Этот код включает интеграцию с контроллером вибрации, акселерометром, гироскопом, микрофоном и динамиками (которые могут пересекаться с распознаванием речи и синтезом), (географическим) положением и модальностями ввода, такими как сенсорный ввод, мышь, клавиатура и перо. |
| [Практический пример: Bookstore1](w8x-to-uwp-case-study-bookstore1.md) | В этом разделе рассматривается пример переноса очень простого универсального приложения для версии 8.1 в приложение Windows10 UWP. Универсальное приложение версии 8.1 создает один пакет приложения для Windows 8.1, а другой – для Windows Phone 8.1. В Windows10 можно создать единый пакет приложения, который покупатели могут установить на широкий спектр устройств. Именно этим мы и займемся в этом примере. См. раздел [Руководство по приложениям UWP](https://msdn.microsoft.com/library/windows/apps/dn894631). |
| [Практический пример: Bookstore2](w8x-to-uwp-case-study-bookstore2.md) | Это пример, в котором используются данные из элемента управления [SemanticZoom](https://msdn.microsoft.com/library/windows/apps/hh702601). В модели представления каждый экземпляр класса Author представляет группу книг одного автора, а в классе SemanticZoom мы можем просмотреть список книг, сгруппированных по автору, или уменьшить представление, чтобы просмотреть список переходов по авторам. |
| [Пример: QuizGame](w8x-to-uwp-case-study-quizgame.md) | В этом разделе приведен пример переноса функционирующего однорангового приложения— игры-опроса — для WinRT8.1 в приложение Windows10 UWP. |

## <a name="related-topics"></a>Еще по теме

**Документация**
* [Справочные материалы по среде выполнения Windows](https://msdn.microsoft.com/library/windows/apps/br211377)
* [Разработка универсальных приложений для всех устройств с ОС Windows](http://go.microsoft.com/fwlink/p/?LinkID=397871)
* [Проектирование взаимодействий с пользователем в приложениях](https://msdn.microsoft.com/library/windows/apps/hh767284)
