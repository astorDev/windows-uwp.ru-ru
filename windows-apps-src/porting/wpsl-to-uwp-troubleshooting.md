---
author: stevewhims
description: Мы настоятельно рекомендуем прочитать до конца это руководство по переносу, но мы также понимаем, что вы жаждете двигаться вперед и добраться до этапа, на котором выполняется построение и запуск вашего проекта.
title: Устранение неполадок при переносе WindowsPhone Silverlight в UWP
ms.assetid: d9a9a2a7-9401-4990-a992-4b13887f2661
ms.author: stwhi
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 3a5d3ab7b50721b969859006831b33e9b00e300f
ms.sourcegitcommit: 753e0a7160a88830d9908b446ef0907cc71c64e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2018
ms.locfileid: "5745414"
---
#  <a name="troubleshooting-porting-windowsphone-silverlight-to-uwp"></a>Устранение неполадок при переносе WindowsPhone Silverlight в UWP


Предыдущий раздел назывался [Перенос проекта](wpsl-to-uwp-porting-to-a-uwp-project.md).

Мы настоятельно рекомендуем прочитать до конца это руководство по переносу, но мы также понимаем, что вы жаждете двигаться вперед и добраться до этапа, на котором выполняется построение и запуск вашего проекта. До этого момента вы можете достичь временного прогресса с помощью комментирования и создания заглушек для любого ненужного кода, а затем вернуться, чтобы уплатить этот долг позже. Таблица симптомов и средств устранения неполадок в этом разделе может быть полезна на этом этапе, хотя она не является заменой прочтению следующих нескольких разделов. Вы всегда можете обратиться к таблице по мере продвижения по последующим разделам.

## <a name="tracking-down-issues"></a>Отслеживание проблем

Исключения синтаксического анализа XAML иногда трудно диагностировать, особенно они не содержат полезных сообщений об ошибке. Убедитесь, что отладчик настроен для перехвата первых исключений. Вы сможете проверить переменную исключения в отладчике, чтобы определить, содержат ли HRESULT или сообщение полезные данные. Также изучите сообщения об ошибке от средства синтаксического анализа XAML в окне вывода Visual Studio.

Если ваше приложение завершается и вы знаете, что необработанное исключение во время анализа разметки XAML, то, может быть результатом ссылки на отсутствующий ресурс (то есть, ключ ресурса существует для приложений WindowsPhone Silverlight, но не для Windows10 приложения, например некоторые системные ключи стиля **TextBlock** ). Или это может быть исключением, возникшим в **UserControl**, пользовательском элементе управления или элементе управления пользовательской панели макета.

Крайняя мера—это двоичное разделение. Удалите примерно половину разметки со страницы и запустите приложение еще раз. Теперь вы знаете, находится ли ошибка в той половине, которую вы удалили (которую теперь необходимо восстановить в любом случае) или в той половине, которую вы *не* удалили. Повторите процесс, разделяя половину, которая содержит ошибку и дальше, пока вы не сможете обнаружить проблему.

## <a name="targetplatformversion"></a>TargetPlatformVersion

В этом разделе объясняется, что делать, если при открытии Windows10 проекта в Visual Studio, вы увидите сообщение «требуется обновление Visual Studio. Для одного или нескольких проектов требуется пакет SDK &lt;версия&gt;, который не установлен или не включен в обновление Visual Studio».

-   Во-первых определите номер версии пакета SDK для Windows10, что вы установили. Откройте **C:\\Program Files (x86)\\Windows Kits\\10\\Include\\&lt;versionfoldername&gt;** и проверьте значение *&lt;versionfoldername&gt;*, которое будет представлено в формате четырехкомпонентной системы обозначений: Major.Minor.Build.Revision.
-   Откройте файл проекта для правки и найдите элементы `TargetPlatformVersion` и `TargetPlatformMinVersion` . Измените их, чтобы они выглядели таким образом вид, заменив *&lt;versionfoldername&gt;* номером версии в формате четырехкомпонентной системы обозначений, найденным на диске:

```xml
   <TargetPlatformVersion><versionfoldername></TargetPlatformVersion>
   <TargetPlatformMinVersion><versionfoldername></TargetPlatformMinVersion>
```

## <a name="troubleshooting-symptoms-and-remedies"></a>Признаки и средства устранения неполадок

Данные средства устранения неполадок в таблице предназначены для того, чтобы предоставить вам достаточно информации для самостоятельного устранения неполадки. Вы найдете дополнительные сведения о каждой из этих проблем при чтении последующих разделов.

| Проблема | Средство |
|---------|--------|
| Средство синтаксического анализа или компилятор XAML выдает ошибку _"Имя "&lt;typename&gt;" не существует в пространстве имен [...]."_ | Если &lt;typename&gt; является пользовательским типом, измените "clr-namespace" на "using" и удалите все маркеры сборки в объявлениях префикса пространства имен в разметке XAML. Для типов платформы: это значит, что тип не применяется в UWP, поэтому найдите его эквивалент и обновите разметку. Примеры, с которыми вы можете столкнуться уже сейчас—`phone:PhoneApplicationPage` и `shell:SystemTray.IsVisible`. | 
| Средство синтаксического анализа или компилятор XAML выдает ошибку "_Член "&lt;membername&gt;" не распознан или недоступен._" или "_Свойство "&lt;propertyname&gt;" не найдено в типе [...]._". | Эти ошибки начнут появляться после переноса некоторых имен типов, например, корня **Page**. Член или свойство не применяются в UWP, поэтому найдите его эквивалент и обновите разметку. Примеры, с которыми вы можете столкнуться уже сейчас — `SupportedOrientations` и `Orientation`. |
| Средство синтаксического анализа или компилятор XAML выдает ошибку "_Присоединяемое свойство [...] не было найдено [...]._" или "_Неизвестный присоединяемый член [...]._". | Причиной этого скорее всего могут быть типы, а не присоединяемое свойство, потому что в этом случае у вас бы уже была ошибка в типах. Эта ошибка исчезнет, как только вы исправите это. Примеры, с которыми вы можете столкнуться уже сейчас—`phone:PhoneApplicationPage.Resources` и `phone:PhoneApplicationPage.DataContext`. | 
|Средство синтаксического анализа, компилятор XAML, или исключение во время выполнения, выдает ошибку "_Ресурс "&lt;resourcekey&gt;" не может быть разрешен._". | Ключ ресурса не относится к приложениям UWP. Найдите правильный эквивалентный ресурс и обновите разметку. Примеры, с которыми вы можете столкнуться уже сейчас—это системный ключ стиля **TextBlock**, например `PhoneTextNormalStyle`. |
| Компилятор C# выдает ошибку "_Тип или имя пространства имен "&lt;name&gt;" не может быть найдено [...]_" или "_Тип или имя пространства имен "&lt;name&gt;" не существует в пространстве имен [...]_" или "_Тип или имя пространства имен "&lt;name&gt;" не существует в текущем контексте_". | Это скорее всего означает, что компилятор еще не знает правильное пространство имен UWP для типа. Вы можете использовать команду Visual Studio **Разрешить**, чтобы исправить это. <br/>Если API-интерфейс не входит в набор API-интерфейсов, известных как универсальное семейство устройств (другими словами, API-интерфейс реализован в пакете SDK расширения), тогда используйте [Пакеты SDK расширения](wpsl-to-uwp-porting-to-a-uwp-project.md).<br/>Могут быть другие случаи, в которых перенос является более сложным. Примеры, с которыми вы можете столкнуться уже сейчас—`DesignerProperties` и `BitmapImage`. | 
|При запуске на устройстве приложение завершает работу или при запуске в Visual Studio отображается ошибка «Невозможно активировать Windows 8.x приложение среды выполнения [...]. Сбой запроса на активацию с ошибкой "Windows не удалось связаться с указанным приложением. Обычно это указывает на то, что обработка указанного приложения прервана. […]”. | Проблема может крыться в императивном коде, работающем в ваших Страницах, или в привязанных свойствах (или других типах) во время инициализации. Эта ошибка также может происходить при анализе XAML-файла, который должен был отобразиться, когда приложение завершилось (при запуске из Visual Studio это будет стартовая страница). Найдите неверные ключи ресурса или воспользуйтесь рекомендациями из подраздела [Отслеживание проблем](#tracking-down-issues).|
| _Ошибка WMC0055 XamlCompiler: Не удалось назначить значение текста "&lt;your stream geometry&gt;" в свойство "Clip" типа "RectangleGeometry"_ | В UWP тип приложения UWP [Microsoft DirectX](https://msdn.microsoft.com/library/windows/desktop/ee663274) и XAML C++. |
| _Ошибка WMC0001 XamlCompiler: Неизвестен тип RadialGradientBrush в пространстве имен XML [...]_ | В UWP нет типа **RadialGradientBrush**. Удалите **RadialGradientBrush** из разметки и используйте другой тип приложения UWP [Microsoft DirectX](https://msdn.microsoft.com/library/windows/desktop/ee663274) и XAML C++. |
| _Ошибка XamlCompiler WMC0011: Неизвестный член "OpacityMask" в элементе "&lt;UIElement type&gt;"_ | Приложение UWP [Microsoft DirectX](https://msdn.microsoft.com/library/windows/desktop/ee663274) и XAML C++. |
| _Первое исключение вероятности типа System.Runtime.InteropServices.COMException возникло в SYSTEM.NI.DLL. Дополнительные сведения: Приложение вызвало интерфейс, который был сформирован для другого потока. (Исключение из HRESULT: 0x8001010E (RPC_E_WRONG_THREAD))._ | Работа, которую вы делаете, должна выполняться в потоке пользовательского интерфейса. Вызовите [**CoreWindow.GetForCurrentThread**](https://msdn.microsoft.com/library/windows/apps/hh701589)). |
| Анимация выполняется, но не меняет свое целевое свойство. | Сделайте анимацию независимой или установите на ней `EnableDependentAnimation="True"`. См. раздел [Анимация](wpsl-to-uwp-porting-xaml-and-ui.md). |
| При открытии проекта Windows10 в Visual Studio, вы увидите сообщение «требуется обновление Visual Studio. Для одного или нескольких проектов требуется пакет SDK &lt;версия&gt;, который не установлен или не включен в обновление Visual Studio». | См. подраздел [TargetPlatformVersion](#targetplatformversion). |
| При вызове метода InitializeComponent в файле xaml.cs создается исключение System.InvalidCastException. | Это может случиться, если несколько XAML-файлов (по крайней мере один из которых MRT-совместимый) совместно используют один файл xaml.cs, а элементы имеют атрибуты x:Name, не совместимые между двумя XAML-файлами. Попробуйте добавить одно имя одинаковым элементам в обоих XAML-файлах или не используйте имена вовсе. | 

Следующий раздел называется [Перенос XAML и пользовательского интерфейса](wpsl-to-uwp-porting-xaml-and-ui.md).

