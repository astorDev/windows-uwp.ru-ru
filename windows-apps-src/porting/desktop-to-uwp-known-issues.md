---
author: normesta
Description: "В этой статье описываются известные проблемы, касающиеся моста для классических приложений."
Search.Product: eADQiWindows 10XVcnh
title: "Известные проблемы (мост для классических приложений)"
ms.author: normesta
ms.date: 07/18/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
ms.assetid: 71f8ffcb-8a99-4214-ae83-2d4b718a750e
ms.openlocfilehash: bf0e81d4a6ff7bd091f25963b1cf26cdecc93636
ms.sourcegitcommit: de6bc8acec2cd5ebc36bb21b2ce1a9980c3e78b2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2017
---
# <a name="known-issues-desktop-bridge"></a>Известные проблемы (мост для классических приложений)

В этой статье описываются известные проблемы, касающиеся моста для классических приложений.

## <a name="blue-screen-with-error-code-0x139-kernelsecuritycheckfailure"></a>Синий экран с кодом ошибки 0x139 (KERNEL_SECURITY_CHECK_FAILURE)

После установки или запуска некоторых приложений из Магазина Windows компьютер может неожиданно перезагрузиться с ошибкой **0x139 (KERNEL\_SECURITY\_CHECK\_ FAILURE)**.

Известно, что эта проблема затрагивает приложения Kodi, JT2Go, Ear Trumpet, Teslagrad и др.

27.10.2016г. было выпущено [обновление Windows (версия 14393.351— KB3197954)](https://support.microsoft.com/kb/3197954), в которое вошли важные исправления, направленные на решение этой проблемы. Если вы столкнулись с этой проблемой, обновите свой компьютер. Если вам не удается обновить компьютер, потому что он перезапускается до того, как вам удается войти в систему, восстановите систему до точки более ранней, чем установка одного из затрагиваемых проблемой приложений. О том, как восстановить систему, см. в статье [Параметры восстановления в Windows 10](https://support.microsoft.com/help/12415/windows-10-recovery-options).

Если обновление не устраняет проблему или вы не знаете, как восстановить компьютер, обратитесь в [службу поддержки Майкрософт](https://support.microsoft.com/contactus/).

Если вы разработчик, вы можете запретить установку своих преобразованных с помощью Desktop Bridge приложений в версиях Windows, в которых нет этого обновления. Обратите внимание, что при этом ваше приложение не будет доступно пользователям, которые еще не установили обновление. Чтобы сделать приложением доступным только пользователям, которые установили обновления, внесите в файл AppxManifest.xml следующие исправления:

```<TargetDeviceFamily Name="Windows.Desktop" MinVersion="10.0.14393.351" MaxVersionTested="10.0.14393.351"/>```

Подробнее о Центре обновления Windows можно прочитать по следующим ссылкам:
* https://support.microsoft.com/kb/3197954
* https://support.microsoft.com/help/12387/windows-10-update-history

## <a name="common-errors-that-can-appear-when-you-sign-your-app"></a>Распространенные ошибки, которые могут появиться при входе в приложение

### <a name="publisher-and-cert-mismatch-causes-signtool-error-error-signersign-failed--21470248850x8007000b"></a>Несоответствие издателя и сертификата приводит к ошибке Signtool "Error: SignerSign() Failed" (-2147024885/0x8007000b)

Запись издателя в манифесте пакета приложения для Windows должна соответствовать субъекту сертификата, с помощью которого выполняется подписывание.  Вы можете использовать любой из следующих методов для просмотра субъекта сертификата.

**Вариант 1: Powershell**

Выполните следующую команду PowerShell: В качестве файла сертификата можно использовать как .cer, так и .pfx, так как они содержат идентичные сведения об издателе.

```ps
(Get-PfxCertificate <cert_file>).Subject
```

**Вариант 2: проводник**

Дважды щелкните сертификат в проводнике, выберите вкладку *Сведения*, а затем выберите поле *Субъект* в списке. Скопируйте его содержимое.

**Вариант 3: CertUtil**

Запустите **certutil** через командную строку в файле PFX и скопируйте поле *Субъект* в выходных данных.

```cmd
certutil -dump <cert_file.pfx>
```

### <a name="corrupted-or-malformed-authenticode-signatures"></a>Поврежденные или деформированные подписи Authenticode

Этот раздел содержит инструкции по выявлению проблем с переносными исполняемыми файлами (PE) в пакете приложения для Windows, который может содержать поврежденные или деформированные подписи Authenticode. Наличие недействительных подписей Authenticode в файлах PE, которые могут иметь любой двоичный формат (например, .exe, .dll, .chm и т.д.), приведет к тому, что вы не сможете правильно подписать пакет и, таким образом, не сможете развернуть его из пакета приложения для Windows.

Расположение подписи Authenticode файла PE определяется записью в таблице сертификатов в каталогах данных необязательных заголовков и соответствующей таблице сертификатов атрибутов. Во время проверки подписи сведения, указанные в этих местах, используются для поиска подписи на файле PE. При повреждении этих значений процесс подписывания файла может быть выполнен некорректно.

Чтобы подпись Authenticode была правильной, применительно к ней должны быть выполнены следующие условия:

- Начало записи **WIN_CERTIFICATE** в файле PE не должно выходить за границу исполняемого файла.
- Запись **WIN_CERTIFCATE** должна размещаться в конце образа.
- Размер записи **WIN_CERTIFICATE** должен быть положительным.
- Запись **WIN_CERTIFICATE** должна начинаться после структуры **IMAGE_NT_HEADERS32** для 32-разрядных исполняемых файлов и после структуры IMAGE_NT_HEADERS64 для 64-разрядных исполняемых файлов.

Дополнительные сведения см. в спецификациях [Формат подписи Authenticode Portal Executable](http://download.microsoft.com/download/9/c/5/9c5b2167-8017-4bae-9fde-d599bac8184a/Authenticode_PE.docx) и [Формат файла PE](https://msdn.microsoft.com/windows/hardware/gg463119.aspx).

Обратите внимание, что при попытке подписывания пакета приложения для Windows средство SignTool.exe может выводить информацию о поврежденных или деформированных двоичных файлах. Чтобы это сделать, включите регистрацию подробных сведений в журнале, задав переменной среды APPXSIP_LOG значение 1 (например, ```set APPXSIP_LOG=1``` ) и перезапустите средство SignTool.exe.

Чтобы исправить эти деформированные двоичные файлы, убедитесь, что они соответствуют описанным выше требованиям.

<span id="known-issues-anchor" />
## <a name="known-issues-with-cvbnet-and-c-uwp-projects"></a>Известные проблемы проектов UWP на C#/VB.NET и C++

Если вы предпочитаете использовать проект на C# для упаковки приложения, необходимо учесть следующие известные проблемы.

- Сборка приложения в режиме отладки приводит к ошибке: _Microsoft.Net. CoreRuntime.targets(235,5): ошибка: Приложения с пользовательскими исполняемыми файлами точек входа не поддерживаются. Проверьте атрибут Executable элемента Application в манифесте проекта._

  Чтобы устранить эту проблему, используйте режим выпуска.

- Двоичные файлы Win32, хранящиеся в корневой папке проекта UWP, удаляются в режиме "Выпуск". Компилятор .NET Native удалит их из конечного пакета, из-за чего возникнет ошибка проверки манифеста, так как точка входа исполняемого файла не будет найдена.

  Чтобы устранить эту проблему, создайте вложенную папку в проекте для хранения двоичных файлов win32.


## <a name="you-receive-the-error----msb4018-the-generateresource-task-failed-unexpectedly"></a>Сообщение об ошибке MSB4018, неожиданный сбой задачи GenerateResource

Это может произойти при попытке преобразования вспомогательных сборок в файлы индекса ресурсов пакетов (PRI).

Мы осведомлены об этой проблеме и работаем над ее окончательным решением. В качестве временного решения можно отключить генератор ресурсов, добавив следующую строку XML в первый элемент PropertyGroup в файле вышестоящего проекта:

``<AppxGeneratePrisForPortableLibrariesEnabled>false</AppxGeneratePrisForPortableLibrariesEnabled>``
