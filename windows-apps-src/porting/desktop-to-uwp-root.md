---
author: normesta
Description: "Создание пакета современного приложения для Windows для существующего приложения или игры Win32, Windows Forms или WPF. Добавление современных способов взаимодействия для пользователей Windows 10 и упрощение развертывания и монетизации."
Search.Product: eADQiWindows 10XVcnh
title: "Мост для классических приложений"
ms.author: normesta
ms.date: 05/25/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
ms.assetid: 74373c24-f948-43bb-aa85-01e2e8e87162
ms.openlocfilehash: 1830c1661325afe68e8e7cd32528ec075e098b1d
ms.sourcegitcommit: 77bbd060f9253f2b03f0b9d74954c187bceb4a30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2017
---
# <a name="desktop-bridge"></a>Мост для классических приложений

Перенесите свои существующие классические приложения и добавьте в них современные способы взаимодействия для пользователей Windows 10. После этого вы сможете охватить международные рынки путем распространения приложения через Магазин Windows. Монетизировать приложение можно гораздо более простыми способами с помощью функций, представленных в Магазине. Конечно, использовать Магазин не обязательно. Вы можете использовать существующие каналы.
<div style="float: left; padding: 10px">
    ![изображение моста переноса классических приложений на UWP](images/desktop-to-uwp/desktop-bridge-4.png)
</div>
Мост для переноса классических приложений на UWP представляет собой инфраструктуру, которую мы встроили в платформу, позволяющую эффективно распространять классические приложения и игры Win32, Windows Forms и WPF с помощью современных пакетов приложений для Windows.

Такой пакет присваивает вашему приложению идентификатор, и с этим идентификатором ваше классическое приложение получает доступ к API-интерфейсам универсальной платформы Windows (UWP). Их можно использовать для активации современных и привлекательных возможностей, таких как живые плитки и уведомления.  Используйте простую условную компиляцию и проверки во время выполнения для выполнения кода UWP только в том случае, если ваше приложение работает в Windows 10.

Помимо кода, который используется для активации возможностей Windows 10, ваше приложение остается неизменным, и вы можете продолжать распространять его среди пользователей Windows 7, Windows Vista или Windows XP. В Windows 10 ваше приложение продолжит работу в режиме полного доверия пользователя так же, как и сейчас.

> [!NOTE]
> Ознакомьтесь с <a href="https://mva.microsoft.com/en-US/training-courses/developers-guide-to-the-desktop-bridge-17373?l=oZG0B1WhD_8406218965/">этой серией</a> коротких видеозаписей, опубликованных академией Microsoft Virtual Academy. Эти видеозаписи проведут вас через весь процесс переноса классического приложения на универсальную платформу Windows (UWP).

## <a name="benefits"></a>Преимущества

Приведем несколько доводов в пользу создания пакета приложения для Windows для классического приложения.

**Упрощенное развертывание**. Приложения и игры, использующие мост, прекрасно развертываются. Эта возможность гарантирует пользователям простоту установки и обновления приложения. Если пользователь принимает решение удалить приложение, оно удаляется полностью, без каких-либо следов. Разработчику это позволяет сэкономить время на разработке процессов установки и обновления приложения.

**Автоматическое обновление и лицензирование**. Ваше приложение может взаимодействовать со встроенными средствами лицензирования и автоматического обновления Магазина Windows Автоматическое обновление— очень надежный и эффективный механизм, поскольку загружаются только измененные части файлов.

**Увеличение аудитории и упрощение монетизации**. Если вы выбираете Магазин Windows для распространения своих решений, вы получаете доступ к миллионам пользователей Windows10, которые могут приобретать приложения и игры, а также совершать покупки из приложения с помощью локальных способов оплаты.

**Добавление возможностей UWP**.  Вы можете на свое усмотрение добавлять в пакет приложения возможности UWP, такие как пользовательский интерфейс на языке XAML, обновления живых плиток, фоновые задачи UWP, службы приложений и многое другое.

**Расширенные варианты использования на различных устройствах**. Используя мост, вы можете постепенно переносить свой код на универсальную платформу Windows, чтобы охватить все устройства с Windows10, включая телефоны, Xbox One и HoloLens.

Более полный список преимуществ см. в разделе [Мост для классических приложений](https://developer.microsoft.com/windows/bridges/desktop).

## <a name="prepare"></a>Подготовка

Вы планируете опубликовать свое приложение в [Магазине приложений для Windows](https://www.microsoft.com/store/apps)? Если да, то начните с заполнения [этой формы](https://developer.microsoft.com/windows/projects/campaigns/desktop-bridge). После этого Майкрософт свяжется с вами, чтобы начать процесс публикации. В рамках этого процесса вы зарезервируете имя в Магазине и получите информацию, необходимую для создания пакета приложения для Windows.

Далее ознакомьтесь с разделом [Подготовка классического приложения к упаковке](desktop-to-uwp-prepare.md) и устраните все проблемы, применимые к вашему приложению, до создания для него пакета приложения для Windows. Возможно, для создания пакета в приложение не придется вносить никакие изменения. Однако в некоторых ситуациях для создания пакета для приложения может потребоваться его предварительная оптимизация.

<span id="convert" />
## <a name="package"></a>Пакет

Ниже приведены некоторые средства, которые можно использовать в целях создания пакета приложения для Windows для вашего приложения.

### <a name="desktop-app-converter"></a>Desktop App Converter

Хотя в названии этого средства содержится термин «Преобразователь», на самом деле оно не преобразует ваше приложение. Приложение останется неизменным. Однако это средство создает пакет приложения для Windows за вас. Его очень удобно использовать в случаях, если ваше приложение выполняет множество изменений в системе, либо если вы не знаете, какими возможностями обладает ваш установщик.

Desktop App Converter также выполняет некоторые дополнительные действия. Вот некоторые из них:

* Автоматическая регистрация ваших обработчиков просмотра, эскизов, обработчиков свойств, правил брандмауэра, флагов URL.

* Автоматическая регистрация сопоставлений типов файлов, которые позволяют пользователям группировать файлы с помощью столбца **Вид** в проводнике.

* Регистрация ваших общедоступных COM-серверов.

* Создание сертификата, который можно использовать для запуска вашего приложения.

* Проверка вашего приложения на соответствие требованиям моста для классических приложений и Магазина Windows.

См. раздел [Упаковка приложения с помощью Desktop App Converter (мост переноса классических приложений на UWP)](desktop-to-uwp-run-desktop-app-converter.md)

### <a name="manual-packaging"></a>Упаковка вручную

Если вы предпочитаете детальный контроль над преобразованием, можно создать файл манифеста и затем запустить средство **MakeAppx.exe**, чтобы создать пакет вашего приложения для Windows.

Такой подход имеет смысл, если вам известно, какие изменения установщик вносит в систему, либо если у вас нет установщика и вы устанавливаете ваше приложение путем физического копирования файлов в расположение папки или с помощью команд типа **xcopy**. Впрочем, если у вас нет установщика, это не значит, что вам необходимо упаковывать приложение вручную. В этом случае для упаковки вы можете использовать Desktop App Converter.

См. раздел [Упаковка приложения вручную (мост переноса классических приложений на UWP)](desktop-to-uwp-manual-conversion.md).

### <a name="visual-studio"></a>Visual Studio

Этот вариант аналогичен ручному режиму, описанному выше, но Visual Studio выполняет некоторые действия за вас, например создает пакет приложения и визуальные ресурсы для вашего приложения. Visual Studio можно представить как средство, которое можно использовать для ручной упаковки приложения, плюс несколько дополнительных удобств.

См. раздел [Упаковка приложения .NET с помощью Visual Studio (мост переноса классических приложений на UWP)](desktop-to-uwp-packaging-dot-net.md)

### <a name="third-party-installer"></a>Сторонний установщик

 Теперь мост для переноса классических приложений на UWP поддерживает несколько известных продуктов сторонних компаний. Их можно использовать для создания установщиков MSI или пакетов упакованного приложения в несколько щелчков мышью. Поскольку мы не создаем документацию по использованию этих средств, посетите их веб-сайты, чтобы узнать больше.

 Ниже представлены некоторые варианты.

#### <a name="advanced-installer"></a>Advanced Installer

Компания Caphyon предоставляет средство упаковки классических приложений, которое поможет вам создать пакет приложения для Windows для вашего приложения всего в несколько щелчков мышью. Данное средство имеет графический интерфейс и распространяется бесплатно. Оно может использовать любые установщики, даже те, которые работают в автоматическом режиме, и проверяет, подходит ли приложение для упаковки.
<div style="float: left; padding: 10px; width: 20%">
     ![Логотип Advanced Installer](images/desktop-to-uwp/Advanced_Installer_Vertical.png)
</div>
Desktop App Converter также интегрируется с Hyper-V и [VMware](http://www.vmware.com/). Это означает, что можно использовать собственные виртуальные машины, не скачивая соответствующий образ [Docker](https://docs.docker.com/), который может иметь размер более 3 ГБ.

Вы можете использовать [Advanced Installer](http://www.advancedinstaller.com/) для создания MSI и [пакетов приложений для Windows](http://www.advancedinstaller.com/uwp-app-package.html) из существующих проектов. Advanced Installer также можно использовать для импорта пакетов приложений для Windows, которые созданы с помощью Desktop App Converter (Майкрософт). После импорта их можно обслуживать с помощью визуальных средств, разработанных специально для приложений UWP.

Advanced Installer также предоставляет расширение для Visual Studio 2017 и 2015, которое можно использовать для [сборки и отладки приложений, перенесенных с помощью моста для классических приложений](http://www.advancedinstaller.com/debug-desktop-bridge-apps.html).

Краткий обзор см. в этом [видео](https://www.youtube.com/watch?v=cmLKgn04Vfg&feature=youtu.be).

#### <a name="cloudhouse-compatibility-containers"></a>Контейнеры совместимости Cloudhouse

Для корпоративных клиентов, имеющих линейку бизнес-приложений, не совместимых с Windows 10 и Windows 10 S, контейнеры совместимости Cloudhouse обеспечивают возможность преобразования классических приложений для Windows XP и Windows 7 в приложения UWP и дальнейшей доставки через Магазин Windows для бизнеса или Microsoft Intune без изменения исходного кода.
<div style="float: left; padding: 10px; width: 20%">
     ![Контейнеры-совместимости-Cloudhouse](images/desktop-to-uwp/container.png)
</div>
Cloudhouse предлагает средство автоматической упаковки, которое принимает любое приложение и создает контейнер совместимости путем упаковки приложения в той среде, где оно выполняется сейчас, например в Windows XP. Затем контейнер можно преобразовать в новый формат UWP путем интеграции с мостом для классических приложений для создания пакета приложения для Windows.

Средство автоматической упаковки использует анализ во время выполнения и установку/захват, чтобы создать контейнер для приложения, включающий файлы приложения и реестра, а также механизм совместимости и перенаправления, который позволяет приложению работать в Windows 10. Кроме того можно включить и изолировать любые среды выполнения или обязательные компоненты, необходимые для запуска приложения, чтобы оно не влияло и не конфликтовало с другими приложениями и средами выполнения, которые могут быть уже установлены.


Ознакомьтесь с их [блогом](http://www.cloudhouse.com/resources/release-solution-to-get-any-line-of-business-app-to-uwp), где объявляется о поддержке универсальных приложений для Windows и Магазина Windows для бизнеса.

#### <a name="firegiant"></a>FireGiant

[Расширение FireGiant Appx](https://www.firegiant.com/products/wix-expansion-pack/appx) позволяет создавать пакеты приложений для Windows и MSI-пакеты одновременно из того же исходного кода WiX. При каждом построении вы можете выбрать мост для классических приложений в Windows 10 с использованием пакета приложения для Windows и более ранних версий Windows с использованием MSI.
<div style="float: left; padding: 10px; width: 20%">
     ![Логотип Advanced Installer](images/desktop-to-uwp/FG3rdPartyLogo.png)
</div>
Расширение FireGiant Appx использует статический анализ и интеллектуальную эмуляцию ваших проектов WiX для создания пакетов приложений для Windows без избыточных требований по дисковому пространству и среде выполнения, характерных для контейнеров и виртуальных машин.

Поскольку расширение FireGiant Appx не преобразует ваш установщик путем его выполнения, вы можете сохранить свой установщик WiX без необходимости постоянно преобразовывать его в пакеты приложений для Windows. Все ваши пользователи с различными версиями Windows получают последние нововведения в приложении, и вам не нужно беспокоиться о том, что MSI и пакеты приложений для Windows будут отличаться.

Посмотрите этот [видеоролик](https://www.youtube.com/watch?v=AFBpdBiAYQE) и узнайте, как с помощью нескольких строк кода генеральный директор FireGiant Роб Меншинг (Rob Mensching) создает версию Appx (пакет приложения для Windows) для популярного архиватора с открытым исходным кодом 7-Zip и затем вносит улучшения и в приложение для Windows, и в пакеты MSI путем внесения изменений в одном и том же исходном коде WiX.

#### <a name="installaware"></a>InstallAware

Install**Aware** предоставляет бесплатные расширения Install**Aware** для версий Visual Studio 2012-2017. Их можно использовать для создания пакетов приложений для Windows одним щелчком мыши непосредственно из [панели инструментов Visual Studio](https://www.installaware.com/visual-studio-installer-2015.htm).
<div style="float: left; padding: 10px; width: 20%">
    ![Логотип FireGiant](images/desktop-to-uwp/installaware.png)
</div>
Также можно импортировать любую конфигурацию, даже если у вас нет исходного кода этой конфигурации, с помощью средства Package**Aware** (захват конфигурации без сохранения снимков) или Мастера импорта базы данных (для всех MSI-установщиков и модулей слияния MSM). Для поддержания базы импортированных данных и ее улучшения либо в графическом виде, либо с помощью скриптов можно использовать [Средства с графическим интерфейсом](https://www.installaware.com/scripting-two-way-integrated-ide.htm).

[Дополнительные параметры создания APPX](https://www.installaware.com/mhtml5/desktop/appx.htm) помогают вам нацеливать отправки в Магазин Windows и создавать двоичные файлы пакета приложения для Windows для распространения неопубликованных приложений среди конечных пользователей. Вы даже можете создать пакеты установщика **WSA**(серверные приложения Windows), предназначенные для развертываний на **серверах Nano** из одного источника при полной поддержке [автоматизации командной строки](https://www.installaware.com/scripting-automation-interface.htm), в дополнение к графическому интерфейсу пользователя.

Компания Install**Aware** также [открыла исходный код](https://www.installaware.com/gnu.asp) **библиотеки построителя APPX** вместе с примером приложения командной строки на условиях лицензии GNU Affero GPL. Они предназначены для использования на платформах с открытым исходным кодом, таких как WiX.

#### <a name="installshield"></a>InstallShield

InstallShield предоставляет единое решение для разработки установщиков MSI и EXE, создания пакетов для универсальной платформы Windows (UWP) и приложений Windows Server (WSA), а также виртуализации приложений с минимальным объемом сценариев, кода и переработки.
<div style="float: left; padding: 10px; width: 20%">
    ![Логотип InstallShield](images/desktop-to-uwp/InstallShield-logo.jpg)
</div>
Сканирование проекта InstallShield позволяет вам сэкономить многие часы работы путем автоматического выявления потенциальных проблем совместимости вашего приложения и пакетов UWP и WSA.

Подготовка для Магазина Windows и упрощение процесса установки программного обеспечения в Windows 10 путем создания пакетов приложений UWP из существующих проектов InstallShield. Одновременная сборка установщика Windows и пакетов приложений UWP для поддержки всех сценариев развертывания, требуемых вашим клиентам. Поддержка развертываний Nano Server и Windows Server 2016 путем сборки пакетов WSA из существующих проектов InstallShield.

Разработка установки по модулям для облегчения развертывания и обслуживания и дальнейшее объединение компонентов и зависимостей во время сборки в один пакет приложения UWP для Магазина Windows. Для прямого распространения без использования Магазина можно сгруппировать пакеты приложений UWP и другие зависимости с использованием установщика Suite/Advanced UI.

Подробные сведения см. в этой [электронной книге](https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fresources.flexerasoftware.com%2Fweb%2Fpdf%2FeBook-IS-Your-Fast-Track-to-Profit.pdf&data=02%7C01%7Cnormesta%40microsoft.com%7C86b9a00bc8e345c2ac6208d4ba464802%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636338258409706554&sdata=IAYNp9nFc8B5ayxwrs%2FQTWowUmOda6p%2Fn%2BjdHea257M%3D&reserved=0).


#### <a name="rad-studio"></a>RAD Studio

См. [RAD Studio от Embarcadero](https://www.embarcadero.com/products/rad-studio/windows-10-store-desktop-bridge)

## <a name="integrate"></a>Интеграция

Если ваше приложение должно интегрироваться с системой (например, для установки правил брандмауэра), опишите эти требования в манифесте пакета вашего приложения, а все остальное система сделает сама. Для большинства этих задач вам вообще не придется писать код. С помощью небольшого объема разметки XML в манифесте можно выполнять такие действия, как запуск процесса при входе пользователя в систему, интеграция приложения в проводник и добавление вашего приложения в список целевых объектов печати, которые отображаются в других приложениях.

См. раздел [Интеграция приложения с Windows 10 (мост для классических приложений для Windows)](desktop-to-uwp-extensions.md).

## <a name="enhance"></a>Улучшение приложения

После упаковки приложения вы можете улучшить его с помощью таких функций, как живые плитки и push-уведомления. Некоторые из этих возможностей могут значительно повысить уровень вовлечения вашего приложения, и они стоят того, чтобы потратить немного времени на их добавление. Для некоторых возможностей требуется добавить небольшой код.

См. [Улучшение классического приложения для Windows 10](desktop-to-uwp-enhance.md).

## <a name="extend"></a>Расширение

Некоторые возможности Windows 10, такие как страницы с подходящим для сенсорного ввода интерфейсом, должны выполняться внутри современного контейнера приложения. Как правило, сначала необходимо определить, можно ли добавить ваше взаимодействие путем [усовершенствования](desktop-to-uwp-enhance.md) существующего классического приложения с помощью API-интерфейсов UWP. Если вам требуется использовать компонент UWP для достижения результата, можно добавить в решение проект UWP и использовать службы приложений для обмена данными между классическим приложением и компонентом UWP.

См. [Расширение классических приложений с помощью современных компонентов UWP](desktop-to-uwp-extend.md)

## <a name="migrate"></a>Перенос

Вы можете постепенно переносить свой старый код на UWP, в то же время сохраняя возможность запускать и публиковать свое приложение на настольных компьютерах под управлением Windows. После полного перехода на UWP (когда ваше приложение больше не будет содержать компонентов WPF/Win32) вы сможете распространять его для всех устройств с Windows, включая телефоны Xbox One и HoloLens.

## <a name="test"></a>Тестирование

Чтобы протестировать приложение в реалистичной среде во время подготовки к распространению, лучше всего подписать приложение и затем установить его. См. [Тестирование приложения](https://docs.microsoft.com/en-us/windows/uwp/porting/desktop-to-uwp-debug#test-your-app).

>[!IMPORTANT]
> Если вы планируете опубликовать приложение в Магазине Windows, проверьте исправность его работы на устройствах под управлением Windows 10 S. Это требование Магазина. См. статью [Тестирование приложения для Windows на Windows 10 S](desktop-to-uwp-test-windows-s.md).

## <a name="validate"></a>Проверка

Чтобы максимально повысить шансы вашего приложения на публикацию в Магазине Windows или на получение статуса [Сертифицировано для Windows](http://go.microsoft.com/fwlink/p/?LinkID=309666), проверьте и протестируйте приложение локально, прежде чем отправлять его на сертификацию.

Если для упаковки приложения используется DAC, вы можете указать новый флаг ``-Verify``, чтобы проверить ваш пакет на соответствие требованиям моста для классических приложений и Магазина. См. раздел [Упаковка, подписание и подготовка приложения для отправки в Магазин](desktop-to-uwp-run-desktop-app-converter.md#optional-parameters).

Если вы используете Visual Studio, можно проверить ваше приложение из мастера **Создание пакетов приложения**. См. раздел [Создание пакета приложения](../packaging/packaging-uwp-apps.md#create-an-app-package).

Чтобы запустить средство вручную, см. раздел [Комплект сертификации приложений для Windows](../debug-test-perf/windows-app-certification-kit.md).

Чтобы ознакомиться со списком тестов, используемых в комплекте сертификации приложений для Windows для проверки вашего приложения, см. раздел [Тесты для приложения, перенесенного из классического приложения Windows](../debug-test-perf/windows-desktop-bridge-app-tests.md).

## <a name="distribute"></a>Распространение

Вы можете распространять ваше приложение, опубликовав его в Магазине Windows или загружая его на другие системы в неопубликованном виде.

См. [Распространение упакованного классического приложения (мост для классических приложений)](desktop-to-uwp-distribute.md).

## <a name="support-and-feedback"></a>Поддержка и отзывы

**Поиск ответов на конкретные вопросы**

Наша команда следит за этими [тегами StackOverflow](http://stackoverflow.com/questions/tagged/project-centennial+or+desktop-bridge).

**Оставьте отзыв или предложите новые возможности для реализации**

См. раздел [UserVoice](https://wpdev.uservoice.com/forums/110705-universal-windows-platform/category/161895-desktop-bridge-centennial)

**Отзыв об этой статье**

Используйте раздел комментариев ниже.

## <a name="in-this-section"></a>В этом разделе

| Раздел | Описание |
|-------|-------------|
| [Подготовка приложения к упаковке](desktop-to-uwp-prepare.md) | Содержит перечень элементов, которые требуется просмотреть перед упаковкой классического приложения. |
| [Упаковка приложения с помощью Desktop App Converter (мост для классических приложений)](desktop-to-uwp-run-desktop-app-converter.md) | Порядок запуска Desktop App Converter. |
| [Упаковка приложения вручную (мост для классических приложений)](desktop-to-uwp-manual-conversion.md) | Создание пакета приложения и манифеста для него вручную. |
| [Упаковка приложения .NET с помощью Visual Studio (мост для классических приложений)](desktop-to-uwp-packaging-dot-net.md)| Демонстрирует упаковку классического приложения с помощью Visual Studio. |
| [Интеграция приложения с Windows 10 (мост для классических приложений)](desktop-to-uwp-extensions.md) | Интеграция вашего приложения с Windows 10 с помощью описания задач в файле манифеста проекта упаковки. |
| [Улучшение классического приложения для Windows 10](desktop-to-uwp-enhance.md)| Используйте API-интерфейсы UWP для добавления современных видов взаимодействия, активирующихся для пользователей Windows 10. |
| [API-интерфейсы UWP доступны упакованным классическим приложениям (мост для классических приложений)](desktop-to-uwp-supported-api.md) | Перечень API UWP, доступных для использования в упакованном классическом приложении. |
| [Расширение классических приложений с помощью современных компонентов UWP](desktop-to-uwp-extend.md)| Добавьте улучшенные взаимодействия, которые должны выполняться внутри контейнера приложения UWP. Подключите классическое приложение к процессу UWP с помощью службы приложений.|
| [Запуск, отладка и тестирование упакованного классического приложения (мост для классических приложений)](desktop-to-uwp-debug.md) | Возможные варианты отладки упакованного приложения. |
| [Распространение упакованного классического приложения (мост для классических приложений)](desktop-to-uwp-distribute.md) | Возможные варианты распространения преобразованного приложения для пользователей.  |
| [Как работает мост для классических приложений (мост для классических приложений)](desktop-to-uwp-behind-the-scenes.md) | Подробное описание механизма работы моста для переноса классических приложений на UWP. |
| [Известные проблемы (мост для классических приложений)](desktop-to-uwp-known-issues.md) | Перечень известных проблем, касающихся моста для переноса классических приложений на UWP. |
| [Примеры кода для моста для классических приложений](https://github.com/Microsoft/DesktopBridgeToUWP-Samples) | Примеры кода на GitHub, демонстрирующие возможности преобразованных приложений. |
