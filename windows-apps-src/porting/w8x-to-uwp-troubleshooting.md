---
description: Мы настоятельно рекомендуем прочитать до конца это руководство по переносу, но мы также понимаем, что вы жаждете двигаться вперед и добраться до этапа, на котором выполняется построение и запуск вашего проекта.
title: Устранение неполадок при переносе со среды выполнения Windows 8.x на UWP
ms.assetid: 1882b477-bb5d-4f29-ba99-b61096f45e50
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 2ea95832b82846e5dd09e43219271b81d38e43c7
ms.sourcegitcommit: 5dfa98a80eee41d97880dba712673168070c4ec8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73052034"
---
# <a name="troubleshooting-porting-windows-runtime-8x-to-uwp"></a>Устранение неполадок при переносе со среды выполнения Windows 8.x на UWP


Предыдущий раздел назывался [Перенос проекта](w8x-to-uwp-porting-to-a-uwp-project.md).

Мы настоятельно рекомендуем прочитать до конца это руководство по переносу, но мы также понимаем, что вы жаждете двигаться вперед и добраться до этапа, на котором выполняется построение и запуск вашего проекта. До этого момента вы можете достичь временного прогресса с помощью комментирования и создания заглушек для любого ненужного кода, а затем вернуться, чтобы уплатить этот долг позже. Таблица симптомов и средств устранения неполадок в этом разделе может быть полезна на этом этапе, хотя она не является заменой прочтению следующих нескольких разделов. Вы всегда можете обратиться к таблице по мере продвижения по последующим разделам.

## <a name="tracking-down-issues"></a>Отслеживание проблем

Исключения синтаксического анализа XAML иногда трудно диагностировать, особенно они не содержат полезных сообщений об ошибке. Убедитесь, что отладчик настроен для перехвата первых исключений. Вы сможете проверить переменную исключения в отладчике, чтобы определить, содержат ли HRESULT или сообщение полезные данные. Также изучите сообщения об ошибке от средства синтаксического анализа XAML в окне вывода Visual Studio.

Если приложение завершается, и все известно, что во время синтаксического анализа разметки XAML возникло необработанное исключение, это может быть результатом ссылки на отсутствующий ресурс (то есть ресурса, ключ которого существует для универсальных приложений 8,1, но не для приложений Windows 10 , например некоторые ключи стиля **TextBlock** системы. Или это может быть исключением, возникшим в **UserControl**, пользовательском элементе управления или элементе управления пользовательской панели макета.

Крайняя мера — это двоичное разделение. Удалите примерно половину разметки со страницы и запустите приложение еще раз. Теперь вы знаете, находится ли ошибка в той половине, которую вы удалили (которую теперь необходимо восстановить в любом случае) или в той половине, которую вы *не* удалили. Повторите процесс, разделяя половину, которая содержит ошибку и дальше, пока вы не сможете обнаружить проблему.

## <a name="targetplatformversion"></a>TargetPlatformVersion

В этом разделе объясняется, что делать, если при открытии проекта Windows 10 в Visual Studio отображается сообщение "требуется обновление Visual Studio. Для одного или нескольких проектов требуется пакет SDK \<версия\>, который не установлен или не включен в обновление Visual Studio».

-   Сначала определите номер версии установленного пакета SDK для Windows 10. Перейдите к разделу **C:\\Program Files (x86)\\комплекты Windows\\10\\включить\\\<версионфолдернаме\>** и запишите *\<версионфолдернаме\>* , который будет иметь четыре представления. , «Основная. Дополнительная. сборка. Редакция».
-   Откройте файл проекта для правки и найдите элементы `TargetPlatformVersion` и `TargetPlatformMinVersion` . Измените их, чтобы они выглядели таким образом вид, заменив *\<versionfoldername\>* номером версии в формате четырехкомпонентной системы обозначений, найденным на диске:

```xml
   <TargetPlatformVersion><versionfoldername></TargetPlatformVersion>
    <TargetPlatformMinVersion><versionfoldername></TargetPlatformMinVersion>
```

## <a name="troubleshooting-symptoms-and-remedies"></a>Признаки и средства устранения неполадок

Данные средства устранения неполадок в таблице предназначены для того, чтобы предоставить вам достаточно информации для самостоятельного устранения неполадки. Вы найдете дополнительные сведения о каждой из этих проблем при чтении последующих разделов.

| Признак | Средство |
|---------|--------|
| При открытии проекта Windows 10 в Visual Studio отображается сообщение "требуется обновление Visual Studio. Для одного или нескольких проектов требуется пакет SDK &lt;версия&gt;, который не установлен или не включен в обновление Visual Studio». | См. подраздел [TargetPlatformVersion](#targetplatformversion). |
| При вызове метода InitializeComponent в файле xaml.cs создается исключение System.InvalidCastException.| Это может случиться, если несколько XAML-файлов (по крайней мере один из которых MRT-совместимый) совместно используют один файл xaml.cs, а элементы имеют атрибуты x:Name, не совместимые между двумя XAML-файлами. Попробуйте добавить одно имя одинаковым элементам в обоих XAML-файлах или не используйте имена вовсе. |
| При запуске на устройстве приложение завершает работу или при запуске из Visual Studio отображается сообщение об ошибке "не удается активировать приложение среда выполнения Windows 8. x \[...\]. Сбой запроса на активацию с ошибкой "Windows не удалось связаться с указанным приложением. Обычно это указывает на то, что обработка указанного приложения прервана. \[...\]". | Проблема может крыться в императивном коде, работающем в ваших Страницах, или в привязанных свойствах (или других типах) во время инициализации. Эта ошибка также может происходить при анализе XAML-файла, который должен был отобразиться, когда приложение завершилось (при запуске из Visual Studio это будет стартовая страница). Найдите неверные ключи ресурса или воспользуйтесь рекомендациями из подраздела «Отслеживание проблем».|
| Средство синтаксического анализа, компилятор XAML, или исключение во время выполнения, выдает ошибку "*Ресурс "\<resourcekey\>" не может быть разрешен.* ". | Данный ключ ресурса не применяется к приложениям универсальной платформы для Windows (UWP) (например, это относится к некоторым ресурсам Windows Phone). Найдите правильный эквивалентный ресурс и обновите разметку. Примеры, с которыми вы можете столкнуться уже сейчас — это системные ключи, такие как `PhoneAccentBrush`. |
| C# Компилятор выдает ошибку "не*удалось найти тип или имя пространства имен"\<имя\>"\[...\]* " или "*тип или имя пространства имен"\<имя\>"не существует в \[пространства имен...\]* "или"*тип или имя пространства имен "\<имя\>" не существует в текущем контексте*". | Скорее всего, это значит, что данный тип реализован в SDK расширения (хотя иногда устранить проблему не так просто). Используйте справку по [API-интерфейсам Windows](https://docs.microsoft.com/uwp/), чтобы определить, в каком SDK расширения реализован API, а затем используйте команду Visual Studio **Добавить** > **Ссылку**, чтобы добавить ссылку на SDK в проект. Если приложение предназначено для набора API-интерфейсов, известного как семейство универсальных устройств, очень важно использовать класс [**ApiInformation**](https://docs.microsoft.com/uwp/api/Windows.Foundation.Metadata.ApiInformation) для тестирования присутствия SDK расширения перед их вызовом (это называется адаптивным кодом). Если существует универсальный API-интерфейс, тогда желательно всегда его использовать вместо API-интерфейса в SDK расширения. Подробнее см. в разделе [SDK расширения](w8x-to-uwp-porting-to-a-uwp-project.md). |

Следующий раздел называется [Перенос XAML и пользовательского интерфейса](w8x-to-uwp-porting-xaml-and-ui.md).

