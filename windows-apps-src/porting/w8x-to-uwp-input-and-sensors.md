---
description: Код, интегрирующийся с устройством и его датчиками, включает ввод от пользователя и вывод к нему.
title: Перенос со среды выполнения Windows 8.x на UWP для ввода-вывода, устройств и модели приложений
ms.assetid: bb13fb8f-bdec-46f5-8640-57fb0dd2d85b
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 5847553bed563b724bb142f7abe62403fa8ec097
ms.sourcegitcommit: d2517e522cacc5240f7dffd5bc1eaa278e3f7768
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/30/2018
ms.locfileid: "8330680"
---
# <a name="porting-windows-runtime-8x-to-uwp-for-io-device-and-app-model"></a>Перенос со среды выполнения Windows 8.x на UWP для ввода-вывода, устройств и модели приложений




Предыдущий раздел назывался [Перенос XAML и пользовательского интерфейса](w8x-to-uwp-porting-xaml-and-ui.md).

Код, интегрирующийся с устройством и его датчиками, включает ввод от пользователя и вывод к нему. Он может также включать обработку данных. Но в целом этот код не считается уровнем пользовательского интерфейса *или* уровнем данных. Этот код включает интеграцию с контроллером вибрации, акселерометром, гироскопом, микрофоном и динамиками (которые могут пересекаться с распознаванием речи и синтезом), (географическим) положением и модальностями ввода, такими как сенсорный ввод, мышь, клавиатура и перо.

## <a name="application-lifecycle-process-lifetime-management"></a>Жизненный цикл приложения (управление жизненным циклом процесса)


Для универсальных приложений версии 8.1 существует двухсекундное окно между моментом, когда приложение становится неактивным, и вызовом системного события приостановки. Использовать это окно как дополнительное время для приостановки небезопасно, а у приложений универсальной платформы Windows (UWP) такого окна вообще нет. Событие приостановки вызывается, когда приложение становится неактивным.

Подробнее см. в разделе [Жизненный цикл приложения](https://msdn.microsoft.com/library/windows/apps/mt243287).

## <a name="background-audio"></a>Фоновый звук


Для свойства [**MediaElement.AudioCategory**](https://msdn.microsoft.com/library/windows/apps/br227352) **ForegroundOnlyMedia** и **BackgroundCapableMedia** являются устаревшими для Windows10 приложений. Вместо этого используйте модель приложения Магазина Windows Phone. Подробнее см. в разделе [Воспроизведение звука в фоновом режиме](https://msdn.microsoft.com/library/windows/apps/mt282140).

## <a name="detecting-the-platform-your-app-is-running-on"></a>Определение платформы, на которой работает приложение


Способ мышления о том, предназначенных для приложения меняется вместе с Windows10. Новая модель подразумевает, что приложение предназначено для универсальной платформы Windows (UWP) и работает на всех устройствах Windows. Оно может активировать возможности, поддерживаемые только определенным семейством устройств. При необходимости приложение также может быть предназначено только для одного или нескольких семейств устройств. Подробнее о семействах устройств и выборе нужного семейства устройств см. в [Руководстве по приложениям UWP](https://msdn.microsoft.com/library/windows/apps/dn894631).

Если в вашем универсальном приложении версии 8.1 есть код, который определяет используемую операционную систему, вам может потребоваться изменить его в зависимости от причины применения этой логики. Если приложение передает значение и не реагирует на него, возможно, вы захотите продолжить собирать данные об операционной системе.

**Примечание**  мы рекомендуем не использовать операционной системы или семейства устройств для определения наличия функций. Определение текущей операционной системы или семейства устройств — обычно не лучший способ определить наличие указанной функции ОС или семейства устройств. Вместо обнаружения ОС или семейства устройств (и номера версии), проверьте наличие самой функции (см. раздел [Условная компиляция и адаптивный код](w8x-to-uwp-porting-to-a-uwp-project.md)). Если вам необходимо требовать использование определенной операционной системы или семейства устройств, убедитесь, что определяется минимально поддерживаемая версия, а не проверяйте наличие именно этой версии.

 

Чтобы адаптировать пользовательский интерфейс приложения к различным устройствам, мы рекомендуем использовать несколько методов. Продолжайте использовать элементы с автоматически устанавливаемым размером и динамические панели макета, как и раньше. В разметке XAML продолжайте использовать размеры в эффективных пикселях (ранее – пиксели просмотра), чтобы пользовательский интерфейс адаптировался к различным разрешениям и коэффициентам масштабирования (см. раздел [Эффективные пиксели, расстояние от экрана и коэффициенты масштабирования](w8x-to-uwp-porting-xaml-and-ui.md)). Кроме того, используйте адаптивные триггеры и параметры диспетчера визуальных состояний для адаптации пользовательского интерфейса к размеру окна (см. [Руководство по приложениям UWP](https://msdn.microsoft.com/library/windows/apps/dn894631)).

Однако если вы используете сценарий, где обнаружение семейства устройства неизбежно, вы можете сделать это. В этом примере мы используем класс [**AnalyticsVersionInfo**](https://msdn.microsoft.com/library/windows/apps/dn960165) для перехода на страницу, предназначенную для семейства мобильных устройств, если это возможно, а в противном случае возвращаемся на страницу по умолчанию.

```csharp
   if (Windows.System.Profile.AnalyticsInfo.VersionInfo.DeviceFamily == "Windows.Mobile")
        rootFrame.Navigate(typeof(MainPageMobile), e.Arguments);
    else
        rootFrame.Navigate(typeof(MainPage), e.Arguments);
```

Приложение может также определить семейство устройств, на котором оно работает, на основе применяемых факторов выбора ресурсов. В следующем примере показано, как сделать это императивно, а в разделе [**ResourceContext.QualifierValues**](https://msdn.microsoft.com/library/windows/apps/br206071) описан более типичный вариант использования класса для загрузки ресурсов для определенного семейства устройств на основе фактора семейства устройств.

```csharp
var qualifiers = Windows.ApplicationModel.Resources.Core.ResourceContext.GetForCurrentView().QualifierValues;
string deviceFamilyName;
bool isDeviceFamilyNameKnown = qualifiers.TryGetValue("DeviceFamily", out deviceFamilyName);
```

См. также раздел [Условная компиляция и адаптивный код](w8x-to-uwp-porting-to-a-uwp-project.md).

## <a name="location"></a>Расположение


Если приложение, объявляющее определение расположения в его манифесте пакета приложения выполняется в Windows10, система попросит у пользователя согласие. Это справедливо приложение, является ли приложение магазина Windows Phone или Windows10 приложения. Поэтому, если ваше приложение отображает собственный настраиваемый запрос на продолжение или если оно предоставляет переключатель включения и выключения, следует удалить этот запрос, чтобы пользователь получал только один запрос.

 

 




