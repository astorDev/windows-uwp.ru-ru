---
author: rido-min
Description: This guide explains how to configure your Visual Studio Solution to optimize the application binaries with native images.
Search.Product: eADQiWindows 10XVcnh
title: Оптимизация приложений рабочего стола .NET с помощью собственного изображения
ms.author: normesta
ms.date: 06/11/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, образа компилятора
ms.localizationpriority: medium
ms.openlocfilehash: d98b576fb51a8f9507802796ab359d0d00d21998
ms.sourcegitcommit: f2f4820dd2026f1b47a2b1bf2bc89d7220a79c1a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2018
ms.locfileid: "2788276"
---
# <a name="optimize-your-net-desktop-apps-with-native-images"></a>Оптимизация приложений рабочего стола .NET с помощью собственного изображения

> [!NOTE]
> Некоторые сведения относятся к предварительным версиям продуктов, в которые перед коммерческим выпуском могут быть внесены существенные изменения. Майкрософт не дает никаких гарантий, явных или подразумеваемых, в отношении предоставленной здесь информации.

Можно улучшить время запуска приложения .NET Framework, предварительная компиляция двоичных файлов. Эти технологии можно использовать на больших приложений, упаковка и распространение через магазина Windows. В некоторых случаях мы наблюдаемая улучшения производительности 20%. Дополнительные сведения об этой технологии в [Технический обзор](https://github.com/dotnet/coreclr/blob/master/Documentation/botr/readytorun-overview.md).

Мы выпущен предварительной версии компилятора образа как [пакет NuGet](https://www.nuget.org/packages/Microsoft.DotNet.Framework.NativeImageCompiler). Можно применить данный пакет для любого приложения .NET Framework, предназначенное для .NET Framework версии 4.6.2 или более поздней версии. Этот пакет Добавляет шаг построения post, которая включает в себя собственные полезных данных для всех двоичных файлов, используемых приложением. В этом оптимизированный полезных данных загружается при запуске приложения в .NET 4.7.2 и выше во время предыдущей версии по-прежнему будут загружать код MSIL.

[.NET framework 4.7.2](https://blogs.msdn.microsoft.com/dotnet/2018/04/30/announcing-the-net-framework-4-7-2/) включен в [центра обновления Windows 2018 10 апреля](https://blogs.windows.com/windowsexperience/2018/04/30/how-to-get-the-windows-10-april-2018-update/). Также можно установить данной версии .NET Framework на ПК, на котором запущен Windows 7 + и Windows Server 2008 R2 +.

> [!IMPORTANT]
> Если вы хотите создавать собственные изображения для вашего приложения, упакованный в проекте упаковки приложений Windows, убедитесь в том задать целевой платформы Минимальная версия проекта Годовщина обновления Windows.

## <a name="how-to-produce-native-images"></a>Порядок создания собственного изображения

Следуйте этим инструкциям, чтобы настроить проектов.

1. Требуемой версии .NET framework, как 4.6.2 или выше

2. Настройка целевой платформы как x86 или x64 

3. Добавление пакетов NuGet.

4. Создание построения выпуска.

## <a name="configure-the-target-framework-as-462-or-above"></a>Требуемой версии .NET framework, как 4.6.2 или выше

Для настройки проекта для платформы .NET Framework 4.6.2 требуется средства разработки .NET Framework 4.6.2 или более поздней версии. Эти средства доступны через установщик Visual Studio как необязательные компоненты в разделе рабочая нагрузка рабочего стола разработки .NET:

![Установка .NET 4.6.2 средства разработки](images/desktop-to-uwp/install-4.6.2-devpack.png)

Кроме того можно получить пакетов для разработчиков .NET из:[https://www.microsoft.com/net/download/visual-studio-sdks](https://www.microsoft.com/net/download/visual-studio-sdks)

## <a name="configure-the-target-platform-as-x86-or-x64"></a>Настройка целевой платформы как x86 или x64

Образ компилятор оптимизирует код для данной платформы. Чтобы использовать ее, необходимо настроить приложение для одного конкретного платформы, например x86 или x64.

При наличии нескольких проектов в решении компилируется как x86 или x64 имеет только запись точки проекта (вероятнее всего проекта, создающего исполняемый файл). Ссылка из главного проекта дополнительные двоичные файлы будут обработаны с архитектурой, указанного в основном проекте даже в том случае, если они компилируются как любой ЦП.

Настройка проекта:

1. Щелкните правой кнопкой мыши решение и выберите **Диспетчер конфигурации**.

2. Выберите **< новый... >** в раскрывающемся списке **платформа** рядом с именем проекта, создающего исполняемый файл.

3. В диалоговом окне **Создание платформы проекта** убедитесь в том, что выбрано значение в раскрывающемся списке **Копировать параметры из** **Любой ЦП**.

![Настройка x86](images/desktop-to-uwp/configure-x86.png)

Повторите этот шаг для `Release/x64` Если вы хотите, чтобы необходимо создать x64 двоичных файлов.

>[!IMPORTANT]
> Любой ЦП конфигурации не поддерживается компилятором образа.

## <a name="add-the-nuget-packages"></a>Добавление пакетов NuGet

Образ компилятора предоставляется NuGet пакета, который необходимо добавить в проект Visual Studio, который создает исполняемый файл. Обычно это проекта Windows Forms или WPF. Данная команда PowerShell для этого.

```PS
PM> Install-Package Microsoft.DotNet.Framework.NativeImageCompiler -Version 0.0.1-prerelease-00002  -PRE
```

> [!NOTE]
> Пакеты предварительной версии публикуются в NuGet.org в списке нет. Вы не найдете их с обзора NuGet.org или с помощью пользовательского интерфейса диспетчера пакетов в Visual Studio. Тем не менее, их можно установить из консоли диспетчера пакетов, а также время при восстановлении с другого компьютера. Мы предлагаем пакеты полностью доступны при мы публикация первая версия без предварительного просмотра.

## <a name="create-a-release-build"></a>Создание построения выпуска

Пакет NuGet настраивает проекта для запуска дополнительные средства для построения выпуска. Это средство добавляет машинного кода же двоичных файлов.
Чтобы убедиться, что средство обработал двоичных файлов можно просмотреть вывод в убедитесь в том, что имеются сообщения подобных построения:

```
Native image obj\x86\Release\\R2R\DesktopApp1.exe generated successfully.
```

## <a name="faq"></a>Вопросы и ответы

**Q. Работают ли новые двоичные файлы на компьютерах без .NET Framework 4.7.2?**

А. Оптимизированные двоичные файлы выиграют от улучшения при работе с платформой .NET Framework 4.7.2. Клиенты, которые установлены предыдущие версии .NET framework загружает неоптимизированный код MSIL из двоичного файла.

**Q. Как отзывы и предложения или отчитываться о проблемах?**

А. Сообщения о возникновении неполадок с помощью средства свои отзывы и предложения в Visual Studio 2017. [Дополнительные сведения](https://docs.microsoft.com/visualstudio/ide/how-to-report-a-problem-with-visual-studio-2017).

**Q. Что такое эффект добавления образа в существующих двоичных файлов?**

А. Оптимизированные двоичные файлы содержат управляемого и машинного кода, что окончательный более высокой версии.

**Q. Можно запустить с помощью этой технологии двоичных файлов**

А. Эта версия включает в себя эксплуатацию лицензии, которые можно использовать уже сегодня.
