---
title: API-интерфейсы для Xbox Live C
description: Дополнительные сведения о модели неструктурированного интерфейса C API, можно использовать для взаимодействия со службой Xbox Live.
ms.date: 06/05/2018
ms.topic: article
keywords: Xbox live, xbox, игры, универсальной платформы Windows, windows 10, xbox, один, c, xsapi
ms.localizationpriority: medium
ms.openlocfilehash: a1c73661b561d586f9e28957c7caa6a1b1f9cb03
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57597529"
---
# <a name="introduction-to-the-xbox-live-c-apis"></a>Введение в API-интерфейсы Xbox Live C

В июня 2018 г XSAPI был добавлен новый слой неструктурированного интерфейса C API. Этот новый слой API позволяет решить некоторые проблемы, возникшие на C++ и WinRT API слои.

C API еще не охватывавшего все функции XSAPI, но дополнительные функции которой вы работаете. Все 3 API слои, C, C++ и WinRT будут продолжать поддерживаться и добавлены дополнительные функции со временем.

> [!NOTE]
> API-интерфейсы C в настоящее время работают только с заголовки, использующих комплект разработчика Xbox (XDK). В настоящее время они не поддерживают игр для универсальной платформы Windows.

## <a name="features-covered-by-the-c-apis"></a>Функции, связанная с API-интерфейсы C

C API в настоящее время поддерживает следующие функции и службы:

- Достижения
- Присутствие
- Профиль
- Социальные сети
- Диспетчер социальные сети

## <a name="benefits-of-the-c-api-for-xsapi"></a>Преимущества для XSAPI C API

- Позволяет заголовки для управления выделения памяти при вызове XSAPI.
- Позволяет заголовки получить полный контроль потока обработки при вызове XSAPI.
- Использует HTTP библиотеку, libHttpClient, для разработки игр.

Вы можете использовать API C наряду с C++ XSAPI, но не обеспечивает ранее перечисленных преимуществ с интерфейсами API C++.

### <a name="managing-memory-allocations"></a>Управление выделением памяти

С помощью нового C API теперь можно указать функцию обратного вызова, который XSAPI будет вызывать каждый раз, когда он пытается выделить память. Если вы не укажете функцию обратных вызовов, XSAPI будет использовать процедуры выделения памяти в стандартной комплектации.

Чтобы вручную указать подпрограммы в памяти, можно сделать следующее:

- В начале игры:
  - Вызовите `XblMemSetFunctions(memAllocFunc, memFreeFunc)` для указания обратных вызовов выделения для назначения и освобождения памяти.
  - Вызовите `XblInitialize()` для инициализации экземпляра библиотеки.  
- Во время игры:
  - Вызов любой из новых интерфейсов API C в XSAPI, выделить или свободной памяти вызовет XSAPI для обработки обратных вызовов указанной области памяти.  
- Когда игра завершает работу:
  - Вызовите `XblCleanup()` освободить все ресурсы, связанные с библиотекой XSAPI.
  - Удалить диспетчер памяти для настраиваемой свою игру.

### <a name="managing-asynchronous-threads"></a>Управление асинхронными потоками

C API вводит новый поток асинхронного вызова шаблон, который позволяет разработчикам полный контроль над потоковой модели. Дополнительные сведения см. в разделе [C слоя асинхронных вызовов с плоскими шаблон вызова для XSAPI](flatc-async-patterns.md).

## <a name="migrating-code-to-use-c-xsapi"></a>Перенос кода для использования C XSAPI

API-интерфейсы C XSAPI может использоваться вместе с API-интерфейсы XSAPI C++ в проекте, поэтому мы рекомендуем выполнить миграцию одной из функций за раз.

API-интерфейсов C и C++ являются просто тонкие обертки вокруг общего ядра, но с различными точками входа —, поэтому функции должны быть неизменными. Тем не менее только C интерфейсов API можно воспользоваться преимуществами потоков и памяти для настраиваемой функции управления.

> [!IMPORTANT]
> Нельзя смешивать XSAPI WinRT API с помощью API-интерфейсы C.

## <a name="where-to-view-the-c-apis"></a>Для просмотра API-интерфейсы C

- [Файлы заголовков C API](https://github.com/Microsoft/xbox-live-api/tree/master/Include/xsapi-c)
- [Пример кода, с помощью новых интерфейсов API C](https://github.com/Microsoft/xbox-live-api/tree/master/InProgressSamples/Social/Xbox/C)
- [libHttpClient](https://github.com/Microsoft/libHttpClient)
