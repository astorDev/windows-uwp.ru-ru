---
title: Общие сведения о подключенных хранилища
description: Сведения об использовании подключения хранилища для сохранения и загрузки данных игры на устройствах.
ms.assetid: a0bacf59-120a-4ffc-85e1-fbeec5db1308
ms.date: 02/27/2018
ms.topic: article
keywords: Xbox live, xbox, игры, универсальной платформы Windows, windows 10 для настольных ПК, xbox, подключенные устройства хранения
ms.localizationpriority: medium
ms.openlocfilehash: 40ad13e46e074154d72d7aad236747c3374110ef
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57639059"
---
# <a name="connected-storage"></a>Подключенное хранилище
Подключенные устройства хранения позволяет название сохранить данные игровой процесс и другие данные соответствующего региона, который должен перемещаться между устройствами. Подключение API службы хранилища позволяет заголовков на Xbox One и универсальной Platform(UWP) Windows для сохранения, загрузки и удаления данных заголовка хранится локально и также синхронизируются с облаком, каждый раз, когда заголовок Xbox One или UWP подключен к Интернету. Сохраненные данные будут доступны на любом устройстве, выполняющемуся название после синхронизации. Разработчики, рекомендуется сохранить состояние title максимально возможной целью предоставить вам лучшие вдали от дома воспроизведения качества точностью. Подключенные устройства хранения является то, что позволяет хода выполнения в игре дома, а затем начнется с вашей игры места на любом устройстве, поддерживающем ту же игру.

## <a name="connected-storage-features"></a>Подключенные компоненты хранилища

Подключение API службы хранилища предоставляет следующие возможности:

- Приложения можно быстро сохранить до 16 МБ данных за раз в буфер памяти, который затем кэшируется локально жесткого диска в системе и отправлять в облако.
- Для управляемых партнеров и ID@Xbox разработчиков:
    - 256 МБ в пользователя или приложения для облачного хранилища.
- Для разработчиков Xbox Live Creators Program:
    - 64 МБ в пользователя или приложения облачного хранилища.
- Надежный ответ сбоев питания — приложений отпадает необходимость иметь дело с частичной сохраняемые данные.
- Данные автоматически передаются в облаке, даже в том случае, если приложение не запущено.
- Данные будут доступны на Xbox One или UWP устройствах, подключенных к Xbox Live.
- Xbox Live обрабатывает управление синхронизацией и конфликтов между устройствами без необходимости участия в приложении.

Система хранения, подключенные гарантирует, что сохранение всех выполняются полностью или вообще не. Это означает, что разработчик, вы никогда не будет беспокоиться о частично сохраненные данные, влияющие на состояние игры в случае сбоя питания или пользователя, неожиданно закрытием приложения вручную или путем открытия другого приложения/игры на консоли. Это также гарантирует плавный игры воспроизведения для пользователей названия, как подключенные хранилища является важной частью позволяет пользователям переключаться между игры и приложения быстро и свободно, но по-прежнему вернитесь к оригинальную игру в состоянии, в котором они слева. Для реализации этих возможностей в собственные заголовок необходимо иметь представление о подключенных API службы хранилища.

## <a name="connected-storage-structure"></a>Подключенные структуры хранилища

Система хранения, подключенные позволяет приложениям хранить данные в виде одного или нескольких больших двоичных объектов в контейнерах. На высоком уровне все данные в системе хранения, подключенные связан с пользователем или к пользователю или компьютеру, в случае пакет средств разработки Xbox разработанных заголовки. Сохранение всех данных с помощью приложения для конкретного пользователя или она сохраняется в подключенных дисковом пространстве. Каждый пользователь приложения получает подключенных дисковом пространстве с ограничение в 256- или 64 МБ общего хранилища. Важно отметить, что это хранилище выделяется для одного приложения, не используется совместно с другими приложениями.

### <a name="containers-and-blobs"></a>Контейнеры и большие двоичные объекты

Контейнер хранилища подключен, или контейнера для краткости, является основной единицей хранения. Каждой области хранения подключения может содержать множество контейнеров, как показано на следующей схеме.

Подключенные дисковое пространство (title/компьютера или title/пользователя)

![connected_storage_space_containers.png](../../images/connected_storage/connected_storage_space_containers.png)

 Данные хранятся в контейнерах, как один или несколько буферов, вызывается больших двоичных объектов. На следующей схеме показано представление внутренней системы контейнеров на диске. Для каждого контейнера имеется файл контейнера, который содержит ссылки на файл данных для каждого большого двоичного объекта в контейнере.

Схема контейнера

![container_storage_blobs.png](../../images/connected_storage/container_storage_blobs.png)

Чтобы сохранить данные в контейнере, вызовите соответствующий API-интерфейсы контейнера метод SubmitUpdatesAsync, предоставляя карту имена и большие двоичные объекты (буфер объектов). Атомарным образом применения всех изменений, описанных в вызове SubmitUpdatesAsync, то есть либо все большие двоичные объекты обновляются по запросу, или вся операция завершается и контейнер остается в состоянии до вызова метода.

Отдельные операции, использующие SubmitUpdatesAsync сохранения ограничено до 16 МБ данных за раз.

## <a name="connected-storage-api"></a>Подключенные устройства хранения API

Подключенные устройства хранения имеет отдельный API-интерфейса для приложений XDK и универсальной платформы Windows. К счастью эти API-интерфейсы совпадают друг с другом очень. Два API по-разному главным образом их имена в пространство имен и класс. Функции, необходимые для [Сохранить](connected-storage-saving.md), [загрузить](connected-storage-loading.md), и [удалить](connected-storage-deleting.md) данных с помощью API называются одинаково.

Дополнительные различия между два API хранилища, подключенных подробно описаны в разделе подключения хранилища [Xbox Live перенос кода из XDK в UWP](../../using-xbox-live/porting-xbox-live-code-from-xdk-to-uwp.md).

Можно найти XDK подключенных API-интерфейсов хранилища см. в CHM-файле XDK по пути: **Xbox один XDK >> Справочник по API >> Справочник по API платформы >> Справочник по API системы >> Windows.Xbox.Storage**.
API-интерфейсы XDK также описаны на [developer.microsoft.com сайта](https://developer.microsoft.com/en-us/games/xbox/docs/xdk/storage-xbox-microsoft-n).
Ссылку на API-интерфейсы XDK требует наличия Microsoft Account(MSA), разрешенное для доступа к Kit(XDK) разработчиков Xbox.
Windows.Xbox.Storage — имя пространства имен подключения хранилища для консолей Xbox One.

Вы можете найти UWP подключенные хранилища интерфейсы API, описанные в данном файле Xbox Live SDK по пути: **Xbox Live API-интерфейсы >> Xbox Live, справочник по API пакета SDK расширения платформы >> Windows.Gaming.XboxLive.Storage**.
API-интерфейсов универсальной платформы Windows подключенные хранилища через Интернет также приведен в подразделе [ссылку на пространство имен Windows.Gaming.XboxLive.Storage](https://docs.microsoft.com/en-us/uwp/api/windows.gaming.xboxlive.storage).
Windows.Gaming.XboxLive.Storage — имя пространства имен подключения хранилища для приложений универсальной платформы Windows.

Чтобы приступить к использованию подключения хранилища, вам потребуется получить хранилища, подключенных *пространства*. Подключенные дисковое пространство связан с пользователя или компьютера и хранит все подключенные хранилища данных, связанных с этого пользователя или компьютера в виде *контейнеры* и *большие двоичные объекты*. Получение подключения дисковое пространство для компьютера или пользователя даст доступ на чтение и запись к этим данным сущности, хранящиеся. Для получения подключения дисковое пространство, вызовет названия XDK и универсальной платформы Windows `GetForUserAsync` метод, заголовки XDK может также вызывать `GetForMachineAsync` метод, заголовки универсальной платформы Windows не сможет вызвать `GetForMachineAsync`. `GetForUserAsync` и `GetForMachineAsync` содержатся в `ConnectedStorageSpace` класс в XDK. `GetForUserAsync` содержится в `GameSaveProvider` класс в интерфейсе API универсальной платформы Windows. Эти методы являются потенциально длительных операций, особенно в том случае, если пользователь сохраненные данные на одном устройстве и возобновляет работу игровой процесс, в первый раз на другом устройстве. `GetForUserAsync` Извлекает подключение дискового пространства для пользователя, который затем можно использовать для создания, доступ и удаление контейнеров.

Чтобы создать контейнер, или доступ к ранее созданный контейнер, вызовите `CreateContainer` функции вашего `ConnectedStorageSpace` или `GameSaveProvider` класса, это даст вам доступ к именованный контейнер для пользователя или компьютера, связанного с `ConnectedStorageSpace` или `GameSaveProvider`используется для создания контейнера. `ConnectedStorageSpace` И `GameSaveProvider` классы также включают `DeleteContainerAsync` функция, которая позволяет удалить контейнер указано имя контейнера для удаления.

Чтобы обновить большие двоичные объекты в контейнере вызов `SubmitUpdatesAsync` в `ConnectedStorageContainer` класс в XDK, либо в `GameSaveContainer` класс API универсальной платформы Windows. `SubmitUpdatesAsync` позволяет указать список имен и буферов в качестве данных для записи в большой двоичный объект списка имен больших двоичных объектов для удаления и отображаемое имя для вызывающего сохранить контейнер. Это функция, которая будет в конечном счете необходимо вызвать для обновления данных в подключенные дискового пространства.

Примеры подключения API службы хранилища используется в следующих статьях подключения хранилища: [Сохранить данные](connected-storage-saving.md)
[загрузки данных](connected-storage-loading.md)
[удаление данных](connected-storage-deleting.md)

> [!NOTE]
> Примечание о безопасности.
>
> Универсальной платформы Windows (UWP) приложения, работающие на компьютерах сохраните локальные данные в расположение, доступный для локального пользователя и по своей природе не защищена от несанкционированного доступа пользователя.
>Вы должны применить собственные шифрования и допустимости проверяет игр сохранение данных, чтобы запретить пользователям изменения игр сохраняет за пределами игры.
>По этой причине следует решить, следует ли разрешить ПК и Xbox версии игры на совместное использование сохраняет или разделяя их.

## <a name="managing-local-storage"></a>Управление локального хранилища

При тестировании подключения хранилища в приложении пакет средств разработки Xbox или универсальной платформы Windows, может потребоваться обрабатывать данные, хранящиеся локально, на вашем устройстве разработки.

Средство xbstorage поставляется с XDK и является средством командной строки, которое позволит управлять локального хранилища в консоли разработки.
Для разработчиков универсальной платформы Windows имеется средство идентичны для ПК, вызывается gamesaveutil.exe входит в состав пакета SDK Windows 10 Fall Creators Update(10.0.16299.91) и более поздних версий.

Оба эти средства дают возможность манипулировать локальное хранилище на устройстве с помощью следующих команд:

|Команда  |Описание  |
|---------|---------|
|сброс    | Выполняет сброс подключения хранилища. |
|импорт   | Импортирует данные из указанного файла XML в подключенных дискового пространства. |
|Экспорт   | Экспортирует данные из подключенных дисковое пространство в указанный XML-файл. |
|"Удалить"   | Удаляет данные из подключенных дискового пространства. |
|создать | Создает фиктивных данных и сохраняет заданный XML-файл. |
|Имитация | Имитирует условия нехватки места хранения. |

Дополнительные сведения о функциях, доступных в инструмент xbstorage и прочитать gamesaveutils.exe [управление локального хранилища, подключенных](connected-storage-xb-storage.md).

## <a name="technical-overview"></a>Технический обзор

Чтобы воспользоваться более углубленно рассматриваются как подключенные хранилища работает на XDK чтение [подключенных Технический обзор хранилища](connected-storage-technical-overview.md). Технический обзор был написан специально для разработчиков XDK, но основные понятия, содержащиеся в применяются подключения хранилища в целом.