---
title: Широкие возможности присутствия, обновление строк
description: Узнайте, как обновить строку присутствия-Rich Xbox Live.
ms.assetid: eb2bb82e-8730-4d74-9b33-95d133360e44
ms.date: 04/04/2017
ms.topic: article
keywords: Xbox live, xbox, игры, универсальной платформы Windows, windows 10 для настольных ПК, xbox, богатыми возможностями присутствия
ms.localizationpriority: medium
ms.openlocfilehash: ac4549301c60eafb935dab0ac9c5b5028452edfb
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57610399"
---
# <a name="rich-presence-updating-strings"></a>Широкие возможности присутствия, обновление строк

Чтобы обновить строки форматированного присутствия в заголовок вашей, можно вызвать URI Title записи с соответствующими параметрами в объекте JSON. Этот вызов restful также заключается в оболочку с API-интерфейсы службы Xbox. См. в разделе **пространства имен Microsoft.Xbox.Services.Presence** сведения о связанных API.

URI выглядит следующим образом:

          POST /users/xuid({xuid})/devices/current/titles/current

Ниже приведены только поля, для установки наличие Rich строк. Существуют другие необязательные поля, связанные с наличие записи для заголовка, не перечисленные здесь.

## <a name="titlerequest-object"></a>Объект TitleRequest

Свойство | Тип | Бы req | Описание
---|---|---|---
Действие|ActivityRequest|N|Запись, которая описывает сведения в заголовок (широкие возможности присутствия и мультимедиа, info если он доступен)

## <a name="activityrequest-object"></a>Объект ActivityRequest

Свойство | Тип | Бы req | Описание
---|---|---|---
richPresence|RichPresenceRequest|N|FriendlyName строки, широкие возможности присутствия, который следует использовать.

## <a name="richpresencerequest-object"></a>Объект RichPresenceRequest

Свойство | Тип | Бы req | Описание
---|---|---|---
Id|Строка|Y|FriendlyName строки, широкие возможности присутствия, который следует использовать
scid|Строка|Y|Scid, сообщающего нам, где определяются строки форматированного присутствия.

Например если я хотел обновить присутствие широкие возможности для пользователя, которого xuid — 12345, Мой вызов будет выглядеть следующим образом:

          POST /users/xuid(12345)/devices/current/titles/current


Со следующим текстом JSON:

```json
          {
            activity:
            {
              richPresence:
              {
                id:"playingMap",
                scid:"0000-0000-0000-0000-01010101"
              }
            }
          }
```

С помощью оболочки API, это будет вызов **PresenceService.SetPresenceAsync-метод**

Если вы храните платформа данных в актуальном состоянии, то у вас нет сбросить строку форматированного присутствия каждый раз данные для заполнения пустого изменения. В приведенном выше примере мы знаем, что вы хотите использовать для текущей карты. Наличие будет искать данные в платформе данных при попытке прочитать строку для заполнения в текущее значение. Так что даже в том случае, если игрок, переключение с сопоставляются карте схемы не нужно сбросить строку форматированного присутствия в игре, до тех пор, пока вы отправляете соответствующие события с платформой данных. Имейте в виду, что может занять несколько секунд для данных найдут свое применение через платформу данных.

Затем когда кто-то пытается прочитать широкие возможности присутствия пользователя 12345, служба будет проверять запрашивается какие языкового стандарта и соответственно отформатировать строку перед возвращением.

В данном случае предположим, что пользователь хочет прочитать строку en US. Чтение богатыми возможностями присутствия будет работать следующим образом (Дополнительные сведения о вызове см. в разделе **GET (/users/xuid({xuid}))**

          GET /users/xuid(12345)?level=all

Оболочка API для данного **PresenceService.GetPresenceAsync-метод**

Что происходит Вот что вы задаете для PresenceRecord пользователя, которого xuid — 12345. И запрашивается, чтобы уровень детализации не «все». Если «all» не был указан, широкие возможности присутствия не будет возвращена.

И следующие будет возвращен в ответе JSON:

```json
          {
            xuid:"12345",
            state:"online",
            devices:
            [
              {
                type:"D",
                titles:
                [
                  {
                    id:"12345",
                    name:"Buckets are Awesome",
                    lastModified:"2012-09-17T07:15:23.4930000",
                    placement: "full",
                    state:"active",
                    activity:
                    {
                      richPresence:"Playing on map:Mountains"
                    }
                  }
                ]
              }
            ]
          }
```
