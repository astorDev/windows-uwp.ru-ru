---
title: Общие сведения о диспетчере многопользовательские API
description: Дополнительные сведения об API Xbox Live многопользовательскую Manager.
ms.assetid: 658babf5-d43e-4f5d-a5c5-18c08fe69a66
ms.date: 04/04/2017
ms.topic: article
keywords: Xbox live, xbox, игры, универсальной платформы Windows, windows 10, xbox, один, многопользовательскую, многопользовательские manager
ms.localizationpriority: medium
ms.openlocfilehash: 7838de6845bc6c49acf649c0e859cd0d7020490f
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57628029"
---
# <a name="multiplayer-manager-api-overview"></a>Общие сведения об API многопользовательскую Manager

На этой странице описываются широкий обзор API диспетчера многопользовательскую и как они используются в игре. Он вызывает наиболее важных классов и методов в интерфейсе API. Подробные сведения об API см. в справочной документации. Примеры использования этих интерфейсов API в приложении ознакомьтесь с примером многопользовательскую.

## <a name="namespace"></a>Пространство имен
Классы многопользовательскую Manager включаются следующие пространства имен:

| language | пространство имен |
| --- | --- |
| C++/CX | Microsoft::Xbox::Services::Multiplayer::Manager |
| C++ | xbox::services::multiplayer::manager |

Существует следующие списки описаны основные классы, которые следует понимать.

* [Класс многопользовательскую диспетчера](#multiplayer-manager-class)
* [Класс событий многопользовательскую](#multiplayer-event-class)
* [Класс члена многопользовательскую](#multiplayer-member-class)
* [Класс многопользовательскую Lobby сеанса](#multiplayer-lobby-session-class)
* [Класс многопользовательскую игру сеанса](#multiplayer-game-session-class)

## <a name="multiplayer-manager-class-a-namemultiplayer-manager-class"></a>Класс многопользовательскую диспетчера <a name="multiplayer-manager-class">

| language | класс |
| --- | --- |
| C++/CX | MultiplayerManager |
| C++ | multiplayer_manager |

Этот класс является основным классом для взаимодействия с помощью диспетчера многопользовательскую. Он является singleton-класса, чтобы было достаточно для создания и инициализации класса один раз.
Этот класс содержит объект сеанса один основной и объект одного сеанса игры.

Как минимум, необходимо вызвать `initialize()` и `do_work()` методов этого класса в порядке для диспетчера многопользовательскую функции.

В следующих таблицах описаны некоторые, но не все наиболее часто используемые методы и свойства для этого класса. Описательное полный список членов класса см. в справочнике.

| C++/CX | C++ | Описание |
| --- | --- | --- |
| **Методы** | | |
| Метод Initialize() | метод Initialize() | Инициализирует диспетчер многопользовательскую. Этот метод необходимо вызвать перед использованием многопользовательскую Manager. |
| DoWork() | do_work() | Обновляет состояния видимой сеанса приложения. Следует вызывать этот метод, по крайней мере один раз за кадр и игры должна обрабатывать многопользовательские событий, возвращаемых этим методом. |
| JoinLobby() | join_lobby() | Предоставляет способ соединения сеанса основной друга handleId, однозначно определяющее холле вы хотите присоединиться к либо когда пользователь принимает приглашение, вызывающая название, чтобы получить активирован протокол. |
| JoinGameFromLobby() | join_game_from_lobby() | Веб-трансляции lobby игр, если он существует, и если есть место. Если сеанс не существует, он создает новый сеанс игры с существующими элементами основной. Это не переносит существующие свойства сеанса основной через сеанс игр. После присоединения, можно задать свойства или узла через `game_session()::set_synchronized_*` API-интерфейсы. Заголовок должен вызывать этот API на всех клиентах, которые хотите присоединиться к сеансу, игр.|
| JoinGame() | join_game() | Присоединение существующего сеанса игр учитывая глобально уникальное имя сеанса, как правило, обнаруживаются через покупки служб сторонних производителей подбор игроков. Можно передать в списке идентификаторов, вы хотите быть частью игры xbox пользователей.|
| FindMatch() | find_match() | Используйте координирующему Xbox Live, чтобы найти и Присоединяйтесь к игре. |
| LeaveGame() | leave_game() | Оставляет игры и возвращает элемент и все локальные элементы в веселое занятие. |
| **Свойства** | | |
| LobbySession | lobby_session() | Дескриптор объекта, представляющий сеанс основной. |
| GameSession |  game_session() | Дескриптор объект, представляющий игр сеанса. |

## <a name="multiplayer-event-class-a-namemultiplayer-event-class"></a>Класс событий многопользовательскую <a name="multiplayer-event-class">

| language | класс |
| --- | --- |
| C++/CX | MultiplayerEvent |
| C++ | multiplayer_event |

При вызове `do_work()`, диспетчер многопользовательскую возвращает список событий, которые представляют изменения для сеансов с момента последнего вызова метода `do_work()`. К этим событиям относятся изменения, такие как член подключения к сеансу, член покинул сеанс, свойства элементов были изменены, размещающем клиенте был изменен, и т.д.

Список все возможные типы событий, см. в разделе `multiplayer_event_type` перечисления.

Каждый возвращаемый `multiplayer_event` включает в себя `event_args`, который должен быть приведен к классу соответствующий event_args для типа событий. Например если `event_type` — `member_joined`, а затем приводится `event_args` ссылка на `member_joined_event_args` класса.

Игра должна обрабатывать каждое из событий, при необходимости после вызова метода `do_work()`.

## <a name="multiplayer-member-class-a-namemultiplayer-member-class"></a>Класс члена многопользовательскую <a name="multiplayer-member-class">

| language | класс |
| --- | --- |
| C++/CX | MultiplayerMember |
| C++ | multiplayer_member |

Этот класс представляет проигрывателя в основной или игр сеанса. Этот класс содержит свойства, о члене, включая XboxUserID для проигрывателя, сетевой адрес подключения для проигрывателя, пользовательские свойства для каждого игрока и многое другое.

## <a name="multiplayer-lobby-session-class-a-namemultiplayer-lobby-session-class"></a>Класс многопользовательскую Lobby сеанса <a name="multiplayer-lobby-session-class">

| language | класс |
| --- | --- |
| C++/CX | MultiplayerLobbySession |
| C++ | multiplayer_lobby_session |

Постоянный сеанс, используемый для управления пользователями, которые являются локальными для данного устройства, а также приглашенного друзей, которые желают играть друг с другом. Основной сеанс должен содержать по крайней мере одного члена диспетчер многопользовательскую предпринять любые действия, многопользовательские. Изначально можно создать новый сеанс lobby путем вызова `add_local_user()` метод.

В следующих таблицах описаны некоторые, но не все наиболее часто используемые методы и свойства для этого класса. Описательное полный список членов класса см. в справочнике.

| C++/CX | C++ | Описание |
| --- | --- | --- |
| **Методы** | | |
| AddLocalUser() | add_local_user() | Добавляет в сеанс lobby локального пользователя (проигрыватель, кто уже выполнил вход на локальном устройстве). Если это первый элемент добавлен к сеансу основной, создает новый сеанс основной. |
| RemoveLocalUser() | remove_local_user() | Удаляет указанный элемент из основной и игр сеанса. |
| InviteFriends() | invite_friends() | Открывает стандартный Xbox Live пользовательский Интерфейс, игрок может выбирать из список своих друзей и затем приглашает этих игроков в игру. |
| InviteUsers() | invite_users() | Приглашает пользователей Xbox Live sepcified к игре. |
| SetLocalMemberConnectionAddress() | set_local_member_connection_address() | Задает сетевой адрес для локального элемента. Игры можно использовать этот сетевой адрес для сетевого обмена данными между членами. |
| SetLocalMemberProperties() | set_local_member_properties() | Задает настраиваемое свойство для локального элемента. Это свойство хранится в строке JSON. |
| DeleteLocalMemberProperties() | delete_local_member_properties() | Удаляет пользовательское свойство для локального элемента. |
| SetProperties() / SetSynchronizedProperties() | set_properties() / set_synchronized_properties() | Задает настраиваемое свойство для сеанса основной. Это свойство хранится в строке JSON. Если свойство является общим между устройствами и будут обновляться по нескольким устройствам одновременно, используйте синхронизированную версию метода. |
| IsHost() | is_host() | Указывает, если текущее устройство используется в качестве основной узел. |
| SetSynchronizedHost() | set_synchronized_host() | Задает узла холле. |
| **Свойства** | | |
| LocalMembers | local_members() | Коллекция элементов, которые входят в систему на локальном устройстве. |
| Члены группы | Members() | Коллекция элементов, которые находятся в сеансе основной. |
| Свойства | Properties() | Объект JSON, представляющий коллекцию свойств для сеанса основной. |
| Hyper-V | host() | Для основной член узла. |


## <a name="multiplayer-game-session-class-a-namemultiplayer-game-session-class"></a>Класс многопользовательскую игру сеанса <a name="multiplayer-game-session-class">

| language | класс |
| --- | --- |
| C++/CX | MultiplayerGameSession |
| C++ | multiplayer_game_session |

Игры сеанс представляет группу сотрудников отдела Xbox Live, которые участвуют в экземпляре фактическое игры. Это могут быть игроков, сопоставленных с помощью служб подбор игроков.

Чтобы начать новый сеанс игры, который включает в себя элементы из `lobby_session`, можно вызвать `multiplayer_manager::join_game_from_lobby()`. Если вы хотите использовать подбор игроков, Xbox Live, можно вызвать `multiplayer_manager::find_match()`. Если вы используете службы сторонних партнеров, можно вызвать `multiplayer_manager::join_game()`.

В следующих таблицах описаны некоторые, но не все наиболее часто используемые методы и свойства для этого класса. Описательное полный список членов класса см. в справочнике.

| C++/CX | C++ | Описание |
| --- | --- | --- |
| **Методы** | | |
| SetProperties() / SetSynchronizedProperties() | set_properties() / set_synchronized_properties() | Задает настраиваемое свойство для игр сеанса. Это свойство хранится в строке JSON. Если свойство является общим между устройствами и будут обновляться по нескольким устройствам одновременно, используйте синхронизированную версию метода. |
| IsHost() | is_host() | Указывает, если текущее устройство используется в качестве узла игр. |
| SetSynchronizedHost() | set_synchronized_host() | Задает узел игры. |
| **Свойства** | | |
| Члены группы | Members() | Коллекция элементов, которые находятся в сеансе игр. |
| Свойства | Properties() | Объект JSON, представляющий коллекцию свойств для игр сеанса. |
| Hyper-V | host() | Узел члена для игры. |
