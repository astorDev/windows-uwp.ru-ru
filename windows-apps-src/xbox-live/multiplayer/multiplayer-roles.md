---
title: Многопользовательские ролей
description: Сведения об использовании ролей для определения ролей проигрывателя в многопользовательскую Xbox Live.
ms.date: 06/29/2017
ms.topic: article
keywords: Xbox live, xbox, игры, универсальной платформы Windows, windows 10, xbox one, многопользовательские, роли
ms.localizationpriority: medium
ms.openlocfilehash: ac5e7758bd8e068681d1c8dab2d47d11374c2616
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57662089"
---
# <a name="roles"></a>Роли

Для некоторых игр сеансов может потребоваться указать, что определенные члены имеют определенные роли игровой процесс, такие как поддержка, врач, физическое и т. д. Можно также wat для резервирования игр слотов для игроков, которые заместят игровой процесс определенной роли. С помощью функции ролей Xbox Live, службу можно отслеживать, какие игроков назначаются роли, которые игровой процесс и ограничивать максимальное число проигрыватели, в которых можно выбрать роль определенной игровой процесс.

Роли чаще всего используется для определения игр конкретные роли для этого сеанса игры. Например может иметь игровой режим, требующий между 1 и 2 вспомогательных классов, по крайней мере 1 класса жидкости/доступно и не более 5 атакует классы.

В другой возможный сценарий может потребоваться указать, что игра сеанс может иметь ровно из четырех игроки, до 8 spectators и 1 announcer.

Роли также можно зарезервировать слотов для друзей при заполнении оставшихся слотов другим способом, например обзора сеанса.

## <a name="role-types"></a>Типы ролей

Тип роли представляет группу определений ролей. Каждой роли должен быть определен как часть типа роли. В документе многопользовательской определенные типы ролей.

Член можно назначить только одну роль из типа данной роли. Например если тип роли «class» включает в себя healers, резервуары и ущерб, затем член может назначаться только одной из этих ролей.

Можно определить несколько типов роли, и член можно назначить одну роль из каждого типа роли. В приведенном выше сценарии могли выбрать роль healer члена, но также могут быть присвоены группа роль лидера, если роль лидера группа определяется в типе отдельной роли.

> **Важно!** Xbox Live SDK в настоящее время поддерживает только тип одной роли и одна роль каждого участника.

## <a name="role-type-properties"></a>Тип свойства роли

При определении типа роли, необходимо указать следующие сведения по типам ролей:

* Имя типа роли. Имя должно быть в нижнем регистре и буквенно цифровых и не более 100 символов.
* Если роли, определенные в тип роли владельца, управляемым или нет.
* Если свойства роли, определенные в тип роли может быть изменен в течение жизненного цикла сеанса.
* Определения ролей, включенных в тип роли.

Если тип роли владельца управляемые, это означает, что только члены, которые являются владельцами сеанса можно назначить роли этого типа элементов. Если тип роли не является владельцем управляемых, члены можно назначать роли на самих себя.

Можно только указать, что тип роли является владельцем управляемых сеансов, имеющих возможности «hasOwners».

> Xbox Live SDK не поддерживает владельцев, назначения ролей для других членов.

## <a name="role-properties"></a>Свойства роли

При определении роли, необходимо указать следующие сведения для каждой роли:

* Имя роли. Имя должно быть в нижнем регистре и буквенно цифровых и не более 100 символов.
* Максимальное количество элементов, которые разрешены для выполнения роли. Должно быть больше нуля.
* Целевое количество элементов, которые должны использоваться. Целевой объект должен быть больше нуля и меньше или равно максимальное количество элементов допускается для выполнения роли.

При назначении роли члена сеанса, данные записываются в роли членов в документе многопользовательской.

Служба контролирует максимальное число элементов, которые могут быть назначены роли, но не целевого числа.

## <a name="create-roles"></a>Создание ролей

Роли и типы ролей обычно определяются в [шаблона сеанса](service-configuration/session-templates.md). Служба поддерживает роли и определения типа роли во время создания сеанса, но не поддерживает Xbox Live SDK.

### <a name="define-role-types-and-roles-in-a-session-template"></a>Определения типов ролей и ролей в шаблоне сеанса

При создании шаблона сеанса во время настройки Xbox Live, можно определить типы ролей и ролей.

Сведения о роли типа и роли указывается как элемент «roleTypes» бесплатный базовый уровень в шаблоне сеанса, в следующем формате:

```json
"roleTypes": {
  "myroletype1": { // must be lowercase alpha-numeric.
    "ownerManaged": true, // Can only be true on sessions with the "hasOwners" capability set. If true, only the owner of the session can assign this role to members.
    "mutableRoleSettings": ["max", "target"], // Which role settings for roles in this role type can be modified throughout the life of the session. Exclude role settings to lock them.
    "roles": {
      "role1": { // must be lowercase alpha-numeric.
        "max": 3, // Max number of members assigned to this role at a time, enforced by MPSD.
        "target": 2 // Target number of members to assign this role to. Like max, but not enforced (can be exceeded).
      },
      "role2": {
        ...
      }
  },
  "myroletype2": {
    ...
  }
},
```

## <a name="retrieve-role-information-for-a-multiplayer-session"></a>Получить сведения о роли для многопользовательской

Можно получить сведения о роли типов, ролей и сколько членов назначенных для каждой роли, из нескольких участников сеанса или из дескриптора многопользовательские поиска.

В Xbox Live SDK сведения о типах роли и роли хранится внутри структуры карты. Использование API-интерфейсы C++ `unordered_map` класс и использовать API-интерфейсы WinRT `IMapView` класса.

### <a name="get-the-role-information-from-a-search-handle"></a>Получить сведения о роли из дескриптора поиска

В `multiplayer_search_handle_details` объект, возвращенный запросом на поиск, можно получить сведения о типе роли, индексирование `role_types` карты с именем типа роли, вас интересует.

Эта команда возвращает `multiplayer_role_type` объекта. Вы можете получить роли, индексирование `roles` сопоставления, который возвращает `multiplayer_role_info` объекта.

`multiplayer_role_info` Объект содержит сведения о роли, включая `max_members_count`, `member_xbox_user_ids`, `members_count`, и `target_count`.

### <a name="get-the-role-information-from-a-search-handle"></a>Получить сведения о роли из дескриптора поиска

Поток для получения сведений о роли из сеанса аналогичен потоку для получения сведений из дескриптора поиска, но используются некоторых других классов.

В `multiplayer_session` объекта, можно получить сведения о типе роли, ссылаясь на `session_role_types` объект, являющийся `multiplayer_session_role_types` класса. В этом объекте, вы можете индексировать `role_types` сопоставление с именем типа роли, вас интересует.

Эта команда возвращает `multiplayer_role_type` объекта. Вы можете получить роли, индексирование `roles` сопоставления, который возвращает `multiplayer_role_info` объекта.

`multiplayer_role_info` Объект содержит сведения о роли, включая `max_members_count`, `member_xbox_user_ids`, `members_count`, и `target_count`.

## <a name="change-mutable-role-settings"></a>Изменение параметров изменяемую роль

Если тип роли указывает, что некоторые параметры роли можно изменить (изменяемый), вы можете использовать `multiplayer_role_type.set_roles()` метод, чтобы изменить изменяемые параметры. Только члены, помеченные как владельцам сеансов можно изменить параметры роли.

## <a name="assign-a-role-to-a-member"></a>Назначение роли к элементу

В настоящее время только члены можно назначить свои собственные роли в Xbox Live SDK. В `multiplayer_session` объекта, можно вызвать `set_current_user_role_info(role_type, role_name)` метод, чтобы задать тип роли и роли для текущего элемента.

Если роль уже заполнен, при попытке записи в службу сеанс, MPSD отклонит записи.
