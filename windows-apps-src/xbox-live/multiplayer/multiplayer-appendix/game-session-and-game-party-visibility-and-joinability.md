---
title: Видимость игр сеанса и joinability
description: Описывает Xbox Live игр сеанса и видимость игр субъекта и joinability.
ms.assetid: 39b6dac1-0c6b-4dc1-9fe0-3cb7c471fbab
ms.date: 04/04/2017
ms.topic: article
keywords: xbox live, xbox, игры, uwp, windows 10, xbox one
ms.localizationpriority: medium
ms.openlocfilehash: 65da0d60080cd790b84ce46f8598c2f6f638ff05
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57619719"
---
# <a name="game-session-and-game-party-visibility-and-joinability"></a>Видимость и joinability лицам сеанса игры и игры

В службе Xbox One *видимость* и *joinability* параметры для игр сеансов и игр сторон, соответственно, управлять доступом к многопользовательской работы. Предоставьте развитым интерфейсом для присоединения к сеанса, а также для приглашающей игроков в игры сеансы и сторонами, заголовок разработчики должны понимать эти параметры. В этом техническом документе рассматриваются различия между видимость и joinability, и здесь рассматриваются определенные параметры, мы рекомендуем использовать заголовки для предоставления своим потребителям поток лучше всего многопользовательские пользователя.

## <a name="game-session-visibility"></a>Видимость игр сеанса


Доступ к сеансу каталог сеанса многопользовательскую (MPSD) управляются два параметра: сеанс *видимость* и сеанса *joinability*. Эти параметры можно использовать для ограничения доступа сеанса на уровне MPSD.

Первый фактор управления доступом — видимость сеанса. Видимость сеанса является константой, заданном во время создания сеанса. Он обычно определяется в шаблоне сеанса и определяет прочитаны каждого типа пользователей и доступ на запись к сеансу. Доступны следующие значения для параметра видимости.

-   *Открыть —* все пользователи могут читать и записывать в сеанс.

-   *Visible —* все пользователи могут читать, но только для присоединенных и зарезервированных игроков можно написать для сеанса.

-   *Закрытый —* только объединить и зарезервированных игроки могли читать или записывать в сеанс.

> **Примечание.** Задание видимости частный может потребовать выполнения повторных попыток на **join()** вызовите приглашенного проигрывателем. Если приглашение отправляется через платформы пользовательского интерфейса, его могут получать другой проигрыватель до игрок зарезервированные в сеансе. Такое состояние гонки может привести к **join()** вызова для приглашенного проигрывателя, сбоем, так как закрытый или видимым сеансов требуются резервирования для подключающегося игрока.
>
> Если резервирование не существует, возникает ошибка доступа к выступлению (HTTP/403). Приглашенный проигрыватель затем нужно повторить **join()** операция, но повторные попытки не должен выполняться чаще, чем каждые пять секунд. Рекомендуется, чтобы заголовки значение видимости сеанса, чтобы открыть, чтобы избежать состояний гонки во время потока соединения для проигрывателя.

## <a name="game-session-joinability"></a>Joinability игр сеанса


Второй аспект в управление доступом — joinability. Он может быть задана динамически во время существования сеанса и определяет, какие типы пользователей можно присоединиться к сеансу. Доступны следующие значения для joinability сеанса.

-   *Нет* (значение по умолчанию), не существует ограничений на кто может подключиться к сеансу.

-   *Локальный*— только для локальных пользователей можно присоединиться к сеансу.

-   *А затем —* только для локальных пользователей и пользователей, которые выполняются другими участниками сеанса можно подключиться к сеансу без резервирования.

Узел сеансов или арбитр может создать закрытый сеанс через параметр joinability: joinability локальным или последующей будет ограничение доступа к сеансу игр и сделать ее частной.

Кроме того узел сеансов или арбитр должен хранить список joinability сеанса, таким образом, чтобы старые сеанса приглашения можно отклонить, на уровне узла при необходимости. Например если любой приглашенного проигрыватели не поступили для присоединения к сеанса и/или субъекта, пока сеанс, который уже заполнен, узла или арбитр можно указать любой присоединяемый игроков, что сеанс был заблокирован, и им нужно выйти из сеанса и/или лицам автоматически.

**Примечание.** Joinability игр сеанса не отражаются в пользовательском Интерфейсе приложения субъекта. Даже если joinability ограничен, приложение сторона пригласить пользовательского интерфейса и **ShowSendInvitesAsync** позволит приглашения игр сеанса.

## <a name="game-party-joinability"></a>Joinability игр сторона


Помимо управления сеансом MPSD, заголовок также имеет контроль над состояние joinability игр сторона. Этот параметр можно использовать для ограничения доступа игр субъекта на уровне субъекта.

Joinability сторона может динамически изменяться после создания игр сторона. Состояние joinability игр субъекта отражается в сторону пригласить пользовательского интерфейса. Его можно установить равным:

-   *Только для приглашения —* этого параметра требуется приглашение для присоединения к стороне игр.

-   *Присоединяемая с друзьями* (значение по умолчанию)*—* этот параметр требует дружественных отношений для проигрывателя для присоединения к стороне игр (Чтобы присоединить сторона, сторона член должен подчиняться подключающегося игрока).

Joinability можно использовать для создания игр стороны только для приглашения. Для ограничения доступа и стороной и требуют, что игроки получили приглашение для присоединения, joinability должно быть присвоено «пригласить только».

**Примечание.** Joinability сторона не влияет на joinability сеанса, но joinability сторона отражается в пользовательском Интерфейсе приложения субъекта. Проигрыватели можно изменить joinability субъекта в приложении сторона вручную вне заголовка.

## <a name="recommendations"></a>Рекомендации


Следующие рекомендации применимы для наиболее распространенных сценариев title. Заголовки должны удовлетворять эти параметры, если это возможно, и для их определения последний, заслуживающих доверия, о том, является ли новый исполнитель это означает, что в сеанс или не должны использовать логику в заголовок.

### <a name="recommended-game-session-visibility-open"></a>Рекомендуется видимость игр сеанса: открыть

Открытые сеансы игры не требуют резервирования проигрывателя, тем самым упрощая процесс для приглашения. Узел сеансов или арбитр не резервирует игроков в документе сеанса после отправки приглашения. Вместо этого узел сеансов или арбитр отслеживает только приглашенным игроков локально. Это позволяет немедленно подключиться к узлу и определяет, следует присоединиться к сеансу, отклоняются или должна ожидать (если поддерживаются ожидания игроков). Арбитр или узел получает все права и отвечает и указывает, что новый член оставаться в или выйти из сеанса.

**Примечание.** Для этого потребуется приглашенного проигрыватель по запуску заголовок и подключению на узле или класса arbiter, прежде чем стала окончательное решение. Это допустимо для отображения сообщения об ошибке для пользователя, если сеанс заполнен или приглашение было отклонено.

> **Примечание.** Чтобы установить подключение к узлу или класса arbiter, по адресу защитить устройства является обязательным. **HostDeviceToken** в сеансе должен использоваться для указания какой элемент сеанса — это текущий узел или арбитр сеанса и который приглашенного проигрывателя должны подключаться к адрес защиты устройства.

### <a name="recommended-game-session-joinability-default-not-set"></a>Рекомендуется joinability игр сеанса: по умолчанию (*не задано*)

В настоящее время joinability игр сеанса не влияет на пользовательском Интерфейсе приложения субъекта и не отображается для пользователя. Чтобы упростить потока title, игр joinability должны оставаться значение по умолчанию и все полномочия соединения должны обрабатываться с помощью класса arbiter или узла.

### <a name="recommended-game-party-joinability"></a>Рекомендуется joinability игр сторона

Игры сторона joinability зависит от типа сеанса, который пытается предоставить пользователю заголовок. Ниже приведены два сценария.

-   Откройте игры — для игру откройте joinability игр сторона следует оставить значение по умолчанию: Присоединяемая с друзьями. Это позволяет друзей игры сторонних поставщиков (а следовательно сеанса игры) без приглашения.

-   Закрытый игры — в игре закрытый или закрытый joinability игр субъекта должно быть присвоено только пригласить. Это ограничивает другие игроки присоединяться к сторона (а следовательно сеанса игры) без приглашения.

**Примечание**. Проигрыватели можно вручную изменить joinability игр сеанса в приложении "сторона".

Для обоих типов игры арбитр или узел должен по-прежнему остаются ultimate центра, чтобы определить, кто принимается в сеанс. Это решает любой гонки, которые могут возникнуть из переключение потока операций игры от открытых частного. Если арбитр/узел отклоняет проигрыватель, отклоненных заголовок экземпляра следует удалить проигрывателя из сеанса и отображать пользовательский Интерфейс в игре, позволив проигрывателя оставить сторона.

### <a name="maximum-session-size"></a>Максимального размера сеанса

Размер максимальный элемент для сеанса можно использовать для ограничения числа игроков, присоединение к сеансу игр. Тем не менее это ограничение может привести к открытым место, чтобы отображаться в качестве полной во время определенных отключиться сценариев. Например если игрок будет отключен в результате сбоя сети или электропитания, задержка не отразится немедленно в сеансе. Если элемент будет задан в неактивное состояние, сразу присутствия служба обнаруживает disconnect (до 20 секунд), и проигрыватель будет удален, затем после неактивные тайм-аута.

В отличие от этого одноранговой ячейки, которая использует периодический сигнал для обнаружения отключении часто знает о наличии disconnect в течение 2 – 3 секунд и может немедленно открыть слот player. Тем не менее арбитр или узел не удается удалить другие члены.

Чтобы устранить эту проблему, размер максимальный элемент сеанса всегда должно иметь значение больше максимального числа проигрыватели, которые фактически поддерживает заголовок. Например если число player 8, заголовок должен устанавливать размер максимальное число сеансов в 12. Таким образом новые проигрыватели можно соединение, даже если старый проигрыватели не еще истечения времени ожидания. Арбитр или узел определяет, является ли сеанс полный, а затем определяет свойство пользовательского сеанса, которое будет ли по-прежнему можно присоединить новые проигрыватели (**IsFull** : «true»). Это позволяет выполнять быструю проверку присоединяться игроков, если сеанс присоединяем.

Арбитр или узел также должен поддерживать настраиваемое свойство, которое указывает, какие члены по индексу, истекло время ожидания (например, **TimedOutPlayers** : “3, 5, 9”). Благодаря этому новые игроков, чтобы правильно определить члены текущего сеанса.

### <a name="notifying-waiting-players"></a>Уведомление игроков ожидания

Заголовок может поддерживать ожидания игроков, управляя список проигрывателя в очереди в дополнение к стороне игр. Когда проигрыватель подключается к узлу и игр сеанса заполнен, проигрыватель добавляется к списку внутреннее Ожидание: на узле. В очереди игрок не присоединиться к сеансу, игр, но остается в игры сторона. Чтобы свести к минимуму сетевой трафик, проигрыватель ожидания отключается от узла к этому моменту.

В открывшемся слот в сеансе игр для проигрывателя ожидания класса arbiter или узел добавляет резервирование для проигрывателя путем вызова **AddMemberReservation** метод. На этом этапе проигрыватель ожидания еще не учитывать это резервирование, поэтому арбитр или узла должно вызвать **PullReservedPlayersAsync** метод. В результате пользовательский Интерфейс всплывающее уведомление или **GameSessionReady** уведомления для всех зарезервированных игроков, в зависимости от конфигурации всплывающее уведомление и состояние фокуса title. Новый исполнитель снова подключается к узлу при получении этого уведомления и пользователи, работающие.

Кроме того проигрыватель можно остаются подключенными к узлу и подключиться к сеансу, когда узел оповещает проигрыватель что слот доступен. Тем не менее в этом потоке не удается отобразить всплывающее уведомление за пределами заголовок пользовательского интерфейса.

**Примечание.** Проигрыватели будут удалены автоматически от игр стороны, если заголовок приостанавливается и/или завершается и больше не будете получать уведомления.

<a name="client-multiplayer-flow"></a>Многопользовательские поток клиента
-----------------------
![](../../images/whitepapers/gamesessionvisibility_image1.png)
![](../../images/whitepapers/gamesessionvisibility_image2.png)
