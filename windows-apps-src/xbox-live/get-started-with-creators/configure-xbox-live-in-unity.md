---
title: Настройка Xbox Live в Unity
description: Узнайте, как настроить Xbox Live в игру Unity с помощью подключаемого модуля Xbox Live Unity.
ms.assetid: 55147c41-cc49-47f3-829b-fa7e1a46b2dd
ms.date: 01/25/2018
ms.topic: article
keywords: Xbox live, xbox, игры, универсальной платформы Windows, windows 10 для настольных ПК, xbox, Unity, Настройка
localizationpriority: medium
ms.openlocfilehash: d464fc54d322db9da91870bd3ca7cbc29957b379
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57596729"
---
# <a name="configure-xbox-live-in-unity"></a>Настройка Xbox Live в Unity

> [!NOTE]
> Подключаемый модуль Xbox Live Unity рекомендуется только для [Xbox Live Creators Program](../developer-program-overview.md) члены, так как в настоящее время не поддерживается для достижения или многопользовательскую.

С помощью [подключаемый модуль Unity Live Xbox](https://github.com/Microsoft/xbox-live-unity-plugin), добавление поддержки, Xbox Live, чтобы игры Unity несложно, посвящать больше времени, чтобы сосредоточиться на использование Xbox Live способами, что лучше всего соответствии с названием.

В этом разделе будет проходить через процесс установки настраивает подключаемый модуль Xbox Live в Unity.

## <a name="prerequisites"></a>Предварительные условия

Перед использованием Xbox Live в Unity, необходимо следующее:

1.  **[Учетную запись Xbox Live](https://support.xbox.com/browse/my-account/manage-account/Create%20account)**.
1. Регистрация в  **[программе для разработчиков центра партнеров](https://developer.microsoft.com/store/register)**.
2. **[Юбилейное обновление Windows 10](https://microsoft.com/windows)**  или более поздней версии
3. **[Unity](https://store.unity.com/)**  версии **5.5.4p5** (или более поздней версии), **2017.1p5** (или более поздней версии), или **2017.2.0f3** (или более поздней версии) с **[Средств Microsoft Visual Studio для Unity](https://marketplace.visualstudio.com/items?itemName=SebastienLebreton.VisualStudio2015ToolsforUnity)** и **сценариев серверной части .NET Windows Store**.
4. **[Visual Studio 2015](https://www.visualstudio.com/)**  или **[Visual Studio 2017 15.3.3](https://www.visualstudio.com/)** (или более поздней версии) с **средства разработки универсальных приложений Windows**.
5. **[Xbox Live расширения платформы SDK](https://aka.ms/xblextsdk)**.


> [!NOTE]
> Если вы хотите использовать IL2CPP сценариев серверной части с помощью Xbox Live, вам потребуется Unity 2017.2.0p2 или более поздней версии и версия подключаемого модуля Xbox Live Unity «Release Preview 1802» или более поздней версии.


## <a name="import-the-unity-plugin"></a>Импортировать подключаемый модуль Unity

Чтобы импортировать подключаемый модуль в новый или существующий проект Unity, выполните следующие действия:

1. Перейдите на вкладку выпуска Plugin-Unity Xbox Live на [ https://github.com/Microsoft/xbox-live-unity-plugin/releases ](https://github.com/Microsoft/xbox-live-unity-plugin/releases).
2. Скачайте **XboxLive.unitypackage**.
3. В Unity, нажмите кнопку **активы** > **Импорт пакета** > **пользовательского пакета** и перейдите к **XboxLive.unitypackage**.

![После успешного импорта](../images/unity/get-started-with-creators/importXBL_Small.gif)

### <a name="optional-configure-the-plugin-to-work-in-the-unity-editor-net-46-or-il2cpp-only"></a>(Необязательно) Настройка подключаемого модуля для работы в редакторе Unity (.NET 4.6 или только IL2CPP)

> [!NOTE]
> Поддержка изменения версии среды выполнения скриптов в Unity требуется Xbox Live Unity версия подключаемого модуля «1711 выпуск» или более поздней версии .NET 4.6 и версия «Release Preview 1802» или выше для IL2CPP.

Существует три параметра, которые могут быть настроены в Unity для определения того, как код нужно компилировать так:

1. **Сценариев серверной части** — это компилятор, который используется. Unity поддерживает два разных сценариев серверные части для универсальной платформы Windows: .NET и IL2CPP.
2. **Версии среды выполнения сценариев** — это версия сценария среду выполнения, которая запускает редактор Unity.
3. **Уровня совместимости API** является контактной зоной API, вы создадите свою игру с.

В следующей таблице показаны Текущая матрица поддержки сценариев для Xbox Live Unity подключаемого модуля:

| Создание сценариев серверной части     | Версия среды выполнения сценариев | Поддерживается     | Требуемая версия минимальное Unity |
|-------------------    |-------------------        |-----------    |------------------------------- |
| IL2CPP                | .NET 3.5 эквивалент       | Нет            | Н/Д                            |
| Il2CPP                | .NET 4.6 эквивалент       | Да           | 2017.2.0p2                     |
| .NET                  | .NET 3.5 эквивалент       | Да           | Так же, как предварительные требования          |
| .NET                  | .NET 4.6 эквивалент       | Да           | Так же, как предварительные требования          |

Мы добавили дополнительную поддержку среды выполнения сценариев в Xbox Live Unity подключаемый модуль, начиная с версии «1711 выпуск». По умолчанию подключаемый модуль настроен для запуска в редакторе Unity с помощью .NET сценариев серверной части и сценариев версии среды выполнения .NET 3.5. Если проект использует версию сценариев среды выполнения .NET 4.6, необходимо будет настроить подключаемый модуль для правильной работы в редакторе:

1. В обозревателе проектов Unity, перейдите к **Xbox Live\Libs\UnityEditor\NET46** и выберите все библиотеки DLL в папке.
2. В окне инспектора проверить **редактор** под **включают платформ**.
3. В обозревателе проектов Unity, перейдите к **Xbox Live\Libs\UnityEditor\NET35** и выберите все библиотеки DLL в папке.
4. В окне инспектора, снимите флажок **редактор** под **включают платформ**.

![изменить среда выполнения скриптов](../images/unity/get-started-with-creators/changeScriptingRuntime.gif)

> [!IMPORTANT]
> Эти действия необходимо быть возвращены, если вы измените сценариев версии среды выполнения в проекте на 3.5.

## <a name="set-visual-studio-as-the-ide-in-unity"></a>Visual Studio в качестве интегрированной среды разработки в Unity

Visual Studio требуется [универсальной платформы Windows (UWP)](https://docs.microsoft.com/windows/uwp/get-started/whats-a-uwp) игр. Интегрированной среды разработки в Unity в Visual Studio можно задать, перейдя в **изменить** > **предпочтения** > **внешние инструменты** и **Внешнего редактора скриптов** для Visual Studio.

![значение внешнего средства VS](../images/unity/get-started-with-creators/setVSExternalTool_Small.gif)

## <a name="unity-plugin-file-structure"></a>Структура файлов подключаемого модуля Unity

Структура файлов подключаемого модуля Unity разбивается на следующие части:

* __Xbox Live__ содержит фактические подключаемый модуль ресурсы, включенные в опубликованной **.unitypackage**.
    * __Редактор__ содержит скрипты, которые предоставляют базовую конфигурацию Unity пользовательского интерфейса и обрабатывает проекты во время сборки.
    * __Примеры__ содержит ряд простых сцены файлы, которые показывают, как использовать различные prefabs и соединять их.
    * __Образы__ — это небольшой набор изображений, используемых prefabs.
    * __LIBS__ является местом хранения библиотек Xbox Live.
    * __Prefabs__ содержит различные [Unity prefab](https://docs.unity3d.com/Manual/Prefabs.html) объекты, реализующие функциональность Xbox Live.
    * __Сценарии__ содержит все файлы кода, которые вызывают API-интерфейсы Xbox Live от prefabs. Это отличное место для поиска примеры должным образом вызывать API-интерфейсы Xbox Live.
    * __Tools\AssociationWizard__ содержит Xbox Live мастером взаимосвязей, используются для извлечения параметров приложения из [центра партнеров](https://developer.microsoft.com/windows) для использования в Unity.

## <a name="enable-xbox-live"></a>Включить Xbox Live

Названия для взаимодействия с Xbox Live необходимо настроить начальную конфигурацию Xbox Live. Вы это можно сделать без труда и внутри Unity с помощью мастера взаимосвязей Xbox Live:

1. В **Xbox Live** меню, выберите **конфигурации**.
2. В **Xbox Live** выберите **мастера запуска от Xbox Live ассоциации**.
3. В **связать название с Windows Store** диалоговое окно, нажмите кнопку **Далее**и выполните вход в учетную запись центра партнеров.
4. Выберите приложение, которое вы хотите связать с этим проектом и нажмите кнопку **выберите**. Если вы не видите его там, попробуйте нажать **обновить**. Кроме того, можно создать новое приложение, резервирование имя и нажав кнопку **резерва**.
5. Вам будет предложено включить Xbox Live, если вы еще этого не сделали. Нажмите кнопку **включить** для включения в заголовок вашей Xbox Live.
6. Нажмите кнопку **Готово** чтобы сохранить конфигурацию.

Для вызова службы Xbox Live, рабочего стола должен быть в режиме разработчика и задайте для той же песочнице, как это название в конфигурации Xbox Live. Вы можете проверить оба, просмотрев **Xbox Live конфигурации** окно в Unity:

1. **Режим разработчика конфигурация** должно быть указано **включено**. Если отображается надпись **отключено**, нажмите кнопку **переключиться в режим разработчика**.
2. **Заголовок конфигурации** > **"песочницы"** должны иметь один и тот же идентификатор как **конфигурации режима разработчика** > **режим разработчика**.

![XBL включена](../images/unity/unity-xbl-enabled.png)

См. в разделе [Xbox Live "песочницы"](../xbox-live-sandboxes.md) сведения о "песочницы".

## <a name="build-and-test-the-project"></a>Построение и тестирование проекта

При выполнении название в редакторе, вы увидите фиктивными данными, при попытке использовать функции Xbox Live. Например если вы [Добавление функций в возможностях](unity-prefabs-and-sign-in.md) к сцене и попробуйте выполнить вход, вы увидите **имитировать пользователя** отображаются как имя профиля, со значком заполнителя. Чтобы войти с использованием реальных профиля и протестировать функции Xbox Live в заголовок вашей, необходимо создать решение универсальной платформы Windows и запустите его в Visual Studio.  Можно построить проект UWP в Unity, выполнив следующие действия:

1. Откройте **параметры построения** окно, выбрав **файл** > **параметры построения**.
2. Добавьте все автоматически, которые вы хотите включить в построение в разделе **построения кадром** раздел.
3. Переключиться в режим **универсальной платформы Windows** , выбрав **универсальной платформы Windows** под **платформы** и щелкнув **переключить платформу**.
4. Задайте **SDK** для **10.0.15063.0** или более поздней версии.
5. Чтобы включить отладку проверку сценариев **Unity C# проекты**.
6. Нажмите кнопку **построения** и указать расположение проекта.

![параметры сборки](../images/unity/build_settings.JPG)

После завершения сборки Unity будет создан новый файл решения универсальной платформы Windows, которые потребуются для выполнения в Visual Studio:

1. В указанной папке откройте  **&lt;имя_проекта&gt;.sln** в Visual Studio.
2. На панели инструментов в верхней части, выберите **x64** и развертывание в **локальный компьютер**.

Если вы включили **отладки скриптов** при построении решения универсальной платформы Windows из Unity, затем скрипты будут находиться по **сборки-CSharp (универсальной Windows)** проекта.

![Имитировать пользователя: 123456789](../images/unity/get-started-with-creators/visualStudio.PNG)

> [!NOTE]
> Прежде чем использовать сборки Visual Studio для тестирования игры с реальными данными, выполните [этот контрольный список](test-visual-studio-build.md) для обеспечения название будут иметь возможность доступа к службе Xbox Live.

> [!IMPORTANT]
> Начиная с версии может 2018 г. Теперь требуется внести обновления файла package.appxmanifest.xml чтобы правильно протестировать название универсальной платформы Windows в Visual Studio. Выполните указанные ниже действия.
>
> 1. Поиск в обозревателе решений для файла (Package.appxmanifest.XML)
> 2. Щелкните правой кнопкой мыши файл и выберите Просмотреть код.  
    Если просмотреть код недоступен или файл package.appxmanifest не имеет расширения. Необходимо будет открыть файл xml и выполните оставшиеся шаги.
> 3. В разделе `<Properties></Properties>` разделе, добавьте следующую строку: `<uap:SupportedUsers>multiple</uap:SupportedUsers>`.
> 4. Разверните игры игровой приставки Xbox путем запуска удаленной отладки сборки из Visual Studio. Вы найдете инструкции по настройке названием на Xbox в [Настройка вашей универсальной платформы Windows в среде разработки Xbox](../../xbox-apps/development-environment-setup.md) статьи.
>
> Часть Конфигурация изменена может выглядеть, как он Включение многопользовательских, но по-прежнему необходимо запустить игру в сценариях одного участника.

## <a name="try-out-the-examples"></a>Проверить примеры

Все готово к использованию Xbox Live в проекте Unity! Попробуйте открыть сцен в **Xbox Live/Examples** просмотрите подключаемый модуль в действии и примеры того, как использовать функцию самостоятельно. Выполнение примеров в редакторе обеспечит фиктивными данными, но при сборке проекта в Visual Studio и [связать учетную запись Xbox Live с использованием песочницы,](authorize-xbox-live-accounts.md), вы можете войти с помощью тегом игрока.

Попробуйте **SignInAndProfile** сцены для входа в учетную запись Майкрософт **Leaderboard** сцены для создания списка лидеров и **UpdateStat** сцены для Отображение и обновление статистики.

## <a name="see-also"></a>См. также

* [Вход в Xbox Live в Unity](unity-prefabs-and-sign-in.md)
* [Авторизация учетных записей, Xbox Live](authorize-xbox-live-accounts.md)
