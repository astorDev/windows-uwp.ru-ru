---
title: Добавьте в проект Unity player статистики и списки лидеров
description: Узнайте, как использовать подключаемый модуль Xbox Live Unity для добавления в проект Unity stats проигрывателя и списки лидеров.
ms.assetid: 756b3c31-a459-4ad2-97af-119adcd522b5
ms.date: 10/19/2017
ms.topic: article
keywords: Xbox live, xbox, игры, универсальной платформы Windows, windows 10 для настольных ПК, xbox, один, Unity, создатели
ms.localizationpriority: medium
ms.openlocfilehash: 17af9afc8a9048e7222115d2afdc6108d25df1d7
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57658139"
---
# <a name="add-player-stats-and-leaderboards-to-your-unity-project"></a>Добавьте в проект Unity player статистики и списки лидеров

> [!IMPORTANT]
> Подключаемый модуль Xbox Live Unity не поддерживает достижений и online многопользовательскую и рекомендуется только для [Xbox Live Creators Program](../developer-program-overview.md) членов.

После добавления [Xbox Live вход](unity-prefabs-and-sign-in.md) проекта Unity, следующим шагом является добавление stats проигрывателя и списки лидеров в зависимости от этих stats проигрывателя.

С помощью [подключаемый модуль Xbox Live Unity](https://github.com/Microsoft/xbox-live-unity-plugin), можно легко добавить stats проигрывателя и списки лидеров в проекте Unity. Как для входа в действия, вы можете включить prefabs или связать включенные скрипты пользовательских игр объектов.

## <a name="prerequisites"></a>Предварительные условия
1. [Настройка Xbox Live в Unity](configure-xbox-live-in-unity.md)
2. [Вход в Xbox Live в Unity](unity-prefabs-and-sign-in.md)

## <a name="player-stats"></a>Статистика проигрывателя

Stat проигрывателя является любой интересных статистического показателя, который необходимо отслеживать для игроков. Статистика, используемых для отслеживания с помощью Xbox Live должно быть stats, относящиеся к исполнителю, которые отображаются какие-либо действия. Эти статистические данные проигрывателя чаще всего используются для построения списки лидеров, который можно просмотреть игроков, чтобы определить, как их производительность ранжирует с партнерами. Все статистики проигрывателя считаются «избранные stats», это означает, что stat будет отображаться на странице GameHub для игры.

Статистика проигрыватель должен представлять одно значение. Подключаемый модуль Xbox Live Unity содержит prefabs для integer, double и строка статистики. Кроме того предоставляется для базового объекта stat, который может быть расширен в другие типы данных.

Дополнительные сведения о проигрывателе статистики, см. в разделе [stats проигрывателя](../leaderboards-and-stats-2017/player-stats.md).

> [!NOTE]
> Для использования со службой Xbox Live player stats или списки лидеров, необходимо иметь успешно вошедшего пользователя, прежде чем вы сможете использовать все данные.

## <a name="using-the-player-stat-prefabs"></a>С помощью prefabs stat проигрывателя

Существует несколько prefabs в подключаемый модуль Xbox Live Unity, который можно использовать, относящиеся к stats проигрывателя:

* IntegerStat: Stat, который может быть выражен в виде целочисленного значения, такие как общее число приводит к завершению в сеанс.
* DoubleStat: Статистика, которая может быть выражен как число с плавающей запятой, таких как отношение kill и смерти.
* StringStat: Stat, который может быть выражен в виде строкового значения, обычно перечисления, например ранг, присвоенных цикла, такие как «Золотой», «Silver» или «Бронзовую».
* StatPanel: Пример пользовательского интерфейса, который можно использовать для отображения текущее значение stat.

Чтобы добавить stat проигрывателя, просто перетащите готового блока, который соответствует типу данных stat на сцене. В инспекторе Unity для stat можно задать три значения:

* Идентификатор stat. Это должно соответствовать Идентификатору, настроенному в центре партнеров и чувствительно к регистру.
* Отображаемое имя stat, (это имя отображается в пользовательском Интерфейсе prefab StatPanel).
* Начальное значение stat в начале сцены.

Можно использовать **StatPanel** готового блока, чтобы отобразить значение stat. Для этого перетащите **StatPanel** prefab на сцене. Можно указать stat для отображения путем перетаскивания stat gameobject для **Stat** поле **StatPanel** объекта в инспекторе Unity.

### <a name="manipulating-the-player-stat-values"></a>Обработка значений stat проигрывателя

Проигрыватель stat объекты имеют ряд функций, которые могут вызывать, чтобы изменить значение параметра stat. Эти функции можно вызывать из других подпрограмм или привязаны к элементам пользовательского интерфейса. Вы можете изучить **DoubleStat**, **IntegerStat**, и **StringStat** скрипты, чтобы увидеть примеры функций, чтобы изменить значение stat. Можно изменить или создать новые сценарии для представления статистики с помощью более сложных функций и логики. Новые классы stat должны расширять `StatBase` класс, определенный в `StatBase` скрипта.

Например, как простой тест, добавлением кнопки пользовательского интерфейса в сцену, а также в `OnClick` события кнопки в инспекторе Unity, добавить **IntegerStat** объекта и вызовите `Increment()` функции, чтобы увеличить значение stat на единицу каждый раз при нажатии кнопки.

Если у вас есть stat, также привязаны к **StatPanel** объект, вы увидите значение stat обновлять при каждом нажатии кнопки.

Каждый раз при обновлении вашей stats (инкремента, декремента и т.д.), значения обновляются локально. Чтобы эти обновления stat отражаются в Xbox Live, должны произойти две вещи. Во-первых необходимо задать значение "Статистика" со значением StatisticManager.SetStatistic функций. Существует три `StatisticManager` функции, чтобы задать статистики, `StatisticManager.SetStatisticIntegerData(XboxLiveUser user, String statName, Int64 value)`, `StatisticManager.SetStatisticNumberData(XboxLiveUser user, String statName, Double value)`, и `StatisticManager.SetStatisticStringData(XboxLiveUser user, String statName, String value)`. Каждый из этих функций позволяет установить соответствующее значение для типа данных из вашего stat. Вторая вещь, необходимо выполнить, чтобы обновить ваш stats на сервере, является *flush* локальных данных. Данные автоматически получает сброшены каждые 5 минут, `StatManagerComponent` скрипта.  Если игра заканчивается до 5 минут, необходимо обязательно вручную очистить данные сначала к убедитесь, что вы не потеряете этого выполнения. Чтобы сделать это, необходимо вызвать `statManagerComponent.RequestFlushToService()` метод, не забывая вызывать его для **XboxLiveUser** stat записывается для.

> [!TIP]
> Он считается наилучшим решением будет всегда очистить данные до окончания игры, чтобы убедиться в том, что ход выполнения не теряются.

### <a name="checking-and-verifying-stats"></a>Проверка и проверки статистики

`StatisticManager` Класс имеет две функции, которые полезны для проверки на статистические данные, настроенные для `XboxLiveUser`, `StatisticManager.GetStatisticNames(XboxLiveUser user)` и `StatisticManager.GetStatistic(XboxLiveUser user, String statName)`. `GetStatisticNames()` предоставит `list<string>` для XboxLiveUser предоставленные заполнять имена статистики. Эти имена могут использоваться для вызова текущего значения статистики путем вызова `GetStatistic()` функции. Важно отметить, что статистические данные можно считывать из службы Xbox Live stats его не рекомендуется использовать его для игр логики, но скорее, чтобы проверить состояние статистики после он был отправлен. Служба предназначена только для запуска других служб, например списки лидеров и не предназначен в качестве источника истины для статистики в игре. Очень важно, что название обрабатывать всю логику статистики не выполняется никаких проверок на вашей статистики в службе Xbox и он просто принимает любое значение, присваиваемое как текущее состояние кластерного.

## <a name="leaderboards"></a>Списки лидеров

Список лидеров представляет упорядоченный, нумерованный список игроками, которые добились «рекомендации» значение stat. Например список лидеров могут быть перечислены людей, которые добились чемпионом на краткая информация состояния гонки, что игроки можно сравнить рекомендации состязания времени, затраченном на лучшее время состояния гонки, достигается игроков.

Списки лидеров основаны на статистику проигрывателя, отправленных в службу Xbox Live игры. Таким образом данные списка лидеров только для чтения, так как их нельзя изменять непосредственно.

Подключаемый модуль Xbox Live Unity предоставляет "список лидеров" Пример готового блока, который можно использовать, чтобы понять, как лидеров в игре.

Дополнительные сведения о списки лидеров, см. в разделе [списки лидеров](../leaderboards-and-stats-2017/leaderboards.md).

## <a name="using-the-leaderboard-prefabs"></a>С помощью списка лидеров prefabs

Подключаемый модуль Xbox Live Unity содержит два prefabs для списки лидеров.

* "Список лидеров": Объект, который представляет список лидеров и содержит простой пользовательский Интерфейс для отображения значений из списка лидеров.
* LeaderboardEntry: Объект, представляющий один ряд список лидеров.

Можно перетащить **Leaderboard** prefab на сцене. В инспекторе Unity можно задать следующие атрибуты:

* Stat: Stat gameobject, с которой связан этот список лидеров.
* Тип "список лидеров": Область результатов, которые должны быть возвращены для операции "список лидеров".
* Количество записей: Количество строк данных, отображаемых на одной странице.

> [!NOTE]
> Stat часть списка лидеров prefab изначально пуст. Попытайтесь перетащить один из stat prefabs, упомянутых выше, в объект gameobject слот для тестирования.

В редакторе Unity **Leaderboard** prefab всегда будет отображаться те же данные макетов, независимо от параметров инспектора. Необходимо построить и экспортировать проект в Visual Studio и войдите с помощью авторизованного пользователя, чтобы увидеть значения реальные данные. Дополнительные сведения см. в разделе [Настройка Xbox Live в Unity](configure-xbox-live-in-unity.md).

## <a name="see-also"></a>См. также

* [Вход в Xbox Live в Unity](unity-prefabs-and-sign-in.md)
* [Настройка Xbox Live в Unity](configure-xbox-live-in-unity.md)
* [Пример списка лидеров в сцене](setup-leaderboard-example-scene.md)
* [Получение данных "список лидеров"](unity-leaderboard-from-scratch.md)
