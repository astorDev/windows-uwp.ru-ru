---
title: Xbox Live ограничение нормально точные скорости
description: Узнайте, как Xbox Live детально ограничения частоты запросов принципы работы и для предотвращения название не оценили limited.
ms.assetid: ceca4784-9fe3-47c2-94c3-eb582ddf47d6
ms.date: 04/04/2017
ms.topic: article
keywords: Xbox live, xbox, игры, универсальной платформы Windows, windows 10 для настольных ПК, xbox, регулирование, ограничение частоты
ms.localizationpriority: medium
ms.openlocfilehash: b79a4f0a873ffaf5dd824a0c9832f61aa4a7d77f
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57628689"
---
# <a name="xbox-live-fine-grained-rate-limiting"></a>Xbox Live ограничение нормально точные скорости

## <a name="introduction"></a>Введение

В этой статье описывается Xbox Live ограничение нормально точные скорости. Помимо ограничения скорости, в этом документе также планирует помогают определить, если вы ограничиваются, а если вы в целом, какие средства и ресурсы, в вашем распоряжении.

## <a name="terminology-guide"></a>Руководство по терминологии

| Термин         | Определение                                                  |
|--------------|-----------------------------------------------------------------------------
| FGRL         | Детально настроенные ограничения скорости                                                  
| XSAPI        | Интерфейс прикладного программирования для службы Xbox                                 
| CU           | Обновление содержимого                                                              
| Ускорение        | Представляет объем запросов, полученных за короткий период времени          
| Выдержать      | Представляет большое число вызовов, принимаемых постоянно за период времени
| Заголовок имени пользователя | Представляет связывание пользователя и название как одна сущность                    
| XLTA         | Xbox Live трассировки анализатор, используемый для определения заголовка осуществляется ограничена

## <a name="xbox-live-fine-grained-rate-limiting"></a>Xbox Live ограничение нормально точные скорости

**Тонкую детального ограничение скорости** была назначена для продвижения **прямым использования** общих ресурсов, Xbox Live, среди различных должностей. Это решение является как большинство традиционных ограничивающим системные службы, сохранение число запросов, сделанных в сущности в течение указанного периода времени.

Сущности, достигшие ограничения указанной службы перемещаются отклонения состояния, где все входящие запросы от сущности будут поддерживаться немедленно. Сущности могут только для выхода из этого состояния, по истечении указанного периода времени приводит к количество связанных сущностей для сброса.

Тонкая детального ограничение скорости использует тот же механизм core, упомянутых выше, однако вместо отслеживания одной сущности FGRL отслеживает сочетание **пользователя и название** и сравнивает связанные подсчет **два** различные **ограничения** как oppose к одному. В каждой службе, это означает, что количество запросов для GameClips не влияет на количество запросов наличие применяются FGRL два ограничения. Следующие разделы будут более подробно о пользователе и связывание title, два ограничения и ограничения объекта ответа HTTP 429.

## <a name="fair-usage"></a>Справедливого использования

Xbox Live полагает, что каждый пользователь должен иметь же высокое качество работы независимо от того, какие игры или приложения, которую он играет. FGRL предназначен для решения в следующем сценарии:

Разработчик объект только что выпустила заголовок, который следует за все Xbox, live рекомендации для обеспечения оптимального использования служб, хотя разработчик B также выпустила заголовок тем не менее это одна имеет неизвестный ошибку. Эта ошибка приводит к заголовку и каждого пользователя, для рассылки спама присутствия, что приводит к службе, перейдя в условиях большой нагрузки. Служба замедляет и со временем прерывается нарушения работы для разработчиков A пользователей, несмотря на то, что она была разработчика B ошибки, вызвавшей ошибку. Если была реализована FGRL службы было бы возможность прекратить получать запросы от промах, поведение title, что позволяет обслуживать его справедливого срезе круговой диаграммы ресурсов разработчика A title.

## <a name="title-and-user-granularity"></a>Степень детализации заголовок и пользователя

Заголовок и пользователя были выбраны как ключ для обеспечения справедливого использования ресурсов, Xbox Live. Отслеживание просто пользователь создаст сценарий, в котором взаимодействие с пользователем будет полностью зависит от каждого названия интеграции. Например большинство заголовков использовать службу людей уже, поэтому для данного примера, предположим, что нормально детального ограничение скорости был настроен на службы людей, чего не более чем 100 запросов в течение 5 минут. Если пользователь в игре, которая сделала 100 запросов в минуту было бы превышено ограничение, и пользователь не сможет отправлять запросы в службу людей; Представьте себе, что в то же время пользователь затем переходит назад на начальном экране и нажимает кнопку свой список друзей. Так как он уже будет превышен предел, вызов списка друзей будет завершаться сбоем, пока 5 минут, промежуток времени истек, несмотря на то, что начальный экран не отвечал за размещение пользователя в ограниченном состоянии.

Можно также ограничить на основе только заголовок будет давать одинаково недобросовестной результаты. Установка ограничения на заголовок приводит к пропуску популярность заголовки и запросы просто быть сначала переходим получения запросов до достижения ограничения.

Связывание пользователя и заголовка гарантирует, что заголовок не использует больше ресурсов, чем определяется разрешениями, подходящими, учитывая количество активных пользователей, при этом предоставляя согласованный среза круговой диаграммы ресурсов каждого пользователя.

![](../../images/FGRL.png)

На приведенной выше схеме показано представление высокого уровня, о том, как запрос обрабатывается. Сначала запрос создается и затем полученных нужную службу. После получения запроса, система проверяет, сколько раз пользователь и title вместе обращались к службе см. в разделе. Если запрос выполнен в пределах допустимого, затем он обрабатывается в обычном режиме. Если обнаружено, что запрос будет равна или превышает предел сбросьте его и вместо этого возвращают ответ 429 служб. Ответ покажет, как долго до периода откатывает изменения по и могут обрабатываться запросы пользователя и название.

## <a name="burst-and-sustain-limits"></a>Ускорение и поддерживать ограничения

В большинстве случаев ограничение скорости состоит из одно ограничение на конечную точку, которая отслеживается в течение указанного периода времени. Этот период представляет количество времени, что отслеживается счетчиком сущности запроса. В конце периода сущностей счетчик сбрасывается до 0, чтобы начать отслеживание еще раз.

Этот подход работает для большинства API пользователя, но не достаточно устойчиво для игр и приложений, которые вызывают Xbox live. Решения выше предполагается, что люди при вызове в согласованное постоянной прогнозируемого манор. В случае, Xbox Live, в зависимости от службы и запрашивающий title/приложений значительно отличаются шаблонов вызова.

Выбор только одно ограничение в этом случае потребуется влияния на оба конца спектра шаблон вызова. Xbox Live решение использует два периоды и ограничения. Меньший период называется период расширительных более мощного называется Sustain период. Время максимальной нагрузки период для FGRL всегда составляет 15 секунд, тогда как sustain всегда составляет 300 секунд (5 минут) таким образом в течение 5 минут sustain периода существует 20 пакетов периодов. Оба пакета и обеспечения ограничения отслеживаются в то же время и таким образом число запросов в то же время. Оба пакета и sustain устанавливаются службы это означает, что каждая служба имеет свой собственный расширительных и sustain число. Помогут вам понять, как работают эти два ограничения друг с другом в таблице ниже показан пользователь, исполняющий заголовок, который делает запросы службы, в которой реализован FGRL. В этом случае расширительных это значение равно 30 запросов в 15 секунд и sustain это значение равно 100 запросов за 5 минут.

| Период времени (в секундах)  | Запросов за период пакетов  | Период обработки запросов в  | \# регулируемых запросов в течение интервала 15 сек | Какие ограничения? (максимальной нагрузки, обеспечения, или оба)  |
|-------------|--------------|----------------|-----------------------------------------------------|---------------------------|
| 0-15        | 35           | 35             | 5                                                   | Ускорение                     |
| 15-30       | 28           | 63             | 0                                                   | Н/Д                       |
| 30-45       | 21           | 84             | 0                                                   | Н/Д                       |
| 45-60       | 36           | 120            | 20                                                  | Устройства обоих типов                      |
| 60-75       | 24           | 144            | 24                                                  | Выдержать                   |
| …           | …            | …              |                                                     | …                         |
| 285-300     | 4            | 148            |                                                     | Выдержать                   |

Таблица показывает, что в первые 15 секунд пользователя поездок, пакетного ограничения путем внесения 35 запросов. Эти 5 дополнительных запросов, удаляется, а 5 429 отправляются ответы. Стоит отметить, что эти 5 запрос хотя отрегулирован по-прежнему учитываются sustain ограничение. После обработки либо ограничение запросы не позволить показанные при trip ограничения на 45 второй метке и снова при только 4 запросы выполняются на втором уровне 285 пометить.

## <a name="http-429-response-object"></a>HTTP 429 объект ответа

Когда связанный счетчик пользователя и название уровне или выше либо пакетного или обеспечения ограничение служба не будет обрабатывать запрос и, вместо этого возвращают ответ HTTP 429. Соответствующий код HTTP 429 «слишком много запросов» будет сопровождаться заголовка, который содержит значение «повтор после Х секунд». FGRL 429 содержит повторную попытку после заголовок, указывающий количество времени, вызывающим сущностям ожидания перед повторной попыткой. Разработчики, использующие XSAPI не придется волноваться, поскольку XSAPI учитывает и обрабатывает заголовок Retry-After. Окончательный ответ будет содержать следующие поля:

| Имя поля      | Тип значения | Пример                | Определение                       |
|-----------------|------------|------------------------|----------------------------------|
| Версия         | целое число    | `"version":1`          |                                  |
| currentRequests | целое число    | `"currentRequests":13` | Общее количество отправленных запросов    |
| значение maxRequests     | целое число    | `"maxRequests":10`     | Общее число запросов, разрешенных |
| periodInSeconds | целое число    | `“periodInSeconds”:15` | Временное окно                      |
| Тип            | Строка     | `“type”:”burst”`       | Тип предел регулирования              |

## <a name="implemented-limits"></a>Реализованный ограничения

Следующие службы реализована FGRL ограничения, с принудительным применением из этих ограничений на месте с момента **мая 2016 г**. Таким образом, эти ограничения будут совпадать для всех "песочницы" и заголовки. **Заголовок, опубликованных с помощью платформы разработки Xbox или центра партнеров и поставленные до мая 2016 г. будет считается прежних версий и поэтому исключенные.**

| **Название** | **Повышение предела** (15 секунд на пользователя в заголовок) | **Выдержать ограничение** (300 секунд на пользователя в заголовок) | **Ограничение сертификации** (10 x постоянная, 300 секунд на пользователя в заголовок) |
|----------------------------|---------------------------|----------------------------|----------------------------|
| Чтение STATS                 | 100                       | 300                        | 3000                       |
| Профиль                    | 10                        | 30                         | 300                        |
| MPSD                       | 30                        | 300                        | 3000                       |
| Присутствие                   | Чтение 10, записи 3          | Чтение 100 записи 30         | Чтение 1000, написать 300       |
| Социальные сети                     | 10                        | 30                         | 300                        |
| Списки лидеров               | 30                        | 100                        | 1000                       |
| Достижения               | 100                       | 300                        | 3000                       |
| Интеллектуальное сопоставление                | 10                        | 100                        | 1000                       |
| Пользовательские записи                 | 100                       | 300                        | 3000                       |
| Статистика записи                | 100                       | 300                        | 3000                       |
| Конфиденциальность                    | 10                        | 30                         | 300                        |
| Треф                      | 10                        | 30                         | 300                        |

В таблице выше представляет текущий список служб, которые были выбраны для FGRL. Этот список не является окончательным, как новые службы, и существующие службы может быть добавлена. Когда служба будет добавляться в таблице будет обновляться и объявления будут внесены. Ограничения, представленных в таблице также не должны рассматриваться как завершает работу. Как службы, изменять и развивать это слишком будет ограничения, однако вы получите уведомление, и будут внесены необходимые исключения прежних версий.

Начиная с версии **апреля 2018 г.** заголовки не пройдет сертификации, если они превышают sustain ограничения в 10 раз (с какой скоростью ограничение вступит в силу ограничений).  Например если устойчивый ограничение, по которому FGRL вступает в силу равным 300 вызовы в 300 секунд, как указано в приведенной выше таблице, заголовки равна или превышает 3000 вызовы в 300 секунд, сертификацию не пройдут. 

## <a name="service-mapping-and-title-effects-of-rate-limiting"></a>Сопоставление службы и Title, последствия ограничение скорости

| **Название** | **Конечная точка службы** | **Игра Anticipiated последствия FGRL**
| --- | :---: | --- 
| Чтение STATS | userstats.xboxlive.com | Достижения и списки лидеров операции не обновлен или возвращен.
| Профиль | Profile.xboxlive.com | Данные игрока не обновляется и отображаются правильно.
| MPSD | sessiondirectory.xboxlive.com | Соединения и приглашения не будет выполнено правильно, сеансы не создан или обновлен надлежащим образом, что может привести к сбою title.
| Присутствие | Presence.xboxlive.com | Присутствие в игре игрока бы оказаться неточным.
| Социальные сети | Social.xboxlive.com | Влияет на все операции записи друзей (например, Добавление друзей, превращение кого-нибудь избранного и т.д.) и может повлиять на операции чтения friend (например, получить список friend). Разработчики, рекомендуется вызвать peoplehub для чтения, а не social.xboxlive.com.
| Списки лидеров | leaderboards.xboxlive.com | В игре UX для списки лидеров бы не заполнить или обновления.
| Достижения | achievements.xboxlive.com | В игре UX для достижения разблокировать не обновлялся.
| Интеллектуальное сопоставление | momatch.xboxlive.com | Совпадения не настраивается успешно.
| Пользовательские записи | userposts.xboxlive.com | Пользовательские записи не будет отображаться.
| Статистика записи | statswrite.xboxlive.com | Достижения и списки лидеров операции, не обновляется.
| Конфиденциальность | Privacy.xboxlive.com | Сбои конфиденциальности может привести заблокировали доступ для всех вызывающих объектов.
| Треф | Clubhub.xboxlive.com | Проигрыватель не сможет их в игре клубы см. в разделе.

**ПРИМЕЧАНИЕ.** Последние сопоставление API регулярно обновляется и можно найти в разделе [Live сопоставление интерфейсов API анализатора трассировки](https://github.com/Microsoft/xbox-live-trace-analyzer/blob/master/Source/XboxLiveTraceAnalyzer.APIMap.csv).

## <a name="faq"></a>Вопросы и ответы

## <a name="how-can-i-determine-i-am-being-throttled-and-what-steps-can-i-take"></a>Как определить, я являюсь выполняется регулировка и какие шаги можно предпринять?

Обратитесь к [рекомендации Xbox Live](best-practices-for-calling-xbox-live.md) документа, так как он будет содержать действия по улучшению ваш шаблон вызова, а также объяснение того, как утверждение XSAPI и диспетчеры XSAPI социальных сетей и многопользовательскую может использоваться для уведомлений о и проблем регулирования.

Другой вариант — записать трассировку вызовов Xbox Live, а затем анализировать этой трассировки с помощью [Xbox Live трассировки анализатор](https://docs.microsoft.com/windows/uwp/xbox-live/tools/analyze-service-calls).  Чтобы записать трассировку, можно либо использовать Fiddler для записи. Файл SAZ, либо можно использовать ведение журнала трассировки встроенные XSAPI. Дополнительные сведения о том, как использовать Включение трассировки в XSAPI см. в разделе «Анализ вызовы к службам Live Xbox» страница документации по Xbox Live. Получив трассировки, Xbox Live трассировки анализаторе средство выдаст предупреждение при обнаружении регулирование вызовов.

Вы найдете рекомендации бумага на сайте docs.Microsoft.com GDNP и пакета SDK и XDK 1602 и более поздних версий.

### <a name="can-limits-change"></a>Можно ли изменить ограничения?

Целью является то, что со временем не изменится опубликованного ограничения. Тем не менее если бы возникнуть необходимость, это возможно, что некоторые ограничения, удалось установить более строгие; в этом случае заголовки уже выпущены для розничной ТОРГОВЛИ должны быть внесены будут исключены из обновленные ограничения.

### <a name="are-more-services-going-to-get-limits"></a>Другие службы будут получить ограничение?

Да, дополнительные службы и новые службы могут и будут создавать ограничения. Хотя так же как и в первом выпуске FGRL вы получите уведомление и будут выполнены соответствующие меры предосторожности.

### <a name="when-will-these-changes-take-effect"></a>Когда эти изменения вступят в силу?

Пределы скорости выбран принудительно, поскольку **мая 2016 г**.  Начиная с версии **апреля 2018 г.**, заголовки, превышающие указанный sustained ограничения в 10 раз, или больше не пройдет процесс сертификации Xbox.

### <a name="what-if-we-cant-adhere-to-the-limits"></a>Что делать, если мы не соответствует ограничениям?

См. в разделе [рекомендации Xbox Live](best-practices-for-calling-xbox-live.md) и убедиться выполнив следующие действия.  Также рассмотрите возможность использования [социальных сетей manager](../../social-platform/intro-to-social-manager.md) выполняется ограничений с любыми службами социального ли.

После выполнения этих действий не удается, остаются под ограничения, обратитесь к своему менеджеру разработчика.

**Примечание. Заголовки равна или превышает 10 x sustain указанного предела не смогут пройти cert после апреля 2018 г**.  Например если устойчивый ограничение, по которому FGRL вступает в силу равным 300 вызовы в 300 секунд, как указано в приведенной выше таблице, заголовки равна или превышает 3000 вызовы в 300 секунд, сертификацию не пройдут.

### <a name="what-about-my-existing-title"></a>Как насчет существующий заголовок моего?

Любые заголовки в розничной ТОРГОВЛЕ до апреля 2018 года считаются прежних версий и будут исключены.

### <a name="content-updates"></a>Обновление содержимого?

Для предыдущих версий или исключенных заголовок обновления содержимого также будут исключены, хотя настоятельно рекомендуется использовать средства и ресурсы для оптимизации аспекты интеграции службы игры.

### <a name="can-i-get-an-exemption-for-my-game-until-i-can-make-a-content-update"></a>Можно получить исключение для игры пока я обновление содержимого?

Свяжитесь со своим диспетчером учетных записей разработчика.
