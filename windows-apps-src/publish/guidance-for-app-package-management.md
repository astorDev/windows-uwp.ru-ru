---
author: jnHs
Description: Learn how your app's packages are made available to your customers, and how to manage specific package scenarios.
title: Руководство по управлению пакетами приложения
ms.assetid: 55405D0B-5C1E-43C8-91A1-4BFDD336E6AB
ms.author: wdg-dev-content
ms.date: 03/28/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
ms.localizationpriority: high
ms.openlocfilehash: cd54530c0f143258d960c84ad359078055053a07
ms.sourcegitcommit: cceaf2206ec53a3e9155f97f44e4795a7b6a1d78
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/03/2018
---
# <a name="guidance-for-app-package-management"></a>Руководство по управлению пакетами приложения

Узнайте, как делать пакеты приложения доступными для пользователей, а также как управлять определенными сценариями пакетов.

-   [Версии ОС и распространение пакетов](#os-versions-and-package-distribution)
-   [Добавление пакетов для Windows 10 в ранее опубликованное приложение](#adding-packages-for-windows-10-to-a-previously-published-app)
-   [Поддержка совместимости пакетов для Windows Phone 8.1](#maintaining-package-compatibility-for-windows-phone-81)
-   [Удаление приложения из Магазина](#removing-an-app-from-the-store)
-   [Удаление пакетов для ранее поддерживавшегося семейства устройств](#removing-packages-for-a-previously-supported-device-family)


## <a name="os-versions-and-package-distribution"></a>Версии ОС и распространение пакетов

Разные операционные системы могут запускать разные типы пакетов. Если на устройстве пользователя может быть запущено более одного пакета, Microsoft Store предоставит наиболее подходящий вариант.

Как правило, более поздние версии ОС могут запускать пакеты, предназначенные для предыдущих версий ОС для того же семейства устройств. Однако клиенты будут получать эти пакеты, только если приложение не содержит пакет, предназначенный для текущей версии ОС.

Например, на устройствахWindows 10 можно запускать приложения для всех ранее поддерживаемых версий ОС (для семейства устройств). На настольных устройствах с Windows 10 можно запускать приложения, которые были созданы для Windows8.1 или Windows8; на мобильных устройствах с Windows 10 можно запускать приложения, которые были созданы для Windows Phone 8.1, Windows Phone8 и даже Windows Phone 7.x. 

В следующих примерах показаны различные сценарии для приложения, которое содержит пакеты, предназначенные для различных версий ОС (если нет определенных ограничений пакетов, которые не разрешают их запуск в каждой версии ОС и на всех типах устройств, перечисленных здесь; например, архитектура пакета должна соответствовать устройству). 

### <a name="example-app-1"></a>Пример приложения 1

| Операционная система, для которой предназначен пакет | Операционные системы, которые получат этот пакет |
|-------------------------------------|----------------------------------------------|
| Windows 8.1                         | Настольные устройства Windows 10, Windows 8.1      |
| Windows Phone8.1                   | Мобильные устройствас Windows 10, Windows Phone 8.1 |
| Windows Phone 8                     | Windows Phone 8                              |
| Windows Phone 7.1                   | Windows Phone 7.x                            |

В примере приложения 1 приложение еще не имеет пакетов универсальной платформы Windows (UWP), созданных специально для устройств Windows 10, однако пользователи Windows10 все равно могут получить это приложение. Эти пользователи получат лучшие из доступных пакетов для своего типа устройства.

### <a name="example-app-2"></a>Пример приложения 2

| Операционная система, для которой предназначен пакет  | Операционные системы, которые получат этот пакет |
|--------------------------------------|----------------------------------------------|
| Windows10 (семейство универсальных устройств) | Windows10 (все семейства устройств)             |
| Windows 8.1                          | Windows 8.1                                  |
| Windows Phone8.1                    | Windows Phone8.1                            |
| Windows Phone 7.1                    | Windows Phone 7.x, Windows Phone 8           |

В примере приложения 2 отсутствует пакет для Windows 8. Пользователи, которые используют любую другую версию ОС, могут получить это приложение. Все пользователи в Windows 10 получат тот же пакет.

### <a name="example-app-3"></a>Пример приложения 3

| Операционная система, для которой предназначен пакет | Операционные системы, которые получат этот пакет                  |
|-------------------------------------|---------------------------------------------------------------|
| Windows10 (семейство настольных устройств)  | Настольные устройства Windows 10                                    |
| Windows Phone 8                     | Мобильные устройствас Windows 10, Windows Phone 8, Windows Phone 8.1 |

Поскольку в примере приложения 3 отсутствует пакет UWP, предназначенный для семейства мобильных устройств, пользователи мобильных устройств с Windows10 получат пакет для Windows Phone 8. Если в это приложение в будущем добавят пакет, предназначенный для семейства мобильных устройств (или семейства универсальных устройств), этот пакет будет доступен для пользователей мобильных устройств с Windows 10 вместо пакета Windows Phone 8.

Также обратите внимание, что в этом примере приложения отсутствует пакет для Windows Phone 7.x.

### <a name="example-app-4"></a>Пример приложения 4

| Операционная система, для которой предназначен пакет  | Операционные системы, которые получат этот пакет |
|--------------------------------------|----------------------------------------------|
| Windows10 (семейство универсальных устройств) | Windows10 (все семейства устройств)             |

В примере приложения 4 любое устройство под управлением Windows10 может получить это приложение, но оно не будет доступно клиентам, использующим любые предыдущие версии ОС. Так как пакет UWP ориентирован на семейство универсальных устройств, он будет доступен на любом устройстве с Windows 10.

<a name="adding-packages-for-windows-10-to-a-previously-published-app"></a>

## <a name="adding-packages-for-windows-10-to-a-previously-published-app"></a>Добавление пакетов для Windows 10 в ранее опубликованное приложение

Если ваше приложение для Windows8.x и/или WindowsPhone8.x опубликовано в Магазине и вы хотите обновить его для Windows10, создайте новую отправку и добавьте пакеты .appxupload UWP на этапе [Пакеты](upload-app-packages.md). После прохождения сертификации вашим приложением пользователи с Windows 10, у которых уже было приложение, смогут получить пакет UWP в виде обновления из Microsoft Store. Пакет UWP также будет доступен для новых приобретений пользователями, использующими Windows 10.

> [!IMPORTANT]
> Как только клиент, использующий ОС Windows10, получит ваш пакет UWP, вы не можете вернуть данного клиента к использованию пакета для предыдущей версии ОС. 

Обратите внимание, что номер версии пакетов ОС Windows10 должен быть больше, чем номер версии включаемых вами пакетов Windows8, Windows8.1 и WindowsPhone8.1 (или ранее опубликованных вами пакетов для этих версий ОС). Дополнительные сведения см. в разделе [Нумерация версий пакета](package-version-numbering.md).

Дополнительные сведения о создании пакетов приложений UWP для Магазина см. в разделе [Создание пакетов приложений](../packaging/index.md).

> [!IMPORTANT]
> Помните, что если предоставить пакеты, предназначенные для семейства универсальных устройств, каждый клиент, который использовал ваше приложение в любых более ранних версиях операционной системы (ОС WindowsPhone8, Windows8.1 и т.д.) и перешел на ОС Windows10, получит обновление до пакета ОС Windows10.
> 
> Это происходит, даже если вы исключили определенное семейство устройств на этапе отправки [Доступность семейства устройств](upload-app-packages.md#device-family-availability), поскольку выбор **Доступности семейства устройств** относится только к новым приобретениям. Если вы не хотите, чтобы любой пользователь предыдущих версий ОС получил ваш универсальный пакет Windows 10, обязательно обновите элемент [**TargetDeviceFamily**](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-targetdevicefamily) в манифесте APPX для включения только определенного семейства устройств, которое нужно поддерживать.
> 
> Предположим, вы хотите, чтобы только пользователи Windows 8 иWindows 8.1, которые обновились до Windows10, получили ваше приложение UWP, а пользователи Windows Phone 8.1 и более ранних версий сохранили ранее предоставленные пакеты (ориентированные на устройства Windows Phone 8 или Windows Phone 8.1). Для этого необходимо обновить [**TargetDeviceFamily**](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-targetdevicefamily) в манифесте APPX, чтобы включить только **Windows.Desktop** (для семейства настольных устройств), а не оставлять значение **Windows.Universal** (для семейства универсальных устройств), которое по умолчанию включается Microsoft Visual Studio в манифест APPX. Не отправляйте пакеты UWP, ориентированные на семейства универсальных или мобильных устройств (**Windows.Universal** или **Windows.Universal**). Таким образом ваши пользователи Windows 10 Mobile не получат пакетов UWP.
> 
> Дополнительные сведения о семействах устройств см. в разделе [**Общие сведения о семействах устройств**](https://docs.microsoft.com/uwp/extension-sdks/device-families-overview).

## <a name="removing-an-app-from-the-store"></a>Удаление приложения из Microsoft Store

Иногда может потребоваться прекращение предложений приложения клиентам, то есть отменить его публикацию. Для этого выберите вариант **Сделать приложение доступным** на странице **Обзора приложения**. Через несколько часов после подтверждения того, что вы хотите сделать приложение недоступным, оно перестанет отображаться в Microsoft Store, а новые клиенты не смогут получить его (если у них нет [рекламного кода](generate-promotional-codes.md) и они не используют устройство с Windows 10).

> [!IMPORTANT]
> Этот параметр переопределяет все настройки [видимости](choose-visibility-options.md#discoverability), выбранные в ваших отправках. 

Этот параметр действует так же, как если вы создали отправку и выбрали пункт **Отправить продукт в Store, но запретить его поиск там** с помощью параметра **Остановить приобретение**. Тем не менее вам не нужно создавать новую отправку.

Обратите внимание, что пользователи, которые уже получили это приложение, смогут использовать и скачать его снова (и даже смогут получать обновления, если вы отправите пакеты в дальнейшем).

Сделав приложение недоступным, вы по-прежнему будете видеть его на информационной панели. Если вы решите возобновить публикацию приложения, щелкните **Сделать приложение доступным** на странице обзора приложения. В течение нескольких часов после подтверждения приложение станет доступно новым пользователям (если параметры в вашей последней отправке не ограничивают его доступность).

> [!NOTE]
> Если вы хотите оставить приложения доступным, но не хотите предлагать его новым клиентам, использующим определенную версию ОС, создайте новую отправку и удалите все пакеты для этой версии ОС. Например, если ранее у вас были пакеты для Windows Phone 8.1 и Windows 10, но вы не хотите предлагать приложение новым клиентам, использующим Windows Phone 8.1, исключите из отправки все пакеты WindowsPhone8.1. После того как обновление будет опубликовано, новые клиенты, использующие ОС WindowsPhone8.1 не смогут приобрести приложение (при этом клиенты, уже купившие это приложение, смогут и дальше его использовать). Однако приложение останется доступным для новых клиентов, использующих ОС Windows10.


## <a name="removing-packages-for-a-previously-supported-device-family"></a>Удаление пакетов для ранее поддерживавшегося семейства устройств

При удалении всех пакетов для определенного семейства устройств, ранее поддерживавшегося вашим приложением, вам потребуется подтвердить свои действия, прежде чем вы сможете сохранить внесенные изменения на странице **Пакеты**.

При публикации отправки, удаляющей пакеты для семейства устройств, ранее поддерживавшегося вашим приложением, новые клиенты не смогут скачать приложение на устройства этого семейства. В дальнейшем вы можете в любое время опубликовать еще одно обновление, что вернуть пакеты для этого семейства устройств.

Обратите внимание, что даже после удаления всех пакетов, поддерживающих определенное семейство устройств, существующие клиенты, уже установившие приложение на устройства этого типа, смогут и дальше пользоваться им, а также получать все последующие обновления.


## <a name="maintaining-package-compatibility-for-windows-phone-81"></a>Поддержка совместимости пакетов для Windows Phone 8.1

При обновлении приложений, которые ранее были опубликованы для Windows Phone 8.1, применяются некоторые требования для типов пакетов:

-   Если для приложения опубликован пакет Windows Phone 8.1, все последующие обновления должны содержать пакет Windows Phone 8.1.
-   Если для приложения опубликован пакет Windows Phone 8.1 XAP, последующие обновления должны содержать пакет Windows Phone 8.1 XAP, Windows Phone 8.1 APPX или Windows Phone 8.1 APPXBUNDLE.
-   Если для приложения опубликован пакет Windows Phone 8.1 APPX, последующие обновления должны содержать Windows Phone 8.1 APPX или Windows Phone 8.1 APPXBUNDLE. Другими словами, они не могут содержать пакет Windows Phone 8.1 XAP. Это касается расширения APPXUPLOAD, содержащего также APPX Windows Phone 8.1.
-   Если для приложения опубликован пакет APPXBUNDLE Windows Phone 8.1, последующие обновления должны содержать пакет Windows Phone 8.1 APPXBUNDLE. Другими словами, они не могут содержать пакет Windows Phone 8.1 XAP или Windows Phone 8.1 APPX. Это касается расширения APPXUPLOAD, содержащего также APPXBUNDLE Windows Phone 8.1.

Если не следовать этим правилам, при отправке пакетов возникнут ошибки, которые помешают выполнить отправку.