---
Description: Узнайте, как отправлять уведомления из центра партнеров в приложение, чтобы стимулировать группы клиентов и принять меры, например оценка приложения или приобретение надстроек.
title: Отправка целевых push-уведомлений пользователям вашего приложения
ms.date: 10/31/2018
ms.topic: article
keywords: windows 10, uwp, целевые уведомления, push-уведомления, всплывающее уведомление, плитка
ms.assetid: 16386c81-702d-47cd-9f91-67659f5dca73
ms.localizationpriority: medium
ms.openlocfilehash: 9858665eaf36f5cd261dd1098b23aeecccf9179c
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57653219"
---
# <a name="send-notifications-to-your-apps-customers"></a>Отправка уведомлений пользователям вашего приложения

Взаимодействие с клиентами в нужное время и с правильным посылом — залог успеха любого разработчика приложений. Чтобы побудить клиентов выполнить то или иное действие, например оценить приложение, купить надстройку, опробовать новую функцию или скачать другое приложение, можно использовать уведомления (возможно, бесплатно с предоставленным [промокодом](generate-promotional-codes.md)).

[Центр партнеров](https://partner.microsoft.com/dashboard) предоставляет данными платформы взаимодействия клиентов, можно использовать для отправки уведомлений для всех клиентов приложения, или только назначенные подмножество клиентов Windows 10 вашего приложения, которые соответствуют критериям, которые определены в [потребительского сегмента](create-customer-segments.md). Можно также создать уведомлений, отправляемых клиентам более чем одного из ваших приложений.

> [!IMPORTANT]
> Эти уведомления можно использовать только с приложениями UWP.

При рассмотрении содержимого уведомлений учитывайте аспекты, приведенные ниже.
- Содержимое уведомлений должно соответствовать [Политикам Store в отношении содержимого](https://docs.microsoft.com/legal/windows/agreements/store-policies#content_policies).
- Содержимое уведомления не должно включать конфиденциальные или потенциально конфиденциальные сведения.
- Хотя мы делаем все возможное для доставки вам уведомлений по расписанию, иногда могут быть проблемы с задержкой, влияющие на доставку.
- Не отправляйте уведомления слишком часто. Отправка чаще одного раза в 30 минут может показаться назойливой (и во многих случаях лучше отправлять уведомления не так часто).
- Не забывайте, что если клиент, использующий ваше приложение (и вошедший в систему под собственной учетной записью Microsoft на момент определения членства в сегменте), позже передаст свое устройство кому-то другому в пользование, второй человек может увидеть уведомление, которое было нацелено на первоначального клиента. Для получения дополнительных сведений см. раздел [Настройка приложения для получения целевых push-уведомлений](../monetize/configure-your-app-to-receive-dev-center-notifications.md#notification-customers).
- Если вы отправляете одно и то же уведомление пользователям нескольких приложений, невозможно выделить целевой сегмент; уведомление будет отправлено всем пользователям выбранных приложений.


## <a name="getting-started-with-notifications"></a>Начало работы с уведомлениями

Чтобы использовать уведомления для взаимодействия с клиентами, в общем и целом нужно выполнить три условия.

1. **Регистрация приложения для получения Push-уведомлений.** Это сделать, добавив ссылку на Microsoft Store Services SDK в приложении и затем добавив несколько строк кода, который регистрирует канал уведомлений между центра партнеров и приложения. Мы будем использовать этот канал для доставки уведомлений вашим клиентам. Дополнительные сведения см. в разделе [Настройка приложения для получения целевых push-уведомлений](../monetize/configure-your-app-to-receive-dev-center-notifications.md).
2. **Определите целевых клиентов для.** Можно отправить уведомление всем клиентам вашего приложения или (для уведомлений, созданных для одного приложения) группе клиентов, которая называется *сегмент* и которую можно определить по демографическим критериям или критериям дохода. Дополнительные сведения см. в разделе [Создание клиентских сегментов](create-customer-segments.md).
3. **Создание содержимого уведомлений и отправить его.** Например может создать уведомление о новой рекомендует пользователям оценить ваше приложение или отправить уведомление продвижение! специальное предложение для покупке надстройки.


## <a name="to-create-and-send-a-notification"></a>Создание и отправка уведомления

Выполните следующие действия для создания уведомления в центре партнеров и отправить его в сегмент конкретного клиента.

> [!NOTE]
> Прежде чем приложение может получать уведомления из центра партнеров, необходимо сначала вызвать [RegisterNotificationChannelAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesengagementmanager.registernotificationchannelasync) метод в приложение, чтобы зарегистрировать приложение для получения уведомлений. Этот метод доступен в [Microsoft Store Services SDK](https://aka.ms/store-em-sdk). Дополнительные сведения о том, как вызывать этот метод, в том числе пример кода, см. в разделе [Настройка приложения для получения целевых push-уведомлений](../monetize/configure-your-app-to-receive-dev-center-notifications.md).

1. В [центра партнеров](https://partner.microsoft.com/dashboard), разверните **выполнить охват** , а затем выберите **уведомления**.
2. На странице **Уведомления** выберите **Новое уведомление**.
3. В **выберите шаблон** выберите [тип уведомления](#notification-template-types) вы хотите отправить, а затем нажмите кнопку **ОК**.
4. На следующей странице с помощью раскрывающемся меню выберите **Одно приложение** или **Несколько приложений**, для которых требуется создать уведомление. Можно выбрать только приложения, которые были [настроить получение уведомлений с помощью Microsoft Store Services SDK](../monetize/configure-your-app-to-receive-dev-center-notifications.md).
5. В разделе **Параметры уведомлений** выберите **Название** уведомления и, если применимо, значение в поле **Группа клиентов**, чтобы указать адресатов уведомлений. (Уведомлений, отправляемых несколькими приложениями могут отправляться только ко всем клиентам этих приложений.) Если требуется использовать сегмент, который вы еще не создали, выберите **Создать новую группу клиентов**. Обратите внимание, что новый сегмент становится доступным для отправки уведомлений через 24 часа. Дополнительные сведения см. в разделе [Создание клиентских сегментов](create-customer-segments.md).
6. Если требуется указать время отправки уведомлений, снимите флажок **Отправить уведомление немедленно** и выберите дату и время (в формате UTC для всех клиентов, если вы не указали, что нужно использовать для каждого клиента местное время).
7. Если нужно, чтобы в определенный момент срок действия уведомления истекал, снимите флажок **Срок действия уведомления никогда не истекает** и выберите конкретные дату и время окончания срока действия (UTC).
8. **Для получения уведомлений в одно приложение:** Если вы хотите отфильтровать получателей, чтобы ваше уведомление получали только люди, использующие определенные языки или находящиеся в определенных часовых поясах, установите флажок **Использовать фильтры**. Затем можно указать параметры языка и (или) часовой пояс, которые вы хотите использовать.
8. **Об уведомлениях для нескольких приложений:** Укажите, следует ли отправлять уведомления только для последнего активного приложения на каждом устройстве (для клиента), или для всех приложений на каждом устройстве.
10. В разделе **Содержимое уведомления** меню **Язык** выберите языки, на которых должно отображаться уведомление. Дополнительные сведения см. в разделе [Перевод уведомлений](#translate-your-notifications).
11. В разделе **Параметры** введите текст и настройте любые другие параметры. Если вы начали работу с помощью шаблона, некоторые из них предоставляются по умолчанию, однако вы можете внести любые изменения.

    Доступные параметры варьируются в зависимости от используемого типа уведомлений. Некоторые доступные параметры перечислены ниже:

    * **Тип активации** (тип интерактивного всплывающего уведомления). Можно выбрать следующие значения: **Передний план**, **Фон** или **Протокол**.
    * **Запуск** (тип интерактивного всплывающего уведомления). Можно сделать так, чтобы из уведомления можно было открыть приложение или веб-сайт.
    * **Отслеживание скорости запуска приложения** (тип интерактивного всплывающего уведомления). Если требуется измерить, насколько эффективно вы взаимодействуете с клиентами с помощью каждого из уведомлений, установите этот флажок. Дополнительные сведения см. в разделе [Измерение эффективности уведомлений](#measure-notification-performance).
    * **Длительность** (тип интерактивного всплывающего уведомления). Можно выбрать **Короткая** или **Длинная**.
    * **Сценарий** (тип интерактивного всплывающего уведомления). Можно выбрать значение **По умолчанию**, **Будильник**, **Напоминание** или **Входящий вызов**.
    * **Базовый URI** (тип интерактивного всплывающего уведомления). Дополнительные сведения см. в разделе [BaseUri](https://docs.microsoft.com/uwp/api/windows.ui.xaml.frameworkelement.baseuri#Windows_UI_Xaml_FrameworkElement_BaseUri).
    * **Запрос на добавление изображения** (тип интерактивного всплывающего уведомления). Дополнительные сведения см. в разделе [addImageQuery](https://docs.microsoft.com/uwp/schemas/tiles/toastschema/element-visual#attributes-and-elements).
    * **Визуальный элемент**. Изображение, видео или звук. Дополнительные сведения см. в разделе [Визуальный элемент](https://docs.microsoft.com/uwp/schemas/tiles/toastschema/element-visual).
    * **Выбор**/**действия**/**ввода** (тип интерактивного всплывающего уведомления). Позволяет разрешить пользователям взаимодействовать с уведомлением. Дополнительные сведения см. в разделе [Адаптивные и интерактивные всплывающие уведомления](../design/shell/tiles-and-notifications/adaptive-interactive-toasts.md).
    * **Привязка** (тип интерактивной плитки). Шаблон всплывающих уведомлений. Дополнительные сведения см. в разделе [Привязка](https://docs.microsoft.com/uwp/schemas/tiles/toastschema/element-binding).

    > [!TIP]
    > Воспользуйтесь приложением [Визуализатор уведомлений](https://www.microsoft.com/store/apps/9nblggh5xsl1) для проектирования и тестирования адаптивных плиток и интерактивных всплывающих уведомлений.

12. Выберите **Сохранить как черновик**, чтобы продолжить работу над уведомлением позже, или выберите **Отправить**, если все готово.


## <a name="notification-template-types"></a>Типы шаблонов уведомлений

Можно выбрать любой из множества шаблонов уведомлений.

-   **Пустое (всплывающее уведомление).** Начните с пустого всплывающего уведомления, которое можно настроить. Всплывающее уведомление — это всплывающий элемент пользовательского интерфейса, который появляется на экране и обеспечивает взаимодействие приложения с клиентом, когда клиент совершает какие-либо действия в другом приложении, на начальном экране или на рабочем столе.
-   **Пустое значение (плитку).** Начните с пустого уведомления-плитки, которое можно настроить. Плитки — это представление приложения на начальном экране. Плитки могут быть "динамическими", т. е. отображаемое на них содержимое может изменяться при получении уведомлений.
-   **Попросите оценки (всплывающее уведомление).** Всплывающее уведомление, которое просит клиентов оценить приложение. Когда клиент выбирает этот уведомление, отображается страница оценки вашего приложения в Магазине.
-   **Узнайте их мнение (всплывающее уведомление).** Всплывающее уведомление с запросом предоставления обратной связи по вашему приложению. Когда клиент выбирает уведомление, отображается страница Центра отзывов для вашего приложения.
    > [!NOTE]
    > При выборе этого типа шаблона в поле **Launch** не забудьте заменить замещающее значение {ИМЯ_СЕМЕЙСТВА_ПАКЕТОВ} на настоящее имя семейства пакетов (PFN) вашего приложения. PFN вашего приложения можно найти на странице [Удостоверение приложения](view-app-identity-details.md) (**Управление приложениями** > **Удостоверение приложения**).

    ![Всплывающее окно запуска отзывов](images/push-notifications-feedback-toast-launch-box.png)

-   **Кросс-повысить уровень (всплывающее уведомление).** Всплывающее уведомление для продвижения другого приложения на ваш выбор. Когда клиент выбирает это уведомление, отображается описание другого приложения в Магазине.
    > [!NOTE]
    > При выборе этого типа шаблона в поле **Launch** не забудьте заменить замещающее значение **{ИД рекламируемого здесь продукта}** на фактический код продукта, являющегося объектом перекрестной рекламы, в Store. Код продукта в Магазине можно найти на странице [Удостоверение приложения](view-app-identity-details.md) (**Управление приложениями** > **Удостоверение приложения**).

    ![Всплывающее окно запуска перекрестной рекламы](images/push-notifications-promote-toast-launch-box.png)

-   **Повысить уровень продаж (всплывающее уведомление).** Всплывающее уведомление, которое можно использовать для представления специального предложения на ваше приложение. Когда клиент выбирает это уведомление, отображается описание вашего приложения в Магазине.
-   **Запрос на обновление (всплывающее уведомление).** Всплывающее уведомление, которое рекомендует клиентам, работающим со старой версией вашего приложения, установить последнюю версию. Когда клиент выбирает уведомление, запускается приложение Store и отображается список **Загружаемые компоненты и обновления**. Обратите внимание, что этот шаблон можно использовать только с одним приложением, невозможно определить в качестве целевого определенный сегмент клиентов или установить время отправки; это уведомление всегда будет отправлено в течение 24 часов, и мы приложим все усилия, чтобы разослать его всем пользователям, которые еще не пользуются последней версией вашего приложения.


## <a name="measure-notification-performance"></a>Измерение эффективности уведомлений

Можно измерить, насколько эффективно вы взаимодействуете с клиентами с помощью каждого уведомления.


### <a name="to-measure-notification-performance"></a>Измерение эффективности уведомлений

1.  При создании уведомления в разделе **Содержимое уведомления** установите флажок **Отслеживание скорости запуска приложений**.
2.  В приложении, вызовите [ParseArgumentsAndTrackAppLaunch](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesengagementmanager.parseargumentsandtrackapplaunch) метод для уведомления центра партнеров, что приложение было запущено в ответ на целевые уведомления. Этот метод предоставляется только пакетом Microsoft Store Services SDK. Дополнительные сведения о том, как вызвать этот метод, см. в разделе [настройте приложение, чтобы получать уведомления центра партнеров](../monetize/configure-your-app-to-receive-dev-center-notifications.md).


### <a name="to-view-notification-performance"></a>Просмотр эффективности уведомлений

После настройки уведомления и приложения, для измерения производительности уведомлений, как описано выше, вы увидите, насколько хорошо выполняется уведомлений.

Чтобы просмотреть подробные данные для каждого уведомления.

1.  В центре партнеров, разверните **выполнить охват** и выберите **уведомления**.
2.  В таблице существующих уведомлений, выберите **выполняется** или **завершено**и посмотрите на **скорость доставки** и **скорости запуска приложений**столбцов см. в разделе высокого уровня производительности каждого уведомления.
3.  Для просмотра более подробных данных об эффективности щелкните имя уведомления. В разделе **Статистика доставки** можно просмотреть сведения **Количество** и **Процент** для следующих типов **состояния** уведомлений:
    * **Не удалось**: Уведомление не было доставлено по некоторым причинам. Это может произойти, например, при возникновении ошибок в службе уведомлений Windows.
    * **Канал ошибка истечения срока действия**: Не удалось доставить уведомление, так как истек срок действия канала между приложением и центра партнеров. Это может произойти, например, если клиент долго не открывал ваше приложение.
    * **Отправка**: Уведомление находится в очереди на отправку.
    * **Отправлено**: Уведомление было отправлено.
    * **Запускает**: Уведомление было отправлено, его нажатия клиента и приложения был открыт в результате. Обратите внимание, что эта функция отслеживает только запуски приложения. Уведомления, которые приглашают клиента выполнить другие действия, например запустить Магазин, чтобы оставить оценку, не включены в этот статус.
    * **Неизвестно**. Не удалось определить состояние этого уведомления.

Для анализа данных о действиях пользователей для всех уведомлений:

1.  В центре партнеров, разверните **выполнить охват** и выберите **уведомления**.
2.  На **уведомления** щелкните **анализ** вкладки. На этой вкладке отображаются следующие данные:
    * Представления графа из различных состояний действия пользователя для всплывающие уведомления и уведомления центра уведомлений.
    * Мир представления щелкните через тарифы для всплывающие уведомления и действия центра уведомлений.
3. В верхней части страницы можно выбрать период времени, для которого требуется отобразить данные. Значением по умолчанию является 30D (30 дней), однако вы можете отобразить данные за 3, 6 или 12 месяцев, либо для заданного вручную диапазона дат. Вы также можете развернуть **фильтры** для фильтрации всех данных, приложений и рынка.

## <a name="translate-your-notifications"></a>Перевод уведомлений

Чтобы сделать свои уведомления максимально значимыми, переведите их на язык, понятный вашим клиентам. Центр партнеров позволяет при необходимости автоматически переводить уведомления, используя мощь [Microsoft Translator](https://www.microsoft.com/translator/home.aspx) службы.

1.  После написания уведомления на языке по умолчанию выберите **Добавить языки** (под меню **Языки** в разделе **Содержимое уведомления**).
2.  В окне **Добавление языков** выберите дополнительные языки, на которых должны отображаться ваши уведомления, а затем нажмите кнопку **Обновить**.
Ваше уведомление будет автоматически переведено на языки, выбранные в окне **Добавление языков**, эти языки будут добавлены в меню **Язык**.
3.  Для просмотра перевода своего уведомления в меню **Язык** выберите только что добавленный язык.

Что следует помнить о переводе:
 - Можно переопределить автоматический перевод, введя другой текст в поле **Содержимое** для конкретного языка.
 - Если добавить другое текстовое поле в версию уведомления на английском языке после переопределения автоматического перевода, новое текстовое поле к переведенному уведомлению добавлено не будет. В этом случае необходимо будет вручную добавить новое текстовое полек каждому переведенному уведомлению.
 - Если изменить текст на английском языке после перевода уведомления, мы автоматически обновим переведенные уведомления соответственно. Однако это не произойдет, если ранее было выбрано переопределение исходного перевода.

## <a name="related-topics"></a>Статьи по теме
- [Плитки для приложений универсальной платформы Windows](../design/shell/tiles-and-notifications/creating-tiles.md)
- [Обзор служб push-уведомлений Windows (WNS)](../design/shell/tiles-and-notifications/windows-push-notification-services--wns--overview.md)
- [Приложение визуализатора уведомления](https://www.microsoft.com/store/apps/9nblggh5xsl1)
- [StoreServicesEngagementManager.RegisterNotificationChannelAsync() | метод registerNotificationChannelAsync()](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesengagementmanager.registernotificationchannelasync)
