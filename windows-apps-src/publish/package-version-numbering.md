---
Description: Microsoft Store применяет определенные правила, связанные с номерами версий, которые работают немного по-разному в разных версиях операционной системы.
title: Нумерация версий пакета
ms.assetid: DD7BAE5F-C2EE-44EE-8796-055D4BCB3152
ms.date: 10/31/2018
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 7a8ce14094733ef5598c510198f4268744cb581e
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57621879"
---
# <a name="package-version-numbering"></a>Нумерация версий пакета

У каждого пакета, который вы предоставляете, должен быть номер версии (значение атрибута **Version** элемента [Package/Identity](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-identity) в манифесте приложения). Microsoft Store применяет определенные правила, связанные с номерами версий, которые работают немного по-разному в разных версиях операционной системы.

> [!NOTE]
> Этот раздел ссылается на «пакеты», но если не указано, те же правила применяются для номера версий для.msix/.appx и.msixbundle/.appxbundle файлов.


## <a name="version-numbering-for-windows10-packages"></a>Версия нумерации пакетам Windows 10

> [!IMPORTANT]
> Для пакетов 10 Windows (UWP) в последнем разделе (четвертый) номер версии зарезервирован для использования Store и должны быть оставлены как 0, при создании пакета (несмотря на то, что Store могут изменить значение в этом разделе). Другие разделы должно быть присвоено значение в диапазоне от 0 до 65535 (за исключением первого раздела, который не может быть 0).

При выборе пакета UWP из опубликованных заявку, Microsoft Store всегда используется наибольший с управлением версиями пакета, применимые к устройству клиента Windows 10. Это дает больше гибкости и контроля над тем, какие пакеты будут предоставлены пользователям для различных устройств. Важно, что вы можете отправлять эти пакеты в любом порядке. При этом необязательно предоставлять пакеты с более поздней версией с каждой последующей отправкой.

Можно указать несколько пакетов универсальной платформы Windows с тем же номером версии. Однако пакеты с одинаковым номером версии не могут использовать одинаковую архитектуру, так как полное удостоверение, которое Магазин применяет для каждого пакета, должно быть уникальным. Подробнее: [**Удостоверение**](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-identity).

Если имеется несколько пакетов универсальной платформы Windows, использующие тот же номер версии, архитектура (в порядке x64, x 86, ARM, нейтральную) будет использоваться для решить, какой из них имеет высокий ранг (когда Store определяет, какой пакет для клиента устройства). При ранжировании пакетов приложений, использующих одну версию, учитывается самый высокий ранг архитектуры в пакете: пакет для архитектуры x64 получает более высокий ранг, чем пакет, который содержит только архитектуру x86.

Это дает вам достаточно гибкости для развития вашего приложения с течением времени. Можно загружать и отправлять новые пакеты, использующие более низкими номерами версий для добавления поддержки для устройств Windows 10, которые вы ранее не поддерживала, можно добавить более поздней версии с версиями пакеты, имеющие более строгие зависимости, чтобы воспользоваться преимуществами оборудования или компоненты операционной системы или можно добавить более поздней версии с версиями пакетов, которые служат в качестве обновлений для некоторых или всех существующих клиента базовый.

В следующем примере показано, как управлять нумерацией версий для последовательной доставки запланированных пакетов пользователям.

### <a name="example-moving-to-a-single-package-over-multiple-submissions"></a>Пример. Наведя Отправка множества материалов в одном пакете

Windows 10 позволяет создавать единую базу кода, запускать в любом месте. Это значительно упрощает создание кроссплатформенных проектов. Однако по ряду причин не следует объединять существующие базы кода для создания одного проекта.

Правила пакета управления версиями позволяет постепенно переносить клиентов один пакет для семейства устройств универсальной, при доставке ряд промежуточные обновления для семейства конкретного устройства (включая те, которые используют преимущества интерфейсов API Windows 10). В приведенном ниже примере показано, как согласованно применяются те же правила в ряде отправленные данные для одного приложения.

| Отправка | Содержимое                                                  | Взаимодействие с пользователем                                                                                                                                                                             |
|------------|-----------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1          | -Версия package: 1.1.10.0 <br> -Семейство устройства: Windows.Desktop, minVersion 10.0.10240.0 <br> <br> -Версия package: 1.1.0.0 <br> -Семейство устройства: Windows.Mobile, minVersion 10.0.10240.0     | - Устройства со сборкой 10.0.10240.0 классической версии Windows 10 или более новой получат версию 1.1.10.0 <br> - Устройства со сборкой 10.0.10240.0 Windows 10 Mobile или более новой получат версию 1.1.0.0 <br> - Другие семейства устройств не смогут приобрести и установить приложение |
| 2          | -Версия package: 1.1.10.0 <br> -Семейство устройства: Windows.Desktop, minVersion 10.0.10240.0 <br> <br> -Версия package: 1.1.0.0 <br> -Семейство устройства: Windows.Mobile, minVersion 10.0.10240.0 <br> <br> -Версия package: 1.0.0.0 <br> -Семейство устройства: Зависимости Windows.Universal, minVersion 10.0.10240.0    | - Устройства со сборкой 10.0.10240.0 классической версии Windows 10 или более новой получат версию 1.1.10.0 <br> - Устройства со сборкой 10.0.10240.0 Windows 10 Mobile или более новой получат версию 1.1.0.0 <br> - Другие семейства устройств (не настольные ПК и не мобильные устройства) получат версию 1.0.0.0 после выпуска <br> - Настольные ПК и мобильные устройства, на которых приложение уже установлено, не увидят обновление (поскольку на них уже установлена наилучшая доступная версия — и 1.1.10.0, и 1.1.0.0 больше 1.0.0.0) |
| 3          | -Версия package: 1.1.10.0 <br> -Семейство устройства: Windows.Desktop, minVersion 10.0.10240.0 <br> <br> -Версия package: 1.1.5.0 <br> -Семейство устройства: Зависимости Windows.Universal, minVersion 10.0.10250.0 <br> <br> -Версия package: 1.0.0.0 <br> -Семейство устройства: Зависимости Windows.Universal, minVersion 10.0.10240.0    | - Устройства со сборкой 10.0.10240.0 классической версии Windows 10 или более новой получат версию 1.1.10.0 <br> - Устройства со сборкой 10.0.10250.0 Windows 10 Mobile или более новой получат версию 1.1.5.0 <br> - Устройства со сборкой Windows 10 Mobile ≥ 10.0.10240.0, но < 10.010250.0 получат версию 1.1.0.0 
| 4          | -Версия package: 2.0.0.0 <br> -Семейство устройства: Зависимости Windows.Universal, minVersion 10.0.10240.0   | - Все пользователи на всех семействах устройств со сборкой версии 10.0.10240.0 Windows 10 или более новой получат пакет 2.0.0.0 | 

> [!NOTE]
>  Во всех случаях клиент устройства будут получать пакет, который имеет наибольший номер версии, соответствуют их требованиям. Например, в вышеприведенной третьей отправке все настольные устройства получат версию 1.1.10.0, даже если на них установлена версия ОС 10.0.10150.0 или старше, т. е. они могут также принять версию 1.1.5.0. Поскольку 1.1.10.0 — наивысший доступный для них номер версии, этот пакет они и получат.

### <a name="using-version-numbering-to-roll-back-to-a-previously-shipped-package-for-new-acquisitions"></a>Использование нумерации версий для возврата к ранее отправленному пакету для новых приобретений

Если вы сохранять копии пакетов, вы получите возможность откатить пакета приложения в Store в более ранних пакет Windows 10, если должна обнаружить проблемы в выпуске. Это временный способ ограничить нарушения работы клиентов, а требует времени, чтобы устранить эту проблему.

Чтобы сделать это, создайте новый [отправки](app-submissions.md). Удалите проблемный пакет и отправьте старый пакет в Магазин. У пользователей, которые уже получили откатываемый пакет, по-прежнему будет проблемный пакет (поскольку номер версии старого пакета меньше). Но это не позволит другим пользователям скачать проблемный пакет, при этом приложение по-прежнему будет доступно в Магазине.

Чтобы устранить эту проблему для клиентов, которые уже получили проблемный пакет, вы можете отправить новый пакет Windows 10, который имеет более высокий номер версии, чем Неверный пакет, как только вы можете. После сертификации этой отправки все пользователи получат обновленный пакет, так как у него будет самый большой номер версии.


## <a name="version-numbering-for-windows81-and-earlier-and-windows-phone-81-packages"></a>Версия, нумерация для Windows 8.1 (и более ранних версий) и пакеты Windows Phone 8.1

> [!IMPORTANT]
> Начиная с 31 октября 2018 года новые продукты не может содержать пакеты, предназначенные для Windows 8.x/Windows Phone 8.x или более ранней версии. Дополнительные сведения см. в этом [блога](https://blogs.windows.com/buildingapps/2018/08/20/important-dates-regarding-apps-with-windows-phone-8-x-and-earlier-and-windows-8-8-1-packages-submitted-to-microsoft-store/#SzKghBbqDMlmAO4c.97).

Для пакетов .appx, предназначенных для Windows Phone 8.1, номер версии пакета в новой отправке всегда должен быть больше, чем номер пакета, включенного в последнюю отправку (или любую предыдущую отправку).

Для AppX-файлы пакетов, предназначенных для Windows 8 и Windows 8.1, то же правило применяется на основе архитектуры: номер версии пакета в новый отправки всегда должно быть больше, чем, последней публикации Store на ту же архитектуру пакета.

Кроме того номер версии Windows 8.1 пакетов всегда должно быть больше номера версий любых пакетов Windows 8 для одного приложения. Другими словами номер версии пакета Windows 8, отправляемого должен быть ниже, чем номер версии пакета Windows 8.1, отправленный для размещенного приложения.

> [!NOTE]
> Если приложение также имеет пакетов Windows 10, номер версии пакетов Windows 10 необходимо выше, чем для любых пакетов Windows 8, Windows 8.1 и Windows Phone 8.1. Дополнительные сведения см. в разделе [Добавление пакетов для Windows 10 для приложения, опубликованные ранее](guidance-for-app-package-management.md#adding-packages-for-windows-10-to-a-previously-published-app).

Ниже приведены некоторые примеры того, что происходит в другой версии номеров сценариев обновления для пакетов, предназначенных для Windows 8 и Windows 8.1.

| Версия приложения в Магазине  | Отправка этой версии | После появления новой версии в Microsoft Store это будет установлено в случае нового приобретения | После появления новой версии в Microsoft Store это будет обновлено, если клиент уже установил приложение |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------------------|----------|
| Без изменений                                     | x86, v1.0.0.0               | x86, v1.0.0.0 на компьютерах x86 и x64                                                | Отсутствует. |
| x86, v1.0.0.0                               | x64, v1.0.0.0               | v1.0.0.0 для архитектуры клиента                                                   | Отсутствует. Номера версий совпадают. |
| x86, v1.0.0.0 <br> x64, v1.0.0.0            | x64, v1.0.0.1               | v1.0.0.0 для клиентов с компьютером x86 <br> v1.0.0.1 для клиентов с компьютером x64                 | Отсутствуют изменения для клиентов, запускающих приложение на компьютере x86. <br> Версия 1.0.0.0 будет обновлена до версии 1.0.0.1 для клиентов, запускающих приложение на компьютере x64. <br> **Примечание**  Если версия приложения выполняется в x x64 x86 компьютера, приложение будет обновлено для x64 версии Если клиент удаляет и повторно устанавливает. |
| Без изменений                                     | нейтральный, v1.0.0.1           | нейтральный, v1.0.0.1 на любых компьютерах                                                         | Отсутствует. |
| нейтральный, v1.0.0.1                           | x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | v1.0.0.0 для архитектуры компьютера клиента          | Отсутствует. Клиенты, которые используют нейтральный пакет версии 1.0.0.1, будут и дальше пользоваться этой версией приложения. |
| нейтральный, v1.0.0.1 <br> x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | v1.0.0.1 для архитектуры компьютера клиента | Отсутствуют изменения для клиентов, запускающих нейтральную версию приложения v1.0.0.1. <br> v1.0.0.0 будет обновлена до v1.0.0.1 для клиентов, использующих версию v1.0.0.0 приложения, разработанную специально для архитектуры их компьютера. |
| x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | x86, v1.0.0.2 <br> x64, v1.0.0.2 <br> ARM, v1.0.0.2 | v1.0.0.2 для архитектуры компьютера клиента  | Версия 1.0.0.1 будет обновлена до версии 1.0.0.2 для клиентов, использующих любую версию 1.0.0.1 приложения, разработанную специально для архитектуры их компьютеров. |

> [!NOTE]
> В отличие от пакетов .appx, номера версии в любых пакетах .xap не учитываются при решении, какой пакет предоставить конкретному пользователю. Для обновления пакета .xap пользователя до более нового удалите старый пакет .xap из новой отправки.
