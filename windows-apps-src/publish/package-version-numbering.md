---
author: jnHs
Description: The Microsoft Store enforces certain rules related to version numbers, which work somewhat differently in different OS versions.
title: Нумерация версий пакета
ms.assetid: DD7BAE5F-C2EE-44EE-8796-055D4BCB3152
ms.author: wdg-dev-content
ms.date: 10/25/2018
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 045e44d3ba243b4c4fbf68ba37e91c06eb022d27
ms.sourcegitcommit: 6cc275f2151f78db40c11ace381ee2d35f0155f9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/26/2018
ms.locfileid: "5558776"
---
# <a name="package-version-numbering"></a>Нумерация версий пакета

У каждого пакета, который вы предоставляете, должен быть номер версии (значение атрибута **Version** элемента [Package/Identity](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-identity) в манифесте приложения). В Microsoft Store применяются некоторые правила, связанные с номерами версий, которые используются по-разному в различных версиях ОС.

> [!NOTE]
> Этот раздел посвящен «пакетам», но если не указано иное, те же правила применяются к номерам версий для.msix/.appx и.msixbundle/.appxbundle файлов.


## <a name="version-numbering-for-windows10-packages"></a>Нумерация версий пакетов Windows10

> [!IMPORTANT]
> Для пакетов Windows 10 (UWP) последняя (четвертая) часть номера версии зарезервирована для использования магазином и должна быть оставлена равной 0 при создании пакета (хотя магазин может изменить значение в этом разделе). Другие разделы должно устанавливаться в виде целого числа от 0 до 65535 (за исключением первого раздела, который не может быть 0).

При выборе пакета UWP из опубликованной отправки, Microsoft Store всегда использует версию пакета наибольшим, которая пригодна для устройства Windows 10 пользователя. Это дает больше гибкости и контроля над тем, какие пакеты будут предоставлены пользователям для различных устройств. Важно, что вы можете отправлять эти пакеты в любом порядке. При этом необязательно предоставлять пакеты с более поздней версией с каждой последующей отправкой.

Вы можете предоставить несколько пакетов UWP с одинаковым номером версии. Однако пакеты с одинаковым номером версии не могут использовать одинаковую архитектуру, так как полное удостоверение, которое Магазин применяет для каждого пакета, должно быть уникальным. Подробнее: [**Удостоверение**](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-identity).

При предоставлении нескольких пакеты UWP, которые используют один и тот же номер версии, архитектура (в порядке x64, x 86, ARM, нейтральная) будет использоваться для решить, какой из них имеет больший приоритет (при хранилище определяет, какой пакет предоставить на устройстве пользователя). При ранжировании пакетов приложений, использующих одну версию, учитывается самый высокий ранг архитектуры в пакете: пакет для архитектуры x64 получает более высокий ранг, чем пакет, который содержит только архитектуру x86.

Это дает вам достаточно гибкости для развития вашего приложения с течением времени. Можно передать и отправлять новые пакеты, использующие меньшие номера версий для добавления поддержки устройств Windows 10, которые вы ранее не поддерживали, можно добавлять пакеты с большими более строгими зависимостями, чтобы воспользоваться преимуществами оборудования или Операционной системы или вы можно добавлять пакеты с большими, которые служат обновлениями для части или всей существующей клиентской базы.

В следующем примере показано, как управлять нумерацией версий для последовательной доставки запланированных пакетов пользователям.

### <a name="example-moving-to-a-single-package-over-multiple-submissions"></a>Пример: переход к отдельному пакету для множества отправок

Windows10 позволяет создать единую базу кода, работает везде. Это значительно упрощает создание кроссплатформенных проектов. Однако по ряду причин не следует объединять существующие базы кода для создания одного проекта.

Можно использовать правила нумерации пакета для постепенно перешли на единый пакет для семейства универсальных устройств, что используют промежуточные обновления для конкретных семейств устройств (включая те, которые воспользоваться Windows10 API). В примере ниже показано, как те же правила применяются согласованно через ряд отправки для одного приложения.

| Отправка | Содержимое                                                  | Взаимодействие с пользователем                                                                                                                                                                             |
|------------|-----------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1          | - Версия пакета: 1.1.10.0 <br> - Семейство устройств: Windows.Desktop, minVersion 10.0.10240.0 <br> <br> - Версия пакета: 1.1.0.0 <br> - Семейство устройств: Windows.Mobile, minVersion 10.0.10240.0     | - Устройства со сборкой 10.0.10240.0 классической версии Windows10 или более новой получат версию 1.1.10.0 <br> - Устройства со сборкой 10.0.10240.0 Windows10 Mobile или более новой получат версию 1.1.0.0 <br> - Другие семейства устройств не смогут приобрести и установить приложение |
| 2          | - Версия пакета: 1.1.10.0 <br> - Семейство устройств: Windows.Desktop, minVersion 10.0.10240.0 <br> <br> - Версия пакета: 1.1.0.0 <br> - Семейство устройств: Windows.Mobile, minVersion 10.0.10240.0 <br> <br> - Версия пакета: 1.0.0.0 <br> - Семейство устройств: Windows.Universal, minVersion 10.0.10240.0    | - Устройства со сборкой 10.0.10240.0 классической версии Windows10 или более новой получат версию 1.1.10.0 <br> - Устройства со сборкой 10.0.10240.0 Windows10 Mobile или более новой получат версию 1.1.0.0 <br> - Другие семейства устройств (не настольные ПК и не мобильные устройства) получат версию 1.0.0.0 после выпуска <br> - Настольные ПК и мобильные устройства, на которых приложение уже установлено, не увидят обновление (поскольку на них уже установлена наилучшая доступная версия — и 1.1.10.0, и 1.1.0.0 больше 1.0.0.0) |
| 3          | - Версия пакета: 1.1.10.0 <br> - Семейство устройств: Windows.Desktop, minVersion 10.0.10240.0 <br> <br> - Версия пакета: 1.1.5.0 <br> - Семейство устройств: Windows.Universal, minVersion 10.0.10250.0 <br> <br> - Версия пакета: 1.0.0.0 <br> - Семейство устройств: Windows.Universal, minVersion 10.0.10240.0    | - Устройства со сборкой 10.0.10240.0 классической версии Windows10 или более новой получат версию 1.1.10.0 <br> - Устройства со сборкой 10.0.10250.0 Windows10 Mobile или более новой получат версию 1.1.5.0 <br> - Устройства со сборкой Windows10 Mobile ≥ 10.0.10240.0, но < 10.010250.0 получат версию 1.1.0.0 
| 4          | - Версия пакета: 2.0.0.0 <br> - Семейство устройств: Windows.Universal, minVersion 10.0.10240.0   | - Все пользователи на всех семействах устройств со сборкойверсии 10.0.10240.0 Windows 10 или более новой получат пакет 2.0.0.0 | 

> [!NOTE]
>  Во всех случаях устройства пользователей получат пакет, имеющий самый высокий доступный номер версии. Например, в вышеприведенной третьей отправке все настольные устройства получат версию 1.1.10.0, даже если на них установлена версия ОС 10.0.10150.0 или старше, т. е. они могут также принять версию 1.1.5.0. Поскольку 1.1.10.0 — наивысший доступный для них номер версии, этот пакет они и получат.

### <a name="using-version-numbering-to-roll-back-to-a-previously-shipped-package-for-new-acquisitions"></a>Использование нумерации версий для возврата к ранее отправленному пакету для новых приобретений

Если вы храните копии пакетов, вы получите возможность откатить пакет вашего приложения в магазине до предыдущего пакета Windows10 если должен обнаружить проблемы с выпуском. Это временный способ ограничить негативные последствия для пользователей во время написания времени, чтобы устранить проблему.

Чтобы сделать это, создайте новую [отправку](app-submissions.md). Удалите проблемный пакет и отправьте старый пакет в Магазин. У пользователей, которые уже получили откатываемый пакет, по-прежнему будет проблемный пакет (поскольку номер версии старого пакета меньше). Но это не позволит другим пользователям скачать проблемный пакет, при этом приложение по-прежнему будет доступно в Магазине.

Чтобы исправить проблемы для пользователей, которые уже получили проблемный пакет, вы можете отправить пакет Windows10 с более высоким номером версии, чем у некорректного пакета, вы можете сразу же. После сертификации этой отправки все пользователи получат обновленный пакет, так как у него будет самый большой номер версии.


## <a name="version-numbering-for-windows81-and-earlier-and-windows-phone-81-packages"></a>Нумерация Windows8.1 (и более ранних версий) и пакеты Windows Phone 8.1

Для пакетов .appx, предназначенных для Windows Phone 8.1, номер версии пакета в новой отправке всегда должен быть больше, чем номер пакета, включенного в последнюю отправку (или любую предыдущую отправку).

Для пакетов .appx, предназначенных для Windows8 и Windows8.1, то же правило применяется к архитектуре: номер версии пакета в новой отправке всегда должен быть больше номера последнего пакета, опубликованного в магазине для той же архитектуры.

Кроме того номер версии пакетов Windows8.1 всегда должен быть больше номера версий всех пакетов Windows8 для того же приложения. Другими словами номер версии любого отправляемого пакета Windows8 должен быть меньше, чем номер версии любого пакета Windows8.1, отправленные для того же приложения.

> [!NOTE]
> Если ваше приложение также имеет Windows10 пакеты, номер версии пакетов Windows10 должен быть больше, чем для всех пакетов Windows8, Windows8.1 и Windows Phone 8.1. Дополнительные сведения см. в разделе [Добавление пакетов для Windows10 ранее опубликованное приложение](guidance-for-app-package-management.md#adding-packages-for-windows-10-to-a-previously-published-app).

Вот несколько примеров того, что происходит в различных сценариях обновления номеров версий для пакетов, предназначенных для Windows8 и Windows8.1.

| Версия приложения в Магазине  | Отправка этой версии | После появления новой версии в Microsoft Store это будет установлено в случае нового приобретения | После появления новой версии в Microsoft Store это будет обновлено, если клиент уже установил приложение |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------------------|----------|
| Без изменений                                     | x86, v1.0.0.0               | x86, v1.0.0.0 на компьютерах x86 и x64                                                | Без изменений |
| x86, v1.0.0.0                               | x64, v1.0.0.0               | v1.0.0.0 для архитектуры клиента                                                   | Без изменений Номера версий совпадают. |
| x86, v1.0.0.0 <br> x64, v1.0.0.0            | x64, v1.0.0.1               | v1.0.0.0 для клиентов с компьютером x86 <br> v1.0.0.1 для клиентов с компьютером x64                 | Отсутствуют изменения для клиентов, запускающих приложение на компьютере x86. <br> Версия 1.0.0.0 будет обновлена до версии 1.0.0.1 для клиентов, запускающих приложение на компьютере x64. <br> **Примечание**Если x86 версия приложения запущена на x x64 компьютера, приложение не будет обновлено до x64 версии Если клиент выполнит удаление и переустановку. |
| Без изменений                                     | нейтральный, v1.0.0.1           | нейтральный, v1.0.0.1 на любых компьютерах                                                         | Без изменений |
| нейтральный, v1.0.0.1                           | x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | v1.0.0.0 для архитектуры компьютера клиента          | Без изменений Клиенты, которые используют нейтральный пакет версии 1.0.0.1, будут и дальше пользоваться этой версией приложения. |
| нейтральный, v1.0.0.1 <br> x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | v1.0.0.1 для архитектуры компьютера клиента | Отсутствуют изменения для клиентов, запускающих нейтральную версию приложения v1.0.0.1. <br> v1.0.0.0 будет обновлена до v1.0.0.1 для клиентов, использующих версию v1.0.0.0 приложения, разработанную специально для архитектуры их компьютера. |
| x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | x86, v1.0.0.2 <br> x64, v1.0.0.2 <br> ARM, v1.0.0.2 | v1.0.0.2 для архитектуры компьютера клиента  | Версия 1.0.0.1 будет обновлена до версии 1.0.0.2 для клиентов, использующих любую версию 1.0.0.1 приложения, разработанную специально для архитектуры их компьютеров. |

> [!NOTE]
> В отличие от пакетов .appx, номера версии в любых пакетах .xap не учитываются при решении, какой пакет предоставить конкретному пользователю. Для обновления пакета .xap пользователя до более нового удалите старый пакет .xap из новой отправки.
