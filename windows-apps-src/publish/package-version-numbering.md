---
author: jnHs
Description: "В Магазине Windows применяются некоторые правила, связанные с номерами версий, которые используются по-разному в различных версиях ОС."
title: "Нумерация версий пакета"
ms.assetid: DD7BAE5F-C2EE-44EE-8796-055D4BCB3152
ms.author: wdg-dev-content
ms.date: 06/19/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
ms.openlocfilehash: 67c90f87fe0d02a0a906392409103e93e83103c3
ms.sourcegitcommit: fadde8afee46238443ec1cb71846d36c91db9fb9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/21/2017
---
# <a name="package-version-numbering"></a>Нумерация версий пакета


У каждого пакета, который вы предоставляете, должен быть номер версии (значение атрибута **Version** элемента **Package/Identity** в манифесте приложения). В Магазине Windows применяются некоторые правила, связанные с номерами версий, которые используются по-разному в различных версиях ОС.

> [!NOTE]
> Этот раздел посвящен «пакетам», но если не указано иное, те же правила применяются к номерам версий для APPX- и APPXBUNDLE-файлов.


## <a name="version-numbering-for-windows-10-packages"></a>Нумерация версий пакетов Windows 10

Номер версии любого пакета Windows10 должен быть больше, чем номер версии публикуемых пакетов Windows 8, Windows 8.1 и (или) Windows Phone 8.1 (или ранее опубликованных пакетов для этих версий ОС) для того же приложения. (Подробнее см. в разделе [Добавление пакетов для Windows 10 в ранее опубликованное приложение](guidance-for-app-package-management.md#adding-packages-for-windows-10-to-a-previously-published-app).)

> [!IMPORTANT]
> Последняя (четвертая) часть номера версии зарезервирована для использования Магазином и при создании пакета должна быть оставлена равной 0 (хотя Магазин может изменить значение этой части).

При выборе пакетаWindows 10 из опубликованной отправки Магазин Windows всегда использует версию пакета с наибольшим номером, которая пригодна для устройства пользователя. Это дает больше гибкости и контроля над тем, какие пакеты будут предоставлены пользователям для различных устройств. Важно, что вы можете отправлять эти пакеты в любом порядке. При этом необязательно предоставлять пакеты с более поздней версией с каждой последующей отправкой.

Вы даже можете предоставлять несколькопакетов Windows 10 с одинаковым номером версии. Однако пакеты с одинаковым номером версии не могут использовать одинаковую архитектуру, так как полное удостоверение, которое Магазин применяет для каждого пакета, должно быть уникальным. Подробнее: [**Удостоверение**](https://docs.microsoft.com/uwp/schemas/appxpackage/appxmanifestschema/element-identity).

Если указать несколькопакетов Windows10, использующих один номер версии, архитектура (в следующем порядке: x86, x64, ARM, нейтральная) используется, чтобы решить, какой из них имеет больший приоритет, при выборе пакета для конкретного устройства. При ранжировании пакетов приложений, использующих одну версию, учитывается самый высокий ранг архитектуры в пакете: пакет для архитектуры x64 получает более высокий ранг, чем пакет, который содержит только архитектуру x86.

Это дает вам достаточно гибкости для развития вашего приложения с течением времени. Вы можете отправлять новые пакеты, использующие меньшие номера версий, для поддержки доступных устройств, которые вы ранее не поддерживали, добавлять пакеты с большими номерами версий и более строгими зависимостями, чтобы воспользоваться преимуществами оборудования или операционной системы, или добавлять пакеты с большими номерами версий, которые служат обновлениями для части или всей существующей клиентской базы.

В следующем примере показано, как управлять нумерацией версий для последовательной доставки запланированных пакетов пользователям.

### <a name="example-moving-to-a-single-package-over-multiple-submissions"></a>Пример: переход к отдельному пакету для множества отправок

Windows10 позволяет создать единую базу кода, которая работает везде. Это значительно упрощает создание кроссплатформенных проектов. Однако по ряду причин не следует объединять существующие базы кода для создания одного проекта.

Можно использовать правила нумерации версий пакета, чтобы пользователи постепенно перешли на единый пакет для семейства универсальных устройств, предоставляя промежуточные обновления для конкретных семейств устройств (включая те, что используют API-интерфейсы Windows10). В примере ниже показано, как эти правила применяются согласованно.

| Отправка | Содержимое                                                  | Взаимодействие с пользователем                                                                                                                                                                             |
|------------|-----------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1          | - Версия пакета: 1.1.10.0 <br> - Семейство устройств: Windows.Desktop, minVersion 10.0.10240.0 <br> <br> - Версия пакета: 1.1.0.0 <br> - Семейство устройств: Windows.Mobile, minVersion 10.0.10240.0     | - Устройства со сборкой 10.0.10240.0 классической версии Windows10 или более новой получат версию 1.1.10.0 <br> - Устройства со сборкой 10.0.10240.0 Windows10 Mobile или более новой получат версию 1.1.0.0 <br> - Другие семейства устройств не смогут приобрести и установить приложение |
| 2          | - Версия пакета: 1.1.10.0 <br> - Семейство устройств: Windows.Desktop, minVersion 10.0.10240.0 <br> <br> - Версия пакета: 1.1.0.0 <br> - Семейство устройств: Windows.Mobile, minVersion 10.0.10240.0 <br> <br> - Версия пакета: 1.0.0.0 <br> - Семейство устройств: Windows.Universal, minVersion 10.0.10240.0    | - Устройства со сборкой 10.0.10240.0 классической версии Windows10 или более новой получат версию 1.1.10.0 <br> - Устройства со сборкой 10.0.10240.0 Windows10 Mobile или более новой получат версию 1.1.0.0 <br> - Другие семейства устройств (не настольные ПК и не мобильные устройства) получат версию 1.0.0.0 после выпуска <br> - Настольные ПК и мобильные устройства, на которых приложение уже установлено, не увидят обновление (поскольку на них уже установлена наилучшая доступная версия — и 1.1.10.0, и 1.1.0.0 больше 1.0.0.0) |
| 3          | - Версия пакета: 1.1.10.0 <br> - Семейство устройств: Windows.Desktop, minVersion 10.0.10240.0 <br> <br> - Версия пакета: 1.1.5.0 <br> - Семейство устройств: Windows.Universal, minVersion 10.0.10250.0 <br> <br> - Версия пакета: 1.0.0.0 <br> - Семейство устройств: Windows.Universal, minVersion 10.0.10240.0    | - Устройства со сборкой 10.0.10240.0 классической версии Windows10 или более новой получат версию 1.1.10.0 <br> - Устройства со сборкой 10.0.10250.0 Windows10 Mobile или более новой получат версию 1.1.5.0 <br> - Устройства со сборкой Windows10 Mobile ≥ 10.0.10240.0, но < 10.010250.0 получат версию 1.1.0.0 
| 4          | - Версия пакета: 2.0.0.0 <br> - Семейство устройств: Windows.Universal, minVersion 10.0.10240.0   | - Все пользователи на всех семействах устройств со сборкойверсии 10.0.10240.0 Windows 10 или более новой получат пакет 2.0.0.0 | 

> [!NOTE]
>  Во всех случаях устройства пользователей получат пакет, имеющий самый высокий доступный номер версии. Например, в вышеприведенной третьей отправке все настольные устройства получат версию 1.1.10.0, даже если на них установлена версия ОС 10.0.10150.0 или старше, т. е. они могут также принять версию 1.1.5.0. Поскольку 1.1.10.0 — наивысший доступный для них номер версии, этот пакет они и получат.

### <a name="using-version-numbering-to-roll-back-to-a-previously-shipped-package-for-new-acquisitions"></a>Использование нумерации версий для возврата к ранее отправленному пакету для новых приобретений

Если вы храните копии предыдущих файлов пакета Windows10, вы сможете откатить пакет приложения в Магазине до предыдущего пакета Windows10, если обнаружите проблемы с выпуском. Это временный способ ограничить негативные последствия для пользователей, пока вы устраняете проблему.

Для этого создайте новую отправку. Удалите проблемный пакет и отправьте старый пакет в Магазин. У пользователей, которые уже получили откатываемый пакет, по-прежнему будет проблемный пакет (поскольку номер версии старого пакета меньше). Но это не позволит другим пользователям скачать проблемный пакет, при этом приложение по-прежнему будет доступно в Магазине.

Чтобы исправить проблемы для пользователей, которые уже получили проблемный пакет, вы можете как можно скорее отправить новый пакет Windows10, имеющий более высокий номер версии, чем у некорректного пакета. После сертификации этой отправки все пользователи получат обновленный пакет, так как у него будет самый большой номер версии.

## <a name="version-numbering-for-windows-81-and-earlier-and-windows-phone-81-packages"></a>Нумерация версий для пакетов Windows 8.1 (и более ранних версий) и Windows Phone 8.1

Для пакетов .appx, предназначенных для Windows Phone 8.1, номер версии пакета в новой отправке всегда должен быть больше, чем номер пакета, включенного в последнюю отправку (или любую предыдущую отправку).

Для пакетов .appx, предназначенных для Windows8 и Windows8.1, то же правило применяется к архитектуре: номер версии пакета в новой отправке всегда должен быть больше номера последнего пакета для той же архитектуры, отправленного в Магазин Windows.

Кроме того, номер версии пакетов Windows8.1 должен быть больше, чем номера версий всех пакетов Windows8 того же приложения. Другими словами, номер версии отправляемого пакета Windows8 должен быть меньше номера версии любого отправляемого пакета Windows8.1 для того же приложения.

> [!NOTE]
> Если у вас также есть пакетыдля Windows 10, номер версии пакетовWindows 10 должен быть больше, чем у пакетов для Windows 8, Windows 8.1 и Windows Phone 8.1, которые вы публикуете или уже опубликовали. (Подробнее см. в разделе [Добавление пакетов для Windows 10 в ранее опубликованное приложение](guidance-for-app-package-management.md#adding-packages-for-windows-10-to-a-previously-published-app).)

Вот несколько примеров того, что происходит в различных сценариях обновления номеров версий для Windows8и Windows 8.1.

| Версия приложения в Магазине  | Отправка этой версии | После появления новой версии в Магазине Windows это будет установлено в случае нового приобретения | После появления новой версии в Магазине Windows это будет обновлено, если клиент уже установил приложение |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------------------|----------|
| Без изменений                                     | x86, v1.0.0.0               | x86, v1.0.0.0 на компьютерах x86 и x64                                                | Без изменений |
| x86, v1.0.0.0                               | x64, v1.0.0.0               | v1.0.0.0 для архитектуры клиента                                                   | Без изменений Номера версий совпадают. |
| x86, v1.0.0.0 <br> x64, v1.0.0.0            | x64, v1.0.0.1               | v1.0.0.0 для клиентов с компьютером x86 <br> v1.0.0.1 для клиентов с компьютером x64                 | Отсутствуют изменения для клиентов, запускающих приложение на компьютере x86. <br> Версия 1.0.0.0 будет обновлена до версии 1.0.0.1 для клиентов, запускающих приложение на компьютере x64. <br> **Примечание.** Если версия приложения x86 запущена на компьютере x64, приложение не будет обновлено до версии x64, пока клиент не выполнит удаление и переустановку. |
| Без изменений                                     | нейтральный, v1.0.0.1           | нейтральный, v1.0.0.1 на любых компьютерах                                                         | Без изменений |
| нейтральный, v1.0.0.1                           | x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | v1.0.0.0 для архитектуры компьютера клиента          | Без изменений Клиенты, которые используют нейтральный пакет версии 1.0.0.1, будут и дальше пользоваться этой версией приложения. |
| нейтральный, v1.0.0.1 <br> x86, v1.0.0.0 <br> x64, v1.0.0.0 <br> ARM, v1.0.0.0 | x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | v1.0.0.1 для архитектуры компьютера клиента | Отсутствуют изменения для клиентов, запускающих нейтральную версию приложения v1.0.0.1. <br> v1.0.0.0 будет обновлена до v1.0.0.1 для клиентов, использующих версию v1.0.0.0 приложения, разработанную специально для архитектуры их компьютера. |
| x86, v1.0.0.1 <br> x64, v1.0.0.1 <br> ARM, v1.0.0.1 | x86, v1.0.0.2 <br> x64, v1.0.0.2 <br> ARM, v1.0.0.2 | v1.0.0.2 для архитектуры компьютера клиента  | Версия 1.0.0.1 будет обновлена до версии 1.0.0.2 для клиентов, использующих любую версию 1.0.0.1 приложения, разработанную специально для архитектуры их компьютеров. |
 
> [!NOTE]
> В отличие от пакетов .appx, номера версии в любых пакетах .xap не учитываются при решении, какой пакет предоставить конкретному пользователю. Для обновления пакета .xap пользователя до более нового удалите старый пакет .xap из новой отправки.
