---
author: jnHs
Description: "Помимо создания рекламной кампании для вашего приложения, которая будет работать в приложениях для Windows, вы также можете продвигать свое приложение по другим каналам."
title: "Создание пользовательской кампании по продвижению приложения"
ms.assetid: 7C9BF73E-B811-4FC7-B1DD-4A0C2E17E95D
translationtype: Human Translation
ms.sourcegitcommit: 3afdf00864e023d913b635beef0c506735881b23
ms.openlocfilehash: a6e97968df4e9ab986d364b2573a31b4ba9d1958

---

# Создание пользовательской кампании по продвижению приложения



Помимо создания [рекламной кампании для вашего приложения](create-an-ad-campaign-for-your-app.md), которая будет работать в приложениях для Windows, вы также можете продвигать свое приложение по другим каналам. Например, вы можете продвигать свое приложение, используя стороннего поставщика услуг по маркетингу приложений или публиковать ссылки на ваше приложение на сайтах социальных сетей. Эти действия называются *пользовательскими кампаниями*.

Если вы используете пользовательские кампании для вашего приложения, вы можете отслеживать относительную производительность каждой кампании, создав разные URL-адреса приложения Магазина Windows для каждой пользовательской кампании, где каждый URL-адрес содержит собственный идентификатор кампании. Когда пользователь Windows10 щелкает URL-адрес, содержащий идентификатор кампании, Майкрософт связывает это нажатие с соответствующей пользовательской кампанией и предоставляет вам эти данные.

Существует два основных типа данных, связанных с пользовательскими кампаниями: просмотры страниц вашего приложения и *конверсии*. Конверсия — это установка приложения, к которой привело нажатие пользователем страницы Магазина Windows для вашего приложения с URL-адресом, продвигаемым через пользовательскую кампанию. Дополнительные сведения о конверсиях см. в подразделе [Общие сведения о том, какие установки считаются конверсиями](#understanding-how-app-installs-qualify-as-conversions) далее в этом разделе.

Вы можете получить данные о производительности пользовательской кампании для вашего приложения следующими способами:

-   Если ваше приложение является приложением универсальной платформы Windows (UWP), для него можно использовать метод [**GetAppPurchaseCampaignIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt186445), который позволяет программно получать идентификатор пользовательской кампании, которая привела к конверсии.
-   Вы можете просматривать данные о представлениях и конверсиях страницы для вашего приложения или надстройки в [отчете о каналах и преобразованиях](channels-and-conversions-report.md) на панели мониторинга Центра разработки.

> **Важно!**   Эти данные будут отслеживается только для пользователей Windows 10. Пользователи, использующие другие операционные системы, могут по-прежнему переходить по ссылке на страницу с описанием вашего приложения, но данные об этих действиях пользователя не будут включены.

 

## Примерный сценарий пользовательской кампании


Представим разработчика игр, который только что создал новую игру и хотел бы продвигать ее среди пользователей своих текущих игр. Она публикует объявление о выходе новой игры на своей странице в Facebook и указывает ссылку на страницу Магазина Windows, где находится эта игра. Многие из пользователей, играющих в ее игры, также читают ее в Twitter, поэтому она также публикует объявление в Twitter, указывая ссылку на страницу Магазина Windows с игрой.

Чтобы отслеживать успех каждого из этих каналов продвижений, разработчик создает два варианта URL-адрес для страниц Магазина Windows с игрой.

-   URL-адрес, опубликованный на ее странице в Facebook, включает идентификатор пользовательской кампании `my-facebook-campaign`.
-   URL-адрес, который она публикует в Twitter, включает идентификатор пользовательской кампании `my-twitter-campaign`.

Ее читатели в Facebook и Twitter щелкают URL-ссылки, а Майкрософт отслеживает каждый щелчок и сопоставляет его с соответствующей пользовательской кампанией. Далее соответствующие приобретения игры и любые покупки надстроек сопоставляются с пользовательской кампанией и регистрируются как конверсии.

## Общие сведения о том, какие установки считаются конверсиями


*Конверсия* — это установка приложения, к которой привело нажатие пользователем страницы Магазина Windows для вашего приложения с URL-адресом, продвигаемым через пользовательскую кампанию. Есть разные условия для того, чтобы установка считалась конверсией в [отчете о каналах и конверсиях](channels-and-conversions-report.md) на информационной панели Центра разработки и для [программного получения идентификатора кампании](#programmatically).

Чтобы установка считалась конверсией в [отчете о каналах и конверсиях](channels-and-conversions-report.md), должны выполняться следующие условия:

-   Пользователь с актуальной учетной записью Майкрософт щелкает URL-адрес приложения, содержащий идентификатор пользовательской кампании и перенаправляется на страницу Магазина Windows для соответствующего приложения.
-   Тот же пользователь (определенный по той же учетной записи Майкрософт) устанавливает приложение в течение 24 часов после первого щелчка URL-адреса Магазина Windows с идентификатором пользовательской кампании. Это расценивается как конверсия, даже если клиент устанавливает приложение на компьютер или устройство, отличные от тех, на которых был выполнен переход на URL-адрес Магазина Windows с идентификатором пользовательской кампании.
    > **Примечание.**  Для установок приложения, которые считаются конверсиями для пользовательской кампании, все покупки надстроек из этого приложения также считаются конверсиями для этой же пользовательской кампании.

     

Чтобы установка считалась конверсией при программном получении идентификатора кампании, связанного с приложением, должны выполняться следующие условия:

-   Пользователь с актуальной учетной записью Майкрософт щелкает URL-адрес приложения, содержащий идентификатор пользовательской кампании и перенаправляется на страницу Магазина Windows для соответствующего приложения.
-   Пользователь устанавливает приложение во время просмотра страницы Магазина Windows после щелчка URL-адреса. Если пользователь покидает страницу и возвращается на нее (на том же компьютере или устройстве или на другом компьютере или устройстве) в течение 24 часов и устанавливает приложение, это будет считаться конверсией в [отчете о каналах и конверсиях](channels-and-conversions-report.md), но не будет считаться конверсией при программном получении идентификатора кампании.

## Встраивание идентификатора пользовательской кампании в URL-адрес страницы Магазина Windows с вашим приложением


Чтобы создать URL-адрес страницы Магазина Windows для вашего приложения с идентификатором пользовательской кампании, выполните следующие действия:

1.  Создайте строку идентификатора для вашей пользовательской кампании. Эта строка может содержать до 100 символов, хотя мы рекомендуем определять короткие идентификаторы кампании.
2.  Получите URL-адрес страницы приложения в Магазине Windows в формате HTML или формате протокола. URL-адрес в формате HTML доступен на странице [**Удостоверение приложения** информационной панели Центра разработки](link-to-your-app.md).
    -   Используйте формат HTTP, если необходимо, чтобы пользователь переходил на страницу приложения в Магазине Windows с помощью браузера (если установлено приложение Магазина Windows, этот URL-адрес также открывает в Магазине Windows страницу с описанием вашего приложения). Этот URL-адрес имеет формат **`https://www.microsoft.com/store/apps/*your app name*/*your app ID*`**. Например, URL-адрес HTTP для Skype— `https://www.microsoft.com/store/apps/skype/9wzdncrfj364`.
        > **Примечание.**  URL-адрес в формате HTTP можно использовать для перехода в Магазин Windows с помощью браузера на компьютерах и планшетах под управлением Windows 7 и более поздних версий и на телефонах под управлением Windows Phone 8 и более поздних версий.
- Используйте формат протокола, если вы продвигаете свое приложение из других приложений для Windows, работающих на устройстве или компьютере с установленным приложением Магазина Windows, и хотите, чтобы пользователи открывали страницу вашего приложения в приложении магазина Windows. Этот URL-адрес имеет формат **`ms-windows-store://pdp/?PRODUCTID=*your app id*`**. Например, URL-адрес протокола в Skype— `ms-windows-store://pdp/?PRODUCTID=9wzdncrfj364`.
3.  Добавляйте следующую строку в конец URL-адреса для вашего приложения:
    -   Для URL-адреса в формате HTTP добавьте строку **`?cid=*my custom campaign ID*`**. Например, если Skype предоставляет идентификатор кампании со значением **custom\_campaign**, новый URL-адрес в формате HTTP, включая идентификатор кампании, будет следующим: `https://www.microsoft.com/store/apps/skype/9wzdncrfj364?cid=custom\_campaign`.
    -   Для URL-адресов в формате протокола добавьте строку **`&cid=*my custom campaign ID*`**. Например, если Skype предоставляет идентификатор кампании со значением **custom\_campaign**, новый URL-адрес в формате протокола, включая идентификатор кампании, будет следующим: `ms-windows-store://pdp/?PRODUCTID=9wzdncrfj364&cid=custom\_campaign`.

## Программное получение идентификатора пользовательской кампании для приложения


Если ваше приложение является приложением UWP, вы можете программно получить идентификатор пользовательской кампании, связанный с вашим приложением, используя метод [**GetAppPurchaseCampaignIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt186445). Этот метод позволяет использовать многие сценарии аналитики и монетизации. Например, вы можете узнать, получил ли текущий пользователь ваше приложение, найдя его через кампанию в Facebook, а затем настроить соответствующим образом взаимодействие с пользователем в своем приложении. Кроме того, если вы используете стороннего поставщика услуг маркетинга приложений, вы можете предоставить ему эти данные.

> **Примечание.**  Метод [**GetAppPurchaseCampaignIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt186445) возвратит строку идентификатора кампании, только если пользователь щелкнет URL-адрес со встроенным идентификатором кампании. В этом случае пользователь будет перенаправлен на страницу Магазина Windows для вашего приложения, а затем установит ваше приложение, не закрывая этой страницы. Если пользователь покидает страницу, а позже возвращается на нее и устанавливает приложение, это не будет считаться конверсией при использовании **GetAppPurchaseCampaignIdAsync**. Дополнительные сведения см. в подразделе [Общие сведения о конверсиях](#conversions) в этом разделе.

 

В следующем примере показано, как использовать метод [**GetAppPurchaseCampaignIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt186445) для получения идентификатора пользовательской кампании для приложения. Если приложение не было установлено в рамках успешной конверсии, этот метод вернет пустую строку.

``` csharp
string campaignId = await CurrentApp.GetAppPurchaseCampaignIdAsync();
```

``` cpp
HString campaignId;
HRESULT hr = CurrentApp::GetAppPurchaseCampaignIdAsync(campaignId.GetAddressOf());
```

Метод [**GetAppPurchaseCampaignIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt186445) получает данные из Магазина Windows. При использовании этого метода придерживайтесь следующих рекомендаций:

-   Заключите вызов этого метода в асинхронную операцию, чтобы вызов был завершен.
-   Если приложение еще не опубликовано в Магазине Windows и вы проверяете пользовательскую кампанию, используйте метод [**GetAppPurchaseCampaignIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt187034) класса [**CurrentAppSimulator**](https://msdn.microsoft.com/library/windows/apps/hh779766) вместо класса [**CurrentApp**](https://msdn.microsoft.com/library/windows/apps/hh779765). Соблюдайте следующие правила.
    -   Добавьте элемент **AppPurchaseCampaignId** в файл WindowsStoreProxy.xml, как показано в следующем примере. Присвойте значение элемента идентификатору пользовательской кампании. При запуске приложения метод [**GetAppPurchaseCampaignIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt187034) всегда будет возвращать это значение. Подробнее о файле WindowsStoreProxy.xml см. в документации по [**CurrentAppSimulator**](https://msdn.microsoft.com/library/windows/apps/hh779766).

    ```        XML
    <CurrentApp>
        ....
        <AppPurchaseCampaignId>your custom campaign ID</AppPurchaseCampaignId>
    </CurrentApp>
    ```
    
    -   Чтобы легко переключаться между использованием [**CurrentApp**](https://msdn.microsoft.com/library/windows/apps/hh779765) и [**CurrentAppSimulator**](https://msdn.microsoft.com/library/windows/apps/hh779766), рекомендуется добавить следующие операторы в код для определения псевдонима **Store**, а затем квалифицировать свои вызовы [**GetAppPurchaseCampaignIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt187034) с псевдонимом **Store**.

    ```        CSharp
    #if DEBUG
            using Store = Windows.ApplicationMode.Store.CurrentAppSimulator;
            #else
            using Store = Windows.ApplicationMode.Store.CurrentApp;
            #endif   
    ```

## Проверка вашей пользовательской кампании


Перед продвижением URL-адреса пользовательской кампании рекомендуем проверить пользовательскую кампанию, выполнив следующие действия:

1.  Выполните вход в свою учетную запись Майкрософт на компьютере или устройстве, используемом для проверки.
2.  Щелкните URL-адрес пользовательской кампании. Убедитесь, что Магазин Windows правильно загружает страницу вашего приложения, затем закройте приложение Магазина Windows или страницу браузера.
3.  Щелкните URL-адрес несколько раз, закрывая приложение Магазина Windows или страницу браузера после каждого посещения страницы вашего приложения. Во время одного из посещений страницы вашего приложения установите приложение для создания конверсии. Посчитайте количество щелчков URL-адреса.
4.  Если вы программно получаете идентификатор пользовательской кампании в своем приложении, проверьте эту операцию с помощью метода [**GetAppPurchaseCampaignIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt187034) класса [**CurrentAppSimulator**](https://msdn.microsoft.com/library/windows/apps/hh779766) вместо класса [**CurrentApp**](https://msdn.microsoft.com/library/windows/apps/hh779765).

 

 







<!--HONumber=Aug16_HO3-->


