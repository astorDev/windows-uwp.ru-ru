---
author: PatrickFarley
ms.assetid: 60fc48dd-91a9-4dd6-a116-9292a7c1f3be
title: Обзор портала устройств Windows
description: Узнайте, как портал устройств Windows позволяет настраивать устройство и управлять им удаленно через сеть или USB-подключение.
ms.author: pafarley
ms.date: 12/12/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, uwp, портал устройства
ms.localizationpriority: medium
ms.openlocfilehash: 08e7d8fcfbab0d0b22fffa3e3e0aecc38d5b095c
ms.sourcegitcommit: 9a17266f208ec415fc718e5254d5b4c08835150c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/28/2018
ms.locfileid: "2889279"
---
# <a name="windows-device-portal-overview"></a>Обзор портала устройств Windows

Портал устройств Windows позволяет настраивать устройство и управлять им удаленно через сеть или USB-подключение. Он также предоставляет дополнительные средства диагностики для устранения неполадок и просматривать в реальном времени производительности устройства Windows.

Портал устройства Windows — это веб-сервера на устройстве, которые могут подключаться к веб-браузере на ПК. Если устройство имеет веб-браузера, можно также подключить локально с помощью браузера на это устройство.

Портал устройства Windows доступна на каждое семейство устройств, но функции и установки различаться в зависимости от требований каждого устройства. В этой статье дается общее описание портала устройства, а также приведены ссылки на статьи, содержащие более подробные сведения по каждому семейству устройств.

Функциональные возможности портала устройства Windows реализована с помощью [API -интерфейсы REST](device-portal-api-core.md) , которые можно использовать непосредственно для доступа к данным и управления устройства программными средствами.

## <a name="setup"></a>Настройка

Каждое устройство имеет свои инструкции для подключения к порталу устройства, однако к каждому из них применимы следующие общие действия:
1. Включение режима разработчика и устройства портала на устройстве (настроен в окне Параметры приложения).
2. Подключите устройство к Компьютеру через локальную сеть или с помощью USB.
3. Перейдите на страницу портала устройства в своем браузере. В этой таблице показано, порты и протоколы, используемые каждого семейства устройств.

Семейство устройств | Включено по умолчанию? | HTTP | HTTPS | USB
--------------|----------------|------|-------|----
HoloLens | Да, в режиме разработки | 80 (по умолчанию) | 443 (по умолчанию) | http://127.0.0.1:10080
Интернет вещей | Да, в режиме разработки | 8080 | Включается через раздел реестра | Н/Д
Xbox | Включается в режиме разработки | Отключен | 11443 | Н/Д
Настольный компьютер| Включается в режиме разработки | 50080\* | 50043\* | Н/Д
Телефон | Включается в режиме разработки | 80| 443 | http://127.0.0.1:10080

\* Это не всегда так, поскольку Портал устройств на настольном компьютере использует порты в диапазоне временных портов (>50000), чтобы предотвратить конфликты с существующими запросами на использование портов на устройстве. Подробнее см. в разделе [Параметры портов](device-portal-desktop.md#registry-based-configuration-for-device-portal) для настольных компьютеров.  

Конкретные инструкции по настройке устройства см. в разделах:
- [Портал устройств для HoloLens](https://docs.microsoft.com/windows/uwp/debug-test-perf/device-portal-hololens)
- [Портал устройства для IoT](https://go.microsoft.com/fwlink/?LinkID=616499)
- [Портал устройств для мобильных устройств](device-portal-mobile.md)
- [Портал устройств для Xbox](device-portal-xbox.md)
- [Портал устройств для ПК](device-portal-desktop.md#set-up-device-portal-on-windows-desktop)

## <a name="features"></a>Возможности

### <a name="toolbar-and-navigation"></a>Панель инструментов и навигация

Панели инструментов в верхней части страницы предоставляет доступ к часто используемые компоненты.
- **Power**: доступ к Электропитание.
  - **Завершение работы**: отключает устройство.
  - **Перезапуск**: выключает и включает питание устройства.
- **Справка**: открывает страницу справки.

Используйте ссылки на панели навигации вдоль левой стороны страницы для перехода к доступным для вашего устройства средствам управления и мониторинга.

Ниже описаны средства, которые являются общими для всех семейств устройства. В зависимости от устройства могут быть доступны другие параметры. Дополнительные сведения см в определенных параметров страницы для соответствующего типа устройства.

### <a name="apps-manager"></a>Диспетчер приложений

Диспетчер приложений предоставляет Установка и удаление программ и функциональные возможности управления для приложения, пакеты и объединяет на устройстве узла.

![Страница диспетчера устройств приложения портала](images/device-portal/wdp-apps.png)

- **Установленные приложения**: используйте в раскрывающемся меню для удаления или запуска приложений, установленных на устройстве. Установка нового приложения, нажав кнопку **Добавить**. Это запускает взаимодействия с пользователями для развертывания пакета приложений из локальной установки, сети или веб-размещается и регистрация свободные файлы из общих сетевых папок.
- **Запуска приложений**: получение сведений о приложениях, которые в настоящее время работает и закройте их при необходимости.

#### <a name="install-an-app"></a>Установка приложения

1.  После создания пакета приложения вы можете удаленно установить его на устройстве. После его сборки в Visual Studio создается выходная папка.
  ![Установка приложения](images/device-portal/iot-installapp0.png)
2.  В разделе диспетчер приложения портала устройств нажмите кнопку **Добавить** и выберите команду **установить пакет приложения из локального хранилища**.
3.  Нажмите кнопку **Обзор** и найдите пакет вашего приложения.
3.  Нажмите кнопку **Обзор** и найдите файл сертификата (_CER-файл_) (не требуется на всех устройствах).
4.  Проверьте соответствующие поля, если необходимо установить необязательные или framework пакетов, а также установка приложения. При наличии нескольких зависимостей добавляйте каждую по отдельности.     
5.  Нажмите кнопку **Далее** для перехода к следующей шаг и **установите** для запуска установки. 

#### <a name="uninstall-an-app"></a>Удаление приложения
1.  Убедитесь, что приложение не работает. 
2.  Если это так, перейдите к **запуска приложений** и закройте его. При попытке удаления во время выполнения приложения, это вызовет проблемы при попытке повторно установить приложение. 
3.  Выберите приложение из раскрывающегося списка и нажмите кнопку **Удалить**.

### <a name="running-processes"></a>Выполнение процессов

На этой странице отображаются сведения о процессах, которые в настоящее время работает на устройстве узла. Сюда входят приложения и системные процессы. На некоторых платформах (рабочий стол, IoT и HoloLens) можно завершать процессы.

![Устройства под управлением портала обрабатывает страницы](images/device-portal/mob-device-portal-processes.png)

### <a name="file-explorer"></a>Проводник

На этой странице позволяет просматривать и управлять файлы с любого приложения sideloaded. В разделе блоге [с помощью проводника файл приложения](https://blogs.windows.com/buildingapps/2016/06/08/using-the-app-file-explorer-to-see-your-app-data/) для получения дополнительных сведений о File explorer и способы его использования. 

![Страница explorer портала файл устройства](images/device-portal/mob-device-portal-AppFileExplorer.png)

### <a name="performance"></a>Производительность

На странице производительности отображается в режиме реального времени графиках сведений о диагностике системы как энергии, частота кадров и загрузки ЦП.

Ниже приведены доступные метрики:
- **ЦП**: процент доступных ресурсов ЦП
- **Память**: общее количество в целях, доступен, завершенных, выгружаемый и не выгружаемый
- **Операции ввода-вывода**: чтение и запись данных количество заказов
- **Сети**: полученных и отправленных данных
- **Графический Процессор**: процент общее доступные Графического ядра СУБД использования


![Страница портала производительности устройства](images/device-portal/mob-device-portal-perf.png)

### <a name="event-tracing-for-windows-etw-logging"></a>Ведение журнала событий Windows (Трассировки)

Страница ведения журнала трассировки событий Windows управляет информацию в реальном времени для Windows (Трассировки событий) на устройстве.

![Страница ведения журнала трассировки событий Windows портала устройства](images/device-portal/mob-device-portal-etw.png)

Установите только флажок **Скрыть поставщиков** для отображения только списка «События».
- **Зарегистрированные поставщиков**: выберите поставщик событий и уровень трассировки. Уровень трассировки — это одно из следующих значений:
  1. ненормальный выход или прекращение;
  2. серьезные ошибки;
  3. предупреждения;
  4. предупреждения, не связанные с ошибками.
  5. Подробные трассировки

  Щелкните или нажмите **Включить** для запуска трассировки. Поставщик добавляется в раскрывающийся список **Включенные поставщики**.
- **Пользовательские поставщики**: выбор пользовательского поставщика трассировки событий Windows и уровень трассировки. Определите поставщика по его GUID. Не включайте скобки в GUID.
- **Поставщики включено**: список включенных поставщиков. Выберите поставщика в раскрывающемся списке и щелкните или нажмите **Отключить**, чтобы остановить трассировки. Щелкните или нажмите **Стоп**, чтобы приостановить всю трассировку.
- **Журнал поставщиков**: это показаны поставщики трассировки событий Windows, которые были включены во время текущего сеанса. Щелкните или нажмите **Включить**, чтобы активировать поставщика, который ранее был отключен. Щелкните или нажмите **Очистить**, чтобы очистить журнал.
- **Фильтры / события**: разделе **событий** перечислены события Трассировки из выбранных поставщиков в табличном формате. Таблица обновляется в режиме реального времени. Настройка настраиваемых фильтров, для которых будет отображаться событий с помощью меню **фильтров** . Нажмите кнопку **Очистить** для удаления из таблицы все события трассировки событий Windows. Это не приводит к отключению каких-либо поставщиков. Щелкните **Сохранить файл** для экспорта в настоящее время собранные события трассировки событий Windows в локальном CSV-файл.

Для получения дополнительных сведений об использовании ведения журнала трассировки событий Windows см в блоге [Портала устройства используется для просмотра журналов отладки](https://blogs.windows.com/buildingapps/2016/06/10/using-device-portal-to-view-debug-logs-for-uwp/) . 

### <a name="performance-tracing"></a>Трассировка производительности

На странице трассировки производительности можно представления, трассировку [Записи производительности Windows (ЗВЧ)](https://msdn.microsoft.com/library/hh448205.aspx) с устройства узла.

![Страница трассировки производительности портала устройства](images/device-portal/mob-device-portal-perf-tracing.png)

- **Доступные профили**: выберите профиль WPR в раскрывающемся списке, затем щелкните или нажмите **Пуск** для запуска трассировки.
- **Пользовательские профили**: щелкните или нажмите **Обзор** для выбора профиля WPR на своем компьютере. Щелкните или нажмите **Передать и пуск** для запуска трассировки.

Чтобы остановите трассировку, нажмите **Остановить**. Оставайтесь на этой странице до файла трассировки (. ETL) завершения загрузки.

Записаны. ETL файлы могут быть открыты для анализа в [Анализатор производительности Windows](https://msdn.microsoft.com/library/windows/desktop/hh448170.aspx).

### <a name="device-manager"></a>Диспетчер устройств

Страница диспетчера устройств перечисляет все периферийных, подключенного к устройству. Щелкните значок параметры для просмотра свойств каждого из них.

![Страница диспетчера устройств портала устройства](images/device-portal/mob-device-portal-devices.png)

### <a name="networking"></a>Сеть

Страница сети управляет сетевых подключений на устройстве. Если вы не подключены к порталу устройств через порт USB, изменение этих параметров произойдет скорее всего отключение от устройства портала.
- **Доступные сети**: показаны сети WiFi, доступные на устройство. Щелкните или нажмите сеть, чтобы подключиться к ней, при необходимости предоставьте ключ доступа. Портал устройства еще не поддерживает проверки подлинности Enterprise. Можно также использовать раскрывающийся список **профилей** для попытки подключения к профилей WiFi, известные на устройство.
- **Конфигурация IP-адресов**: отображает адрес сведения о каждом узле устройства сетевых портов.

![Страница портала сетевые устройства](images/device-portal/mob-device-portal-network.png)

## <a name="service-features-and-notes"></a>Функции службы и заметки

### <a name="dns-sd"></a>DNS-SD

Портал устройств сообщает о своем присутствии в локальной сети с помощью DNS-SD. Все экземпляры Портала устройств, независимо от типа устройства, объявляют себя с помощью "WDP._wdp._tcp.local". Записи TXT для экземпляра службы предоставляют следующие сведения:

Ключ | Тип | Описание 
----|------|-------------
S | целое число | Защищенный порт Портала устройств. Если значение равно нулю (0), Портал устройств не выполняет прослушивание на предмет подключений HTTPS. 
D | Строка | Тип устройства. Будет иметь формат "Windows.*", например Windows.Xbox или Windows.Desktop
A | Строка | Архитектура устройства. Архитектурой будет ARM, x86 или AMD64.  
T | разбитый список строк нуль-символа | Пользовательские теги для устройства. Инструкции по использованию см. в разделе "Теги, REST API". Список заканчивается двойным символом NULL.  

Так как не все устройства прослушивают порт HTTP, объявляемый записью DNS-SD, подключение рекомендуется устанавливать к порту HTTPS. 

### <a name="csrf-protection-and-scripting"></a>Защита от атак CSRF и сценарии

Чтобы обеспечить защиту от [атак CSRF](https://wikipedia.org/wiki/Cross-site_request_forgery), все запросы, отличные от GET, должны иметь уникальный маркер. Этот маркер, заголовок запроса X-CSRF, извлекается из файла cookie сеанса— CSRF-Token. В веб-интерфейсе пользователя Портала устройств при каждом запросе файл cookie CSRF-Token копируется в заголовок X-CSRF-Token.

> [!IMPORTANT]
> В этом защиты не позволяет использование API REST из автономный клиент (например, служебные программы командной строки). Эту проблему можно решить тремя способами: 
> - Используйте «auto-» имя пользователя. Клиенты, которые буду добавлять "auto-" в начало своего имени пользователя смогут обходить защиту от атак CSRF. Важно не использовать это имя пользователя для входа на Портал устройств с помощью браузера, так как при этом служба будет становиться открытой для атак CSRF. Пример. Если именем пользователя для входа на Портал устройств является "admin", для обхода защиты от атак CSRF необходимо использовать имя ```curl -u auto-admin:password <args>```. 
> - Реализуйте в клиенте схему передачи значений параметров файла cookie серверу с каждым запросом в качестве части заголовка HTTP. Для этого требуется, чтобы запрос GET определял файл cookie сеанса, а также выполнение дальнейшего добавления заголовка и файла cookie во все последующие запросы. 
> - Отключите проверку подлинности и используйте HTTP. Защита от атак CSRF применяется только к конечным точкам HTTPS, поэтому подключениям к конечным точкам HTTP не придется выполнять никакие из описанных выше действий. 

#### <a name="cross-site-websocket-hijacking-cswsh-protection"></a>Защита от межсайтового перехвата с использованием WebSocket (CSWSH)

Для защиты против [CSWSH-атак](https://www.christian-schneider.net/CrossSiteWebSocketHijacking.html) все клиенты, открывающие WebSocket-соединение с порталом устройств должны также предоставлять заголовок источника, совпадающий с заголовком узла. Это демонстрирует порталу устройств, что запрос отправляется либо пользовательским интерфейсом портала устройств, либо действительным клиентским приложением. Без заголовка источника запрос будет отклонен. 
