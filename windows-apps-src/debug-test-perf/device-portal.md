---
ms.assetid: 60fc48dd-91a9-4dd6-a116-9292a7c1f3be
title: Обзор портала устройств Windows
description: Узнайте, как портал устройств Windows позволяет настраивать устройство и управлять им удаленно через сеть или USB-подключение.
ms.date: 4/9/2019
ms.topic: article
keywords: Windows 10, uwp, портал устройств
ms.localizationpriority: medium
ms.openlocfilehash: 39715dc3f4b88a2e9a91a7cb659208f8370f16f2
ms.sourcegitcommit: ac7f3422f8d83618f9b6b5615a37f8e5c115b3c4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "66362418"
---
# <a name="windows-device-portal-overview"></a>Обзор портала устройств Windows

Портал Windows Device Portal позволяет настроить устройство и управлять им удаленно по сети или подключению USB. Он также предоставляет расширенные средства диагностики для устранения неполадок и просмотреть сведения о производительности в режиме реального времени на устройстве Windows.

Windows Device Portal — это веб-сервера на вашем устройстве, к которому можно подключиться из веб-браузер на Компьютере. Если на устройстве веб-браузер, можно также подключиться локально с помощью браузера на этом устройстве.

Windows Device Portal можно найти в каждом семействе устройств, но функции и настройки различаются в зависимости от требований каждого устройства. В этой статье дается общее описание портала устройства, а также приведены ссылки на статьи, содержащие более подробные сведения по каждому семейству устройств.

Функциональные возможности Windows Device Portal реализуется с помощью [интерфейсов REST API](device-portal-api-core.md) можно использовать непосредственно для доступа к данным и управления устройства программными средствами.

## <a name="setup"></a>Установка

Каждое устройство имеет свои инструкции для подключения к порталу устройства, однако к каждому из них применимы следующие общие действия:

1. Включите режим разработчика и портал устройств на устройстве (настраивается в настройках приложения).

2. Подключите устройство к ПК через локальную сеть или с помощью USB.

3. Перейдите на страницу портала устройства в своем браузере. В этой таблице показано, порты и протоколы, используемые каждого семейства устройств.

Семейство устройств | Включено по умолчанию? | HTTP | HTTPS | USB
--------------|----------------|------|-------|----
HoloLens | Да, в режиме разработки | 80 (по умолчанию) | 443 (по умолчанию) | http://127.0.0.1:10080
Интернет вещей | Да, в режиме разработки | 8080 | Включается через раздел реестра | Н/Д
Xbox | Включается в режиме разработки | Отключено | 11443 | Н/Д
Настольный компьютер| Включается в режиме разработки | 50080\* | 50043\* | Н/Д
Phone | Включается в режиме разработки | 80| 443 | http://127.0.0.1:10080

\* Это не всегда так, как портал устройств на рабочем столе утверждений портов в временного диапазона (> 50 000) для предотвращения конфликтов с помощью существующих заявок порт на устройстве. Подробнее см. в разделе [Параметры портов](device-portal-desktop.md#registry-based-configuration-for-device-portal) для настольных компьютеров.  

Конкретные инструкции по настройке устройства см. в разделах:

- [Портал устройств для HoloLens](https://docs.microsoft.com/windows/uwp/debug-test-perf/device-portal-hololens)
- [Портал устройств для IoT](https://go.microsoft.com/fwlink/?LinkID=616499)
- [Портал устройств для мобильных устройств](device-portal-mobile.md)
- [Портал устройств для Xbox](../xbox-apps/device-portal-xbox.md)
- [Портал устройств для рабочего стола](device-portal-desktop.md#set-up-device-portal-on-windows-desktop)

## <a name="features"></a>Компоненты

### <a name="toolbar-and-navigation"></a>Панель инструментов и навигация

Панели инструментов в верхней части страницы предоставляет доступ к часто используемые функции.

- **Power**: Параметры питания доступа.
  - **Завершение работы**: Отключение устройства.
  - **Перезапустите**: Циклов питания на устройстве.
- **Справка**: Открывает страницу справки.

Используйте ссылки на панели навигации вдоль левой стороны страницы для перехода к доступным для вашего устройства средствам управления и мониторинга.

Здесь описаны средства, которые являются общими для всех семейств устройств. В зависимости от устройства могут быть доступны другие параметры. Дополнительные сведения см. в разделе определенную страницу для своего типа устройства.

### <a name="apps-manager"></a>Диспетчер приложений

Apps manager обеспечивает установку и удаление, и функции управления для приложения, пакеты и объединяет на устройстве узла.

![Страница «Диспетчер приложений портала устройства»](images/device-portal/WDP_AppsManager2.png)

* **Развертывание приложений**: Разверните упакованных приложений от локальной сети и веб-узлы и зарегистрируйте свободные файлы из общих сетевых ресурсов.
* **Установленные приложения**: Используйте раскрывающееся меню для удаления или запуск приложения, установленные на устройстве.
* **Запуск приложений**: Получите сведения о приложениях, выполняющихся и закрывать их при необходимости.

#### <a name="install-sideload-an-app"></a>Установить приложение (загрузки неопубликованных приложений)

Вы можете загружать неопубликованные приложения во время разработки, с помощью Windows Device Portal:

1. При создании пакета приложения, можно удаленно установить его на устройстве. После его сборки в Visual Studio создается выходная папка.

    ![Установка приложения](images/device-portal/iot-installapp0.png)

2. В Windows Device Portal, перейдите к **Apps manager** страницы.

3. В **развертывание приложений** выберите **локальное хранилище**.

4. В разделе **выберите пакет приложения,** выберите **выбрать файл** и перейдите к пакету приложения, который требуется загрузить неопубликованные.

5. В разделе **файл выбора сертификата (.cer), используемый для подписания пакета приложения**выберите **выбрать файл** и найдите сертификат, связанный с этой пакет приложения.

6. Проверьте соответствующие флажки для установки необязательный или пакеты framework, а также установку приложения и выберите **Далее** их выбирать.

7. Выберите **установить** для запуска установки.

8. Если устройство работает под управлением Windows 10 в режиме S, и это при первом указанный сертификат был установлен в устройство, перезапустите устройство.

#### <a name="install-a-certificate"></a>Установка сертификата

Кроме того можно установить сертификат с помощью Windows Device Portal Чтобы установить приложения с помощью других средств.

1. В Windows Device Portal, перейдите к **Apps manager** страницы.

2. В **развертывание приложений** выберите **установить сертификат**.

3. В разделе **файл выбора сертификата (.cer), используемый для подписания пакета приложения**выберите **выбрать файл** и найдите сертификат, связанный с пакет приложения, который требуется загрузить неопубликованные.

4. Выберите **установить** для запуска установки.

5. Если устройство работает под управлением Windows 10 в режиме S, и это при первом указанный сертификат был установлен в устройство, перезапустите устройство.

#### <a name="uninstall-an-app"></a>Удаление приложения

1. Убедитесь, что приложение не работает.
2. Если это так, перейдите к **запуск приложений** и закройте его. Если вы попытаетесь удалить во время работы приложения, это вызовет проблемы при попытке установить приложение.
3. Выберите приложение из раскрывающегося списка и нажмите кнопку **удалить**.

### <a name="running-processes"></a>Запущенные процессы

На этой странице отображаются сведения о процессах, запущенных на устройстве узла. Сюда входят приложения и системные процессы. На некоторых платформах (рабочий стол, IoT и HoloLens) могут завершать процессы.

![Устройство под управлением портала обрабатывает страницу](images/device-portal/mob-device-portal-processes.png)

### <a name="file-explorer"></a>Проводник

Эта страница позволяет просматривать и управлять файлы, расположенные, все загруженные неопубликованные приложения. См. в разделе [проводнике приложения](https://blogs.windows.com/buildingapps/2016/06/08/using-the-app-file-explorer-to-see-your-app-data/) записи блога, Дополнительные сведения о проводнике и способы ее использования.

![Страница обозревателя файл портала устройства](images/device-portal/mob-device-portal-AppFileExplorer.png)

### <a name="performance"></a>Производительность

На странице производительности отображаются в режиме реального времени графы системы диагностические сведения, такие как использование энергии, частоту кадров, и загрузка ЦП.

Ниже приведены доступные метрики:

- **ЦП**: Процент доступных ресурсов ЦП
- **Память**: Всего, используется, доступностью и фиксации, разбитых на страницы и невыгружаемого
- **ОПЕРАЦИЙ ВВОДА-ВЫВОДА**: Чтение и запись количества данных
- **Сеть**: Полученные и отправленные данные
- **GPU**: % От общего объема доступной GPU ядра загрузки

![Страница портала производительности устройства](images/device-portal/mob-device-portal-perf.png)

### <a name="event-tracing-for-windows-etw-logging"></a>Ведение журнала событий трассировки для Windows (ETW)

На странице ведения журнала трассировки событий Windows управляет в режиме реального времени сведения трассировки событий для Windows (ETW) на устройстве.

![Страница портала Трассировку событий Windows устройства](images/device-portal/mob-device-portal-etw.png)

Установите только флажок **Скрыть поставщиков** для отображения только списка «События».

- **Зарегистрированных поставщиков**: Выберите поставщика событий и уровень трассировки. Уровень трассировки — одно из следующих значений:
  1. ненормальный выход или прекращение;
  2. серьезные ошибки;
  3. Предупреждения
  4. предупреждения, не связанные с ошибками.
  5. Подробные трассировки

  Щелкните или нажмите **Включить** для запуска трассировки. Поставщик добавляется в раскрывающийся список **Включенные поставщики**.
- **Настраиваемые поставщики**: Выберите пользовательский поставщик трассировки событий Windows и уровень трассировки. Определите поставщика по его GUID. Не включайте скобки идентификатор (GUID).
- **Во включенных регистраторах**: Список разрешенных поставщиков. Выберите поставщика в раскрывающемся списке и щелкните или нажмите **Отключить**, чтобы остановить трассировки. Щелкните или нажмите **Стоп**, чтобы приостановить всю трассировку.
- **Журнал поставщиков**: Это показывает поставщиков трассировки событий Windows, которые были включены в текущем сеансе. Щелкните или нажмите **Включить**, чтобы активировать поставщика, который ранее был отключен. Щелкните или нажмите **Очистить**, чтобы очистить журнал.
- **Фильтров / события**: **События** разделе перечислены события трассировки событий Windows из выбранных поставщиков в табличном формате. Таблица обновляется в режиме реального времени. Используйте **фильтры** меню, чтобы настроить пользовательские фильтры, для которых будет отображаться события. Нажмите кнопку **Очистить** кнопку, чтобы удалить все события трассировки событий Windows из таблицы. Это не приводит к отключению каких-либо поставщиков. Можно щелкнуть **сохранить в файл** для экспорта в настоящее время собранные события трассировки событий Windows в локальный файл CSV.

Дополнительные сведения об использовании ведения журнала трассировки событий Windows см. в разделе [устройства с помощью портала для просмотра журналов отладки](https://blogs.windows.com/buildingapps/2016/06/10/using-device-portal-to-view-debug-logs-for-uwp/) записи блога.

### <a name="performance-tracing"></a>Трассировка производительности

На странице трассировки производительности можно для представления [записи производительности Windows (WPR)](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-8.1-and-8/hh448205(v=win.10)) трассировки с главным устройством.

![Страница трассировки производительности портала устройства](images/device-portal/mob-device-portal-perf-tracing.png)

- **Доступные профили**: Выберите из раскрывающегося списка и нажмите кнопку профиля WPR **запустить** для запуска трассировки.
- **Пользовательские профили**: Щелкните или коснитесь **Обзор** выбрать профиль WPR с вашего компьютера. Щелкните или нажмите **Передать и пуск** для запуска трассировки.

Чтобы остановите трассировку, нажмите **Остановить**. Остаться на этой странице, пока в файл трассировки (. ETL) завершает загрузку.

Захват. ETL-файлы можно открыть для анализа в [Windows Performance Analyzer](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-8.1-and-8/hh448170(v=win.10)).

### <a name="device-manager"></a>Диспетчер устройств

Страница «Диспетчер устройств» перечисляет все периферийные устройства, подключенного к устройству. Можно щелкнуть параметры значки для просмотра свойств каждого из них.

![Страница «Диспетчер устройств на портале устройства»](images/device-portal/mob-device-portal-devices.png)

### <a name="networking"></a>Сеть

На странице сетей управляет сетевыми подключениями на устройстве. Если вы подключены к портал устройств к USB-ПОРТУ, изменение этих параметров будет скорее всего разорвать подключение вы портал устройств.

- **Доступных сетей**: Показаны сети Wi-Fi, доступным для устройства. Щелкните или нажмите сеть, чтобы подключиться к ней, при необходимости предоставьте ключ доступа. Портал устройств пока не поддерживает корпоративной проверки подлинности. Можно также использовать **профили** раскрывающийся список, чтобы попытаться подключиться к любому из профилей Wi-Fi, известных на устройстве.
- **IP-конфигурация**: Показывает адресе сведения о каждом из узлов устройства сетевые порты.

![Страница портала к сети устройства](images/device-portal/mob-device-portal-network.png)

## <a name="service-features-and-notes"></a>Функции службы и примечания

### <a name="dns-sd"></a>DNS-SD

Портал устройств сообщает о своем присутствии в локальной сети с помощью DNS-SD. Все экземпляры Портала устройств, независимо от типа устройства, объявляют себя с помощью "WDP._wdp._tcp.local". Записи TXT для экземпляра службы предоставляют следующие сведения:

Ключ | Тип | Описание
----|------|-------------
S | ssNoversion | Защищенный порт Портала устройств. Если значение равно нулю (0), Портал устройств не выполняет прослушивание на предмет подключений HTTPS.
D | строка | Тип устройства. Будет иметь формат "Windows.*", например Windows.Xbox или Windows.Desktop
Объект | строка | Архитектура устройства. Архитектурой будет ARM, x86 или AMD64.  
T | разбитый список строк нуль-символа | Пользовательские теги для устройства. Инструкции по использованию см. в разделе "Теги, REST API". Список заканчивается двойным символом NULL.  

Так как не все устройства прослушивают порт HTTP, объявляемый записью DNS-SD, подключение рекомендуется устанавливать к порту HTTPS.

### <a name="csrf-protection-and-scripting"></a>Защита от атак CSRF и сценарии

Чтобы обеспечить защиту от [атак CSRF](https://wikipedia.org/wiki/Cross-site_request_forgery), все запросы, отличные от GET, должны иметь уникальный маркер. Этот маркер, заголовок запроса X-CSRF, извлекается из файла cookie сеанса — CSRF-Token. В веб-интерфейсе пользователя Портала устройств при каждом запросе файл cookie CSRF-Token копируется в заголовок X-CSRF-Token.

> [!IMPORTANT]
> Такая защита предотвращает случаи использования API REST из автономного клиента (например, служебные программы командной строки). Эту проблему можно решить тремя способами:
> - Используйте «auto-» имя пользователя. Клиенты, которые буду добавлять "auto-" в начало своего имени пользователя смогут обходить защиту от атак CSRF. Важно не использовать это имя пользователя для входа на Портал устройств с помощью браузера, так как при этом служба будет становиться открытой для атак CSRF. Пример. Если имя пользователя портал устройств — «admin», ```curl -u auto-admin:password <args>``` следует использовать для обхода защиты CSRF.
> - Реализуйте в клиенте схему передачи значений параметров файла cookie серверу с каждым запросом в качестве части заголовка HTTP. Для этого требуется, чтобы запрос GET определял файл cookie сеанса, а также выполнение дальнейшего добавления заголовка и файла cookie во все последующие запросы.
> - Отключите проверку подлинности и используйте HTTP. Защита от атак CSRF применяется только к конечным точкам HTTPS, поэтому подключениям к конечным точкам HTTP не придется выполнять никакие из описанных выше действий.

#### <a name="cross-site-websocket-hijacking-cswsh-protection"></a>Защита от межсайтового перехвата с использованием WebSocket (CSWSH)

Для защиты против [CSWSH-атак](https://www.christian-schneider.net/CrossSiteWebSocketHijacking.html) все клиенты, открывающие WebSocket-соединение с порталом устройств должны также предоставлять заголовок источника, совпадающий с заголовком узла. Это демонстрирует порталу устройств, что запрос отправляется либо пользовательским интерфейсом портала устройств, либо действительным клиентским приложением. Без заголовка источника запрос будет отклонен.
