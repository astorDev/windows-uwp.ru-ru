---
author: PatrickFarley
ms.assetid: 60fc48dd-91a9-4dd6-a116-9292a7c1f3be
title: Обзор портала устройств Windows
description: Узнайте, как портал устройств Windows позволяет настраивать устройство и управлять им удаленно через сеть или USB-подключение.
ms.author: pafarley
ms.date: 12/12/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, uwp, портала устройств
ms.localizationpriority: medium
ms.openlocfilehash: 08e7d8fcfbab0d0b22fffa3e3e0aecc38d5b095c
ms.sourcegitcommit: c8f6866100a4b38fdda8394ea185b02d7af66411
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2018
ms.locfileid: "3964082"
---
# <a name="windows-device-portal-overview"></a>Обзор портала устройств Windows

Портал устройств Windows позволяет настраивать устройство и управлять им удаленно через сеть или USB-подключение. Он также предоставляет дополнительные средства диагностики для устранения неполадок и просмотр в режиме реального времени производительность устройства с Windows.

Портал устройств Windows — это веб-сервер на своем устройстве, к которому можно подключаться из веб-браузера на ПК. Если устройство оснащено веб-браузера, можно также подключаться локально из браузера на этом устройстве.

Портал устройств Windows доступен в каждом семействе устройств, но функциональные возможности и настройки зависят от требований каждого устройства. В этой статье дается общее описание портала устройства, а также приведены ссылки на статьи, содержащие более подробные сведения по каждому семейству устройств.

Функциональные возможности портал устройств Windows реализуется с помощью [Интерфейсов API REST](device-portal-api-core.md) , которые можно использовать непосредственно для доступа к данным и программного управления устройством.

## <a name="setup"></a>Настройка

Каждое устройство имеет свои инструкции для подключения к порталу устройства, однако к каждому из них применимы следующие общие действия:
1. Включите режим разработчика и портала устройств на устройстве (настраивается в приложении «параметры»).
2. Подключите устройство к ПК по локальной сети или с помощью USB.
3. Перейдите на страницу портала устройства в своем браузере. В этой таблице показаны порты и протоколы, используемые каждым семейством устройств.

Семейство устройств | Включено по умолчанию? | HTTP | HTTPS | USB
--------------|----------------|------|-------|----
HoloLens | Да, в режиме разработки | 80 (по умолчанию) | 443 (по умолчанию) | http://127.0.0.1:10080
Интернет вещей | Да, в режиме разработки | 8080 | Включается через раздел реестра | Н/Д
Xbox | Включается в режиме разработки | Отключен | 11443 | Н/Д
Настольный компьютер| Включается в режиме разработки | 50080\* | 50043\* | Н/Д
Телефон | Включается в режиме разработки | 80| 443 | http://127.0.0.1:10080

\* Это не всегда так, поскольку Портал устройств на настольном компьютере использует порты в диапазоне временных портов (>50000), чтобы предотвратить конфликты с существующими запросами на использование портов на устройстве. Подробнее см. в разделе [Параметры портов](device-portal-desktop.md#registry-based-configuration-for-device-portal) для настольных компьютеров.  

Конкретные инструкции по настройке устройства см. в разделах:
- [Портал устройств для HoloLens](https://docs.microsoft.com/windows/uwp/debug-test-perf/device-portal-hololens)
- [Портал устройства для IoT](https://go.microsoft.com/fwlink/?LinkID=616499)
- [Портал устройств для мобильных устройств](device-portal-mobile.md)
- [Портал устройств для Xbox](device-portal-xbox.md)
- [Портал устройств для ПК](device-portal-desktop.md#set-up-device-portal-on-windows-desktop)

## <a name="features"></a>Возможности

### <a name="toolbar-and-navigation"></a>Панель инструментов и навигация

Панель инструментов в верхней части страницы предоставляет доступ к часто используемые функции.
- **Питание**: получить доступ к параметрам питания.
  - **Завершение работы**: отключает устройство.
  - **Перезапуск**: выключает и включает питание устройства.
- **Справка**: открывает страницу справки.

Используйте ссылки на панели навигации вдоль левой стороны страницы для перехода к доступным для вашего устройства средствам управления и мониторинга.

Здесь описываются средства, которые являются общими для различных семейств устройств. В зависимости от устройства могут быть доступны другие параметры. Дополнительные сведения см. в разделе определенную страницу для вашего типа устройства.

### <a name="apps-manager"></a>Диспетчер приложений

Диспетчер приложений предоставляет установки/удаления и функциональные возможности управления для приложения пакетов и пакетов на главном устройстве.

![Страница диспетчера приложений портала устройств](images/device-portal/wdp-apps.png)

- **Установленные приложения**: использовать в раскрывающемся меню для удаления или запуск приложений, установленных на устройстве. Установите новое приложение, нажав кнопку **Добавить**. Это инициирует установку взаимодействия с Пользователем для развертывания упакованные приложения из локального, сети или веб-узлах и зарегистрировать свободных файлов из сетевой папки.
- **Запуск приложений**: получение сведений о приложениях, которые в настоящее время выполняются и закройте их при необходимости.

#### <a name="install-an-app"></a>Установка приложения

1.  После создания пакета приложения вы можете удаленно установить его на устройстве. После его сборки в Visual Studio создается выходная папка.
  ![Установка приложения](images/device-portal/iot-installapp0.png)
2.  В разделе Диспетчер приложений портала устройств нажмите кнопку **Добавить** и выберите **пакет приложения из локального хранилища**.
3.  Нажмите кнопку **Обзор** и найдите пакет приложения.
3.  Нажмите кнопку **Обзор** и найдите файл сертификата (_.cer_) (не требуется на всех устройствах.)
4.  Проверьте, соответствующих полях, если вы хотите установить дополнительные или пакеты платформы вместе с установки приложения. При наличии нескольких зависимостей добавляйте каждую по отдельности.     
5.  Нажмите кнопку **Далее** для перехода к на следующем шаге и **установки** начать установку. 

#### <a name="uninstall-an-app"></a>Удаление приложения
1.  Убедитесь, что приложение не работает. 
2.  Если это так, перейдите на **Запуск приложений** и закройте его. Если вы попытаетесь удалить работающее приложение, это приведет к возникновению проблем при попытке переустановить приложение. 
3.  Выберите приложение из раскрывающегося списка и нажмите кнопку **Удалить**.

### <a name="running-processes"></a>Запущенные процессы

На этой странице отображаются сведения о процессам, работающим на главном устройстве. Сюда входят приложения и системные процессы. На некоторых платформах (рабочего стола, IoT и HoloLens) можно прерывать процессы.

![Устройство под управлением портал обрабатывает страницу](images/device-portal/mob-device-portal-processes.png)

### <a name="file-explorer"></a>Проводник

На этой странице можно просматривать и обрабатывать файлы неопубликованных приложений. См. в [проводнике приложения](https://blogs.windows.com/buildingapps/2016/06/08/using-the-app-file-explorer-to-see-your-app-data/) записи блога для получения дополнительных сведений о проводнике и как его использовать. 

![Страница explorer файла портала устройств](images/device-portal/mob-device-portal-AppFileExplorer.png)

### <a name="performance"></a>Производительность

Страница "производительность" в реальном времени графиков системной диагностической информации, такие как использование питания, частота кадров и загрузка ЦП.

Ниже приведены доступные метрики:
- **ЦП**: процент общее количество доступных ЦП
- **Память**: общий, используется, доступно, зафиксированных, выгружаемый и невыгружаемый
- **Ввод-вывод**: чтение и запись количества данных
- **Сеть**: получение и отправка данных
- **Графический Процессор**: процентов общее количество доступных GPU модуля использования


![Страница портала производительность устройства](images/device-portal/mob-device-portal-perf.png)

### <a name="event-tracing-for-windows-etw-logging"></a>Ведение журнала событий трассировки для Windows (ETW)

На странице журнала трассировки событий Windows управляет информацию трассировки событий для Windows (ETW) в реальном времени на устройстве.

![Страницы журнала трассировки событий Windows портала устройств](images/device-portal/mob-device-portal-etw.png)

Установите только флажок **Скрыть поставщиков** для отображения только списка «События».
- **Зарегистрированные поставщики**: Выбор поставщика событий и уровень трассировки. Уровень трассировки — это одно из следующих значений:
  1. ненормальный выход или прекращение;
  2. серьезные ошибки;
  3. предупреждения;
  4. предупреждения, не связанные с ошибками.
  5. Подробная трассировка

  Щелкните или нажмите **Включить** для запуска трассировки. Поставщик добавляется в раскрывающийся список **Включенные поставщики**.
- **Пользовательские поставщики**: выбор пользовательского поставщика трассировки событий Windows и уровень трассировки. Определите поставщика по его GUID. Не включайте скобки в GUID.
- **Поставщики включено**: список включенных поставщиков. Выберите поставщика в раскрывающемся списке и щелкните или нажмите **Отключить**, чтобы остановить трассировки. Щелкните или нажмите **Стоп**, чтобы приостановить всю трассировку.
- **Журнал поставщиков**: при этом отобразится поставщиков трассировки событий Windows, которые были включены во время текущего сеанса. Щелкните или нажмите **Включить**, чтобы активировать поставщика, который ранее был отключен. Щелкните или нажмите **Очистить**, чтобы очистить журнал.
- **Фильтров или события**: В разделе **события** перечислены события Трассировки событий Windows выбранных поставщиков в формате таблицы. Таблица обновляется в режиме реального времени. Используйте меню « **фильтры** » для настройки пользовательские фильтры, для которых будут отображаться события. Нажмите кнопку « **Очистить** », чтобы удалить все события трассировки событий Windows из таблицы. Это не приводит к отключению каких-либо поставщиков. Вы можете щелкнуть **Сохранить файл** , чтобы экспортировать собранные события Трассировки событий Windows в локальный файл CSV.

Дополнительные сведения об использовании ведения журнала трассировки событий Windows см. в разделе блога [Использования портала устройств для просмотра журналов отладки](https://blogs.windows.com/buildingapps/2016/06/10/using-device-portal-to-view-debug-logs-for-uwp/) . 

### <a name="performance-tracing"></a>Трассировка производительности

На странице трассировки производительности позволяет для представления [Windows Performance Recorder (WPR)](https://msdn.microsoft.com/library/hh448205.aspx) служит для трассировки с главным устройством.

![Страница трассировки производительности портала устройства](images/device-portal/mob-device-portal-perf-tracing.png)

- **Доступные профили**: выберите профиль WPR в раскрывающемся списке, затем щелкните или нажмите **Пуск** для запуска трассировки.
- **Пользовательские профили**: щелкните или нажмите **Обзор** для выбора профиля WPR на своем компьютере. Щелкните или нажмите **Передать и пуск** для запуска трассировки.

Чтобы остановите трассировку, нажмите **Остановить**. Оставайтесь на этой странице, пока файл трассировки (. ETL) завершения скачивания.

Захвата. ETL-файлы можно открыть для анализа в [Windows Performance Analyzer](https://msdn.microsoft.com/library/windows/desktop/hh448170.aspx).

### <a name="device-manager"></a>Диспетчер устройств

Страница «Диспетчер устройств» перечисляет все периферийные устройства, подключенные к устройству. Вы можете щелкнуть значки параметры, чтобы просмотреть свойства каждого из них.

![Страницы портала устройства диспетчера устройств](images/device-portal/mob-device-portal-devices.png)

### <a name="networking"></a>Сеть

На странице сеть Управление сетевыми подключениями на устройстве. Если вы не подключены к порталу устройства через USB, изменение этих параметров будет наверняка приводит к отключению от портала устройств.
- **Доступные сети**: показано сети WiFi, доступные на устройстве. Щелкните или нажмите сеть, чтобы подключиться к ней, при необходимости предоставьте ключ доступа. Портал устройства еще не поддерживает Корпоративная проверка подлинности. Также можно использовать в раскрывающемся списке **профилей** пытаться подключиться к любому из профилей Wi-Fi, известные на устройстве.
- **Конфигурация IP-адрес**: показано адресные сведения о каждом узле сетевые порты устройства.

![Страницы портала сетевых устройств](images/device-portal/mob-device-portal-network.png)

## <a name="service-features-and-notes"></a>Возможности служб и примечания

### <a name="dns-sd"></a>DNS-SD

Портал устройств сообщает о своем присутствии в локальной сети с помощью DNS-SD. Все экземпляры Портала устройств, независимо от типа устройства, объявляют себя с помощью "WDP._wdp._tcp.local". Записи TXT для экземпляра службы предоставляют следующие сведения:

Ключ | Тип | Описание 
----|------|-------------
S | целое число | Защищенный порт Портала устройств. Если значение равно нулю (0), Портал устройств не выполняет прослушивание на предмет подключений HTTPS. 
D | Строка | Тип устройства. Будет иметь формат "Windows.*", например Windows.Xbox или Windows.Desktop
A | Строка | Архитектура устройства. Архитектурой будет ARM, x86 или AMD64.  
T | разбитый список строк нуль-символа | Пользовательские теги для устройства. Инструкции по использованию см. в разделе "Теги, REST API". Список заканчивается двойным символом NULL.  

Так как не все устройства прослушивают порт HTTP, объявляемый записью DNS-SD, подключение рекомендуется устанавливать к порту HTTPS. 

### <a name="csrf-protection-and-scripting"></a>Защита от атак CSRF и сценарии

Чтобы обеспечить защиту от [атак CSRF](https://wikipedia.org/wiki/Cross-site_request_forgery), все запросы, отличные от GET, должны иметь уникальный маркер. Этот маркер, заголовок запроса X-CSRF, извлекается из файла cookie сеанса— CSRF-Token. В веб-интерфейсе пользователя Портала устройств при каждом запросе файл cookie CSRF-Token копируется в заголовок X-CSRF-Token.

> [!IMPORTANT]
> Эта защита предотвращает использование API-интерфейсов REST автономным клиентом (например, служебными программами командной строки). Эту проблему можно решить тремя способами: 
> - Используйте «auto-» имя пользователя. Клиенты, которые буду добавлять "auto-" в начало своего имени пользователя смогут обходить защиту от атак CSRF. Важно не использовать это имя пользователя для входа на Портал устройств с помощью браузера, так как при этом служба будет становиться открытой для атак CSRF. Пример. Если именем пользователя для входа на Портал устройств является "admin", для обхода защиты от атак CSRF необходимо использовать имя ```curl -u auto-admin:password <args>```. 
> - Реализуйте в клиенте схему передачи значений параметров файла cookie серверу с каждым запросом в качестве части заголовка HTTP. Для этого требуется, чтобы запрос GET определял файл cookie сеанса, а также выполнение дальнейшего добавления заголовка и файла cookie во все последующие запросы. 
> - Отключите проверку подлинности и используйте HTTP. Защита от атак CSRF применяется только к конечным точкам HTTPS, поэтому подключениям к конечным точкам HTTP не придется выполнять никакие из описанных выше действий. 

#### <a name="cross-site-websocket-hijacking-cswsh-protection"></a>Защита от межсайтового перехвата с использованием WebSocket (CSWSH)

Для защиты против [CSWSH-атак](https://www.christian-schneider.net/CrossSiteWebSocketHijacking.html) все клиенты, открывающие WebSocket-соединение с порталом устройств должны также предоставлять заголовок источника, совпадающий с заголовком узла. Это демонстрирует порталу устройств, что запрос отправляется либо пользовательским интерфейсом портала устройств, либо действительным клиентским приложением. Без заголовка источника запрос будет отклонен. 
