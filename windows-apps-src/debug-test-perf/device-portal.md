---
author: mcleblanc
ms.assetid: 60fc48dd-91a9-4dd6-a116-9292a7c1f3be
title: "Обзор портала устройств Windows"
description: "Узнайте, как портал устройств Windows позволяет настраивать устройство и управлять им удаленно через сеть или USB-подключение."
translationtype: Human Translation
ms.sourcegitcommit: 01e83c14304891ff5eaa895e98bbebac33ee7614
ms.openlocfilehash: 55cbdc077f839166f32605bbada8e0cc707cf5b3

---
# Обзор портала устройств Windows

Портал устройств Windows позволяет настраивать устройство и управлять им удаленно через сеть или USB-подключение. Он также предоставляет дополнительные средства диагностики, которые позволят устранять неисправности и просматривать данные о производительности устройства с Windows в режиме реального времени.

Портал устройства — это веб-сервер на устройстве, к которому можно подключаться из веб-браузера на ПК. Если устройство оснащено веб-браузером, можно также подключаться локально из браузера на устройстве.

Портал устройств Windows доступен в каждом семействе устройств, однако функциональные возможности и настройки зависят от требований тех или иных устройств. В этой статье дается общее описание портала устройства, а также приведены ссылки на статьи, содержащие более подробные сведения по каждому семейству устройств.

Весь портал устройств Windows построен на интерфейсе [API REST](device-portal-api-core.md), который можно использовать для получения доступа к данным и программного управления устройством.

## Настройка

Каждое устройство имеет свои инструкции для подключения к порталу устройства, однако к каждому из них применимы следующие общие действия:
1. Включите режим разработчика и портал устройства на своем устройстве.
2. Подключите устройство к ПК по локальной сети или USB.
3. Перейдите на страницу портала устройства в своем браузере. В этой таблице показаны порты и протоколы, используемые каждым семейством устройств.

Семейство устройств | Включено по умолчанию? | HTTP | HTTPS | USB
--------------|----------------|------|-------|----
HoloLens | Да, в режиме разработки | 80 (по умолчанию) | 443 (по умолчанию) | localhost:10080
IoT | Да, в режиме разработки | 8080 | Включается через раздел реестра | Н/д
Xbox | Включается в режиме разработки | Отключено | 11443 | Н/д
Настольные ПК| Включается в режиме разработки | Случайные > 50000 (xx080) | Случайные > 50000 (xx443) | Н/д
Телефон | Включается в режиме разработки | 80| 443 | localhost:10080

Конкретные инструкции по настройке устройства см. в разделах:
- [Портал устройства для HoloLens](https://dev.windows.com/holographic/using_the_windows_device_portal)
- [Портал устройства для IoT](http://ms-iot.github.io/content/win10/tools/DevicePortal.htm)
- [Портал устройств для мобильных устройств](device-portal-mobile.md#set-up-device-portal-on-window-phone)
- [Портал устройств для Xbox](device-portal-xbox.md)
- [Портал устройств для ПК](device-portal-desktop.md#set-up-device-portal-on-windows-desktop)

## Возможности

### Панель инструментов и навигация

Панель инструментов в верхней части страницы предоставляет доступ к часто используемому состоянию и функциям.
- 
              **Завершение работы**: отключает устройство.
- 
              **Перезапуск**: выключает и включает питание устройства.
- 
              **Справка**: открывает страницу справки.

Используйте ссылки на панели навигации вдоль левой стороны страницы для перехода к доступным для вашего устройства средствам управления и мониторинга.

Здесь описываются средства, которые являются общими для различных устройств. В зависимости от устройства могут быть доступны другие параметры. Дополнительные сведения см. на странице, посвященной вашему устройству.

### Главная

Ваш сеанс на портале устройств начинается на Главной странице. Как правило, главная страница содержит сведения об устройстве, например имя и версия ОС, а также настройки, которые можно задать для устройства.

### Приложения

Предоставляет функциональные возможности установки/удаления и управления для пакетов и наборов AppX на вашем устройстве.

![Портал устройств для мобильных устройств](images/device-portal/mob-device-portal-apps.png)

- 
              **Установленные приложения**: удаление и запуск приложений.
- 
              **Запущенные приложения**: отображаются все работающие в настоящее время приложения.
- 
              **Установить приложение**: выбор в папке на компьютере или в сети пакетов приложений для установки.
- 
              **Зависимость**: добавление зависимостей для устанавливаемого приложения.
- 
              **Развертывание**: развертывание выбранного приложения и зависимостей на устройстве.

**Установка приложения**

1.  После [создания пакета приложения](https://msdn.microsoft.com/library/windows/apps/xaml/hh454036(v=vs.140).aspx) вы можете удаленно установить его на устройстве. После его сборки в Visual Studio создается выходная папка.

    ![Установка приложения](images/device-portal/iot-installapp0.png)
2.  Щелкните «Обзор» и найдите пакет приложения (.appx).
3.  Щелкните «Обзор» и найдите файл сертификата (.cer). (Не требуется на всех устройствах.)
4.  Добавьте зависимости. При наличии нескольких зависимостей добавляйте каждую по отдельности.     
5.  В разделе **Развертывание** щелкните **Выполнить**. 
6.  Чтобы установить другое приложение, нажмите кнопку **Сброс**, чтобы очистить все поля.


**Удаление приложения**

1.  Убедитесь, что приложение не работает. 
2.  В противном случае перейдите в раздел «Работающие приложения» и закройте его. Если вы попытаетесь удалить работающее приложение, это приведет к возникновению проблем при переустановке приложения. 
3.  Если все готово, щелкните **Удалить**.

### Процессы

Отображаются сведения о выполняемых в настоящее время процессах. Сюда входят приложения и системные процессы.

Как и в диспетчере задач на компьютере, на этой странице можно просмотреть, какие процессы выполняются в настоящее время, а также сколько памяти они используют.  На некоторых платформах (настольные ПК, IoT и HoloLens) можно прерывать процессы.

![Портал устройств для мобильных устройств](images/device-portal/mob-device-portal-processes.png)

### Производительность

Отображение в реальном времени графиков системной диагностической информации, таких как использование питания, частота кадров и загрузка ЦП.

Ниже приведены доступные метрики:
- 
              **ЦП**: доступность в процентах от общего значения.
- 
              **Память**: всего, используется, доступно, выделено, выгружаемая, невыгружаемая.
- 
              **GPU**: использование модуля GPU, доступность в процентах от общего значения.
- 
              **Ввод/вывод**: операции чтения и записи.
- 
              **Сеть**: получение и отправка.

![Портал устройств для мобильных устройств](images/device-portal/mob-device-portal-perf.png)

### Трассировка событий Windows (ETW)

Управление трассировкой событий Windows (ETW) в режиме реального времени на устройстве.

![Портал устройств для мобильных устройств](images/device-portal/mob-device-portal-etw.png)

Установите только флажок **Скрыть поставщиков** для отображения только списка «События».
- 
              **Зарегистрированные поставщики**: выбор поставщика трассировки событий Windows и уровень трассировки. Уровень трассировки — это одно из следующих значений:
    1. ненормальный выход или прекращение;
    2. серьезные ошибки;
    3. предупреждения;
    4. предупреждения, не связанные с ошибками.
    5. Подробная трассировка (*)

Щелкните или нажмите **Включить** для запуска трассировки. Поставщик добавляется в раскрывающийся список **Включенные поставщики**.
- 
              **Пользовательские поставщики**: выбор пользовательского поставщика трассировки событий Windows и уровень трассировки. Определите поставщика по его GUID. Не включайте скобки в GUID.
- 
              **Включенные поставщики**: приводится список включенных поставщиков. Выберите поставщика в раскрывающемся списке и щелкните или нажмите **Отключить**, чтобы остановить трассировки. Щелкните или нажмите **Стоп**, чтобы приостановить всю трассировку.
- 
              **Журнал поставщиков**: отображаются поставщики трассировки событий Windows, которые были включены во время текущего сеанса. Щелкните или нажмите **Включить**, чтобы активировать поставщика, который ранее был отключен. Щелкните или нажмите **Очистить**, чтобы очистить журнал.
- 
              **События**: список событий трассировки событий Windows выбранных поставщиков в формате таблицы. Эта таблица обновляется в режиме реального времени. Под этой таблицей нажмите кнопку **Очистить**, чтобы удалить из нее все события трассировки событий Windows. Это не приводит к отключению каких-либо поставщиков. Вы можете щелкнуть **Сохранить в файл**, чтобы экспортировать собранные события трассировки событий Windows локально в CSV-файл.

Дополнительные сведения по использованию трассировки событий Windows для сбора журналов реального времени из вашего приложения см. [в записи блога](https://blogs.windows.com/buildingapps/2016/06/10/using-device-portal-to-view-debug-logs-for-uwp/). 

### Трассировка производительности

Захват [Windows Performance Recorder](https://msdn.microsoft.com/library/windows/hardware/hh448205.aspx) (WPR) служит для трассировки с устройства.

![Портал устройств для мобильных устройств](images/device-portal/mob-device-portal-perf-tracing.png)

- 
              **Доступные профили**: выберите профиль WPR в раскрывающемся списке, затем щелкните или нажмите **Пуск** для запуска трассировки.
- 
              **Пользовательские профили**: щелкните или нажмите **Обзор** для выбора профиля WPR на своем ПК. Щелкните или нажмите **Передать и пуск** для запуска трассировки.

Чтобы остановите трассировку, нажмите **Остановить**. Оставайтесь на этой странице до тех пор, пока файл трассировки (ETL) не будет полностью загружен.

Захваченные файлы ETL можно открыть для анализа в [Windows Performance Analyzer](https://msdn.microsoft.com/library/windows/hardware/hh448170.aspx).

### Устройства

Перечисляет все периферийные устройства, подключенные к устройству.

![Портал устройств для мобильных устройств](images/device-portal/mob-device-portal-devices.png)

### Сеть

Управление сетевыми подключениями на устройстве.  Если вы не подключены к Порталу устройства через USB, изменение этих параметров, скорее всего, приводит к отключению от портала устройства.
- 
              **Профили**: выбор другого профиля WiFi для использования.  
- 
              **Доступные сети**: сети WiFi, доступные для устройства. Щелкните или нажмите сеть, чтобы подключиться к ней, при необходимости предоставьте ключ доступа. Примечание. Портал устройства еще не поддерживает проверку подлинности на уровне предприятия. 

![Портал устройств для мобильных устройств](images/device-portal/mob-device-portal-network.png)

### Проводник приложений

Позволяет просматривать и обрабатывать файлы неопубликованных приложений.  Это новая кросс-платформенная версия [обозревателя изолированного хранилища](https://msdn.microsoft.com/library/windows/apps/hh286408(v=vs.105).aspx) ОС Windows Phone 8.1. Для получения более подробных сведений о Проводнике приложений и его использовании см. [эту запись в блоге](https://blogs.windows.com/buildingapps/2016/06/08/using-the-app-file-explorer-to-see-your-app-data/). 

![Портал устройств для мобильных устройств](images/device-portal/mob-device-portal-AppFileExplorer.png)

## Возможности служб и примечания

### DNS-SD

Портал устройств сообщает о своем присутствии в локальной сети с помощью DNS-SD.  Все экземпляры Портала устройств, независимо от типа устройства, объявляют себя с помощью "WDP._wdp._tcp.local". Записи TXT для экземпляра службы предоставляют следующие сведения:

Ключ | Тип | Описание 
----|------|-------------
S | целое число | Защищенный порт Портала устройств.  Если значение равно нулю (0), Портал устройств не выполняет прослушивание на предмет подключений HTTPS. 
D | Строка | Тип устройства.  Будет иметь формат "Windows.*", например Windows.Xbox или Windows.Desktop
A | Строка | Архитектура устройства.  Архитектурой будет ARM, x86 или AMD64.  
T | разбитый список строк нуль-символа | Пользовательские теги для устройства. Инструкции по использованию см. в разделе "Теги, REST API". Список заканчивается двойным символом NULL.  

Так как не все устройства прослушивают порт HTTP, объявляемый записью DNS-SD, подключение рекомендуется устанавливать к порту HTTPS. 

### Защита от атак CSRF и сценарии

Чтобы обеспечить защиту от [атак CSRF](https://wikipedia.org/wiki/Cross-site_request_forgery), все запросы, отличные от GET, должны иметь уникальный маркер. Этот маркер, заголовок запроса X-CSRF, извлекается из файла cookie сеанса— CSRF-Token. В веб-интерфейсе пользователя Портала устройств при каждом запросе файл cookie CSRF-Token копируется в заголовок X-CSRF-Token.


              **Важно!** Эта защита ограничивает возможность использования API-интерфейсов REST автономным клиентом (например, служебными программами командной строки). Эту проблему можно решить тремя способами: 

1. Использование имени пользователя "auto-". Клиенты, которые буду добавлять "auto-" в начало своего имени пользователя смогут обходить защиту от атак CSRF. Важно не использовать это имя пользователя для входа на Портал устройств с помощью браузера, так как при этом служба будет становиться открытой для атак CSRF. Пример. Если именем пользователя для входа на Портал устройств является "admin", для обхода защиты от атак CSRF необходимо использовать имя ```curl -u auto-admin:password <args>```. 

2. Реализуйте в клиенте схему передачи значений параметров файла cookie серверу с каждым запросом в качестве части заголовка HTTP. Для этого требуется, чтобы запрос GET определял файл cookie сеанса, а также выполнение дальнейшего добавления заголовка и файла cookie во все последующие запросы. 
 
3. Отключите проверку подлинности и используйте HTTP. Защита от атак CSRF применяется только к конечным точкам HTTPS, поэтому подключениям к конечным точкам HTTP не придется выполнять никакие из описанных выше действий. 


              **Примечание.**: вход на Портал устройств через браузер с помощью имени пользователя, начинающегося с «auto-», невозможен.  

#### Защита от межсайтового перехвата с использованием WebSocket (CSWSH)

Для защиты против [CSWSH-атак](https://www.christian-schneider.net/CrossSiteWebSocketHijacking.html) все клиенты, открывающие WebSocket-соединение с порталом устройств должны также предоставлять заголовок источника, совпадающий с заголовком узла.  Это демонстрирует порталу устройств, что запрос отправляется либо пользовательским интерфейсом портала устройств, либо действительным клиентским приложением.  Без заголовка источника запрос будет отклонен. 



<!--HONumber=Jul16_HO2-->


