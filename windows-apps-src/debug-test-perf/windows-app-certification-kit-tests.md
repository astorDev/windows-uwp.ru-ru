---
ms.assetid: 1526FF4B-9E68-458A-B002-0A5F3A9A81FD
title: Тесты комплекта сертификации приложений для Windows
description: Комплект сертификации приложений для Windows содержит ряд тестов, которые помогут обеспечить готовность приложения к публикации в Microsoft Store.
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP, сертификация приложений
ms.localizationpriority: medium
ms.openlocfilehash: 9de761a0b127d7218c7dc2bb4c6862626b7c60e4
ms.sourcegitcommit: 3e7a4f7605dfb4e87bac2d10b6d64f8b35229546
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "77089430"
---
# <a name="windows-app-certification-kit-tests"></a>Тесты комплекта сертификации приложений для Windows


[Набор сертификации приложений для Windows](windows-app-certification-kit.md) содержит ряд тестов, позволяющих обеспечить готовность приложения к публикации в Microsoft Store. Ниже перечислены тесты с условиями, сведениями и предлагаемыми действиями в случае сбоя.

## <a name="deployment-and-launch-tests"></a>Тесты развертывания и запуска

Позволяет отслеживать работу приложения во время сертификационных испытаний, чтобы регистрировать сбои и зависания.

### <a name="background"></a>Фон

Приложения, перестающие отвечать или завершающиеся аварийно, могут привести к потере данных пользователя и вызвать разочарование.

Приложения должны быть полностью работоспособными без использования режимов совместимости Windows, сообщений AppHelp и исправлений совместимости.

Приложения не должны перечислять библиотеки DLL для загрузки в Раздел HKEY\-локальный\-компьютер\\программное обеспечение\\Microsoft\\Windows NT\\CurrentVersion\\Windows\\библиотеки\-библиотеки DLL.

### <a name="test-details"></a>Сведения о тесте

Мы проверяем устойчивость и стабильность приложения с помощью сертификационного тестирования.

Для запуска приложений комплект сертификации приложений для Windows вызывает метод [**IApplicationActivationManager::ActivateApplication**](https://docs.microsoft.com/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iapplicationactivationmanager-activateapplication). Чтобы метод **ActivateApplication** запустил приложение, должен быть включен контроль учетных записей, а разрешение экрана должно быть не менее 1024x768 или 768x1024. Если одно из этих условий не выполнено, приложение не пройдет этот тест.

### <a name="corrective-actions"></a>Корректирующие действия

Убедитесь, что на тестовом компьютере включен контроль учетных записей.

Убедитесь, что вы запускаете тест на компьютере с достаточно большим разрешением экрана.

Если ваше приложение не запускается, а тестовая платформа соответствует предварительным требованиям [**ActivateApplication**](https://docs.microsoft.com/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iapplicationactivationmanager-activateapplication), можно диагностировать проблему, просмотрев журнал событий активации. Чтобы найти эти записи в журнале событий, сделайте следующее.

1.  Откройте файл eventvwr. exe и перейдите к журналу приложений и служб\\Microsoft\\Windows\\иммерсивное-Shell Folder.
2.  Отфильтруйте представление, чтобы показать события с идентификаторами 5900–6000.
3.  Проверьте в журнале записи, которые могут объяснить невозможность запуска приложения.

Устраните неполадки в проблемном файле, выявите и устраните проблему. Выполните повторную сборку приложения и повторите тестирование. Проверьте, нет ли в папке журнала в установочной папке комплекта сертификации приложений для Windows файла дампа памяти, который можно использовать при отладке приложения.

## <a name="platform-version-launch-test"></a>Тест запуска версии платформы

Проверяет возможность работы приложения для Windows в будущей версии операционной системы. Этот тест ранее применялся только к рабочему процессу классических приложений, но теперь он используется для рабочего процесса Магазина и универсальной платформы Windows (UWP).

### <a name="background"></a>Фон

Сведения о версии операционной системы ограничены использованием Microsoft Store. Эти сведения часто неправильно использовались приложениями для проверки версии ОС и включения функций, соответствующих этой версии.

### <a name="test-details"></a>Сведения о тесте

Комплект сертификации приложений для Windows использует HighVersionLie для обнаружения способа проверки версии ОС приложением. Если в приложении возникнет сбой, оно не пройдет этот тест.

### <a name="corrective-action"></a>Корректирующее действие

Приложения должны использовать вспомогательные функции Version API для проверки. Дополнительные сведения см. в разделе [Версия операционной системы](https://docs.microsoft.com/windows/desktop/SysInfo/operating-system-version).

## <a name="background-tasks-cancellation-handler-validation"></a>Проверка обработчика отмены фоновых задач

Этот тест проверяет, содержит ли приложение обработчик отмены для объявленных фоновых задач. Необходима специальная функция, которая будет вызываться при отмене задачи. Этот тест применяется только для развернутых приложений.

### <a name="background"></a>Фон

Универсальные приложения Windows могут регистрировать процесс, выполняемый в фоновом режиме. Например, почтовое приложение может время от времени проверять связь с сервером. Однако если эти ресурсы необходимы операционной системе, она отменит фоновую задачу, поэтому приложения должны корректно обрабатывать эту отмену. Приложения без обработчика отмены могут зависать или не закрываться, когда пользователь пытается закрыть приложение.

### <a name="test-details"></a>Сведения о тесте

Приложение запускается, приостанавливается, а часть приложения, не выполняемая в фоне, завершается. Затем фоновые задачи, связанные с этим приложением, отменяются. Проверяется состояние приложения, и если приложение все еще выполняется, оно не пройдет этот тест.

### <a name="corrective-action"></a>Корректирующее действие

Добавьте обработчик отмены в приложение. Дополнительные сведения см. в разделе [Поддержка приложения с помощью фоновых задач](https://docs.microsoft.com/windows/uwp/launch-resume/support-your-app-with-background-tasks).

## <a name="app-count"></a>Количество приложений

Это подтверждает, что пакет приложения (msix, appx или пакет приложений) содержит одно приложение. Теперь это автономный тест.

### <a name="background"></a>Фон

Тест реализован согласно политике Магазина.

### <a name="test-details"></a>Сведения о тесте

Для приложений Windows Phone 8,1 Проверка общего числа пакетов appx в пакете составляет &lt; 512, в пакете имеется только один основной пакет, а архитектура основного пакета в пакете помечена как ARM или Neutral.

В приложениях для Windows 10 тест подтверждает, что в версии набора задан номер редакции 0.

### <a name="corrective-action"></a>Корректирующее действие

Убедитесь, что пакет приложения и пакет соответствуют приведенным выше в «Сведениях о тесте» требованиям.

## <a name="app-manifest-compliance-test"></a>Проверка совместимости с манифестом приложения

Проверяет содержание манифеста приложения, чтобы убедиться в том, что оно верно.

### <a name="background"></a>Фон

Приложения должны иметь правильно отформатированный манифест.

### <a name="test-details"></a>Сведения о тесте

Проверяет манифест приложения, чтобы подтвердить правильность его содержимого в соответствии с разделом [Требования к пакетам приложений](https://docs.microsoft.com/windows/uwp/publish/app-package-requirements).

-   **Расширения файлов и протоколы**

    Приложение может объявлять расширения файлов, с которыми оно будет сопоставлено. При неправильном подходе приложение может объявить слишком большое количество расширений имен файлов, большинство из которых оно даже не сможет использовать. Этот тест проверяет, какие расширения файлов можно сопоставить с приложением, с целью ограничить их количество.

-   **Правило зависимости платформы**

    Для этого теста необходимо, чтобы приложения использовали соответствующие зависимости на UWP. При ошибочной зависимости тест не будет пройден.

    При выявлении несоответствия между версией ОС, в которой должно выполняться приложение, и заданными в нем зависимостями платформы тест не будет пройден. Сбой теста произойдет и в случае, если приложение ссылается на любую из предварительных версий библиотек DLL платформы.

-   **Проверка межпроцессного взаимодействия (IPC)**

    Этот тест обеспечивает требование, чтобы приложения UWP не взаимодействовали вне контейнера приложения с компонентами рабочего стола. Межпроцессное взаимодействие предназначено только для параллельно загружаемых приложений. Приложения, в которых задан атрибут [**ActivatableClassAttribute**](https://docs.microsoft.com/uwp/schemas/appxpackage/appxmanifestschema/element-activatableclassattribute) с именем "DesktopApplicationPath", не пройдут этот тест.

### <a name="corrective-action"></a>Корректирующее действие

Проверьте манифест приложения на соответствие требованиям, описанным в разделе [Требования к пакетам приложений](https://docs.microsoft.com/windows/uwp/publish/app-package-requirements).

## <a name="windows-security-features-test"></a>Проверка средств безопасности Windows

### <a name="background"></a>Фон

Изменение используемых по умолчанию защитных средств Windows может подвергнуть пользователей повышенному риску.

### <a name="test-details"></a>Сведения о тесте

Проверяет безопасность приложения, запуская средство [BinScope Binary Analyzer](#binscope-binary-analyzer-tests).

Тесты BinScope Binary Analyzer проверяют способы программирования и сборки двоичных файлов приложения, снижающие его уязвимость перед атаками и возможность использования его в качестве вектора атаки.

В тестах BinScope Binary Analyzer проверяется правильность использования следующих средств безопасности:

-   Тесты BinScope Binary Analyzer
-   Подписывание частного кода

### <a name="binscope-binary-analyzer-tests"></a>Тесты BinScope Binary Analyzer

Тесты [BinScope Binary Analyzer](https://www.microsoft.com/download/details.aspx?id=44995) проверяют способы программирования и сборки двоичных файлов приложения, снижающие его уязвимость перед атаками и возможность использования его в качестве вектора атаки.

В тестах BinScope Binary Analyzer проверяется правильность использования следующих средств безопасности:

-   [Флаг](#binscope-1)
-   [Защита обработки исключений/SafeSEH](#binscope-2)
-   [Предотвращение выполнения данных](#binscope-3)
-   [Случайный выбор макета адресного пространства](#binscope-4)
-   [Раздел "чтение и запись общего PE"](#binscope-5)
-   [аппконтаинерчекк](#appcontainercheck)
-   [ексекутаблеимпортсчекк](#binscope-7)
-   [вксчекк](#binscope-8)

### <a name="span-idbinscope-1spanallowpartiallytrustedcallersattribute"></a><span id="binscope-1"></span>Флаг

**Сообщение об ошибке комплекта сертификации приложений для Windows:** Ошибка диагностики APTCACheck

Атрибут AllowPartiallyTrustedCallersAttribute (APTCA) разрешает доступ к полностью доверенному коду со стороны частично доверенного кода в подписанных сборках. Применяя атрибут APTCA к сборке, частично доверенные вызывающие стороны могут получать доступ к этой сборке на весь срок ее жизни, что может нанести ущерб безопасности.

**Что делать, если приложение не проходит проверку**

Используйте атрибут APTCA для сборок со строгим именем только в том случае, если для вашего проекта это необходимо, а риски хорошо вам понятны. Если это необходимо, убедитесь, что все API защищены соответствующими требованиями к управлению доступом для кода. Атрибут APTCA не действует, если сборка входит в состав приложения на универсальной платформе Windows (UWP).

**Примечания**

Данный тест выполняется только для управляемого кода (C#, .NET и пр.).

### <a name="span-idbinscope-2spansafeseh-exception-handling-protection"></a><span id="binscope-2"></span>Защита обработки исключений/SafeSEH

**Сообщение об ошибке комплекта сертификации приложений для Windows:** не пройден тест SafeSEHCheck.

Обработчик исключений запускается, когда приложение сталкивается с исключительной ситуацией, например происходит ошибка деления на ноль. На момент вызова функции адрес обработчика ошибок хранится в стеке, поэтому в случае перезаписи стека какой-либо вредоносной программой обработчик может стать уязвим для атак с переполнением буфера.

**Что делать, если приложение не проходит проверку**

При выполнении сборки приложения включите параметр /SAFESEH в команде компоновщика. Этот параметр включен по умолчанию в конфигурациях выпуска Visual Studio. Убедитесь, что этот параметр включен в инструкциях сборки для всех исполняемых модулей вашего приложения.

**Примечания**

Тест не проводится для 64-разрядных двоичных файлов или двоичных файлов для набора микросхем ARM, так как они не хранят адресов обработчика исключений в стеке.

### <a name="span-idbinscope-3spandata-execution-prevention"></a><span id="binscope-3"></span>Предотвращение выполнения данных

**Сообщение об ошибке комплекта сертификации приложений для Windows:** Ошибка диагностики NXCheck

Данный тест позволяет убедиться, что приложение не выполняет код, хранящийся в сегменте данных.

**Что делать, если приложение не проходит проверку**

При сборке приложения включите параметр /NXCOMPAT в команде компоновщика. Этот параметр включен по умолчанию в версиях компоновщика, которые поддерживают предотвращение выполнения данных (DEP).

**Примечания**

Рекомендуется протестировать приложения на процессоре с поддержкой DEP и устранить сбои, возникшие в результате DEP.

### <a name="span-idbinscope-4spanaddress-space-layout-randomization"></a><span id="binscope-4"></span>Случайный выбор макета адресного пространства

**Сообщение об ошибке комплекта сертификации приложений для Windows:** не пройден тест DBCheck.

Технология случайного выбора расположения адресного пространства (ASLR) загружает исполняемые образы в случайно выбранные области памяти. Это затрудняет работу вредоносной программы, которая ожидает, что для предсказуемой работы программы она будет загружена по определенному виртуальному адресу. Ваше приложение и все компоненты, которые оно использует, должны поддерживать ASLR.

**Что делать, если приложение не проходит проверку**

При сборке приложения включите параметр /DYNAMICBASE в команде компоновщика. Убедитесь, что все модули, используемые приложением, также используют этот параметр компоновщика.

**Примечания**

Обычно ASLR не влияет на производительность. Однако в некоторых сценариях наблюдается небольшое повышение производительности на 32-разрядных системах. Существует вероятность снижения производительности в сильно перегруженных системах, где во множество расположений загружено множество образов.

Этот тест выполняется только для приложений, написанных на неуправляемых языках, например C или C++.

### <a name="span-idbinscope-5spanreadwrite-shared-pe-section"></a><span id="binscope-5"></span>Раздел "чтение и запись общего PE"

**Сообщение об ошибке комплекта сертификации приложений для Windows:** не пройден тест SharedSectionsCheck.

Двоичные файлы с записываемыми разделами, помеченными как общие, представляют угрозу безопасности. Без необходимости не выполняйте сборку приложений с общими записываемыми разделами. Используйте [**CreateFileMapping**](https://docs.microsoft.com/windows/desktop/api/winbase/nf-winbase-createfilemappinga) или [**MapViewOfFile**](https://docs.microsoft.com/windows/desktop/api/memoryapi/nf-memoryapi-mapviewoffile), чтобы создать правильно защищенный объект общей памяти.

**Что делать, если приложение не проходит проверку**

Удалите из приложения все общие разделы и создайте объекты общей памяти, вызвав [**CreateFileMapping**](https://docs.microsoft.com/windows/desktop/api/winbase/nf-winbase-createfilemappinga) или [**MapViewOfFile**](https://docs.microsoft.com/windows/desktop/api/memoryapi/nf-memoryapi-mapviewoffile) с соответствующими атрибутами безопасности, а затем снова выполните сборку приложения.

**Примечания**

Этот тест выполняется только для приложений, написанных на неуправляемых языках, например C или C++.

### <a name="appcontainercheck"></a>AppContainerCheck

**Сообщение об ошибке комплекта сертификации приложений для Windows:** не пройден тест AppContainerCheck.

The AppContainerCheck проверяет, установлен ли бит **appcontainer** в заголовке переносимого исполняемого (PE) файла для исполняемого двоичного файла. Для правильного выполнения приложений бит **appcontainer** должен быть установлен для всех EXE-файлов и всех неуправляемых библиотек DLL.

**Что делать, если приложение не проходит проверку**

Если собственный исполняемый файл не проходит тест, убедитесь, что вы используете последнюю версию компилятора и компоновщика, а также что в компоновщике установлен флаг */appcontainer*.

Если управляемый исполняемый файл не проходит проверку, убедитесь, что вы использовали последнюю версию компилятора и компоновщика, например Microsoft Visual Studio, для создания приложения UWP.

**Примечания**

Этот тест выполняется для всех EXE-файлов и для неуправляемых библиотек DLL.

### <a name="span-idbinscope-7spanexecutableimportscheck"></a><span id="binscope-7"></span>ексекутаблеимпортсчекк

**Сообщение об ошибке комплекта сертификации приложений для Windows:** не пройден тест ExecutableImportsCheck.

Образ переносимого исполняемого (PE) файла не проходит этот тест, если его таблица помещена в раздел исполняемого кода. Это может происходить, если вы включили слияние rdata для образа PE, установив для флага */merge* компоновщика Visual C++ значение */merge:.rdata=.text*.

**Что делать, если приложение не проходит проверку**

Не выполняйте слияние таблицы импорта с разделом исполняемого кода. Убедитесь, что с помощью флага */merge* компоновщика Visual C++ не установлено слияние раздела ".rdata" с разделом кода.

**Примечания**

Этот тест выполняется для всего двоичного кода за исключением сборок, являющихся чисто управляемыми.

### <a name="span-idbinscope-8spanwxcheck"></a><span id="binscope-8"></span>вксчекк

**Сообщение об ошибке комплекта сертификации приложений для Windows:** не пройден тест WXCheck.

Этот тест помогает убедиться, что двоичный файл не содержит страниц, которые сопоставлены как записываемые и исполняемые. Это может произойти, если двоичный файл содержит доступный для записи и исполняемый раздел или если *выравнивание раздела* двоичного файла меньше *размера страницы\-* .

**Что делать, если приложение не проходит проверку**

Убедитесь, что двоичный файл не имеет подраздела для записи или исполняемого файла и что значение *выравнивание раздела* двоичного файла по крайней мере равно значению его *страницы\-размера*.

**Примечания**

Этот тест выполняется для всех EXE-файлов и для собственных неуправляемых библиотек DLL.

Исполняемый файл может содержать записываемый и исполняемый раздел, если он был собран с включенным параметром "Изменить и продолжить" (/ZI). В результате отключения параметра "Изменить и продолжить" недействительный раздел не будет присутствовать.

*Размер страницы\-* является *выравнивание раздела* по умолчанию для исполняемых файлов.

### <a name="private-code-signing"></a>Подписывание частного кода

Проверяет наличие двоичных файлов для подписывания частного кода в пакете приложения.

### <a name="background"></a>Фон

Файлы подписывания частного кода должны оставаться недоступными, поскольку в случае несанкционированного доступа они могут использоваться злоумышленниками.

### <a name="test-details"></a>Сведения о тесте

Проверяет наличие в пакете приложения файлов с расширениями PFX и SNK, которые указывают на включение ключей подписывания частного кода.

### <a name="corrective-actions"></a>Корректирующие действия

Удалите из пакета все ключи подписывания закрытого кода (например, PFX-файлы и. snk).

## <a name="supported-api-test"></a>Проверка API

Позволяет убедиться, что в приложении не используются несовместимые API.

### <a name="background"></a>Фон

Приложения должны использовать API для приложений UWP (среда выполнения Windows или поддерживаемых API-интерфейсов Win32) для сертификации Microsoft Store. Этот тест также позволяет выявить ситуации, в которых управляемый двоичный файл использует зависимость от функции вне утвержденного профиля.

### <a name="test-details"></a>Сведения о тесте

-   Проверяет, что каждый двоичный файл в пакете приложения не зависит от API Win32, который не поддерживается для разработки приложений UWP, путем проверки таблицы адресов импорта двоичного файла.
-   Также позволяет убедиться, что ни один управляемый двоичный файл в пакете приложения не использует зависимость от функции вне утвержденного профиля.

### <a name="corrective-actions"></a>Корректирующие действия

Убедитесь, что приложение скомпилировано в виде сборки выпуска, а не отладочной сборки.

> **Обратите внимание** ,  отладочная сборка приложения не будет выполнять этот тест, даже если приложение использует только [API для приложений UWP](https://docs.microsoft.com/uwp/).

Проверьте сообщения об ошибках, чтобы узнать, какой API использует приложение, которое не является [API для приложений UWP](https://docs.microsoft.com/uwp/).

> **Обратите внимание** ,  C++ приложения, созданные в конфигурации отладки, не будут выполнять этот тест, даже если в конфигурации используются интерфейсы API из Windows SDK для приложений UWP. Дополнительные сведения см. в разделе [альтернативы интерфейсам API Windows в приложениях UWP](https://msdn.microsoft.com/library/windows/apps/hh464945.aspx) .

## <a name="performance-tests"></a>Тесты производительности

Приложение должно быстро реагировать на действия пользователя и системные команды, чтобы обеспечить быстрое и гибкое взаимодействие.

Характеристики компьютера, на котором выполняется тестирование, могут повлиять на результаты теста. Пороговые значения в тесте производительности для сертификации приложения установлены таким образом, чтобы маломощные компьютеры удовлетворяли требованиям пользователя по быстроте и гибкости. Чтобы определить производительность приложения, рекомендуется проводить тестирование на маломощном компьютере, например с процессором Intel Atom, разрешением экрана 1366 x 768 (или выше) и вращающимся жестким диском (в отличие от твердотельного жесткого диска).

### <a name="bytecode-generation"></a>Формирование байт-кода

Чтобы ускорить выполнение кода JavaScript для оптимизации производительности, файлы JavaScript с расширением JS генерируют байт-код во время развертывания приложения. Это значительно сокращает время запуска и выполнения операций JavaScript.

### <a name="test-details"></a>Сведения о тесте

Проверяет развертывание приложения с целью убедиться, что все JS-файлы преобразованы в байт-код.

### <a name="corrective-action"></a>Корректирующее действие

Если тест не пройден, можно попытаться решить проблему так.

-   Проверьте, включен ли журнал событий.
-   Убедитесь, что все файлы JavaScript не содержат синтаксических ошибок.
-   Убедитесь, что все предыдущие версии приложения удалены.
-   Исключите обнаруженные файлы из пакета приложения.

### <a name="optimized-binding-references"></a>Оптимизированные привязки

Чтобы оптимизировать использование памяти при применении привязок, для свойства WinJS.Binding.optimizeBindingReferences необходимо установить значение true.

### <a name="test-details"></a>Сведения о тесте

Проверьте значение свойства WinJS.Binding.optimizeBindingReferences.

### <a name="corrective-action"></a>Корректирующее действие

В приложениях на JavaScript задайте для свойства WinJS.Binding.optimizeBindingReferences значение **true**.

## <a name="app-manifest-resources-test"></a>Проверка ресурсов манифеста приложения

### <a name="app-resources-validation"></a>Проверка ресурсов приложения

Установка приложения может завершиться ошибкой, если неверны строки или изображения, объявленные в манифесте приложения. Если при установке приложения возникают такие ошибки, логотип приложения или другие изображения могут отображаться неправильно.

### <a name="test-details"></a>Сведения о тесте

Проверяются ресурсы, определенные в манифесте приложения, чтобы убедиться, что они имеются и действительны.

### <a name="corrective-action"></a>Корректирующее действие

Руководствуйтесь следующей таблицей.

<table>
<tr><th>Сообщение об ошибке</th><th>Comments</th></tr>
<tr><td>
<p>Изображение {имя изображения} определяет квалификаторы Scale и TargetSize; единовременно можно задать только один квалификатор.</p>
</td><td>
<p>Вы можете настроить изображения для различных разрешений.</p>
<p>В фактическом сообщении {image name} содержит имя изображения с ошибкой.</p>
<p> Убедитесь, что каждое изображение определяет в качестве квалификатора Scale или TargetSize.</p>
</td></tr>
<tr><td>
<p>Изображение {image name} не соответствует ограничениям по размеру.</p>
</td><td>
<p>Убедитесь, что все изображения приложения соответствуют ограничениям по размеру.</p>
<p>В фактическом сообщении {image name} содержит имя изображения с ошибкой.</p>
</td></tr>
<tr><td>
<p>Изображение {image name} в пакете отсутствует.</p>
</td><td>
<p>Отсутствует необходимое изображение.</p>
<p>В фактическом сообщении {image name} содержит имя отсутствующего изображения.</p>
</td></tr>
<tr><td>
<p>Изображение {image name} не является действительным файлом изображения.</p>
</td><td>
<p>Убедитесь, что все изображения приложения соответствуют требованиям к ограничению форматов файлов.</p>
<p>В фактическом сообщении {image name} содержит недопустимое имя изображения.</p>
</td></tr>
<tr><td>
<p>Изображение "BadgeLogo" имеет значение ABGR {value} в положении (x, y), которое является недействительным. Пиксель должен быть белым (##FFFFFF) или прозрачным (00######)</p>
</td><td>
<p>Индикатор событий (BadgeLogo) — это изображение рядом с уведомлением на индикаторе событий для идентификации приложения на экране блокировки. Это изображение должно быть монохромным, то есть содержать только белые и прозрачные пиксели.</p>
<p>В фактическом сообщении {value} содержит недопустимое значение цвета изображения.</p>
</td></tr>
<tr><td>
<p>Изображение "BadgeLogo" имеет значение ABGR {value} в положении (x, y), которое является недопустимым для белого изображения высокой контрастности. Пиксель должен быть цвета ##2A2A2A или темнее либо прозрачным (00######).</p>
</td><td>
<p>Индикатор событий (BadgeLogo) — это изображение рядом с уведомлением на индикаторе событий для идентификации приложения на экране блокировки.   Так как индикатор событий отображается на белом фоне, будучи белым с высокой контрастностью, то тут должна использоваться темная версия индикатора событий. Белое изображение индикатора событий высокой контрастности может содержать только пиксели темнее чем (##2A2A2A) или прозрачные пиксели.</p>
<p>В фактическом сообщении {value} содержит недопустимое значение цвета изображения.</p>
</td></tr>
<tr><td>
<p>Изображение должно определять как минимум один вариант без квалификатора TargetSize. Оно должно определять квалификатор Scale или оставлять квалификаторы Scale и TargetSize неопределенными, что по умолчанию означает значение Scale-100.</p>
</td><td>
<p>Дополнительные сведения см. в разделах <a href="https://docs.microsoft.com/windows/uwp/layout/screen-sizes-and-breakpoints-for-responsive-design">Гибкое оформление 101 для приложений UWP</a> и <a href="https://docs.microsoft.com/windows/uwp/app-settings/store-and-retrieve-app-data">Руководство по ресурсам приложений</a>.</p>
</td></tr>
<tr><td>
<p>В пакете отсутствует файл resources.pri.</p>
</td><td>
<p>Если в манифесте вашего приложения есть локализуемое содержимое, убедитесь, что пакет вашего приложения содержит допустимый файл resources.pri.</p>
</td></tr>
<tr><td>
<p>Файл "resources.pri" должен содержать карту ресурсов с именем, которое соответствует имени пакета {package full name}.</p>
</td><td>
<p>Вы можете получить эту ошибку, если манифест изменился, а имя карты ресурсов в файле resources.pri не соответствует имени пакета в манифесте.</p>
<p>В фактическом сообщении {package full name} содержит имя пакета, которое должно быть указано в файле resources.pri.</p>
<p>Чтобы добиться этого, необходимо перестроить файл resources.pri, причем самым простым способом может стать перестройка пакета приложения.</p>
</td></tr>
<tr><td>
<p>Для файла "resources.pri" нельзя включать параметр AutoMerge.</p>
</td><td>
<p>MakePRI.exe поддерживает параметр с названием <strong>AutoMerge</strong>. Значение <strong>AutoMerge</strong> по умолчанию — <strong>off</strong>. Когда параметр <strong>AutoMerge</strong> включен, ресурсы языкового пакета приложения объединяются в единый файл resources.pri во время выполнения. Мы не советуем это делать для приложений, которые вы планируете распространять по Microsoft Store. Ресурсы. PRI приложения, распространяемые с помощью Microsoft Store, должны находиться в корневом каталоге пакета приложения и содержать все языковые ссылки, поддерживаемые приложением.</p>
</td></tr>
<tr><td>
<p>Строка {string} не удовлетворяет ограничению по длине в {number} символов.</p>
</td><td>
<p>См. раздел <a href="https://docs.microsoft.com/windows/uwp/publish/app-package-requirements">Требования к пакетам приложения</a>.</p>
<p>В фактическом сообщении строка {string} заменяется строкой с ошибкой, а {number} — это максимальная длина.</p>
</td></tr>
<tr><td>
<p>Строка {string} не должна начинаться или заканчиваться пробелами.</p>
</td><td>
<p>Схема элементов в манифесте приложения не разрешает использование символов пробела в начале и конце строки.</p>
<p>В фактическом сообщении строка {string} заменяется строкой с ошибкой.</p>
<p>Убедитесь, что локализованные значения полей манифеста в файле resources.pri не начинаются и не заканчиваются пробелами.</p>
</td></tr>
<tr><td>
<p>Строка должна быть непустой (длина больше нуля)</p>
</td><td>
<p>Дополнительные сведения см. в разделе <a href="https://docs.microsoft.com/windows/uwp/publish/app-package-requirements">Требования к пакетам приложения</a>.</p>
</td></tr>
<tr><td>
<p>В файле resources.pri не указываются ресурсы по умолчанию.</p>
</td><td>
<p>Дополнительные сведения см. в разделе <a href="https://docs.microsoft.com/windows/uwp/app-settings/store-and-retrieve-app-data">Рекомендации по ресурсам приложений</a>.</p>
<p>В конфигурации сборки по умолчанию при генерации наборов Visual Studio включает в пакет приложения только ресурсы изображений scale-200. Другие ресурсы помещаются в пакет ресурсов. Вам необходимо либо включить ресурсы изображений scale-200, либо настроить проект таким образом, чтобы он включал имеющиеся ресурсы.</p>
</td></tr>
<tr><td>
<p>В файле "resources.pri" не указывается значение ресурса.</p>
</td><td>
<p>Убедитесь, что манифест приложения содержит допустимые ресурсы, определенные в файле resources.pri.</p>
</td></tr>
<tr><td>
<p>Размер файла образа {filename} не должен превышать 204800 байт.\*\*</p>
</td><td>
<p>Уменьшите размер указанных изображений.</p>
</td></tr>
<tr><td>
<p>Файл {filename} не должен содержать раздел обратных карт.\*\*</p>
</td><td>
<p>Обратное сопоставление создается в ходе "отладки F5" в Visual Studio при вызове в makepri.exe, но его можно удалить, выполнив makepri.exe без параметра /m при создании PRI-файла.</p>
</td></tr>
<tr><td colspan="2">
<p>\*\* указывает, что тест был добавлен в набор сертификации приложений Windows 3,3 для Windows 8.1 и применим только при использовании этой версии пакета или более поздней.</p>
</td></tr>
</table>



 

### <a name="branding-validation"></a>Проверка фирменной символики

Предполагается, что приложения UWP должны быть полноценными и полнофункциональными. Приложения, использующие изображения по умолчанию (из шаблонов или примеров SDK), непривлекательны для пользователей, и их сложно найти в каталоге Магазина.

### <a name="test-details"></a>Сведения о тесте

Тест позволяет проверить, не использует ли приложение изображения по умолчанию — из примеров SDK или из Visual Studio.

### <a name="corrective-actions"></a>Корректирующие действия

Замените изображения по умолчанию индивидуальными изображениями, отражающими суть приложения.

## <a name="debug-configuration-test"></a>Тест отладочной конфигурации

Позволяет проверить приложение, чтобы убедиться, что это не отладочная сборка.

### <a name="background"></a>Фон

Чтобы быть сертифицированным для Microsoft Store, приложения не должны быть скомпилированы для отладки и не должны ссылаться на отладочные версии исполняемого файла. Для прохождения этого теста вам также необходимо создать для своего приложения собственный оптимизированный код.

### <a name="test-details"></a>Сведения о тесте

Проверьте приложение и убедитесь, что это не отладочная сборка и что приложение не связано с отладочными платформами.

### <a name="corrective-actions"></a>Корректирующие действия

-   Создайте приложение в качестве сборки выпуска, прежде чем отправлять его в Microsoft Store.
-   Убедитесь, что у вас установлена правильная версия платформы .NET Framework.
-   Убедитесь, что приложение не содержит ссылок на отладочные версии платформы, а его сборка выполняется с использованием окончательной версии. Если приложение содержит компоненты .NET, убедитесь, что у вас установлена правильная версия платформы .NET Framework.

## <a name="file-encoding-test"></a>Проверка кодировки файлов

### <a name="utf-8-file-encoding"></a>Кодировка файла UTF-8

### <a name="background"></a>Фон

Файлы HTML, CSS и JavaScript должны иметь кодировку UTF-8 с соответствующей меткой порядка следования байтов, чтобы использовать преимущества кэширования байт-кода и избежать определенных ошибок среды выполнения.

### <a name="test-details"></a>Сведения о тесте

Позволяет проверить содержимое пакетов приложения на предмет правильности используемой кодировки файлов.

### <a name="corrective-action"></a>Корректирующее действие

Откройте файл с ошибочной кодировкой и выберите **Сохранить как** в меню **Файл** Visual Studio. Щелкните раскрывающийся список рядом с кнопкой **Сохранить** и выберите команду **Сохранить с кодировкой**. В диалоговом окне **Дополнительные параметры сохранения** выберите "Юникод (UTF-8, с сигнатурой)" и нажмите кнопку **ОК**.

## <a name="direct3d-feature-level-test"></a>Тест уровня компонентов Direct3D

### <a name="direct3d-feature-level-support"></a>Поддержка уровня компонентов Direct3D

Приложения Microsoft Direct3D проверяются на предмет работоспособности на устройствах с устаревшим графическим оборудованием.

### <a name="background"></a>Фон

Microsoft Store требует, чтобы все приложения, использующие Direct3D, отображались должным образом или правильно завершаться неправильно на графических картах уровня Feature 9\-1.

Поскольку пользователи могут изменить графическое оборудование на устройстве после установки приложения, при выборе минимального уровня компонентов выше 9\-1 приложение должно определить, соответствует ли текущее оборудование минимальным требованиям. Если минимальные требования не соблюдаются, приложение должно предоставлять пользователю подробные сведения о требованиях к Direct3D. Кроме того, если приложение загружено на устройство, не соответствующее требованиям, этот факт должен быть выявлен приложением на этапе запуска, при этом должно отобразиться сообщение для клиента с информацией о требованиях.

### <a name="test-details"></a>Сведения о тесте

Тест проверит, правильно ли отображаются приложения на уровне функций 9\-1.

### <a name="corrective-action"></a>Корректирующее действие

Убедитесь, что приложение правильно отображается на уровне функций Direct3D 9\-1, даже если предполагается, что он будет работать на более высоком уровне функций. Дополнительные сведения см. в статье [Разработка для различных уровней компонентов Direct3D](https://msdn.microsoft.com/library/windows/apps/hh994923.aspx).

### <a name="direct3d-trim-after-suspend"></a>Вызов API Trim Direct3D после приостановки

> **Обратите внимание** ,  этот тест применяется только к приложениям UWP, разработанным для Windows 8.1 и более поздних версий.

### <a name="background"></a>Фон

Если приложение не вызывает метод [**Trim**](https://docs.microsoft.com/windows/desktop/api/dxgi1_3/nf-dxgi1_3-idxgidevice3-trim) на устройстве Direct3D, то приложение не будет освобождать память, выделенную для предыдущих трехмерных операций. Это повышает риск его завершения из-за нехватки системной памяти.

### <a name="test-details"></a>Сведения о тесте

Проверяет приложения на соответствие требованиям D3D и позволяет убедиться, что приложения вызывают новый API [**Trim**](https://docs.microsoft.com/windows/desktop/api/dxgi1_3/nf-dxgi1_3-idxgidevice3-trim) после обратного вызова приостановки.

### <a name="corrective-action"></a>Корректирующее действие

Приложение должно вызывать API [**Trim**](https://docs.microsoft.com/windows/desktop/api/dxgi1_3/nf-dxgi1_3-idxgidevice3-trim) в интерфейсе [**IDXGIDevice3**](https://docs.microsoft.com/windows/desktop/api/dxgi1_3/nn-dxgi1_3-idxgidevice3) перед каждой приостановкой.

## <a name="app-capabilities-test"></a>Проверка возможностей приложения

### <a name="special-use-capabilities"></a>Специальные возможности

### <a name="background"></a>Фон

Специальные возможности предназначены для особых сценариев. Использовать их разрешается только учетным записям компании.

### <a name="test-details"></a>Сведения о тесте

Проверяет, объявляет ли приложение какие-либо из следующих возможностей:

-   EnterpriseAuthentication
-   SharedUserCertificates
-   DocumentsLibrary

Если объявлены какие-либо из этих возможностей, в результате теста выводится предупреждение для пользователя.

### <a name="corrective-actions"></a>Корректирующие действия

Рекомендуется удалить специальные возможности, если они не требуются для приложения. Кроме того, согласно политике размещения приложений использование этих возможностей дополнительно анализируется при размещении.

## <a name="windows-runtime-metadata-validation"></a>Проверка метаданных среды выполнения Windows

### <a name="background"></a>Фон

Позволяет убедиться, что компоненты, предоставляемые в приложении, соответствуют системе типов универсальной платформы Windows (UWP).

### <a name="test-details"></a>Сведения о тесте

Позволяет убедиться, что файлы **.winmd** в пакете соответствуют правилам UWP.

### <a name="corrective-actions"></a>Корректирующие действия

-   **Проверка атрибута ExclusiveTo:** убедитесь, что классы UWP не реализуют интерфейсы, отмеченные как другой класс ExclusiveTo.
-   **Проверка расположения типов:** убедитесь, что метаданные для всех типов UWP находятся в WINMD-файле с самым длинным именем, соответствующим пространству имен, в пакете приложения.
-   **Проверка чувствительности к регистру имени типа:** убедитесь, что все типы UWP имеют уникальные имена, учитывающие регистр, в пакете приложения. Также убедитесь, что ни одно имя типа UWP не используется одновременно в качестве имени пространства имен в пакете приложения.
-   **Проверка правильности имен типов:** убедитесь, что в глобальном пространстве имен или в пространстве имен Windows верхнего уровня отсутствуют типы UWP.
-   **Проверка правильности общих метаданных:** убедитесь, что компилятор, который вы применяете для создания типов среды выполнения Windows, использует последнюю версию спецификаций UWP.
-   **Проверка свойств:** убедитесь, что все свойства в классе UWP имеют метод Get (методы Set необязательны). Убедитесь, что тип возвращаемого значения метода Get совпадает с типом входного параметра метода Set для всех свойств типов UWP.

## <a name="package-sanity-tests"></a>Проверки работоспособности пакета

### <a name="platform-appropriate-files-test"></a>Тест соответствия файлов платформе

Приложения, устанавливающие смешанные двоичные файлы, могут аварийно завершиться или работать неправильно в зависимости от архитектуры процессора пользователя.

### <a name="background"></a>Фон

Данный тест проверяет двоичные файлы в пакете приложения на предмет конфликтов с архитектурой. Пакет приложения не должен включать двоичные файлы, которые нельзя использовать в системе с архитектурой процессора, указанной в манифесте. Это может привести к сбою приложения или излишнему увеличению размера его пакета.

### <a name="test-details"></a>Сведения о тесте

Проверяет соответствие разрядности каждого файла в заголовке PE архитектуре процессора, объявленной в пакете приложения.

### <a name="corrective-action"></a>Корректирующее действие

Следуя нижеприведенным рекомендациям, вы гарантируете, что в пакет вашего приложения войдут только те файлы, которые поддерживаются архитектурой, указанной в манифесте приложения.

-   Если целевая архитектура процессора для приложения не зависит от типа процессора, то пакет приложения не должен включать двоичные файлы и файлы изображений типов x86, x64 и ARM.

-   Если в качестве целевой архитектуры процессора для приложения выбрана архитектура x86, то пакет приложения должен включать только двоичные файлы и файлы изображений типа x86. Если пакет содержит двоичные файлы или файлы изображений типов x64 или ARM, он не пройдет тестирование.

-   Если в качестве целевой архитектуры процессора для приложения выбрана архитектура x64, то пакет приложения должен включать двоичные файлы и файлы изображений типа x64. В этом случае пакет также может включать файлы типа x86, но основные элементы взаимодействия с приложением должны использовать двоичные файлы типа x64.

    Однако если пакет содержит двоичные файлы или файлы изображений типа ARM либо двоичные файлы или файлы изображений только типа x86, он не пройдет тестирование.

-   Если в качестве целевой архитектуры процессора для приложения выбрана архитектура ARM, то пакет приложения должен включать только двоичные файлы и файлы изображений типа ARM. Если пакет содержит двоичные файлы или файлы изображений типов x64 или x86, он не пройдет тест.

### <a name="supported-directory-structure-test"></a>Тест поддерживаемой структуры каталогов

Проверяет, что приложения не создаются подкаталоги в процессе установки, длина которого превышает максимально допустимое\-пути.

### <a name="background"></a>Фон

Компоненты ОС (включая Trident, WWAHost и т. д.) внутренне ограничены МАКСИМАЛЬными\-путями для путей файловой системы и не будут правильно работать для более длинных путей.

### <a name="test-details"></a>Сведения о тесте

Проверка того, что путь в каталоге установки приложения превышает максимальный\-путь.

### <a name="corrective-action"></a>Корректирующее действие

Используйте более короткую структуру каталогов и более короткое имя файла.

## <a name="resource-usage-test"></a>Тест использования ресурсов

### <a name="winjs-background-task-test"></a>Тест фоновых задач WinJS

Тест фоновых задач WinJS позволяет убедиться, что приложения на JavaScript имеют надлежащие операторы Close и не расходуют энергию батареи.

### <a name="background"></a>Фон

Приложения с фоновыми задачами JavaScript должны вызывать Close() в качестве последнего оператора в фоновых задачах. В противном случае система может не вернуться в режим ожидания с подключением, и батарея разрядится.

### <a name="test-details"></a>Сведения о тесте

Если в манифесте приложения не указан файл фоновой задачи, тест будет пройден. В противном случае выполняется анализ файла фоновой задачи JavaScript, указанного в пакете приложения, и проверяется наличие оператора Close(). Если он найден, тест будет пройден; иначе — нет.

### <a name="corrective-action"></a>Корректирующее действие

Измените код JavaScript фоновой задачи, задав правильный вызов оператора Close().


## <a name="related-topics"></a>Связанные разделы

* [Тесты для приложений моста Windows Desktop](windows-desktop-bridge-app-tests.md)
* [Политики для Microsoft Store](https://docs.microsoft.com/legal/windows/agreements/store-policies)
 
