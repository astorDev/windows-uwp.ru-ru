---
title: Развертывание приложения с использованием свободной регистрации файлов
description: В этом руководстве показано, как использовать макет свободных файлов для проверки и публикации приложений для Windows 10 без необходимости в их упаковке.
ms.date: 06/01/2018
ms.topic: article
keywords: Windows 10, UWP, портал устройств, диспетчер приложений, развертывание, пакет SDK
ms.localizationpriority: medium
ms.openlocfilehash: 7bf3dab97be67a3b97aca4b3132bd9fe18691d15
ms.sourcegitcommit: 26bb75084b9d2d2b4a76d4aa131066e8da716679
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2020
ms.locfileid: "75681935"
---
# <a name="deploy-an-app-through-loose-file-registration"></a>Развертывание приложения с использованием свободной регистрации файлов 

В этом руководстве показано, как использовать макет свободных файлов для проверки и публикации приложений для Windows 10 без необходимости в их упаковке. Регистрация макетов свободных файлов позволяет разработчикам быстро проверить свои приложения без необходимости их упаковки и установки. 

## <a name="what-is-a-loose-file-layout"></a>Что такое макет свободных файлов?

Макет свободных файлов позволяет просто разместить содержимое приложения в папке, а не упаковывать его. Содержимое пакета "свободно" доступно в папке, а не упаковано. 

> [!WARNING]
> Регистрация макета свободных файлов предназначена для того, чтобы разработчики и проектировщики могли быстро проверять свои приложения во время активного этапа разработки. Этот подход не должен использоваться для внутреннего тестирования или тестового запуска приложения. Рекомендуется выполнять завершающую проверку упакованного приложения, подписанном доверенным сертификатом. 

## <a name="advantages-of-loose-file-registration"></a>Преимущества регистрации свободных файлов

- **Быстрая проверка**. Так как файлы приложения уже распакованы, пользователи могут быстро зарегистрировать макет свободных файлов и запустить приложение. Пользователь может использовать это приложение по назначению, как обычное приложение. 
- **Простое распространение по сети**. Если свободные файлы находятся в сетевой папке, а не на локальном диске, разработчики могут предоставить общий доступ к этой папке другим пользователям, имеющим доступ к сети, чтобы они могли зарегистрировать макет свободных файлов и запустить приложение. Это позволяет нескольким пользователям одновременно проверять приложение. 
- **Совместная работа.** Регистрация свободных файлов позволяет разработчикам и проектировщикам продолжать работу с визуальными ресурсами, пока приложение зарегистрировано. Пользователи увидят эти изменения при запуске приложения. Обратите внимание на то, что таким образом можно изменять только статические ресурсы. Если необходимо изменить код или динамически создаваемое содержимое, потребуется повторно выполнить компиляцию приложения.

## <a name="how-to-register-a-loose-file-layout"></a>Как зарегистрировать макет свободных файлов

Windows предоставляет несколько средств разработчика для регистрации макетов свободных файлов на локальных и удаленных устройствах. Вы можете выбрать `WinDeployAppCmd` (инструмент Windows SDK), портал устройств Windows, PowerShell или [Visual Studio](https://docs.microsoft.com/windows/uwp/debug-test-perf/deploying-and-debugging-uwp-apps#register-layout-from-network). Ниже мы рассмотрим, как зарегистрировать свободные файлы с помощью этих инструментов. Но сначала убедитесь, что ваша конфигурация соответствует следующим требованиям:

- на устройствах должна использоваться операционная система Windows 10 Creators Update (сборка 14965) или более поздней версии;
- вам потребуется включить [режим разработчика](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development) и [обнаружение устройств](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development#device-discovery) на всех устройствах.

> [!IMPORTANT]
> Регистрация свободных файлов доступна только на устройствах, поддерживающих протокол SMB: компьютерах и Xbox. 

### <a name="register-with-windeployappcmd"></a>Регистрация с помощью WinDeployAppCmd

При использовании инструментов пакета SDK, соответствующих Windows 10 Creators Update (сборка 14965) или более поздней версии, можно использовать команду `WinDeployAppCmd` в командной строке.

```cmd
WinAppDeployCmd.exe registerfiles -remotedeploydir <Network Path> -ip <IP Address> -pin <target machine PIN>
```

**Network Path** — путь к свободным файлам приложения.

**IP Address** — IP-адрес целевого компьютера.

**target machine PIN** — PIN-код, если он необходим для подключения к целевому устройству. Вам будет предложено повторить попытку с параметром `-pin`, если потребуется аутентификация. Дополнительные сведения о получении PIN-кода см. в разделе [Обнаружение устройств](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development#device-discovery).

### <a name="windows-device-portal"></a>Портал устройств Windows

Портал устройств Windows доступен на всех устройствах Windows 10. Он используется разработчиками для тестирования и проверки результатов работы. Благодаря браузерному пользовательскому интерфейсу и конечным точкам REST портал устройств могут использовать любые члены сообщества разработчиков. Дополнительные сведения о портале устройств см. в разделе [Обзор портала устройств Windows](device-portal.md).

Чтобы зарегистрировать макет свободных файлов на портале устройств, выполните следующие действия.

1. Подключитесь к порталу устройств, выполнив действия, описанные в разделе **Установка** статьи [Обзор портала устройств Windows](device-portal.md).
1. На вкладке "Apps Manager" (Диспетчер приложений) выберите **Register from Network Share** (Регистрация из сетевой папки).
1. Введите путь к сетевой папке с макетом свободных файлов. 
1. Если у главного устройства нет доступа к этой сетевой папке, появится запрос на ввод необходимых учетных данных.
1. После завершения регистрации можно запустить приложение.

На странице диспетчера приложений на портале устройств можно также зарегистрировать необязательные макеты свободных файлов для основного приложения, установив флажок **I want to specify optional packages** (Я хочу указать дополнительные пакеты), а затем указать пути к сетевым папкам с дополнительными приложениями. 

### <a name="powershell"></a>PowerShell 

Windows PowerShell также дает возможность зарегистрировать макеты свободных файлов, но только на локальном устройстве. Если необходимо зарегистрировать макет на удаленном устройстве, необходимо использовать другой метод. 

Чтобы зарегистрировать макет свободных файлов, запустите PowerShell и введите следующую команду.

```PowerShell
Add-AppxPackage -Register <path to manifest file>
```

## <a name="troubleshooting"></a>Диагностика

### <a name="mapped-network-drives"></a>Сопоставленные сетевые диски
В настоящее время подключенные сетевые диски не поддерживаются для регистрации свободных файлов. Обратитесь к подключенному диску, указав полный путь к сетевой папке.

### <a name="registration-failure"></a>Ошибка регистрации
Устройство, на котором выполняется регистрация, должно иметь доступ к макету файлов. Если макет файлов размещен в сетевой папке, убедитесь, что у устройства есть к ней доступ. 

### <a name="modifications-to-visual-assets-arent-being-loaded-in-the-app"></a>Изменения визуальных ресурсов не загружаются в приложении 
Приложение загрузит свои визуальные ресурсы во время запуска. Если в них были внесены изменения после запуска приложения, необходимо повторно запустить приложение, чтобы увидеть эти изменения.
