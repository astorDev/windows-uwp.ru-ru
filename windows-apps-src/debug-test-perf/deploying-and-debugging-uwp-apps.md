---
author: mcleblanc
ms.assetid: 9322B3A3-8F06-4329-AFCB-BE0C260C332C
description: "В данной статье описываются действия, которые необходимо выполнить, чтобы выбрать то или иное целевое устройство развертывания и отладки."
title: "Развертывание и отладка приложений универсальной платформы Windows (UWP)"
translationtype: Human Translation
ms.sourcegitcommit: 14f6684541716034735fbff7896348073fa55f85
ms.openlocfilehash: e2209e90080c7346bb363304b1a28f6446300332

---

# Развертывание и отладка приложений универсальной платформы Windows (UWP)

\[ Обновлено для приложений UWP в Windows 10. Статьи о Windows 8.x см. в [архиве](http://go.microsoft.com/fwlink/p/?linkid=619132) \]

В данной статье описываются действия, которые необходимо выполнить, чтобы выбрать то или иное целевое устройство развертывания и отладки.

Microsoft Visual Studio позволяет выполнять развертывание и отладку приложений универсальной платформы Windows (UWP) на различных устройствах с Windows 10. Visual Studio самостоятельно создает и регистрирует приложения на целевых устройствах.

## Выбор цели развертывания

Чтобы выбрать целевое устройство развертывания, перейдите к раскрывающемуся меню выбора цели отладки, которое располагается рядом с кнопкой **Начать отладку**, и выберите устройство, на котором вы хотите развернуть свое приложение. Выбрав целевое устройство, нажмите **Начать отладку (F5)**, чтобы выполнить на нем развертывание и отладку, или **Ctrl+F5**, чтобы выполнить только развертывание.

![](images/debug-device-target-list.png)

-   **Локальный компьютер**. Позволяет развернуть приложение на компьютере, на котором в настоящее время выполняется разработка. Этот параметр доступен, только если **Минимальная версия целевой платформы** приложения ниже версии операционной системы компьютера, на котором выполняется разработка, или совпадает с ней.
-   **Симулятор.** Позволяет развернуть приложение в среде моделирования на компьютере, на котором в настоящее время выполняется разработка. Этот параметр доступен, только если **Минимальная версия целевой платформы** приложения ниже версии операционной системы компьютера, на котором выполняется разработка, или совпадает с ней.
-   **Устройство.** Позволяет развернуть приложение на устройстве, подключенном с помощью USB. На устройстве должен быть включен режим разработчика, а его экран должен быть разблокирован.
-   **Эмулятор.** Позволяет загрузить и развернуть приложение на эмуляторе, конфигурация которого указана в его названии. Эмуляторы доступны только на машинах со включенным Hyper-V под управлением Windows 8.1 или более старшей версии.
-   **Удаленный компьютер.** Позволяет указать удаленное целевое устройство для развертывания приложения. Дополнительные сведения о развертывании на удаленном компьютере см. в разделе [Определение удаленного устройства](#specifying-a-remote-device).

## Отладка развернутых приложений
Visual Studio можно также прикреплять к любому запущенному процессу приложения UWP путем последовательного выбора пунктов **Отладка** > **Присоединиться к процессу**. К запущенному процессу необязательно присоединять исходный проект Visual Studio, однако загрузка файла [symbols](#symbols) процесса значительно упростит процедуру отладки процесса, исходного кода которого у вас нет.  
  
Кроме того, любой установленный пакет приложения можно прикрепить и выполнить его отладку, последовательно выбрав пункты **Отладка** > **Другое** > **Отладка установленных пакетов приложения**.   
 
![Диалоговое окно "Отладка установленного пакета приложения"](images/gs-debug-uwp-apps-002.png)  

Если установить флажок **Не запускать, но выполнить отладку кода при его запуске**, отладчик Visual Studio будет прикреплен к вашему приложению UWP при его запуске. Это эффективный способ отладки путей элементов управления с помощью [разных вариантов запуска приложений UWP](../xbox-apps/automate-launching-uwp-apps.md), таких как активация протокола с пользовательскими параметрами.  

Разработку и компилирование приложений UWP можно выполнять в среде Windows 8.1 или более поздней версии, однако выполняться они могут только в среде Windows 10. Если вы разрабатываете приложение UWP на компьютере под управлением Windows 8.1, можно выполнить удаленную отладку приложения UWP на другом устройстве с Windows 10 при условии, что главный и целевой компьютеры находятся в одной локальной сети. Чтобы это сделать, скачайте и установите [Инструменты удаленной отладки для Visual Studio](http://aka.ms/remotedebugger) на обоих компьютерах. Устанавливаемая версия этих инструментов должна соответствовать установленной версии Visual Studio, как и указываемая вами архитектура (x86, x64), которая должна соответствовать архитектуре, использующейся в вашем приложении.   
  

## Определение удаленного устройства

### C# и Microsoft Visual Basic

Чтобы указать удаленный компьютер для развертывания приложения на C# или Microsoft Visual Basic, выберите пункт **Удаленный компьютер** в раскрывающемся меню выбора целевого объекта отладки. Появится диалоговое окно **Удаленные подключения**, которое позволяет указать IP-адрес или выбрать обнаруженное устройство. По умолчанию выбран **универсальный** режим проверки подлинности. Чтобы определить, какой режим проверки подлинности следует использовать, см. раздел [Режимы проверки подлинности](#authentication-modes).

![](images/debug-remote-connections.png)

Чтобы вернуться к этому диалоговому окну, вы можете открыть свойства проекта и перейти на вкладку **Отладка**. После этого нажмите **Найти…** рядом с элементом **Удаленный компьютер**.

![](images/debug-remote-machine-config.png)

Чтобы развернуть приложение на удаленном компьютере, вам также понадобится загрузить и установить инструменты удаленной отладки Visual Studio на целевом компьютере. Подробные инструкции см. в разделе [Инструкции для удаленных компьютеров](#remote-pc-instructions).

### C++ и JavaScript

Чтобы указать удаленный компьютер для развертывания приложений UWP на C++ или JavaScript, перейдите в раздел свойств проекта, щелкнув правой кнопкой мыши на проекте в **Обозревателе решений** и выбрав **Свойства**. Перейдите в раздел настроек **отладки** и измените **Загружаемый отладчик** на **Удаленный компьютер**. После этого введите **Имя компьютера** (или щелкните **Найти…** , чтобы найти его) и укажите **Тип проверки подлинности** .

![](images/debug-property-pages.png)
Указав компьютер, выберите **Удаленный компьютер** в раскрывающемся меню выбора цели отладки, чтобы вернуться к указанной машине. Одновременно можно выбрать только один удаленный компьютер.

### Инструкции для удаленных компьютеров

Чтобы выполнить развертывание на удаленном компьютере, на целевой компьютер необходимо установить инструменты удаленной отладки Visual Studio. На удаленном компьютере также должна быть установлена версия Windows, которая выше указанной в свойстве **Минимальная версия целевой платформы** приложения или которая совпадает с ней. После установки инструментов удаленной отладки необходимо запустить удаленный отладчик на целевом ПК. Для этого найдите **Удаленный отладчик** в меню **Пуск** и запустите его. При появлении запроса разрешите отладчику настроить параметры брандмауэра. По умолчанию при запуске отладчика открывается окно проверки подлинности Windows. Если вход на двух компьютерах выполнен от лица разных пользователей, то для прохождения проверки потребуются учетные данные пользователя. Чтобы выбрать вариант **Без проверки подлинности**, перейдите в пункт **Инструменты** -&gt;**Параметры** в меню **Удаленный отладчик** и установите значение **Без проверки подлинности**. Настроив удаленный отладчик, вы можете осуществить развертывание с того компьютера, на котором выполняется разработка.

Дополнительные сведения см. на странице скачивания [инструментов удаленной отладки для Visual Studio]( http://go.microsoft.com/fwlink/?LinkId=717039).

## Режимы проверки подлинности

Имеется три режима проверки подлинности для развертывания на удаленном компьютере.

- **Универсальный (незашифрованный протокол)**. Используйте этот режим проверки подлинности при развертывании на удаленном устройстве (настольных системах и ноутбуках) под управлением ОС, отличной от Windows. На данный момент сюда относятся только устройства IoT. Универсальный (незашифрованный протокол) следует использовать только в доверенных сетях. Подключение для отладки уязвимо для злонамеренных пользователей, которые могут перехватывать и изменить данные, передаваемые между компьютером разработчика и удаленным компьютером.
- **Windows**. Этот режим проверки подлинности предназначен только для развертывания на удаленных компьютерах (настольных системах и ноутбуках). Используйте этот режим проверки подлинности при наличии доступа к учетным данным пользователя, от лица которого выполнен вход на целевом компьютере. Это наиболее безопасный режим удаленного развертывания.
- **Нет**. Этот режим проверки подлинности предназначен только для развертывания на удаленных компьютерах (настольных системах и ноутбуках). Используйте этот режим проверки подлинности, если тестовый компьютер работает в среде, в которой вход выполнен под тестовой учетной записью, и если вы не можете ввести учетные данные. Убедитесь, что параметры удаленного отладчика позволяют отказаться от проверки подлинности.

## Параметры отладки

В Windows 10 скорость запуска приложений UWP увеличена благодаря запуску и приостановке приложений с помощью метода, называемого [предварительным запуском](https://msdn.microsoft.com/library/windows/apps/Mt593297). Многие приложения не выполняют никаких действий в этом режиме, однако другие могут использовать его для регулировки своей работы. Чтобы облегчить отладку проблем, связанных с этими ветвями кода, вы можете начать работу с приложением в Visual Studio в режиме предварительного запуска. Вы можете выполнить отладку как проекта Visual Studio (**Отладка** -&gt;**Другие целевые объекты отладки** -&gt;**Отладка предварительного запуска универсального приложения для Windows**), так и приложений, уже установленных на компьютере (выберите элементы **Отладка** -&gt;**Другие целевые объекты отладки** -&gt;**Отладка установленного пакета приложения** и установите флажок **Активировать приложение с помощью предварительного запуска**). Дополнительные инструкции см. в статье [Debug UWP Prelaunch]( http://go.microsoft.com/fwlink/?LinkId=717245) (Отладка предварительного запуска приложений UWP).

Вы можете установить следующие параметры развертывания на странице свойств **Отладка** запускаемого проекта.

**Разрешение на использование петлевого адреса**

Из соображений безопасности приложению UWP, установленному стандартным образом, запрещено выполнять сетевые вызовы того устройства, на котором оно установлено. По умолчанию при развертывании с помощью Visual Studio для разворачиваемого приложения создается исключение. Это исключение позволяет тестировать процедуры связи на одном компьютере. Перед отправкой приложения в Магазин Windows необходимо проверить работу приложения без использования исключений.

Чтобы удалить из приложения исключение, связанное с использованием петлевого адреса, выполните следующие действия.

-   На странице свойств **Отладка** проектов C# и Visual Basic снимите флажок **Разрешить петлевой адрес**.
-   На странице свойств **Отладка** проектов JavaScript и C++ установите для параметра **Разрешить петлевой адрес** значение **Нет**.

**«Не запускать, а отлаживать мой код при открытии» (C# и Visual Basic) / «Запустить приложение» (JavaScript и C++)**

Чтобы настроить автоматическое начало сеанса отладки при запуске приложения во время развертывания, выполните следующие действия.

-   На странице свойств **Отладка** проектов C# и Visual Basic установите флажок **Не запускать, а отлаживать мой код при открытии**.
-   На странице свойств **Отладка** проектов JavaScript и C++ установите для параметра **Запустить приложение** значение **Да**.

## Файлы символов

Файлы символов содержат разнообразные и очень полезные данные, которые можно использовать при отладке кода, например переменные, имена функций и адреса точек входа. Эти данные позволяют лучше понимать характер исключений и порядок выполнения стека вызовов. Файлы символов для большинства версий Windows доступны на [сервере символов Майкрософт](http://msdl.microsoft.com/download/symbols). Также, чтобы ускорить поиск необходимых данных в автономном режиме эти файлы можно скачать на странице [Скачивания пакетов символов Windows](http://aka.ms/winsymbols).

Чтобы задать параметры символов для Visual Studio, выберите **Сервис > Параметры**, а затем перейдите в раздел **Отладка > Символы** в открывшемся диалоговом окне.

**Рис. 4. Диалоговое окно "Параметры".**
            
![Диалоговое окно "Параметры"](images/gs-debug-uwp-apps-004.png)

Чтобы загрузить символы во время сеанса отладки, выполняемой с помощью отладчика [WinDbg](#windbg), укажите для переменной **sympath** путь к пакету символов. Например, выполнение следующей команды приведет к загрузке символов с сервера символов Майкрософт с их последующим кэшированием в каталог C:\Symbols:

```
.sympath SRV*C:\Symbols*http://msdl.microsoft.com/download/symbols
.reload
```

Чтобы добавить дополнительные пути, используйте разделитель ";" или команду `.sympath+`. Описание более сложных операций с символами, в ходе которых используется отладчик WinDbg, см. в разделе [Общедоступные и закрытые символы](https://msdn.microsoft.com/library/windows/hardware/ff553493).

## Отладчик WinDbg

Программа WinDbg — это мощный отладчик, входящий в состав пакета средств отладки для Windows, которые включены в пакет [Windows SDK](http://go.microsoft.com/fwlink/p?LinkID=271979). При установке Windows SDK средства отладки для Windows можно установить в качестве отдельного продукта. Несмотря на то, что это средство очень полезно использовать для отладки машинного кода, WinDbg не рекомендуется использовать применительно к приложениям, в основе которых лежит управляемый код или HTML5. 

Чтобы отладчик WinDbg можно было использовать с приложениями UWP, сначала необходимо отключить диспетчер жизненного цикла процессов (PLM) для пакета приложения, используя программу PLMDebug в соответствии с инструкциями в предыдущем разделе. 

```
plmdebug /enableDebug [PackageFullName] "\"C:\Program Files\Debugging Tools for Windows (x64)\WinDbg.exe\" -server npipe:pipe=test"
```

В отличие от Visual Studio большинство основных возможностей отладчика WinDbg реализуется при вводе команд в окне командной строки. Вводя различные команды, можно просматривать состояние выполнения, изучать аварийные дампы пользовательского режима, а также выполнять отладку в разных режимах. 

Одной из самых распространенных команд WinDbg является `!analyze -v`, которая используется для получения подробной информации о текущем исключении, в том числе следующих данных:

- FAULTING_IP: указатель инструкции в момент сбоя
- EXCEPTION_RECORD: адрес, код и флаги текущего исключения
- STACK_TEXT: трассировка стека до возникновения исключения

Полный список всех команд WinDbg см. в разделе [Команды отладчика](https://msdn.microsoft.com/library/ff540507).

## Связанные разделы
- [Средства тестирования и отладки для управления жизненным циклом процесса (PLM)](testing-debugging-plm.md)
- [Отладка, тестирование и производительность](index.md)



<!--HONumber=Jun16_HO4-->


