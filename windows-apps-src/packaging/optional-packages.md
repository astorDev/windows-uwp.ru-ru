---
ms.assetid: 3a59ff5e-f491-491c-81b1-6aff15886aad
title: Разработка дополнительных пакетов и связанных наборов
description: Дополнительные пакеты включают содержимое, которое можно интегрировать с главным пакетом. Они полезны для загружаемого контента (DLC), так как позволяют поделить большое приложение при наличии ограничений на размер или доставить любое дополнительное содержимое отдельно от исходного приложения.
ms.date: 09/30/2018
ms.topic: article
keywords: Windows 10, uwp, дополнительные пакеты, связанный набор, пакет расширения, visual studio
ms.localizationpriority: medium
ms.openlocfilehash: f62d6c99acc75033403fac7a498308cea6f7d3f8
ms.sourcegitcommit: 49d58bc66c1c9f2a4f81473bcb25af79e2b1088d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2018
ms.locfileid: "8945594"
---
# <a name="optional-packages-and-related-set-authoring"></a>Разработка дополнительных пакетов и связанных наборов
Дополнительные пакеты включают содержимое, которое можно интегрировать с главным пакетом. Они полезны для загружаемого контента (DLC), так позволяют поделить большое приложение для как размер или доставить любое дополнительное содержимое отдельно от исходного приложения.

Связанные наборы — это расширение дополнительные пакеты — они позволяют применять строгому набору версий на разных основных и дополнительных пакетов. Они также позволяют загрузить машинный код (C++) из дополнительных пакетов. 

## <a name="prerequisites"></a>Необходимые условия

- Visual Studio 2017 г., версия 15.1
- Windows10 версии1703
- Windows 10 версии 1703 SDK

Чтобы получить все самые последние средства для разработки, см. в разделе [загружаемые файлы и инструменты для Windows 10](https://developer.microsoft.com/windows/downloads).

> [!NOTE]
> Чтобы отправить приложение, которое использует дополнительные пакеты и (или) связанные наборы в Microsoft Store, вам потребуется разрешение. Дополнительные пакеты и связанные наборы можно использовать для строки бизнес (LOB) или корпоративных приложений без получения разрешения центра партнеров, если они не отправлялись в Store. Для получения разрешения на отправку приложений, использующих дополнительные пакеты и связанные наборы, см. раздел [Поддержка разработчиков для Windows](https://developer.microsoft.com/windows/support).

### <a name="code-sample"></a>Пример кода
Когда вы читаете в этой статье, рекомендуется следуйте указаниям в [примере кода дополнительный пакет](https://github.com/AppInstaller/OptionalPackageSample) на GitHub для практических понять, как дополнительных пакетов и связанных рабочих наборов в Visual Studio.

## <a name="optional-packages"></a>Дополнительные пакеты
Чтобы создать дополнительный пакет в Visual Studio, вам потребуется:
1. Убедитесь, что **Минимальная версия целевой платформы** вашего приложения установлено значение: 10.0.15063.0 или более поздней версии.
2. В проекте **основного пакета** , откройте `Package.appxmanifest` файла. Перейдите на вкладку «Упаковка» и запишите ваше **имя семейства пакетов**, который является все перед символом «_».
3. В проекте **дополнительного пакета** , щелкните правой кнопкой мыши `Package.appxmanifest` и выберите **Открыть с помощью > редактор (текстовый) XML**.
4. Найдите `<Dependencies>` элемент в файле. Добавьте следующие строки:

```XML
<uap3:MainPackageDependency Name="[MainPackageDependency]"/>
```

Замените `[MainPackageDependency]` **имя семейства пакетов** из шаг 2. Это указывает, что **дополнительный пакет** зависит от **основного пакета**.

После создания пакета зависимостей настроить шаги 1 – 4, вы можете продолжать разработка обычным образом. Если вы хотите загрузки кода из дополнительного пакета в основной пакет, необходимо создать связанный набор. Дополнительные сведения в разделе [задает связанный элемент](#related_sets) .

Visual Studio можно настроить так, чтобы повторно развернуть главный пакет при каждом развертывании дополнительного пакета. Чтобы задать зависимостей сборки в Visual Studio, необходимо сделать следующее.

- Щелкните правой кнопкой мыши проект дополнительного пакета и выбрать **зависимостей сборки > … зависимости проекта**
- Проверьте проект основного пакета и нажмите кнопку «ОК». 

Теперь каждый раз, когда вы введите F5 или сборки проекта с помощью дополнительного пакета, Visual Studio создаст сначала проект основного пакета. Это позволит гарантировать, что проект основного и дополнительных проектов будут синхронизированы.

## Связанные наборы<a name="related_sets"></a>

Если вы хотите загрузки кода из дополнительного пакета в основной пакет, необходимо создать связанный набор. Чтобы создать связанный набор, основной пакет и дополнительные пакеты должны быть тесно. Метаданные для связанных наборов задается в файле .appxbundle или .msixbundle основного пакета. Visual Studio помогает получить правильные метаданные в файлах. Для настройки вашего приложения решение для связанные наборы, выполните следующие действия:

1. Щелкните правой кнопкой мыши проект основного пакета, выберите **Добавить > новый элемент**
2. В окне поиска установленные шаблоны для «.txt» и добавьте новый текстовый файл.
> [!IMPORTANT]
> Новый текстовый файл должно называться: `Bundle.Mapping.txt`.

3. В `Bundle.Mapping.txt` файл, укажите относительные пути к любому проекты дополнительного пакета или внешние пакеты. Пример `Bundle.Mapping.txt` файл должен выглядеть примерно следующим образом:

```syntax
[OptionalProjects]
"..\ActivatableOptionalPackage1\ActivatableOptionalPackage1.vcxproj"
"..\ActivatableOptionalPackage2\ActivatableOptionalPackage2.vcxproj"

[ExternalPackages]
"..\ActivatableOptionalPackage1\x86\Release\ActivatableOptionalPackage3_1.1.1.0\ ActivatableOptionalPackage3_1.1.1.0.appx"
```

Если ваше решение настроен таким образом, Visual Studio создаст манифеста пакета для основного пакета все необходимые метаданные для связанных наборов. 

Обратите внимание, что как дополнительные пакеты `Bundle.Mapping.txt` файл для связанных наборов будет работать только на Windows 10 версии 1703 или более поздней версии. Кроме того необходимо задать Минимальная версия вашего приложения целевой платформы для 10.0.15063.0 или более поздней версии.

## Известные проблемы<a name="known_issues"></a>

Отладка дополнительных проекта связанного набора не поддерживается в настоящее время в Visual Studio. Чтобы обойти эту проблему, можно развернуть и запустить активации (Ctrl + F5) и вручную присоединить отладчик к процессу. Присоединить отладчик, перейдите в меню «Отладка» в Visual Studio, выберите «Присоединить к процесс...» и присоединить отладчик **процесса основного приложения**.