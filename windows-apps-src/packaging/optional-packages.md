---
author: laurenhughes
ms.assetid: 3a59ff5e-f491-491c-81b1-6aff15886aad
title: Разработка дополнительных пакетов и связанных наборов
description: Дополнительные пакеты включают содержимое, которое можно интегрировать с главным пакетом. Они полезны для загружаемого контента (DLC), так как позволяют поделить большое приложение при наличии ограничений на размер или доставить любое дополнительное содержимое отдельно от исходного приложения.
ms.author: lahugh
ms.date: 04/05/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, uwp, дополнительные пакеты, связанных с ними набор, пакет расширения, visual studio
ms.localizationpriority: medium
ms.openlocfilehash: d66a511211396190393e31bfd553149a1e89fad0
ms.sourcegitcommit: 897a111e8fc5d38d483800288ad01c523e924ef4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/13/2018
ms.locfileid: "406081"
---
# <a name="optional-packages-and-related-set-authoring"></a>Разработка дополнительных пакетов и связанных наборов
Дополнительные пакеты включают содержимое, которое можно интегрировать с главным пакетом. Они могут помочь в разделе загружаемые материалы (DLC) деления больших приложение для ограничения размера или для доставки дополнительное содержимое, отдельно от исходного приложения.

Связанные наборы являются расширением дополнительные пакеты--используются для применения параметров strict набор версий для основных и дополнительных пакетов. Они также позволяют загрузки машинного кода (C++) от дополнительные пакеты. 

## <a name="prerequisites"></a>Предварительные условия

- Visual Studio 2017, версии 15.1
- Windows10 версии1703
- 10 Windows, версия 1703 SDK

Чтобы получить все последние средства разработки, просмотрите [файлы для загрузки и средства для Windows 10](https://developer.microsoft.com/windows/downloads).

> [!NOTE]
> Чтобы отправить приложение, которое использует дополнительные пакеты и/или связанные наборы для хранилища Майкрософт, требуется разрешение. Дополнительные пакеты и связанные наборы могут использоваться для специализированного программного обеспечения (бизнес-приложений) или корпоративных приложений без получения разрешения из Центра разработки, если они не отправлялись в Store. Для получения разрешения на отправку приложений, использующих дополнительные пакеты и связанные наборы, см. раздел [Поддержка разработчиков для Windows](https://developer.microsoft.com/windows/support).

### <a name="code-sample"></a>Пример кода
Хотя вы читаете в этой статье, рекомендуется за [образец кода необязательно пакета](https://github.com/AppInstaller/OptionalPackageSample) на репозиториев практические понять, как необязательные пакетов и связанные с работой наборов в среде Visual Studio.

## <a name="optional-packages"></a>Дополнительные пакеты
Чтобы создать пакет необязательно в Visual Studio, вам потребуется:
1. Убедитесь, что ваше приложение **Целевой платформы Min версии** задано значение: 10.0.15063.0.
2. В проекте **основного пакета** , откройте `Package.appxmanifest` файла. Перейдите на вкладку «Упаковки» и запишите **имя пакета семейства**которого является все, что прежде чем символ «_».
3. Из проекта **необязательно пакета** , щелкните правой кнопкой мыши `Package.appxmanifest` и выберите пункт **Открыть с помощью > редактора XML (текст)**.
4. Найдите `<Dependencies>` элемент в файле. Добавьте следующие строки:

```XML
<uap3:MainPackageDependency Name="[MainPackageDependency]"/>
```

Замените `[MainPackageDependency]` с свое **имя семейства пакета** из действия 2. Это указывает, что **пакет необязательно** , зависит от **основного пакета**.

После настройки из действия 1 – 4 зависимостей пакета, продолжите разработку как обычно. Если вы хотите загрузить кода из пакета необязательно в главный пакет, необходимо создать набор связанных с ними. Для получения дополнительных сведений в разделе [задает соответствующие](#related_sets) .

Visual Studio можно настроить для повторного развертывания основного пакета каждый раз развернуть дополнительный пакет. Чтобы задать зависимость построения в Visual Studio, можно выполнить следующие действия:

- Щелкните правой кнопкой мыши проект необязательно пакета и выберите **построения зависимостей > зависимости проекта...**
- Установите флажок главного проекта и выберите «ОК». 

Теперь каждый раз, введите F5 или построении проекта дополнительный пакет Visual Studio выполняет построение проекта главный пакет сначала. Это гарантирует, что главного проекта и необязательные проектов синхронизированы.

## Связанные наборы<a name="related_sets"></a>

Если вы хотите загрузить кода из пакета необязательно в главный пакет, необходимо создать набор связанных с ними. Чтобы построить связанный набор, главный пакет и необязательные пакета должны быть тесно. Метаданные для связанных с ними наборов указан в `.appxbundle` файла основного пакета. Visual Studio помогает получить правильный метаданных в файлах. Чтобы настроить решение ваше приложение для связанных с ними наборов, выполните следующие действия:

1. Щелкните правой кнопкой мыши проект основного пакета, выберите **Добавить > новый элемент...**
2. В окне поиска установленные шаблоны для «.txt» и добавьте новый текстовый файл.
> [!IMPORTANT]
> Новый текстовый файл должен иметь имя: `Bundle.Mapping.txt`.
3. В `Bundle.Mapping.txt` файл вы зададите относительных путей к любой необязательно пакета проектов или внешних пакетов. Пример `Bundle.Mapping.txt` файл должен выглядеть примерно следующим образом:

```syntax
[OptionalProjects]
"..\ActivatableOptionalPackage1\ActivatableOptionalPackage1.vcxproj"
"..\ActivatableOptionalPackage2\ActivatableOptionalPackage2.vcxproj"

[ExternalPackages]
"..\ActivatableOptionalPackage1\x86\Release\ActivatableOptionalPackage3_1.1.1.0\ ActivatableOptionalPackage3_1.1.1.0.appx"
```

При решении настроена таким образом, Visual Studio создаст манифест пакета для основного пакета с все необходимые метаданные для связанных с ними наборов. 

Сообщение о том, как дополнительные пакеты `Bundle.Mapping.txt` файлов для наборов связанных с ними будет работать только на 10 Windows, версия 1703. Кроме того ваше приложение целевой платформы Min версии должен иметь значение 10.0.15063.0.

## Известные проблемы<a name="known_issues"></a>

Отладка проекта необязательный связанный набор не поддерживается в настоящее время в Visual Studio. Чтобы обойти эту проблему, можно развернуть и запуска активации (Ctrl + F5) и вручную подключение отладчика к процессу. Подключение отладчика, перейдите в меню «Отладка» в Visual Studio, выберите «Подключение к процесс...» и присоединение отладчика к **процесс основного приложения**.