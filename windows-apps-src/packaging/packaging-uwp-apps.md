---
ms.assetid: 96361CAF-C347-4671-9721-8208CE118CA4
title: Создание пакетов приложений UWP
description: Для продажи или распространения среди других пользователей вашего приложения универсальной платформы Windows (UWP) для него необходимо создать пакет appxupload.
---
# Создание пакетов приложений UWP

\[ Обновлено для приложений UWP в Windows 10. Статьи о Windows 8.x см. в [архиве](http://go.microsoft.com/fwlink/p/?linkid=619132) \]

Для продажи или распространения среди других пользователей вашего приложения универсальной платформы Windows (UWP) для него необходимо создать пакет appxupload. После создания пакета appxupload генерируется другой пакет appx для тестирования и загрузки неопубликованного приложения. Распространить приложение можно посредством прямой загрузки пакета appx неопубликованного приложения на устройство. В этой статье описан процесс настройки, создания и тестирования пакета приложения UWP. Подробнее о загрузке неопубликованных приложений см. в разделе [Загрузка неопубликованных приложений с помощью DISM](http://go.microsoft.com/fwlink/?LinkID=231020).

В Windows 10 создается один пакет (.appxupload), который можно отправить в Магазин Windows. Затем приложение станет доступным для установки и запуска на любом устройстве с Windows 10. Ниже описаны шаги для создания пакета приложения.

1.  [Перед формированием пакета приложения](#before-packaging-your-app) Выполните следующие действия, чтобы убедиться, что ваше приложение готово к формированию пакета для отправки в Магазин.
2.  [Настройка пакета приложения](#configure-an-app-package) Используйте конструктор манифеста для настройки пакета. Например, добавьте изображения для плиток и выберите ориентации, которые будут поддерживаться приложением.
3.  [Создание пакета приложения](#create-an-app-package) Используйте мастер в Microsoft Visual Studio для создания пакета приложения, а затем сертифицируйте созданный пакет с помощью комплекта сертификации приложений для Windows.
4.  [Загрузка пакета неопубликованного приложения](#sideload-your-app-package) После загрузки неопубликованного приложения на устройство, вы сможете проверить, правильно ли оно работает.

После выполнения вышеперечисленных действий ваше приложение будет готово к продаже в Магазине. Неопубликованное бизнес-приложение, которое предназначено не для продажи, а для внутреннего использования, можно загрузить и установить на любом устройстве с Windows 10.

## Перед формированием пакета приложения

1.  Протестируйте свое приложение. Перед формированием пакета приложения для отправки в Магазин убедитесь, что оно правильно работает на всех семействах устройств, которые планируется поддерживать. Эти семейства устройств могут включать настольные и мобильные устройства, Surface Hub, XBOX, устройства IoT и др.
2.  Оптимизируйте приложение. Используйте средства профилирования и отладки, доступные в Visual Studio, для оптимизации производительности вашего приложения UWP. Например, средство "Временная шкала" для измерения отклика пользовательского интерфейса, средство измерения использования памяти, средство оценки загрузки процессора и многие другие. Дополнительные сведения об этих средствах см. в разделе [Запуск средств диагностики без отладки](https://msdn.microsoft.com/library/dn957936.aspx).
3.  Проверьте совместимость с собственной платформой .NET (для приложений Visual Basic и C#). UWP предоставляет новый собственный компилятор, который улучшит показатели времени выполнения приложения. Настоятельно рекомендуется протестировать приложение в этой среде компиляции. По умолчанию конфигурация сборки **Выпуск** включает собственную цепочку инструментов .NET, поэтому обязательно протестируйте приложение с такой конфигурацией **Выпуск** и убедитесь, что приложение ведет себя ожидаемо. Некоторые распространенные проблемы отладки, которые могут произойти с собственной платформой .NET, подробно рассматриваются [здесь](http://blogs.msdn.com/b/visualstudioalm/archive/2015/07/29/debugging-net-native-windows-universal-apps.aspx).

## Настройка пакета приложения

Файл манифеста приложения (package.appxmanifest.xml) содержит свойства и параметры, которые необходимы для создания пакета приложения. Например, определенные свойства в файле манифеста описывают изображение, которое будет использоваться как плитка приложения, и ориентации, которые будут поддерживаться вашим приложениям при повороте устройства.

Visual Studio содержит конструктор манифестов, который упрощает обновление файла манифеста без необходимости редактировать необработанный XML-код файла.

Visual Studio может сопоставить пакет с Магазином. При этом некоторые поля на вкладке формирования пакета в конструкторе манифеста обновляются автоматически.

**Настройка пакета с помощью конструктора манифестов**

1.  В **обозревателе решений** разверните узел проекта приложения UWP.
2.  Дважды щелкните файл **Package.appxmanifest**. Если файл манифеста уже открыт в представлении кода XML, Visual Studio предложит вам закрыть файл.
3.  Теперь вы сможете решить, как настроить свое приложение. Каждая вкладка содержит сведения о приложении, которые можно настроить, и ссылки на дополнительную информацию (при необходимости).<br/>
    ![](images/packaging-screen1.jpg)

    Убедитесь, что все изображения, необходимые для приложения UWP, присутствуют на вкладке **Визуальные активы**.

    На вкладке **Упаковка** можно ввести сведения о публикации. Здесь можно выбрать сертификат для подписания приложения. Все приложения UWP должны быть подписаны сертификатом. Чтобы загрузить пакет неопубликованного приложения, пакет должен быть доверенным. Сертификат необходимо установить на это устройство, чтобы пакету можно было доверять. Подробнее о загрузке неопубликованных приложений см. в разделе [Подготовка устройства к разработке](https://msdn.microsoft.com/library/windows/apps/Dn706236).

4.  Сохраните файл после внесения необходимых изменений в приложение.

## Создание пакета приложения

Для распространения приложения через Магазин необходимо создать пакет appxupload. Это можно сделать, воспользовавшись мастером **Создание пакетов приложения**. Выполните следующие действия, чтобы создать пакет, подходящий для отправки, с помощью Microsoft Visual Studio 2015.

**Чтобы создать пакет приложения, сделайте вот что.**

1.  В **обозревателе решений** откройте решение для проекта приложения UWP.
2.  Щелкните проект правой кнопкой мыши и выберите **Магазин**->**Создать пакеты приложения**. Если этот параметр отключен или не отображается, убедись, что это проект UWP.<br/>
    ![](images/packaging-screen2.jpg)

    Откроется мастер **Создание пакетов приложения**.

3.  Нажмите кнопку «Да» в первом диалоговом окне с вопросом о том, требуется ли выполнить сборку пакетов для отправки в Магазин Windows, и нажмите кнопку «Далее».<br/>
    ![](images/packaging-screen3.jpg)

    Если вы нажмете кнопку "Нет", Visual Studio не создаст пакет .appxupload, необходимый для отправки приложения в Магазин. Если требуется загрузить неопубликованное приложение только для запуска на внутренних устройствах, можете выбрать этот вариант. Подробнее о загрузке неопубликованных приложений см. в разделе [Подготовка устройства к разработке](https://msdn.microsoft.com/library/windows/apps/Dn706236).

4.  Войдите в Центр разработки для Windows, используя свою учетную запись разработчика. (Если у вас нет учетной записи разработчика, мастер поможет создать ее.)
5.  Выберите имя приложения для пакета или зарезервируйте новое имя, если вы не зарезервировали его ранее на портале Центра разработки для Windows.<br/>
    ![](images/packaging-screen4.jpg)
6.  Не забудьте выбрать все три конфигурации архитектуры (x86, x64 и ARM) в диалоговом окне **Выберите и настройте пакеты**. Таким образом приложение можно будет развернуть на максимально широком спектре устройств. В списковом окне **Создать пакет приложений** выберите **Всегда**. После этого процесс отправки приложения в Магазин будет упрощен, поскольку передавать придется только один файл (.appxupload). Единый набор будет содержать все необходимые пакеты для развертывания приложения на устройствах с любой архитектурой процессора.<br/>
    ![](images/packaging-screen5.jpg)
7.  Полезно будет включить полные файлы символов PDB для лучшего управления [аналитикой по сбоям](http://blogs.windows.com/buildingapps/2015/07/13/crash-analysis-in-the-unified-dev-center/) из Центра разработки для Windows. Подробнее об отладке с использованием символов см. на сайте [Отладка с использованием символов](https://msdn.microsoft.com/library/windows/desktop/Ee416588).
8.  Теперь можно настроить сведения для создания пакета. Когда все будет готово к публикации приложения, вы сможете отправить пакеты из расположения выходных данных.
9.  Щелкните **Создать** для создания пакета appxupload.
10. Откроется данное диалоговое окно.<br/>
    ![](images/packaging-screen6.jpg)

    Проверьте приложение перед отправкой в Магазин для сертификации на локальном или удаленном компьютерах. (Проверить можно только сборку рабочего выпуска для пакета приложения, а не отладочную сборку.)

11. Для выполнения локальной проверки оставьте выбранным вариант **Локальный компьютер** и щелкните **Запустить комплект сертификации приложений для Windows**. Подробнее о тестировании приложений с помощью комплекта сертификации приложений для Windows см. в разделе [Комплект сертификации приложений для Windows](https://msdn.microsoft.com/library/windows/apps/Mt186449).

    Комплект сертификации приложений для Windows выполняет тесты и отображает их результаты. См. раздел [Тесты комплекта сертификации приложений для Windows](https://msdn.microsoft.com/library/windows/apps/mt186450).

    Чтобы использовать для проверки удаленную систему Windows 10, необходимо вручную установить комплект сертификации приложений для Windows на это устройство. Следующий раздел поможет выполнить эти действия. После этого выберите вариант **Удаленный компьютер** и щелкните **Запустить комплект сертификации приложений для Windows**, чтобы установить подключение к удаленному устройству и запустить проверочные тесты.

12. После завершения проверки приложения комплектом сертификации приложений для Windows, приложение будет готово в отправке в Магазин. Убедитесь, что отправляется нужный файл. Этот файл можно найти в корневой папке решения \\\[AppName\]\\AppPackages. Расширение файла — .appxupload. Форма имени файла — \[AppName\]\_\[AppVersion\]\_x86\_x64\_arm\_bundle.appxupload.

**Проверка пакета приложения на удаленном устройстве с Windows 10**

1.  Подготовьте устройство с Windows 10 к разработке, следуя инструкциям [Подготовка устройства к разработке](https://msdn.microsoft.com/library/windows/apps/Dn706236).
    **Важно!** Невозможно проверить пакет приложения на удаленном устройстве ARM для Windows 10.
2.  Скачайте и установите средства удаленной работы для Visual Studio. Эти средства используются для удаленного запуска комплекта сертификации приложений для Windows. Подробнее об этих средствах в том числе, а также о том, где можно их скачать, см. на веб-сайте [Запуск приложений Магазина Windows на удаленном компьютере](https://msdn.microsoft.com/library/hh441469.aspx#BKMK_Starting_the_Remote_Debugger_Monitor).
3.  Скачайте [комплект сертификации приложений для Windows](http://go.microsoft.com/fwlink/p/?LinkID=309666) и установите его на удаленное устройство с Windows 10.
4.  На странице **Создание пакетов завершено** мастера выберите вариант **Удаленный компьютер**, а затем нажмите кнопку многоточия рядом с кнопкой **Проверить подключение**.
    **Примечание.** Кнопка **Удаленный компьютер** доступна, только если выбрана по крайней мере одна конфигурация решения, поддерживающая проверку. Подробнее о тестировании приложения с помощью комплекта сертификации приложений для Windows см. в разделе [Комплект сертификации приложений для Windows](https://msdn.microsoft.com/library/windows/apps/Mt186449).
5.  Укажите формат устройства внутри подсети или укажите имя сервера доменных имен (DNS) или IP-адрес устройства, находящегося вне вашей подсети.
6.  В списке **Режим аутентификации** выберите **Нет**, если устройство не требует входа в систему, установленную на нем, с использованием учетных данных Windows.
7.  Нажмите кнопку **Выбрать**, а затем — **Запустить комплект сертификации приложений для Windows**. Если на устройстве запущены средства удаленной работы, Visual Studio подключится к нему и затем выполнит проверочные тесты. См. раздел [Тесты комплекта сертификации приложений для Windows](https://msdn.microsoft.com/library/windows/apps/mt186450).

## Загрузка пакета неопубликованного приложения

С пакетами приложений UWP нельзя просто установить приложение на устройство, как это происходит в случае классических приложений. Обычно эти приложения скачиваются из Магазина и именно так они устанавливаются на устройство. Но вы можете загрузить неопубликованное приложение на устройство без отправки в Магазин. Это позволяет установить и протестировать приложение, используя созданный пакет приложения (.appx). Если вы не собираетесь продавать приложение (например, бизнес-приложение) в Магазине, можно загрузить это неопубликованное приложение, чтобы другие пользователи в вашей организации могли использовать его.

В следующем списке приведены требования для загрузки неопубликованного приложения.

-   Необходимо [подготовить устройство к разработке](https://msdn.microsoft.com/library/windows/apps/Dn706236).
-   Для загрузки неопубликованного приложения на мобильное устройство с Windows 10 необходимо использовать средство [WinAppDeployCmd.exe](install-universal-windows-apps-with-the-winappdeploycmd-tool.md) .

**Загрузка неопубликованного приложения на настольный компьютер, ноутбук или планшет**

1.  Скопируйте папки той версии, которую вы хотите установить на целевое устройство.

    При создании пакета приложения создается папка, соответствующая номеру версии, и папка \_test. Пример этих двух папок (версия для установки — 1.0.2):

    -   C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0
    -   C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0\_Test

    Если пакет приложения не создан, просто скопируйте папку для необходимой архитектуры и соответствующую папку тестов. Пример:

    -   C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0\_x64
    -   C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0\_x64\_Test
2.  На целевом устройстве, откройте папку тестов. Например, C:\\Projects\\MyApp\\MyApp\\AppPackages\\MyApp\_1.0.2.0\_Test
3.  Щелкните правой кнопкой мыши файл **Add-AppDevPackage.ps1** выберите **Выполнить с помощью PowerShell** и следуйте инструкциям.<br/>
    ![](images/packaging-screen7.jpg)

    После завершения установки пакета приложения в окне PowerShell отобразится сообщение «Приложение успешно установлено».

    **Примечание.** Чтобы открыть контекстное меню на планшете, коснитесь необходимого экрана и удерживайте, пока не появится полный круг, а затем поднимите палец. После того, как вы уберете палец с экрана, отобразится контекстное меню.
4.  Нажмите кнопку "Пуск" и введите имя приложения, чтобы запустить его.

 

 






<!--HONumber=Mar16_HO1-->


