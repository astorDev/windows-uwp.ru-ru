---
ms.assetid: 96361CAF-C347-4671-9721-8208CE118CA4
title: Формирование пакетов приложений UWP
description: Для распространения и продажи вашего приложения для универсальной платформы Windows (UWP) необходимо создать пакет приложения.
ms.date: 01/02/2019
ms.topic: article
keywords: windows 10, uwp
f1_keywords:
- vs.packagewizard
- vs.storeassociationwizard
ms.localizationpriority: medium
ms.openlocfilehash: f2e89490a76c9174c1e938466bf1fbcc9cc13455
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57599139"
---
# <a name="package-a-uwp-app-with-visual-studio"></a>Упаковка приложения UWP с помощью Visual Studio

Для продажи вашего приложения UWP или его распространения другим пользователям его необходимо упаковать. Если вы не хотите распространять приложение через Microsoft Store, вы можете отправить пакет приложения без публикации непосредственно на устройство или распространить его через [веб-установку](installing-UWP-apps-web.md). В этой статье описан процесс настройки, создания и тестирования пакета приложения UWP с помощью Visual Studio. Дополнительные сведения об управлении и развертывании бизнес-приложений см. в разделе [Управление корпоративными приложениями](https://docs.microsoft.com/windows/client-management/mdm/enterprise-app-management).

В Windows 10, вы можете отправить пакет приложения, набора приложений или отправки файлов пакета готового приложения для [центра партнеров](https://partner.microsoft.com/dashboard). Из этих параметров Отправка файла отправки пакета приложения будет обеспечить удобство работы.

## <a name="types-of-app-packages"></a>Типы пакетов приложений

- **Пакет приложения (AppX или .msix)**  
    Файл, содержащий ваше приложение в формате, который можно загрузить неопубликованным на ваше устройство. Любой файл пакета одного приложения, созданные с помощью Visual Studio — **не** предназначен для отправки в центр партнеров, следует использовать для загрузки неопубликованных приложений и только в целях тестирования. Если вы хотите отправить приложение центр партнеров, используйте файл отправки пакета приложения.  

- **Набор приложений (appxbundle или .msixbundle)**  
    Пакет приложений — это тип пакета, который может содержать множество пакетов приложений, каждый из которых создан для поддержки определенной архитектуры устройства. Например, пакет приложений может содержать три отдельных пакета приложения для конфигураций x86, x64 и ARM. Пакеты приложений должны создаваться всякий раз, когда это возможно, потому что они делают приложение доступным для широкого ассортимента устройств.  

- **Загруженный файл пакета приложения (.appxupload или .msixupload)**  
    Один файл, который может содержать несколько пакетов приложения или пакет приложений, чтобы обеспечить поддержку разных архитектур процессора. Отправка файла пакета приложения также содержит файл символов для [анализ производительности приложений](https://docs.microsoft.com/windows/uwp/publish/analytics) после публикации приложения в Microsoft Store. Этот файл будет автоматически создан для вас при упаковке целью отправкой в центр партнеров для публикации приложения с помощью Visual Studio.

Ниже приведен обзор действий по подготовке и созданию пакета приложения.

1.  [Перед формированием пакета приложения](#before-packaging-your-app) Выполните следующие действия, чтобы убедиться, что приложение будет готово к упаковке для отправки центра партнеров.
2.  [Настройка пакета приложения](#configure-an-app-package) Используйте конструктор манифеста Visual Studio для настройки пакета. Например, добавьте изображения для плиток и выберите ориентации, которые будут поддерживаться приложением.
3.  [Создание файла пакета отправки приложения](#create-an-app-package-upload-file). Используйте мастер пакета приложения в Visual Studio для создания пакета приложения, а затем сертифицируйте созданный пакет с помощью комплекта сертификации приложений для Windows.
4.  [Загрузка пакета неопубликованного приложения](#sideload-your-app-package). После загрузки неопубликованного приложения на устройство вы сможете проверить, правильно ли оно работает.

После выполнения вышеперечисленных действий ваше приложение будет готово к распространению. Если у вас есть бизнес приложения (LOB), вы не планируете продажи, только для внутренних пользователей, вы можете загрузить неопубликованное приложение для его установки на любом устройстве Windows 10.

## <a name="before-packaging-your-app"></a>Перед формированием пакета приложения

1.  **Протестируйте свое приложение.** Перед упаковкой приложения для представления центра партнеров, убедитесь, что он работает ожидаемым образом на всех устройствах, которые планируется поддерживать. Эти семейства устройств могут включать настольные и мобильные устройства, Surface Hub, Xbox, устройства IoT и др. Дополнительные сведения о развертывании и тестировании приложения с помощью Visual Studio см. в разделе [развертывание и отладка приложений UWP](../debug-test-perf/deploying-and-debugging-uwp-apps.md).
2.  **Оптимизации приложения.** Используйте средства профилирования и отладки в Visual Studio для оптимизации производительности вашего приложения UWP. Например, средство "Временная шкала" для измерения отклика пользовательского интерфейса, средство измерения использования памяти, средство оценки загрузки процессора и многие другие. Дополнительные сведения об этих инструментах командной строки см. в разделе [Обзор функции профилирования](https://docs.microsoft.com/visualstudio/profiling/profiling-feature-tour).
3.  **Проверка совместимости .NET Native (для Visual Basic и C# приложений).** Универсальная платформа Windows предоставляет новый собственный компилятор, который улучшит показатели времени выполнения приложения. Настоятельно рекомендуется протестировать приложение в этой среде компиляции. По умолчанию конфигурация сборки **Выпуск** включает цепочку инструментов .NET Native, поэтому обязательно протестируйте приложение с такой конфигурацией **Выпуск** и убедитесь, что приложение ведет себя ожидаемо. Некоторые распространенные проблемы отладки, которые могут произойти с платформой .NET Native, подробно рассматриваются в разделе [Отладка универсальных приложений для Windows .NET Native](https://blogs.msdn.com/b/visualstudioalm/archive/2015/07/29/debugging-net-native-windows-universal-apps.aspx).

## <a name="configure-an-app-package"></a>Настройка пакета приложения

Файл манифеста приложения (package.appxmanifest.xml) представляет собой XML-файл, который содержит свойства и параметры, необходимые для создания пакета приложения. Например, определенные свойства в файле манифеста приложения описывают изображение, которое будет использоваться как плитка приложения, и ориентации, которые будут поддерживаться вашим приложениям при повороте устройства.

Visual Studio содержит конструктор манифестов, который позволяет обновлять файл манифеста без необходимости редактировать необработанный XML-код файла.

**Настройка пакета с помощью конструктора манифестов**

1.  В **обозревателе решений** разверните узел проекта приложения UWP.
2.  Дважды щелкните файл **Package.appxmanifest**. Если файл манифеста уже открыт в представлении кода XML, Visual Studio предложит вам закрыть файл.
3.  Теперь вы сможете решить, как настроить свое приложение. Каждая вкладка содержит сведения о приложении, которые можно настроить, и ссылки на дополнительную информацию (при необходимости).  
    ![Конструктор манифестов в Visual Studio](images/packaging-screen1.jpg)

    Убедитесь, что все изображения, необходимые для приложения UWP, присутствуют на вкладке **Визуальные активы**.

    На вкладке **Упаковка** можно ввести сведения о публикации. Здесь можно выбрать сертификат для подписания приложения. Все приложения UWP должны быть подписаны сертификатом.

    >[!IMPORTANT]
    >Если приложение публикуется в Microsoft Store, приложение будет подписано для вас с помощью доверенного сертификата. Это позволит пользователям устанавливать и запускать приложения без установки соответствующего сертификата для подписи приложения.

    Если приложение не публикуется и достаточно выполнить загрузку пакета неопубликованного приложения, необходимо сначала обеспечить доверие к пакету. Для этого сертификат необходимо установить на устройстве пользователя. Подробнее о загрузке неопубликованных приложений см. в разделе [Подготовка устройства к разработке](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development).

4.  Сохраните файл **Package.appxmanifest** после внесения необходимых изменений в приложение.

Если планируется распространять приложения через Microsoft Store, Visual Studio можно связать ваш пакет с Store. Чтобы сделать это, щелкните правой кнопкой мыши имя проекта в обозревателе решений и выберите **Store**->**связать приложение с Store**. Также это можно сделать **создание пакетов приложения** мастер, который описан в следующем разделе. При этом некоторые поля на вкладке формирования пакета в конструкторе манифеста обновляются автоматически.

## <a name="create-an-app-package-upload-file"></a>Создание файла пакета отправки приложения

Для распространения приложения через Microsoft Store необходимо создать пакет приложения (AppX или .msix), набор приложений (appxbundle или .msixbundle) или файла отправки пакета приложения (.appxupload или .msixupload) и [отправить упакованных приложений в центре партнеров](https://docs.microsoft.com/windows/uwp/publish/app-submissions). Несмотря на то, что это возможно передать комплект приложения пакет или приложение только центр партнеров, мы рекомендуем отправлять файл отправки пакета приложения. Отправка файла пакета приложения можно создать с помощью **создание пакетов приложения** мастер в Visual Studio, или можно создать его вручную из существующих приложений пакетов или наборов приложений.

>[!NOTE]
> Если вы хотите создать пакет приложения (AppX или .msix) или набор приложений (appxbundle или .msixbundle) вручную, см. в разделе [создать пакет приложения с помощью средства MakeAppx.exe](https://docs.microsoft.com/windows/uwp/packaging/create-app-package-with-makeappx-tool).

### <a name="to-create-your-app-package-upload-file-using-visual-studio"></a>Создание файла отправки пакета приложения с помощью Visual Studio

1.  В **обозревателе решений** откройте решение для проекта приложения UWP.
2.  Щелкните проект правой кнопкой мыши и выберите **Магазин**->**Создать пакеты приложения**. Если этот параметр отключен или не отображается, убедись, что это универсальный проект Windows.  
    ![Контекстное меню для перехода в создание пакетов приложения](images/packaging-screen2.jpg)

    Откроется мастер **Создание пакетов приложения**.

3.  Выберите **я хочу создать пакеты для отправки в Microsoft Store, используя новое имя приложения** в первом диалоговом окне и нажмите кнопку **Далее**.  
    ![Создайте свои пакеты окно на диалоговое окно, показанное](images/packaging-screen3.jpg)

    Если проект уже связан с приложением в Store, также имеется возможность создать пакеты для связанного приложения Store. Если вы выберете **я хочу создать пакеты для загрузки неопубликованных приложений**, Visual Studio не создаст файл пакета приложения отправки (.msixupload или .appxupload) для отправки центра партнеров. Если требуется загрузить неопубликованное приложение только для запуска на внутренних устройствах или для тестирования, можете выбрать этот вариант. Подробнее о загрузке неопубликованных приложений см. в разделе [Подготовка устройства к разработке](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development).
4.  На следующей странице войдите с помощью учетной записи разработчика для центра партнеров. Если у вас нет учетной записи разработчика, мастер поможет создать ее.
    ![Создать пакеты приложения окно с показано Выбор имени приложения](images/packaging-screen4.jpg)
5.  Выберите из списка приложений, зарегистрированных в настоящее время к учетной записи имя приложения для пакета или зарезервируйте новое, если не уже зарезервировано в центре партнеров.  
6.  Не забудьте выбрать все три конфигурации архитектуры (x86, x64 и ARM) в диалоговом окне **Выбор и настройка пакетов**, чтобы гарантировать развертывание приложения на самых разных устройствах. В списковом окне **Создать пакет приложений** выберите **Всегда**. Набор приложений (appxbundle или .msixbundle) предпочтительнее файл пакета одним приложением, так как он содержит коллекцию пакетов приложений, настроенных для каждого типа архитектуры процессора. Если вы решили создать пакет приложения, набор приложений будет включаться в окончательный файл пакета приложения отправки (.appxupload или .msixupload) вместе с отладки и аварийное завершение работы аналитические сведения. Если вы не уверены, какие архитектуры выбрать, или хотите узнать больше о том, какие архитектуры используются разными устройствами, см. информацию в разделе [Архитектуры пакета приложения](https://docs.microsoft.com/windows/uwp/packaging/device-architecture).  
    ![Создать окно пакеты приложения с помощью пакета конфигурации показано](images/packaging-screen5.jpg)
7.  Включить полные PDB-файлы символов для [анализ производительности приложений](https://docs.microsoft.com/windows/uwp/publish/analytics) из центра партнеров после публикации приложения. Настройте любые дополнительные сведения, включая номер версии и выходное расположение пакета.
9.  Щелкните **Создать**, чтобы создать пакет приложения. Если выбран один из **я хочу создать пакеты для отправки в Microsoft Store** параметры в шаге 3 и при создании пакета для отправки в центр партнеров, мастер создаст файл (.appxupload или .msixupload) отправки пакета. Если вы выбрали **я хочу создать пакеты для загрузки неопубликованных приложений** на шаге 3, мастер создаст пакет одно приложение или комплект приложения, с учетом выбранных в шаге 6.
10. Если приложение успешно упаковано, вы увидите это диалоговое окно и отправки файла пакета приложения можно получить из указанное выходное расположение. На этом этапе вы можете [проверка пакета приложения на локальном компьютере или удаленном компьютере](#validate-your-app-package).
    ![Создание пакетов завершено окно с показано параметры проверки](images/packaging-screen6.jpg)

### <a name="to-create-your-app-package-upload-file-manually"></a>Создание файла отправки пакета приложения вручную

1. Поместите следующие файлы в папке:
    - Один или несколько пакетов приложений (.msix или AppX) или набор приложений (.msixbundle или appxbundle).
    - Файл .appxsym —. Это сжатый PDB-файл, содержащий открытые символы для приложения [о сбоях analytics](../publish/health-report.md) в центре партнеров. Можно опустить этот файл, но если в таком случае не информацию о сбое аналитики и отладки будут доступны для вашего приложения.
2. ZIP-папке.
3. Измените имя расширения ZIP-папку с ZIP на .msixupload или .appxupload.

### <a name="validate-your-app-package"></a>Проверка пакета приложения

Проверьте приложение, прежде чем отправить их для центра партнеров для сертификации на локальном или удаленном компьютере. Проверить можно только сборку рабочего выпуска для пакета приложения, а не отладочную сборку. Дополнительные сведения о Отправка приложения в центре партнеров, см. в разделе [отправки приложений](https://docs.microsoft.com/windows/uwp/publish/app-submissions).

**Чтобы проверить пакет приложения локально**

1. В окончательном **создание пакетов завершено** странице **создание пакетов приложения** мастера оставьте **локального компьютера** установленным и нажмите кнопку **запуска Комплект сертификации приложений для Windows**. Подробнее о тестировании приложений с помощью комплекта сертификации приложений для Windows см. в разделе [Комплект сертификации приложений для Windows](https://msdn.microsoft.com/library/windows/apps/Mt186449).

    Комплект сертификации приложений для Windows выполняет различные тесты и отображает их результаты. Подробные сведения см. в разделе [Тесты из комплекта сертификации приложений для Windows](https://msdn.microsoft.com/library/windows/apps/mt186450).

    При наличии удаленного устройства Windows 10, которое вы хотите использовать для тестирования, необходимо будет вручную установить комплект сертификации приложений для Windows на этом устройстве. Следующий раздел поможет выполнить эти действия. После этого выберите вариант **Удаленный компьютер** и щелкните **Запустить комплект сертификации приложений для Windows**, чтобы установить подключение к удаленному устройству и запустить проверочные тесты.

2. После завершения работы WACK и ваше приложение прошло сертификации, все готово для отправки приложения в центре партнеров. Убедитесь, что отправляется нужный файл. Расположение по умолчанию файла можно найти в корневой папке решения `\[AppName]\AppPackages` и завершится с расширением файла .appxupload или .msixupload. Имя будет иметь вид `[AppName]_[AppVersion]_x86_x64_arm_bundle.appxupload` или `[AppName]_[AppVersion]_x86_x64_arm_bundle.msixupload` Если вы выбрали для набора приложений со всеми выбранная архитектура пакета.

**Чтобы проверить пакет приложения на удаленном устройстве Windows 10**

1.  Включите устройство Windows 10 для разработки, выполнив [включить устройство для разработки](https://msdn.microsoft.com/library/windows/apps/Dn706236) инструкции.
    >[!IMPORTANT]
    > Не удается проверить пакет приложения на удаленном устройстве ARM Windows 10.
2.  Скачайте и установите средства удаленной работы для Visual Studio. Эти средства используются для удаленного запуска комплекта сертификации приложений для Windows. Подробнее об этих средствах в том числе, а также о том, где можно их скачать, см. на веб-сайте [Запуск приложений UWP на удаленном компьютере](https://msdn.microsoft.com/library/hh441469.aspx#BKMK_Starting_the_Remote_Debugger_Monitor).
3.  Скачать необходимые [комплект сертификации приложений для Windows](https://go.microsoft.com/fwlink/p/?LinkID=309666) и затем установите его на удаленном устройстве Windows 10.
4.  На странице **Создание пакетов завершено** мастера выберите вариант **Удаленный компьютер**, а затем нажмите кнопку многоточия рядом с кнопкой **Проверить подключение**.
    >[!NOTE]
    > **Удаленный компьютер** переключатель доступен только в том случае, если вы выбрали по крайней мере одна конфигурация решения, которая поддерживает проверку. Подробнее о тестировании приложения с помощью комплекта сертификации приложений для Windows см. в разделе [Комплект сертификации приложений для Windows](https://msdn.microsoft.com/library/windows/apps/Mt186449).
5.  Укажите формат устройства внутри подсети или укажите имя сервера доменных имен (DNS) или IP-адрес устройства, находящегося вне вашей подсети.
6.  В списке **Режим аутентификации** выберите **Нет**, если устройство не требует входа в систему, установленную на нем, с использованием учетных данных Windows.
7.  Нажмите кнопку **Выбрать**, а затем — **Запустить комплект сертификации приложений для Windows**. Если на устройстве запущены средства удаленной работы, Visual Studio подключится к нему и затем выполнит проверочные тесты. См. раздел [Тесты комплекта сертификации приложений для Windows](https://msdn.microsoft.com/library/windows/apps/mt186450).

## <a name="sideload-your-app-package"></a>Загрузка пакета неопубликованного приложения

С пакетами приложения универсальной платформы Windows приложения не устанавливаются на устройство, как в приложениях для настольных систем. Обычно приложение UWP скачивается из Microsoft Store, и при этом оно также само устанавливается на устройство. Приложения могут быть установлены без публикации в Store (загрузка неопубликованных приложений). Это позволяет устанавливать и тестирование приложений с помощью пакета приложения файл, который был создан. Если вы не собираетесь продавать приложение (например, бизнес-приложение) в Магазине, можно загрузить это неопубликованное приложение, чтобы другие пользователи в вашей организации могли использовать его.

Прежде чем вы можете загрузить неопубликованное приложение на целевом устройстве, необходимо [включить устройство для разработки](../get-started/enable-your-device-for-development.md).

Чтобы загрузить неопубликованное приложение на устройстве Windows 10 Mobile, используйте [WinAppDeployCmd.exe](install-universal-windows-apps-with-the-winappdeploycmd-tool.md) средство. Для настольных компьютеров, ноутбуков и планшетных ПК следуйте приведенным ниже инструкциям.

### <a name="sideload-your-app-package-on-windows-10-anniversary-update-or-later"></a>Загрузка неопубликованного приложения пакета в юбилейном обновлении Windows 10 или более поздней версии

В юбилейном обновлении Windows 10 появилась возможность установки пакетов приложений простым двойным щелчком по файлу пакета приложения. Для этого перейдите в пакет приложения или файл пакета приложения и дважды щелкните его. Установщик приложения запускается и предоставляет базовые данные приложения, а также кнопку установки, индикатор выполнения установки и все соответствующие сообщения об ошибках.

![Окно установщика приложения при установке образца приложения под названием Contoso](images/appinstaller-screen.png)

> [!NOTE]
> Установщик приложения предполагает, что приложение является доверенным для устройства. Если вы являетесь разрабатываете собственное или корпоративное приложение без его публикации, вам потребуется установить сертификат подписи в хранилище центров сертификации "Доверенные люди" или "Доверенные издатели" на устройстве. Если вы не знаете, как это сделать, см. раздел [Установка тестовых сертификатов](https://docs.microsoft.com/windows-hardware/drivers/install/installing-test-certificates).

### <a name="sideload-your-app-package-on-previous-versions-of-windows"></a>Загрузка неопубликованного пакета приложения в предыдущих версиях Windows

1.  Скопируйте папки той версии приложения, которую вы хотите установить на целевое устройство.

    При создании пакета приложений создается папка, соответствующая номеру версии, и папка `*_Test`. Пример этих двух папок (версия для установки — 1.0.2.0):

    -   `C:\Projects\MyApp\MyApp\AppPackages\MyApp_1.0.2.0`
    -   `C:\Projects\MyApp\MyApp\AppPackages\MyApp_1.0.2.0_Test`

    Если пакет приложения не создан, скопируйте папку для необходимой архитектуры и соответствующую папку `*_Test`. Эти две папки служат примером пакета приложения с архитектурой x64 и его папки `*_Test`:

    -   `C:\Projects\MyApp\MyApp\AppPackages\MyApp_1.0.2.0_x64`
    -   `C:\Projects\MyApp\MyApp\AppPackages\MyApp_1.0.2.0_x64_Test`

2.  На целевом устройстве откройте папку `*_Test`.
3.  Щелкните правой кнопкой мыши файл **Add-AppDevPackage.ps1**. Выберите **Выполнить с помощью PowerShell** и следуйте указаниям на экране.  
    ![Переход к скрипту PowerShell показано проводника](images/packaging-screen7.jpg)

    При установке пакета приложения в окне PowerShell отображается следующее сообщение: **Приложение было успешно установлено.**
    >[!TIP]
    > Чтобы открыть контекстное меню на планшете, коснитесь экрана, где вы хотите щелкните правой кнопкой мыши, удерживайте до появления окружности, а затем поднимите палец с экрана. После того, как вы уберете палец с экрана, откроется контекстное меню.

4.  Нажмите кнопку "Пуск" для поиска приложения по названию, чтобы запустить его.
