---
title: Установка приложения UWP из веб-сервера Azure
description: 'Этот учебник посвящен следующим процедурам: настройка веб-сервера Azure, проверка того, может ли ваше веб-приложение размещать пакеты приложений, а также вызов и эффективное использование Установщика приложений.'
ms.date: 11/30/2018
ms.topic: article
keywords: windows 10, uwp, установщик приложений, AppInstaller, загрузка неопубликованных приложений, связанный набор, дополнительные пакеты, веб-сервер Azure
ms.localizationpriority: medium
ms.openlocfilehash: 074a8e9941d4314bb35c28b0ee296e9d86fa23a5
ms.sourcegitcommit: 49d58bc66c1c9f2a4f81473bcb25af79e2b1088d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2018
ms.locfileid: "8929691"
---
# <a name="install-a-uwp-app-from-an-azure-web-app"></a>Установка приложения UWP из веб-приложения Azure

Приложение "Установщик приложений" позволяет разработчикам и ИТ-специалистам распространять приложения Windows 10 путем их размещения в собственной сети доставки содержимого (CDN). Это полезно для предприятий, которым не требуется публиковать свои приложения в Microsoft Store, но они все же хотят воспользоваться преимуществами платформы упаковки и развертывания Windows 10.

В этом разделе описаны действия по настройке веб-сервера Azure для размещения пакетов приложений UWP и использованию приложения "Установщик приложений" для установки пакетов приложений.

## <a name="setup"></a>Настройка

Для успешного выполнения действий в этом руководстве необходимо следующее:
 
1. Подписка Microsoft Azure 
2. Пакет приложения UWP — пакет приложения, который вы будете распространять

Необязательно: [Стартовый проект](https://github.com/AppInstaller/MySampleWebApp) на GitHub. Это полезно в том случае, если у вас нет пакета приложения или веб-страницы для работы, но вы все равно хотите узнать, как использовать эту функцию.

### <a name="step-1---get-an-azure-subscription"></a>Шаг 1. Получение подписки Azure
Для получения подписки Azure посетите [страницу учетной записи Azure](https://azure.microsoft.com/free/). В рамках этого учебника можно использовать бесплатное членство.

### <a name="step-2---create-an-azure-web-app"></a>Шаг 2. Создание веб-приложения Azure 
На странице портала Azure нажмите кнопку **+ Создать ресурс**, а затем выберите **Веб-приложение**

![создание](images/azure-create-app.png)

Создайте уникальное **Имя приложения**, оставив значения в остальных полях по умолчанию. Нажмите кнопку **Создать** для завершения работы мастера создания веб-приложения. 

![создание веб-приложения](images/azure-create-app-2.png)

### <a name="step-3---hosting-the-app-package-and-the-web-page"></a>Шаг 3. Размещение пакета приложения и веб-страницы 
После создания веб-приложения доступ к нему осуществляется с помощью информационной панели на портале Azure. На этом этапе мы создадим простую веб-страницу с графическим интерфейсом портала Azure.

После выбора только что созданного веб-приложения на информационной панели воспользуйтесь полем поиска, чтобы найти и открыть **Редактор службы приложений**. 

В редакторе присутствует файл по умолчанию `hostingstart.html`. Щелкните правой кнопкой мыши пустую область на панели проводника и выберите **Отправить файлы**, чтобы начать отправку пакетов приложений.

> [!NOTE]
> Если у вас нет пакета приложений, вы можете использовать пакет приложений, являющийся частью репозитория [Стартовый проект](https://github.com/AppInstaller/MySampleWebApp) на GitHub. Сертификат (MySampleApp.cer), с помощью которого был подписан пакет, также входит в состав примера на GitHub. Перед установкой приложения на устройстве необходимо установить сертификат.

![отправка](images/azure-upload-file.png)

Щелкните правой кнопкой мыши пустую область на панели проводника и выберите **Новые файлы**, чтобы создать новый файл. Дайте файлу имя `default.html`.

Если вы используете пакет приложения из [Стартового проекта](https://github.com/AppInstaller/MySampleWebApp), скопируйте следующий код HTML в созданную веб-страницу `default.html`. Если вы используете собственный пакет приложения, измените URL-адрес службы приложения (URL-адрес после `source=`). Вы можете получить URL-адрес службы приложения на странице обзора приложения на портале Azure.

```html
<html>
<head>
    <meta charset="utf-8" />
    <title> Install My Sample App</title>
</head>
<body>
    <a href="ms-appinstaller:?source=https://appinstaller-azure-demo.azurewebsites.net/MySampleApp.appxbundle"> Install My Sample App</a>
</body>
</html>
```

### <a name="step-4---configure-the-web-app-for-app-package-mime-types"></a>Шаг 4. Настройка веб-приложения для типов MIME пакета приложения

Добавьте новый файл в веб-приложение с именем `Web.config`. Откройте файл `Web.config` в проводнике и добавьте следующие строки. 

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <!--This is to allow the web server to serve resources with the appropriate file extension-->
    <staticContent>
      <mimeMap fileExtension=".appx" mimeType="application/appx" />
      <mimeMap fileExtension=".msix" mimeType="application/msix" />
      <mimeMap fileExtension=".appxbundle" mimeType="application/appxbundle" />
      <mimeMap fileExtension=".msixbundle" mimeType="application/msixbundle" />
      <mimeMap fileExtension=".appinstaller" mimeType="application/appinstaller" />
    </staticContent>
  </system.webServer>
</configuration>
```

### <a name="step-5---run-and-test"></a>Шаг 5. Запуск и тестирование

Чтобы запустить веб-страницу, которую вы создали, скопируйте URL-адрес из шага 3 в браузер с элементом `/default.html` в конце. 

![edge](images/edge.png)

Нажмите кнопку "Установить пример приложения" для запуска "Установщика приложений" и установите пакет приложения. 

## <a name="troubleshooting-issues"></a>Устранение неполадок

### <a name="app-installer-app-fails-to-install"></a>Не удается установить приложение "Установщик приложений" 
Установка приложения завершится сбоем, если на устройстве не установлен сертификат, с помощью которого подписывается пакет приложения. Чтобы устранить эту проблему, необходимо установить сертификат перед установкой приложения. При размещении пакета приложения для открытого распространения рекомендуется подписывать пакет приложения с помощью сертификата из центра сертификации. 

![сертификат приложения](images/aws-app-cert.png)

### <a name="nothing-happens-when-you-click-the-link"></a>При переходе по ссылке ничего не происходит. 
Убедитесь, что приложение "Установщик приложений" установлено. Перейдите в раздел **Параметры** -> **Приложения и компоненты** и найти "Установщик приложений" в списке установленных приложений. 

