---
author: ridomin
title: Создание файла установщика приложений в Visual Studio
description: Узнайте, как использовать Visual Studio для включения автоматических обновлений с помощью файла .appinstaller.
ms.author: rmpablos
ms.date: 5/2/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp, установщик приложений, AppInstaller, загрузка неопубликованного приложения
ms.localizationpriority: medium
ms.openlocfilehash: 6158b804e1d4ece3c76099a3f8d33d5fa562078d
ms.sourcegitcommit: 49aab071aa2bd88f1c165438ee7e5c854b3e4f61
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2018
ms.locfileid: "4472587"
---
# <a name="create-an-app-installer-file-with-visual-studio"></a>Создание файла установщика приложений в Visual Studio

Начиная с Windows 10 (версия 1804) и Visual Studio 2017 (обновление 15.7), загруженные неопубликованные приложения можно настроить, чтобы получать автоматические уведомления с помощью файла `.appinstaller`. Visual Studio поддерживает включение этих обновлений.

## <a name="app-installer-file-location"></a>Местоположение файла установщика приложений
Файл `.appinstaller` можно разместить в общем расположении, например конечной точке HTTP или общей папке UNC. Этот файл включает путь для поиска пакетов приложения, которые требуется установить. Пользователи устанавливают приложение из общего расположения и включают периодические проверки обновлений. 


### <a name="configure-the-project-to-target-the-correct-windows-version"></a>Настройка проекта для подходящей версии Windows

Можно настроить свойство `TargetPlatformMinVersion` при создании проекта или изменить его позже в свойствах проекта. 

>[!IMPORTANT]
> Файл установщика приложений создается только если `TargetPlatformMinVersion`— Windows 10 версии 1804 или выше.


### <a name="create-packages"></a>Создание пакетов

Для распространения приложения путем загрузки неопубликованных приложений, необходимо создать пакет приложения (.appx/.msix) или пакет приложений (.appxbundle/.msixbundle) и опубликовать его в общую папку.

Для этого используйте мастер **создания пакетов приложения** в Visual Studio и выполните следующие шаги.

1. Щелкните проект правой кнопкой мыши и выберите **Store** -> **Создать пакеты приложения**.  

![Контекстное меню с возможностью перехода в мастер создания пакетов приложений](images/packaging-screen2.jpg)   

Откроется мастер **Создание пакетов приложения**.

2. Выберите **Я хочу создать пакеты для загрузки неопубликованных приложений.** и **Включить автоматические обновления**  

![Отображается диалоговое окно "Создание ваших пакетов"](images/select-sideloading.png)  

**Включить автоматические обновления** включается, только если для `TargetPlatformMinVersion` проекта указана подходящая версия Windows 10.

3. Не забудьте выбрать поддерживаемые конфигурации архитектуры в диалоговом окне **Выберите и настройте пакеты**. Если выбран пакет, он создаст отдельный установщик, однако если вы не хотите использовать пакет и предпочитаете по одному пакету на архитектуру, вы получите один файл установщика на архитектуру.  Если вы не уверены, какие архитектуры выбрать, или хотите узнать больше о том, какие архитектуры используются разными устройствами, см. информацию в разделе [Архитектуры пакета приложения](device-architecture.md).

4. Настройте любые дополнительные сведения, включая номер версии и выходное расположение пакета.

![Окно "Создание пакетов приложений" с конфигурацией пакета](images/packaging-screen5.jpg)  

5. Если установлен флажок **Включить автоматические обновления** в шаге 2, отобразится диалоговое окно **Настройка параметров обновления**. Здесь можно указать **URL-адрес установки** и периодичность проверки обновлений.

![Окно "Настройка параметров обновления" с конфигурацией местоположения публикации](images/sideloading-screen.png)  

6. Если приложение успешно упаковано, в диалоговом окне отобразится расположение выходной папки, которая содержит ваш пакет приложения. Выходная папка содержит все файлы, необходимые для загрузки неопубликованного приложения, включая страницу HTML, которую можно использовать для продвижения вашего приложения.

### <a name="publish-packages"></a>Публикация пакетов

Чтобы сделать приложение доступным, необходимо опубликовать созданные файлы в указанном местоположении:

#### <a name="publish-to-shared-folders-unc"></a>Публикация в общие папки (UNC)

Если требуется опубликовать пакеты с помощью общих папок UNC, укажите один и тот же путь для выходной папки пакета приложения и URL-адреса установки (см. подробные сведения в шаге 6). Мастер создаст файлы в правильном местоположении, а пользователи будут получать приложение и будущие обновления к нему по тому же пути.

#### <a name="publish-to-a-web-location-http"></a>Публикация в местоположении в Интернете (HTTP)

Чтобы выполнить публикацию в местоположении в Интернете, требуется доступ, позволяющий публиковать содержимое на веб-сервере. Убедитесь, что окончательный URL-адрес соответствует URL-адресу установки, определенному в мастере (см. подробные сведения в шаге 6). Как правило, для отправки файлов используется протокол FTP или SFTP, однако существуют и другие методы публикации, например MSDeploy, SSH или хранилище BLOB-объектов (в зависимости от вашего интернет-провайдера).

Чтобы настроить веб-сервер, необходимо проверить MIME-типы, используемые для применяемых типов файлов. Это пример `web.config` для служб IIS:

```xml
<configuration>
  <system.webServer>
    <staticContent>
      <mimeMap fileExtension=".appx" mimeType="application/vns.ms-appx" />
      <mimeMap fileExtension=".appxbundle" mimeType="application/vns.ms-appx" />
      <mimeMap fileExtension=".appinstaller" mimeType="application/xml" />
    </staticContent>  
  </system.webServer>  
</configuration>
```




















