---
title: Голосовой поддержкой оболочки (СЪЕМН) на Xbox
description: Узнайте, как добавить поддержку управления голоса в приложениях UWP на Xbox.
ms.date: 10/19/2017
ms.topic: article
keywords: Windows 10, универсальной платформы Windows, xbox, речи, включена ли голосовая связь оболочки
ms.openlocfilehash: ea51216c804754e98c3bac459b79fb75dd9369cc
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57596059"
---
# <a name="using-speech-to-invoke-ui-elements"></a>С помощью речи для вызова элементов пользовательского интерфейса

Голосовой поддержкой оболочки (СЪЕМН) — это расширение в Windows платформу речи, облегчает процесс первого класса речи внутри приложения, позволяя пользователям использовать речь для вызова на экране элементы управления и для вставки текста с помощью диктовки. СЪЕМН стремится предоставляют общие возможности см. в разделе it-say it end-to-end на всех устройствах и оболочки Windows с минимальными усилиями, требуемое от разработчиков приложений.  Чтобы добиться этого, при этом используется в платформу речи Майкрософт и платформой автоматизации пользовательского интерфейса (UIA).

## <a name="user-experience-walkthrough"></a>Обзор взаимодействия с пользователями ##
Ниже приведен Общие сведения о том, что пользователь будет испытывать при использовании СЪЕМН на Xbox, и это должно помочь задать контекст, прежде чем углубляться в детали того, как работает СЪЕМН.

- Пользователь включает на консоли Xbox и хочет просматривать свои приложения, чтобы найти нечто интересное:

        User: "Hey Cortana, open My Games and Apps"

- Пользователь остается в Active прослушивание режим (ALM), это означает, что консоль в настоящее время прослушивает пользователю вызывать элемент управления, который отображается на экране, без необходимости, скажем, «Привет, Кортана» каждый раз.  Пользователь теперь можно переключаться для просмотра приложений и в списке приложений:

        User: "applications"

- Для прокручивания представления, можно просто сказать пользователя:

        User: "scroll down"

- Пользователь видит иллюстрацию для приложения, их интересует, но не имя.  Пользователь запрашивает голосовой подсказки метки для отображения:

        User: "show labels"

- Теперь, когда очевидно, что сказать, приложение можно запустить:

        User: "movies and TV"

- Чтобы выйти из режиме активного прослушивания, пользователь указывает Xbox, чтобы остановить прослушивание:

        User: "stop listening"

- Позже можно запустить новый сеанс active прослушивания с:

        User: "Hey Cortana, make a selection" or "Hey Cortana, select"

## <a name="ui-automation-dependency"></a>Зависимость службы автоматизации пользовательского интерфейса ##
СЪЕМН — это клиент автоматизации пользовательского интерфейса и основывается на информации, предоставляемой приложением через его поставщиков автоматизации пользовательского интерфейса. Это же инфраструктуру, уже используется в Экранный диктор компонента на платформах Windows.  Модели автоматизации пользовательского интерфейса обеспечивает программный доступ к элементам управления, включая имя элемента управления, его тип и какой элемент управления шаблоны, он реализует.  По мере изменения пользовательского интерфейса в приложении СЪЕМН будет реагировать на события обновления UIA и выполнить повторную обработку обновленные дерева автоматизации пользовательского интерфейса, чтобы найти все важные элементы, используя эту информацию для создания грамматики распознавания речи. 

Все приложения универсальной платформы Windows имеют доступ к структуре модели автоматизации пользовательского интерфейса и может предоставлять сведения о пользовательском Интерфейсе, независимо от платформы графики, они построены на базе (XAML, DirectX/Direct3D, Xamarin, и т.д.).  В некоторых случаях, таких как XAML большая часть тяжелой работы выполняется платформой, значительно уменьшая работы, необходимой для поддержки Экранный диктор и СЪЕМН.

Дополнительные сведения о модели автоматизации пользовательского интерфейса см. в разделе [Основы модели автоматизации пользовательского интерфейса](https://msdn.microsoft.com/en-us/library/ms753107(v=vs.110).aspx "Основы модели автоматизации пользовательского интерфейса").

## <a name="control-invocation-name"></a>Имя вызова элемента управления ##
СЪЕМН использует следующие эвристики для определения того, что фразу для регистрации в распознаватель речи в качестве имени элемента управления (т. е. пользователь должен связываться вызова элемента управления).  Это также фразу, которая будет отображаться в метке совет голоса.

Источник имени в порядке приоритета:

1. Если элемент имеет `LabeledBy` будет использовать присоединенное свойство, СЪЕМН `AutomationProperties.Name` этой временной метки текста.
2. `AutomationProperties.Name` элемента.  В XAML, текстовое содержимое элемента управления будет использоваться как значение по умолчанию для `AutomationProperties.Name`.
3. Если элемент управления ListItem или кнопки, СЪЕМН будет искать первый дочерний элемент с действующей `AutomationProperties.Name`.

## <a name="actionable-controls"></a>Важные элементы управления ##
СЪЕМН считает, что элемент управления действенным, если он реализует один из следующих шаблонов элементов управления автоматизации:

- **InvokePattern** (например) Кнопка ") — представляет элементы управления, которые инициируют или выполняют одно однозначное действие и не сохраняют состояние при активации.

- **TogglePattern** (например) Установите флажок) — представляет элемент управления, можно переключаться между разными состояниями и поддерживать определенное заданное состояние.

- **SelectionItemPattern** (например) Поле со списком) — представляет элемент управления, который выступает в качестве контейнера для коллекции выбираемых дочерних элементов.

- **ExpandCollapsePattern** (например) Поле со списком) — представляет элементы управления, которые визуально разворачиваются для отображения содержимого и сворачиваются для скрытия содержимого.

- **ScrollPattern** (например) Список) — представляет элементы управления, которые действуют как прокручиваемые контейнеры для коллекции дочерних элементов.

## <a name="scrollable-containers"></a>Прокручиваемые контейнеры ##
Для прокручиваемые контейнеры, поддерживающих ScrollPattern, СЪЕМН будет прослушивать голосовые команды как «прокрутка влево», «прокрутка вправо» т. д. и будет вызывать прокрутки с соответствующими параметрами, когда пользователь активирует одну из следующих команд.  Команды прокрутки внедряются на основе значения из `HorizontalScrollPercent` и `VerticalScrollPercent` свойства.  Например если `HorizontalScrollPercent` больше 0, «прокрутка влево» будут добавляться, если он меньше 100, «прокрутка вправо» будут добавлены и т. д.

## <a name="narrator-overlap"></a>Перекрытие экранного диктора ##
Экранный диктор также клиент автоматизации пользовательского интерфейса и приложение использует `AutomationProperties.Name` свойства в виде одного из источников для текста, он считывает текущий выбранный элемент пользовательского интерфейса.  Для повышения удобства работы специальных возможностей приложения многие разработчики спасались перегрузка `Name` свойство с долго описательный текст с целью предоставить пользователям Дополнительные сведения и контекст, Экранный диктор при чтении.  Тем не менее это вызывает конфликт между двумя функциями: СЪЕМН должен короткие фразы, которые соответствуют или близко соответствуют видимым текстом элемента управления, при преимущества Экранный диктор при помощи соединения фраз более описательное и более для предоставления более контекста.

Чтобы устранить эту проблему, начиная с Windows 10 Creators Update, Экранный диктор был обновлен до также рассмотрим `AutomationProperties.HelpText` свойство.  Если это свойство не является пустым, Экранный диктор будет произнести его содержимое в дополнение к `AutomationProperties.Name`.  Если `HelpText` является пустым, Экранный диктор будет только на чтение имени.  Это позволит более описательных строк для использования при необходимости, но поддерживает более короткий речи распознавания понятное фразы в `Name` свойство.

![](images/ves_narrator.jpg)

Дополнительные сведения см. в разделе [Automation Properties for поддержка специальных возможностей в пользовательском Интерфейсе](https://msdn.microsoft.com/en-us/library/ff400332(vs.95).aspx "Automation Properties for поддержка специальных возможностей в пользовательском Интерфейсе").

## <a name="active-listening-mode-alm"></a>Режим активного ожидания (ALM) ##
### <a name="entering-alm"></a>Введя ALM ###
На Xbox СЪЕМН не прослушивает постоянно речевого ввода.  Пользователь должен ввести активный режим прослушивание явно заявляет:

- «Эй Cortana, выберите», или
- «Эй Cortana, сделать выбор»

Существует несколько других команд Cortana, которые также оставить пользователя в active прослушивание по завершении, например «Привет, Кортана, входа в» или «Привет, Кортана, перейти на домашнюю страницу». 

Введя управление жизненным циклом Приложений будет иметь следующие последствия:

- Cortana наложение отображается в правом верхнем углу, сообщает пользователю, что их можно сказать, что они видят.  Хотя пользователь говоря, фрагменты фразу, распознаются в распознаватель речи будут также отображаться в этом расположении.
- СЪЕМН анализирует дерево UIA содержит, находит все важные элементы управления, регистрирует их текст в грамматики распознавания речи и запускает сеанс непрерывной прослушивания.

    ![](images/ves_overlay.png)

### <a name="exiting-alm"></a>Выход из управления жизненным циклом Приложений ###
Система остается в управление жизненным циклом Приложений, пока пользователь взаимодействует с пользовательским Интерфейсом, с помощью голоса.  Чтобы выйти из ALM двумя способами:

- Пользователь явно говорит: «остановить прослушивание» или
- Время ожидания возникнет в том случае, если не положительное распознавания 17 невероятной ввода ALM или с момента последнего положительное распознавания

## <a name="invoking-controls"></a>Вызов элементов управления ##
При работе в ALM, пользователь может взаимодействовать с пользовательским Интерфейсом, с помощью голоса.  Если пользовательский Интерфейс настроен правильно (имя свойства которых соответствуют видимым текстом), с помощью голоса для выполнения действий будет более простым и естественным возможности.  Пользователь должен иметь возможность скажу, что они видят на экране.

## <a name="overlay-ui-on-xbox"></a>Наложение пользовательского интерфейса на Xbox ##
Имя СЪЕМН является производным класса для элемента управления может отличаться от фактического видимым текстом в пользовательском Интерфейсе.  Это может быть из-за `Name` свойство элемента управления или вложенного `LabeledBy` элемент явное задание на другую строку.  Или элемент управления не имеет графического пользовательского интерфейса текст, но только элемент значка или изображения.

В этом случае пользователи должны понять, что именно нужно сказать, что для вызова такой элемент управления.  Таким образом один раз в active прослушивание голосовой советы могут отображаться произнеся «Показать метки».  В результате голосовой подсказки метки, чтобы отображаться в верхней части каждого практические элемента управления.

Таким образом, если в пользовательском Интерфейсе приложения имеет более действенными элементы управления, чем 100 некоторые, не будет показано меток чаевых голосовой имеется ограничение в 100 метки.  Для выбора меток используется в этом случае не является детерминированным, так как он зависит от структуры и композиции текущего пользовательского интерфейса, впервые, перечисленных в дерево UIA содержит.

После отображения меток чаевых голоса, нет команды, чтобы скрыть их они останутся видимыми пока не будет выполнено одно из следующих событий:

- пользователь вызывает элемент управления
- пользователь выходит из текущей сцены
- пользователя: «остановить прослушивание»
- Режим активного ожидания времени ожидания

## <a name="location-of-voice-tip-labels"></a>Расположение меток чаевых голоса ##
Голосовые подсказки метки по горизонтали и вертикали по центру в BoundingRectangle элемента управления.  При небольших и тесно сгруппированные элементы управления метки можно перекрытие/отчетливо другими пользователями и СЪЕМН будет повторить попытку отправки этих меток друг от друга, разделите их и убедиться, они видны.  Тем не менее это не гарантированно работать 100% времени.  Если проведенному пользовательского интерфейса, он скорее всего будет привести некоторые метки при другим пользователям. См. в разделе пользовательского интерфейса с помощью «Показать метки» чтобы обеспечить достаточно места для обеспечения видимости совет голоса.

![](images/ves_labels.png)

## <a name="combo-boxes"></a>Поля со списком ##
При разворачивании каждого отдельного элемента в поле со списком поле со списком получает свои собственные метки совет голосовой и часто это будут поверх существующих элементов управления за раскрывающегося списка.  Избежать вывода загроможденным и запутанным, путайте меток (где метки элемента поле со списком будут смешиваться с метками элементов управления за поле со списком) когда поле со списком развернут только метки для будет показан ее дочерних элементов;  все другие метки совет голоса будут скрыты.  Пользователь может затем выберите один из элементов раскрывающегося списка или поля со списком «закрыть».

- Метки в свернутом списком:

    ![](images/ves_combo_closed.png)

- Метки в развернутом со списком:

    ![](images/ves_combo_open.png)


## <a name="scrollable-controls"></a>Элементов управления с прокруткой ##
Для элементов управления с прокруткой советы голоса для команд прокрутки будет центрировано по на всех краев элемента управления.  Голосовые советы будут отображаться только прокрутки направлений, которые требуют действий, например если вертикальная прокрутка недоступен, «прокрутите страницу вверх» и «прокрутите вниз» не отображается.  При наличии нескольких прокручиваемыми областями СЪЕМН будет использовать порядковые номера, чтобы различать (например) «Прокрутите вправо 1», «Прокрутите вправо 2» и т. д.).

![](images/ves_scroll.png) 

## <a name="disambiguation"></a>Уточнение ##
Когда несколько элементов пользовательского интерфейса имеют одинаковое имя, или в распознаватель речи соответствующих нескольких кандидатов, СЪЕМН перейдет в режим устранения неоднозначности.  В данном совете голосовой режим метки отображается для элементов, участвующих, чтобы пользователь мог выбрать нужный. Пользователь может отменить из режима устранения неоднозначности, мы говорим «Отмена».

Например:

- В активном режиме прослушивания, прежде чем устранения неоднозначности; пользователь говорит: «Меня I устранить»:

    ![](images/ves_disambig1.png) 

- Обе кнопки соответствие; устранение неоднозначности к работе:

    ![](images/ves_disambig2.png) 

- Отображение щелкните действие, когда «Выберите 2» было выбрано:

    ![](images/ves_disambig3.png) 
 
## <a name="sample-ui"></a>Пример пользовательского интерфейса ##
Ниже приведен пример XAML на основе пользовательского интерфейса, установка AutomationProperties.Name различными способами:

    <Page
        x:Class="VESSampleCSharp.MainPage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="using:VESSampleCSharp"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d">
        <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
            <Button x:Name="button1" Content="Hello World" HorizontalAlignment="Left" Margin="44,56,0,0" VerticalAlignment="Top"/>
            <Button x:Name="button2" AutomationProperties.Name="Launch Game" Content="Launch" HorizontalAlignment="Left" Margin="44,106,0,0" VerticalAlignment="Top" Width="99"/>
            <TextBlock AutomationProperties.Name="Day of Week" x:Name="label1" HorizontalAlignment="Left" Height="22" Margin="168,62,0,0" TextWrapping="Wrap" Text="Select Day of Week:" VerticalAlignment="Top" Width="137"/>
            <ComboBox AutomationProperties.LabeledBy="{Binding ElementName=label1}" x:Name="comboBox" HorizontalAlignment="Left" Margin="310,57,0,0" VerticalAlignment="Top" Width="120">
                <ComboBoxItem Content="Monday" IsSelected="True"/>
                <ComboBoxItem Content="Tuesday"/>
                <ComboBoxItem Content="Wednesday"/>
                <ComboBoxItem Content="Thursday"/>
                <ComboBoxItem Content="Friday"/>
                <ComboBoxItem Content="Saturday"/>
                <ComboBoxItem Content="Sunday"/>
            </ComboBox>
            <Button x:Name="button3" HorizontalAlignment="Left" Margin="44,156,0,0" VerticalAlignment="Top" Width="213">
                <Grid>
                    <TextBlock AutomationProperties.Name="Accept">Accept Offer</TextBlock>
                    <TextBlock Margin="0,25,0,0" Foreground="#FF5A5A5A">Exclusive offer just for you</TextBlock>
                </Grid>
            </Button>
        </Grid>
    </Page>


В примере выше здесь используется пользовательский Интерфейс будет выглядеть с и без меток чаевых голоса.
 
- В активном прослушивание режиме без метки:

    ![](images/ves_alm_nolabels.png) 

- В активном прослушивание режиме после пользователь скажет: «Показать метки»:

    ![](images/ves_alm_labels.png) 

В случае использования `button1`, XAML автоматически заполняет `AutomationProperties.Name` свойство, используя текст из содержимого элемента управления видимым текстом.  Именно поэтому имеется подпись совет голоса, несмотря на то, что не существует явного `AutomationProperties.Name` значение.

С помощью `button2`, мы прямо устанавливаем `AutomationProperties.Name` на что-то отличное от текста элемента управления.

С `comboBox`, мы использовали `LabeledBy` свойство для ссылки `label1` как источник автоматизации `Name`и в `label1` мы задаем `AutomationProperties.Name` в более естественной фразы, чем что нужно отобразить на экране («День недели» вместо чем «выберите день недели»).

Наконец, с помощью `button3`, извлекает СЪЕМН `Name` из первого дочернего элемента с момента `button3` сама по себе не имеет `AutomationProperties.Name` значение.

## <a name="see-also"></a>См. также
- [Основы модели автоматизации пользовательского интерфейса](https://msdn.microsoft.com/en-us/library/ms753107(v=vs.110).aspx "Основы модели автоматизации пользовательского интерфейса")
- [Свойства автоматизации для поддержки специальных возможностей в пользовательском Интерфейсе](https://msdn.microsoft.com/en-us/library/ff400332(vs.95).aspx "Automation Properties for поддержка специальных возможностей в пользовательском Интерфейсе")
- [Часто задаваемые вопросы](frequently-asked-questions.md)
- [Приложения UWP для Xbox One](index.md)
