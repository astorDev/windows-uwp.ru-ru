---
author: stevewhims
Description: MakePri.exe is a command line tool that you can use to create and dump PRI files. It is integrated as part of MSBuild within Microsoft Visual Studio, but it could be useful to you for creating packages manually or with a custom build system.
title: Компиляция ресурсов вручную с помощью MakePri.exe
template: detail.hbs
ms.author: stwhi
ms.date: 10/23/2017
ms.topic: article
keywords: Windows 10, uwp, ресурс, изображение, средство, MRT, квалификатор
ms.localizationpriority: medium
ms.openlocfilehash: 3eb26a8e4939ade3b12e4527b7452a9c6b535a77
ms.sourcegitcommit: e814a13978f33654d8e995584f4b047cb53e0aef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2018
ms.locfileid: "6025659"
---
# <a name="compile-resources-manually-with-makepriexe"></a>Компиляция ресурсов вручную с помощью MakePri.exe

MakePri.exe — инструмент командной строки, который можно использовать для создания и наполнения PRI-файлов. Он интегрирован как часть MSBuild в Microsoft Visual Studio, но разработчики могут использовать его для создания пакетов вручную или с помощью пользовательских систем сборки.

> [!NOTE]
> MakePri.exe устанавливается при проверке вариант **Windows SDK для управляемых приложений UWP** при установке пакета средств разработки программного обеспечения Windows. Он устанавливается на путь `%WindowsSdkDir%bin\<WindowsTargetPlatformVersion>\x64\makepri.exe` (а также в папки с именем для других архитектур). Например, `C:\Program Files (x86)\Windows Kits\10\bin\10.0.17713.0\x64\makepri.exe`.

Ограничение на размер PRI-файла— 64КБ.

## <a name="in-this-section"></a>В этом разделе
|Статья|Описание|
|-|-|
| [Параметры командной строки MakePRI.exe](makepri-exe-command-options.md) | MakePri.exe имеет набор команд `createconfig`, `dump`, `new`, `resourcepack` и `versioned`. В данном разделе описаны параметры командной строки для их использования. |
| [Файл конфигурации MakePri.exe](makepri-exe-configuration.md) | В этом разделе дается описание схемы XML-файла конфигурации MakePri.exe. |
| [Индексаторы для конкретных форматов MakePri.exe](makepri-exe-format-specific-indexers.md) | В этом разделе описываются специальные индексаторы, которые используются средством MakePri.exe для создания указателя ресурсов. |

## <a name="makepriexe-command-line-options"></a>Параметры командной строки MakePRI.exe

MakePri.exe имеет набор команд `createconfig`, `dump`, `new`, `resourcepack` и `versioned`. Дополнительные сведения об их использовании см. в разделе [Параметры командной строки MakePRI.exe](makepri-exe-command-options.md).

## <a name="makepriexe-configuration"></a>Настройка MakePri.exe

XML-файл конфигурации индекса ресурсов пакета определяет, как и какие ресурсы индексируются. Схема XML конфигурации описана в разделе [Конфигурация MakePri.exe](makepri-exe-configuration.md).

## <a name="format-specific-indexers"></a>Индексаторы для конкретных форматов

MakePri.exe обычно используется вместе с параметрами `new`, `versioned` и `resourcepack`. В таких случаях программа индексирует исходные файлы, чтобы создать индекс ресурсов. MakePri.exe использует различные отдельные индексаторы для чтения различных исходных файлов ресурсов или контейнеров для ресурсов. Самый простой индексатор — это индексатор папки, который индексирует содержимое папки ресурсов, например изображения в форматах `.jpg` или `.png`. Дополнительные сведения см. в разделе [Индексаторы для конкретных форматов MakePri.exe](makepri-exe-format-specific-indexers.md).

## <a name="makepriexe-warnings-and-error-messages"></a>Сообщения об ошибках и предупреждения MakePri.exe

```
Resources found for language(s) '<language(s)>' but no resources found for default language(s): '<language(s)>'. Change the default language or qualify resources with the default language.
```

Приведенное выше предупреждение отображается, когда MakePri.exe или MSBuild обнаруживают для данного именованного ресурса файлы или строковые ресурсы, отмеченные квалификаторами языка, но для языка по умолчанию кандидат не найден. Процедура использования квалификаторов в именах файлов и папок описана в разделе [Адаптация ресурсов для языка, масштаба и других квалификаторов](tailor-resources-lang-scale-contrast.md). Файл или папка могут содержать название языка, но ресурсы, которые соответствовали бы конкретному языку по умолчанию, отсутствуют. Например, это предупреждение появится, если в проекте используется en-US в качестве языка по умолчанию и имеется файл с именем de/logo.png, но отсутствуют файлы, помеченные как использующие язык по умолчанию en-US. Чтобы убрать это предупреждение, нужно либо квалифицировать файлы или строковые ресурсы с помощью языка по умолчанию, либо изменить язык по умолчанию. Чтобы изменить язык по умолчанию, откройте свое решение в Visual Studio и откройте `Package.appxmanifest`. На вкладке «Приложения» убедитесь, что язык по умолчанию задан соответствующим образом (например, en или en-US).

```
No default or neutral resource given for '<resource identifier>'. The application may throw an exception for certain user configurations when retrieving the resources.
```

Приведенное выше предупреждение отображается, если MakePri.exe или MSBuild обнаруживают файлы или ресурсы, которые отмечены квалификаторами языка, не имеющими четко обозначенных ресурсов. Квалификаторы имеются, но нет гарантии, что конкретный ресурс-кандидат для идентификатора этого ресурса может быть возвращен во время выполнения. Это предупреждение отображается, если для конкретного языка, домашнего региона или другого квалификатора не удается найти ресурсы-кандидаты, которые были бы ресурсами по умолчанию или всегда соответствовали бы контексту пользователя. Во время выполнения для конкретных конфигураций пользователя, таких как пользовательские настройки языка или домашний регион (**Параметры** > **Время и язык** > **Язык и региональные стандарты**), используемый для получения ресурса API может создать неожиданное исключение. Чтобы убрать это предупреждение, нужно предоставить ресурсы по умолчанию, например ресурс языка проекта по умолчанию или ресурс глобального домашнего региона (homeregion-001).

## <a name="using-makepriexe-in-a-build-system"></a>Использование MakePri.exe в системе сборки

В системах сборки следует применять команды MakePri.exe `new`, `versioned` или `resourcepack` в зависимости от типа проекта, сборка которого выполняется. В системах сборки, которые создают новый PRI-файл, следует использовать команду `new`. В системах сборки, которые должны обеспечить совместимость внутренних смещений при помощи итераций, можно применять команду `versioned`. В системах сборки, которые должны создавать PRI-файл, содержащий дополнительные варианты ресурсов, а также выполнять проверку того, что для такого варианта не добавлено никаких новых ресурсов, следует использовать команду `resourcepack`.

В системах сборки, которые должны обеспечивать явное управление индексированными исходными файлами, можно применять индексатор ResFiles вместо индексации папки. В системах сборки можно также выполнять индексацию в несколько проходов с разными [индексаторами для конкретных форматов](makepri-exe-format-specific-indexers.md), чтобы создать один PRI-файл.

Кроме того, системам сборки разрешается использовать индексатор PRI для конкретных форматов, позволяющий добавлять в индекс ресурсов пакета предварительно собранные PRI-файлы из других компонентов, таких как библиотеки классов, сборки, пакеты SDK и библиотеки DLL.

Когда PRI-файлы создаются для других компонентов, библиотек классов, сборок, библиотек DLL и пакетов SDK, следует применять конфигурацию **initialPath**, чтобы обеспечить, что ресурсы компонентов имеют свои собственные подкарты ресурсов, не конфликтующие с приложением, в которое их добавляют.

## <a name="related-topics"></a>Статьи по теме
* [Параметры командной строки MakePRI.exe](makepri-exe-command-options.md)
* [Настройка MakePri.exe](makepri-exe-configuration.md)
* [Индексаторы для конкретных форматов MakePri.exe](makepri-exe-format-specific-indexers.md)
* [Адаптация ресурсов с учетом языка, масштаба и других квалификаторов](tailor-resources-lang-scale-contrast.md)
