---
Description: MakePri.exe — программа командной строки, которую можно использовать для создания и наполнения PRI-файлов. Она интегрирована как часть MSBuild в Microsoft Visual Studio, но разработчики могут использовать ее для создания пакетов вручную или с помощью пользовательских систем сборки.
title: Компиляция ресурсов вручную с помощью MakePri.exe
template: detail.hbs
ms.date: 10/23/2017
ms.topic: article
keywords: Windows 10, uwp, ресурс, изображение, актив, MRT, квалификатор
ms.localizationpriority: medium
ms.openlocfilehash: c23eced05d7539c869a40db1f2b641282b75f503
ms.sourcegitcommit: 963316e065cf36c17b6360c3f89fba93a1a94827
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2020
ms.locfileid: "82868900"
---
# <a name="compile-resources-manually-with-makepriexe"></a>Компиляция ресурсов вручную с помощью MakePri.exe

MakePri.exe — программа командной строки, которую можно использовать для создания и наполнения PRI-файлов. Она интегрирована как часть MSBuild в Microsoft Visual Studio, но разработчики могут использовать ее для создания пакетов вручную или с помощью пользовательских систем сборки.

> [!NOTE]
> Передаваемые программе MakePRI. exe устанавливается при установке пакета средств разработки программного обеспечения Windows в параметрах **Windows SDK для приложений под управлением UWP** . Он устанавливается по пути `%WindowsSdkDir%bin\<WindowsTargetPlatformVersion>\x64\makepri.exe` (а также в папках с именами для других архитектур). Например, `C:\Program Files (x86)\Windows Kits\10\bin\10.0.17713.0\x64\makepri.exe`.

## <a name="in-this-section"></a>В этом разделе
|Раздел|Описание|
|-|-|
| [Параметры командной строки MakePRI.exe](makepri-exe-command-options.md) | MakePri.exe имеет набор команд `createconfig`, `dump`, `new`, `resourcepack` и `versioned`. В данном разделе описаны параметры командной строки для их использования. |
| [Файл конфигурации MakePri.exe](makepri-exe-configuration.md) | В этом разделе дается описание схемы XML-файла конфигурации MakePri.exe. |
| [Индексаторы для конкретных форматов MakePri.exe](makepri-exe-format-specific-indexers.md) | В этом разделе описываются специальные индексаторы, которые используются средством MakePri.exe для создания указателя ресурсов. |

## <a name="makepriexe-command-line-options"></a>Параметры командной строки MakePRI.exe

MakePri.exe имеет набор команд `createconfig`, `dump`, `new`, `resourcepack` и `versioned`. Дополнительные сведения об их использовании см. в разделе [Параметры командной строки MakePRI.exe](makepri-exe-command-options.md).

## <a name="makepriexe-configuration"></a>Настройка MakePri.exe

XML-файл конфигурации индекса ресурсов пакета определяет, как и какие ресурсы индексируются. Схема XML конфигурации описана в разделе [Конфигурация MakePri.exe](makepri-exe-configuration.md).

## <a name="format-specific-indexers"></a>Индексаторы для конкретных форматов

MakePri.exe обычно используется вместе с параметрами `new`, `versioned` и `resourcepack`. В таких случаях программа индексирует исходные файлы, чтобы создать индекс ресурсов. MakePri.exe использует различные отдельные индексаторы для чтения различных исходных файлов ресурсов или контейнеров для ресурсов. Самый простой индексатор — это индексатор папки, который индексирует содержимое папки ресурсов, например изображения в форматах `.jpg` или `.png`. Дополнительные сведения см. в разделе [Индексаторы для конкретных форматов MakePri.exe](makepri-exe-format-specific-indexers.md).

## <a name="makepriexe-warnings-and-error-messages"></a>Сообщения об ошибках и предупреждения MakePri.exe

### <a name="resources-found-for-languages-languages-but-no-resources-found-for-default-languages-languages-change-the-default-language-or-qualify-resources-with-the-default-language"></a>Обнаружены ресурсы для языков "<языков >", но не найдены ресурсы для языков по умолчанию: "<языков >". Измените язык по умолчанию или укажите ресурсы с помощью языка по умолчанию.

Это предупреждение отображается, когда передаваемые программе MakePRI. exe или MSBuild обнаруживает файлы или строковые ресурсы для заданного именованного ресурса, которые помечены как имеющие квалификаторы языка, но для языка по умолчанию не найдено ни одного кандидата. Процедура использования квалификаторов в именах файлов и папок описана в разделе [Адаптация ресурсов для языка, масштаба и других квалификаторов](tailor-resources-lang-scale-contrast.md). Файл или папка могут содержать название языка, но ресурсы, которые соответствовали бы конкретному языку по умолчанию, отсутствуют. Например, это предупреждение появится, если в проекте используется en-US в качестве языка по умолчанию и имеется файл с именем de/logo.png, но отсутствуют файлы, помеченные как использующие язык по умолчанию en-US. Чтобы убрать это предупреждение, нужно либо квалифицировать файлы или строковые ресурсы с помощью языка по умолчанию, либо изменить язык по умолчанию. Чтобы изменить язык по умолчанию, откройте свое решение в Visual Studio и откройте `Package.appxmanifest`. На вкладке «Приложения» убедитесь, что язык по умолчанию задан соответствующим образом (например, en или en-US).

### <a name="no-default-or-neutral-resource-given-for-resource-identifier-the-application-may-throw-an-exception-for-certain-user-configurations-when-retrieving-the-resources"></a>Для "<resource identifier>" не задан по умолчанию или нейтральный ресурс. Приложение может вызвать исключение для определенных пользовательских конфигураций при извлечении ресурсов.

Это предупреждение отображается, когда передаваемые программе MakePRI. exe или MSBuild обнаруживает файлы или ресурсы, которые помечаются квалификаторами языка, для которых ресурсы являются непонятными. Квалификаторы имеются, но нет гарантии, что конкретный ресурс-кандидат для идентификатора этого ресурса может быть возвращен во время выполнения. Это предупреждение отображается, если для конкретного языка, домашнего региона или другого квалификатора не удается найти ресурсы-кандидаты, которые были бы ресурсами по умолчанию или всегда соответствовали бы контексту пользователя. Во время выполнения для определенных пользовательских конфигураций, таких как языковые настройки пользователя или Домашняя страница (**Параметры** > **время & языковой** > **регион & язык**), API-интерфейсы, используемые для получения ресурса, могут вызвать непредвиденное исключение. Чтобы убрать это предупреждение, нужно предоставить ресурсы по умолчанию, например ресурс языка проекта по умолчанию или ресурс глобального домашнего региона (homeregion-001).

## <a name="using-makepriexe-in-a-build-system"></a>Использование MakePri.exe в системе сборки

В системах сборки следует применять команды MakePri.exe `new`, `versioned` или `resourcepack` в зависимости от типа проекта, сборка которого выполняется. В системах сборки, которые создают новый PRI-файл, следует использовать команду `new`. В системах сборки, которые должны обеспечить совместимость внутренних смещений при помощи итераций, можно применять команду `versioned`. В системах сборки, которые должны создавать PRI-файл, содержащий дополнительные варианты ресурсов, а также выполнять проверку того, что для такого варианта не добавлено никаких новых ресурсов, следует использовать команду `resourcepack`.

В системах сборки, которые должны обеспечивать явное управление индексированными исходными файлами, можно применять индексатор ResFiles вместо индексации папки. В системах сборки можно также выполнять индексацию в несколько проходов с разными [индексаторами для конкретных форматов](makepri-exe-format-specific-indexers.md), чтобы создать один PRI-файл.

Кроме того, системам сборки разрешается использовать индексатор PRI для конкретных форматов, позволяющий добавлять в индекс ресурсов пакета предварительно собранные PRI-файлы из других компонентов, таких как библиотеки классов, сборки, пакеты SDK и библиотеки DLL.

Когда PRI-файлы создаются для других компонентов, библиотек классов, сборок, библиотек DLL и пакетов SDK, следует применять конфигурацию **initialPath**, чтобы обеспечить, что ресурсы компонентов имеют свои собственные подкарты ресурсов, не конфликтующие с приложением, в которое их добавляют.

## <a name="related-topics"></a>Связанные темы
* [Параметры командной строки MakePRI.exe](makepri-exe-command-options.md)
* [Настройка MakePri.exe](makepri-exe-configuration.md)
* [Индексаторы для конкретных форматов MakePri.exe](makepri-exe-format-specific-indexers.md)
* [Адаптация ресурсов с учетом языка, масштаба и других квалификаторов](tailor-resources-lang-scale-contrast.md)
