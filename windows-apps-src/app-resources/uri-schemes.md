---
author: stevewhims
Description: There are several URI (Uniform Resource Identifier) schemes that you can use to refer to files that come from your app's package, your app's data folders, or the cloud. You can also use a URI scheme to refer to strings loaded from your app's Resources Files (.resw).
title: Схемы URI
template: detail.hbs
ms.author: stwhi
ms.date: 10/16/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, uwp, ресурс, изображение, средство, MRT, квалификатор
ms.localizationpriority: medium
ms.openlocfilehash: 445f053b0243f1b9c2e54e6e9fcfa332d49cbec5
ms.sourcegitcommit: 2470c6596d67e1f5ca26b44fad56a2f89773e9cc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2018
ms.locfileid: "1674521"
---
# <a name="uri-schemes"></a>Схемы URI

Существует несколько схем URI (универсального кода ресурсов), которые можно использовать для формирования ссылок на файлы приложения, получаемые из пакета приложения, папок данных приложения или облака. Можно также использовать схему URI для обозначения строк, загружаемых из файлов ресурсов (.resw) приложения. Можно использовать эти схемы URI в коде, в разметке XAML, в манифесте пакета приложения или в шаблонах плитки и всплывающих уведомлений.

## <a name="common-features-of-the-uri-schemes"></a>Общие компоненты схем URI

Все схемы, описанные в этом разделе, соответствуют стандартам схем URI по нормализации и извлечению ресурсов. В разделе [RFC 3986](http://go.microsoft.com/fwlink/p/?LinkId=263444) приводится универсальный синтаксис URI.

Все схемы URI определяют иерархическую часть в соответствии с [RFC 3986](http://go.microsoft.com/fwlink/p/?LinkId=263444) как компоненты полномочий и пути URI.

```syntax
URI         = scheme ":" hier-part [ "?" query ] [ "#" fragment ]
hier-part   = "//" authority path-abempty
            / path-absolute
            / path-rootless
            / path-empty
```

Это означает, что по сути есть три компонента URI. Сразу после двух символов косой черты в *схеме* находится компонент (который может быть пустым) под названием *центр сертификации*. И сразу за ним находится *путь*. Используем URI `http://www.contoso.com/welcome.png` в качестве примера, здесь схемой является `http://`, центром сертификации — `www.contoso.com`, а путем — `/welcome.png`. Другой пример — URI `ms-appx:///logo.png`, где компонент центра сертификации пуст и имеет значение по умолчанию.

Компонент фрагмента игнорируется при обработке URI для данной схемы, рассматриваемых в этом разделе. Во время получения и сравнения компонент фрагмента не учитывается. Однако определенные реализации, находящиеся в слое выше, могут интерпретировать фрагмент, чтобы получить вторичный ресурс.

Сравнение производится байт за байтом после нормализации всех компонентов IRI.

## <a name="case-insensitivity-and-normalization"></a>Независимость от регистра и нормализация

Все схемы URI, описанные в этом разделе, соответствуют стандартам схем URI (RFC 3986) по нормализации и извлечению ресурсов для схем. Нормализованная форма этих URI поддерживает регистр и декодирует символы, не зарезервированные RFC 3986.

Во всех схемах URI, описанных в этом разделе, компоненты *схема*, *центр сертификации* и *путь* не учитывают регистр символов в стандартной конфигурации, либо обрабатываются системой без учета регистра. **Примечание**. Единственное исключение из этого правила — *центр сертификации* из `ms-resource`, где регистр учитывается.

## <a name="ms-appx-and-ms-appx-web"></a>ms-appx и ms-appx-web

Используйте схему URI `ms-appx` или `ms-appx-web` для ссылки на файл, который поступает из пакета приложения (см. раздел [Создание пакетов приложений](../packaging/index.md)). Файлы в пакете приложения обычно содержат статические изображения, данные, код и макеты. Схема `ms-appx-web` обращается к тем же файлам, что и `ms-appx`, но в разделе web. Примеры и дополнительные сведения см. в разделе [Ссылки на изображения и другие ресурсы из кода и разметки XAML](images-tailored-for-scale-theme-contrast.md#reference-an-image-or-other-asset-from-xaml-markup-and-code).

### <a name="scheme-name-ms-appx-and-ms-appx-web"></a>Имя схемы (ms-appx и ms-appx-web)

Имя схемы URI представляет собой строку ms-appx или ms-appx-web.

```xml
ms-appx://
```

```xml
ms-appx-web://
```

### <a name="authority-ms-appx-and-ms-appx-web"></a>Центр сертификации (ms-appx и ms-appx-web)

Центр сертификации — имя идентификатора пакета, которое определено в манифесте пакета. Таким образом, компонент центра сертификации в URI и в IRI (международный идентификатор ресурсов) ограничен набором символов, разрешенных в имени идентификатора пакета. Имя пакета должно соответствовать имени одного из пакетов графа зависимостей пакета выполняемого приложения.

```xml
ms-appx://Contoso.MyApp/
ms-appx-web://Contoso.MyApp/
```

Если в имени центра сертификации присутствуют другие символы, его получение и сравнение завершится неудачей. Значение по умолчанию для центра сертификации — пакет приложения, запущенного в настоящий момент.

```xml
ms-appx:///
ms-appx-web:///
```

### <a name="user-info-and-port-ms-appx-and-ms-appx-web"></a>Сведения о пользователе и порт (ms-appx и ms-appx-web)

Схема `ms-appx`, в отличие от других популярных схем, не определяет компоненты сведений о пользователе и компоненты порта. Так как символы "@" and ":" не являются допустимыми значениями для компонента полномочий, при их наличии поиск завершится неудачно. Поиск завершится неудачно в любом из следующих примеров.

```xml
ms-appx://john@contoso.myapp/default.html
ms-appx://john:password@contoso.myapp/default.html
ms-appx://contoso.myapp:8080/default.html
ms-appx://john:password@contoso.myapp:8080/default.html
```

### <a name="path-ms-appx-and-ms-appx-web"></a>Путь (ms-appx и ms-appx-web)

Компонент пути соответствует стандартному синтаксису RFC 3986 и поддерживает наличие в IRI символов, отличных от ASCII. Компонент пути определяет логический или физический путь к файлу. Этот файл находится в папке, сопоставленной с расположением установки пакета приложения. Приложение определяется компонентом центра сертификации.

Если путь указывает на физический путь и имя файла, извлекается актив этого физического файла. Однако если найти физический файл не удается, реальный получаемый ресурс определяется с помощью согласования содержимого во время выполнения. Это определение основано на приложения, операционной системе и параметрах пользователя, таких как язык, коэффициент масштабирования, тема, высокая контрастность и другие контексты выполнения. Например, сочетание языков приложения, системных параметров дисплея системы и пользовательских параметров высокой контрастности может быть учтено при определении фактического значения ресурса для получения.

```xml
ms-appx:///images/logo.png
```

Приведенный выше URI фактически может получить файл в пакете текущего приложения с помощью следующего физического имени файла.

```
\Images\fr-FR\logo.scale-100_contrast-white.png
```

Естественно, можно также получить тот же физический файл путем обращения к нему напрямую с полным именем.

```xaml
<Image Source="ms-appx:///images/fr-FR/logo.scale-100_contrast-white.png"/>
```

Компонент пути схемы `ms-appx(-web)`, как и стандартные URI, учитывает регистр. Однако если файловая система, с помощью которой выполняется доступ к ресурсу, не учитывает регистр (например, NTFS), извлечение ресурса выполняется без учета регистра.

Нормализованная форма URI поддерживает регистр и декодирует (используя символ "%", за которым следуют двузначный шестнадцатеричный символ) незарезервированные символы RFC 3986. Символы ?, #, /, * и ” (символ кавычки), представляющие такие данные в пути, как имена файлов или папок, должны кодироваться. Все закодированные символы перед получением декодируются. Поэтому для получения файла с именем Hello#World.html используйте этот URI.

```xml
ms-appx:///Hello%23World.html
```

### <a name="query-ms-appx-and-ms-appx-web"></a>Запрос (ms-appx и ms-appx-web)

Параметры запроса игнорируются во время получения ресурсов. Нормализованная форма параметров запроса учитывает регистр. Параметры запроса не игнорируются во время сравнения.

## <a name="ms-appdata"></a>ms-appdata

Схема URI `ms-appdata` используется для формирования ссылки на файлы приложения из локальной, перемещаемой и временной папок данных приложения. Подробнее об этих папках данных приложения: [Хранение и извлечение параметров и прочих данных приложения](../design/app-settings/store-and-retrieve-app-data.md).

Схема URI `ms-appdata` не выполняет согласование содержимого среды выполнения, которое проводят [ms-appx и ms-appx-web](#ms-appx-and-ms-appx-web). Но вы можете реагировать на содержимое [ResourceContext.QualifierValues](/uwp/api/windows.applicationmodel.resources.core.resourcecontext.QualifierValues) и загружать соответствующие ресурсы из данных приложения с помощью их полных имен физических файлов в URI.

### <a name="scheme-name-ms-appdata"></a>Имя схемы (ms-appdata)

Имя схемы URI представляет собой строку ms-appdata.

```xml
ms-appdata://
```

### <a name="authority-ms-appdata"></a>Центр сертификации (ms-appdata)

Центр сертификации — имя идентификатора пакета, которое определено в манифесте пакета. Таким образом, компонент центра сертификации в URI и в IRI (международный идентификатор ресурсов) ограничен набором символов, разрешенных в имени идентификатора пакета. Имя пакета должно соответствовать имени пакета запущенного в данный момент приложения.

```xml
ms-appdata://Contoso.MyApp/
```

Если в имени центра сертификации присутствуют другие символы, его получение и сравнение завершится неудачей. Значение по умолчанию для центра сертификации — пакет приложения, запущенного в настоящий момент.

```xml
ms-appdata:///
```

### <a name="user-info-and-port-ms-appdata"></a>Сведения о пользователе и порт (ms-appdata)

Схема `ms-appdata`, в отличие от других популярных схем, не определяет компоненты сведений о пользователе и компоненты порта. Так как символы "@" and ":" не являются допустимыми значениями для компонента полномочий, при их наличии поиск завершится неудачно. Поиск завершится неудачно в любом из следующих примеров.

```xml
ms-appdata://john@contoso.myapp/local/data.xml
ms-appdata://john:password@contoso.myapp/local/data.xml
ms-appdata://contoso.myapp:8080/local/data.xml
ms-appdata://john:password@contoso.myapp:8080/local/data.xml
```

### <a name="path-ms-appdata"></a>Путь (ms-appdata)

Компонент пути соответствует стандартному синтаксису RFC 3986 и поддерживает наличие в IRI символов, отличных от ASCII. В [Windows.Storage.ApplicationData](/uwp/api/Windows.Storage.ApplicationData?branch=live) расположение — это три зарезервированные папки для хранения локальных, перемещаемых и временных состояний. Схема `ms-appdata` разрешает доступ к файлам и папкам в этих расположениях. Первый сегмент компонента пути должен указывать определенную папку следующим образом. Таким образом, формат path-empty для hier-part недопустим.

Локальная папка.

```xml
ms-appdata:///local/
```

Временная папка.

```xml
ms-appdata:///temp/
```

Перемещаемая папка.

```xml
ms-appdata:///roaming/
```

Компонент пути схемы `ms-appdata`, как и стандартные URI, учитывает регистр. Однако если файловая система, с помощью которой выполняется доступ к ресурсу, не учитывает регистр (например, NTFS), извлечение ресурса выполняется без учета регистра.

Нормализованная форма URI поддерживает регистр и декодирует (используя символ "%", за которым следуют двузначный шестнадцатеричный символ) незарезервированные символы RFC 3986. Символы ?, #, /, * и ” (символ кавычки), представляющие такие данные в пути, как имена файлов или папок, должны кодироваться. Все закодированные символы перед получением декодируются. Поэтому для получения локального файла с именем Hello#World.html используйте этот URI.

```xml
ms-appdata://local/Hello%23World.html
```

Извлечение ресурса и идентификация вышестоящего сегмента пути выполняются после нормализации точек (".././b/c"). Поэтому URI не могут с помощью точки ссылаться на себя из одной из зарезервированных папок. Поэтому следующий URI недопустим.

```xml
ms-appdata:///local/../hello/logo.png
```

Однако этот URI допустим (хотя и избыточен).

```xml
ms-appdata:///local/../roaming/logo.png
```

### <a name="query-ms-appdata"></a>Запрос (ms-appdata)

Параметры запроса игнорируются во время получения ресурсов. Нормализованная форма параметров запроса учитывает регистр. Параметры запроса не игнорируются во время сравнения.

## <a name="ms-resource"></a>ms-resource

Используйте схему URI `ms-resource` для обозначения строк, загружаемых из файлов ресурсов (.resw) приложения. Дополнительные сведения об использовании файлов ресурсов (.resw) и примеры см. в разделе [Локализация строк в манифесте пакета приложения и интерфейсе пользователя](localize-strings-ui-manifest.md).

### <a name="scheme-name-ms-resource"></a>Имя схемы (ms-resource)

Имя схемы URI представляет собой строку ms-resource.

```xml
ms-resource://
```

### <a name="authority-ms-resource"></a>Центр сертификации (ms-resource)

Центр сертификации — это имя схемы ресурсов наивысшего уровня, определенной в указателе ресурсов пакета (PRI), которое обычно соответствует имени идентификатора пакета, определенному в манифесте пакета. См. [Создание пакетов приложений](../packaging/index.md)). Таким образом, компонент центра сертификации в URI и в IRI (международный идентификатор ресурсов) ограничен набором символов, разрешенных в имени идентификатора пакета. Имя пакета должно соответствовать имени одного из пакетов графа зависимостей пакета выполняемого приложения.

```xml
ms-resource://Contoso.MyApp/
ms-resource://Microsoft.WinJS.1.0/
```

Если в имени центра сертификации присутствуют другие символы, его получение и сравнение завершится неудачей. Значение по умолчанию для центра сертификации — чувствительное к регистру имя пакета приложения, запущенного в настоящий момент.

```xml
ms-resource:///
```

Центр сертификации учитывает регистр, и нормализованная форма сохраняет регистр. Однако при поиске ресурса регистр не учитывается.

### <a name="user-info-and-port-ms-resource"></a>Сведения о пользователе и порт (ms-resource)

Схема `ms-resource`, в отличие от других популярных схем, не определяет компоненты сведений о пользователе и компоненты порта. Так как символы "@" and ":" не являются допустимыми значениями для компонента полномочий, при их наличии поиск завершится неудачно. Поиск завершится неудачно в любом из следующих примеров.

```xml
ms-resource://john@contoso.myapp/Resources/String1
ms-resource://john:password@contoso.myapp/Resources/String1
ms-resource://contoso.myapp:8080/Resources/String1
ms-resource://john:password@contoso.myapp:8080/Resources/String1
```

### <a name="path-ms-resource"></a>Путь (ms-resource)

Путь определяет иерархическое расположение поддерева [ResourceMap](/uwp/api/Windows.ApplicationModel.Resources.Core.ResourceMap?branch=live) (см. раздел [Система управления ресурсами](https://msdn.microsoft.com/library/windows/apps/jj552947)) и подраздел [NamedResource](/uwp/api/Windows.ApplicationModel.Resources.Core.NamedResource?branch=live) в нем. Обычно путь соответствует имени файлов ресурса (без расширения .resw) и идентификатору строкового ресурса в этом файле.

Дополнительные сведения и примеры см. в разделах [Локализация строк в манифесте пакета приложения и интерфейсе пользователя](localize-strings-ui-manifest.md) и [Поддержка плитки и всплывающих уведомлений для языка, масштаба и высокой контрастности](../design/shell/tiles-and-notifications/tile-toast-language-scale-contrast.md).

Компонент пути схемы `ms-resource`, как и стандартные URI, учитывает регистр. Однако если файловая система, с помощью которой выполняется доступ к ресурсу, не учитывает регистр, выполняется сравнение [CompareStringOrdinal](https://msdn.microsoft.com/library/windows/apps/br224628), а *ignoreCase* имеет значение `true`.

Нормализованная форма URI поддерживает регистр и декодирует (используя символ "%", за которым следуют двузначный шестнадцатеричный символ) незарезервированные символы RFC 3986. Символы ?, #, /, * и ” (символ кавычки), представляющие такие данные в пути, как имена файлов или папок, должны кодироваться. Все закодированные символы перед получением декодируются. Таким образом, чтобы получить строковый ресурс из файла ресурсов с именем Hello#World.resw, используйте этот URI.

```xml
ms-resource:///Hello%23World/String1
```

### <a name="query-ms-resource"></a>Запрос (ms-resource)

Параметры запроса игнорируются во время получения ресурсов. Нормализованная форма параметров запроса учитывает регистр. Параметры запроса не игнорируются во время сравнения. Параметры запроса сравниваются с учетом регистра.

Разработчики определенных компонентов, находящихся в слое выше этого анализа URI, могут выбрать удобное для них использование параметров запроса.

## <a name="related-topics"></a>Статьи по теме

* [Универсальный код ресурса (URI): общий синтаксис](http://go.microsoft.com/fwlink/p/?LinkId=263444)
* [Создание пакетов приложений](../packaging/index.md)
* [Ссылки на изображения и другие ресурсы из кода и разметки XAML](images-tailored-for-scale-theme-contrast.md#reference-an-image-or-other-asset-from-xaml-markup-and-code)
* [Хранение и извлечение параметров и прочих данных приложения](../design/app-settings/store-and-retrieve-app-data.md)
* [Локализация строк в манифесте пакета приложения и интерфейсе пользователя](localize-strings-ui-manifest.md)
* [Система управления ресурсами](https://msdn.microsoft.com/library/windows/apps/jj552947)
* [Поддержка плитки и всплывающих уведомлений для языка, масштаба и высокой контрастности](../design/shell/tiles-and-notifications/tile-toast-language-scale-contrast.md)