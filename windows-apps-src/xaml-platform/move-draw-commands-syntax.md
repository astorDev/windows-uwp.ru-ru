---
author: jwmsft
description: "Информация о командах перемещения и рисования (мини-языке), которые вы можете использовать для указания геометрии путей в качестве значения атрибута XAML."
title: "Синтаксис команд перемещения и рисования"
ms.assetid: 7772BC3E-A631-46FF-9940-3DD5B9D0E0D9
ms.author: jimwalk
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
translationtype: Human Translation
ms.sourcegitcommit: c6b64cff1bbebc8ba69bc6e03d34b69f85e798fc
ms.openlocfilehash: ea01f8191190db0a9b13b8081bc6fef687369c13
ms.lasthandoff: 02/07/2017

---

# <a name="move-and-draw-commands-syntax"></a>Синтаксис команд перемещения и рисования

\[ Обновлено для приложений UWP в Windows 10. Статьи о Windows 8.x см. в [архиве](http://go.microsoft.com/fwlink/p/?linkid=619132) \]

Информация о командах перемещения и рисования (мини-языке), которые вы можете использовать для указания геометрии путей в качестве значения атрибута XAML. Команды перемещения и рисования используются многими средствами разработки и графическими инструментами, умеющими выводить векторную графику или фигуру как формат сериализации и обмена.

## <a name="properties-that-use-move-and-draw-command-strings"></a>Свойства, использующие строки команд перемещения и рисования

Синтаксис команд перемещения и рисования поддерживается конвертером внутренних типов для XAML, который анализирует команды и создает графическое представление времени выполнения. В сущности, это представление — конечный набор векторов, готовый для представления. Сами векторы не завершают подробности представления; вам еще нужно будет задать другие значения для элементов. Для объекта [**Path**](https://msdn.microsoft.com/library/windows/apps/br243355) вам также требуются значения для [**Fill**](https://msdn.microsoft.com/library/windows/apps/br243378), [**Stroke**](https://msdn.microsoft.com/library/windows/apps/br243383) и других свойств. Затем этот объект **Path** необходимо тем или иным образом подключить к визуальному дереву. Для объекта [**PathIcon**](https://msdn.microsoft.com/library/windows/apps/dn252722) задайте свойство [**Foreground**](https://msdn.microsoft.com/library/windows/apps/dn251974).

В среде выполнения Windows есть два свойства, которые умеют использовать строку, представляющую команды перемещения и рисования: [**Path.Data**](https://msdn.microsoft.com/library/windows/apps/br243356) и [**PathIcon.Data**](https://msdn.microsoft.com/library/windows/apps/dn252723). Если вы задаете одно из этих свойств при помощи указания команд перемещения и рисования, вы обычно задаете его как значение атрибута XAML вместе с другими необходимыми атрибутами этого элемента. Если не вдаваться в подробности, это выглядит так:

```xml
<Path x:Name="Arrow" Fill="White" Height="11" Width="9.67"
  Data="M4.12,0 L9.67,5.47 L4.12,10.94 L0,10.88 L5.56,5.47 L0,0.06" />
```

[**PathGeometry.Figures**](https://msdn.microsoft.com/library/windows/apps/br210169) также может использовать команды перемещения и рисования. Теоретически объект [**PathGeometry**](https://msdn.microsoft.com/library/windows/apps/br210168), использующий команды перемещения и рисования, можно объединить с другими типами [**Geometry**](https://msdn.microsoft.com/library/windows/apps/br210041) в объекте [**GeometryGroup**](https://msdn.microsoft.com/library/windows/apps/br210057), который затем можно использовать как значение для [**Path.Data**](https://msdn.microsoft.com/library/windows/apps/br243356). Но это применяется намного реже, чем использование команд перемещения и рисования для данных с определенным атрибутом.

## <a name="using-move-and-draw-commands-versus-using-a-pathgeometry"></a>Использование команд перемещения и рисования в сравнении с использованием **PathGeometry**

Для XAML среды выполнения Windows команды перемещения и рисования создают [**PathGeometry**](https://msdn.microsoft.com/library/windows/apps/br210168) с одним объектом [**PathFigure**](https://msdn.microsoft.com/library/windows/apps/br210143) со значением свойства [**Figures**](https://msdn.microsoft.com/library/windows/apps/br210169). Каждая команда рисования создает производный класс [**PathSegment**](https://msdn.microsoft.com/library/windows/apps/br210174) в наборе [**Segments**](https://msdn.microsoft.com/library/windows/apps/br210164) этого одного **PathFigure**, команда перемещения изменяет [**StartPoint**](https://msdn.microsoft.com/library/windows/apps/br210166), а при существовании команды закрытия для [**IsClosed**](https://msdn.microsoft.com/library/windows/apps/br210159) устанавливается значение **true**. По этой структуре можно перемещаться как по объектной модели, если вы проверяете значения **Data** во время выполнения.

## <a name="the-basic-syntax"></a>Основной синтаксис

Синтаксис команд перемещения и рисования в основном можно представить так:

1.  Начните с необязательного правила заливки. Обычно оно указывается только в случае, если нужно изменить действующее по умолчанию правило **EvenOdd**. (Подробнее об **EvenOdd** будет рассказано позже.)
2.  Укажите ровно одно команду перемещения.
3.  Укажите одну или несколько команд рисования.
4.  Укажите команду закрытия. Команду закрытия можно не указывать, но тогда фигура останется открытой (это используется редко).

Общие правила этого синтаксиса:

-   Каждая команда представлена ровно одной буквой.
-   Эта буква может быть в верхнем или нижнем регистре. Регистр имеет значение, как будет описано ниже.
-   Обычно после каждой команды, кроме команды закрытия, идет одно или несколько чисел.
-   Если после команды идет несколько чисел, разделите их запятыми или пробелами.

**\[**_fillRule_**\]** _moveCommand_ _drawCommand_ **\[**_drawCommand_**\*\]** **\[**_closeCommand_**\]**

Многие команды рисования используют точки, при этом вы предоставляете значение _x,y_. Когда вы видите заполнитель \*_points_, вы можете предположить, что предоставляете два десятичных значения для значения _x,y_ точки.

Пробел часто можно опустить, когда результат однозначен. Фактически можно опустить все пробелы, если вы используете запятые в качестве разделителей для всех наборов чисел (точки и размер). Например, такое использование допустимо: `F1M0,58L2,56L6,60L13,51L15,53L6,64z`. Но для ясности между командами чаще ставятся пробелы.

Не используйте запятые в качестве десятичных разделителей для дробных чисел. Строка команды интерпретируется языком XAML и не учитывает характерные для языка и региональных параметров соглашения о форматировании чисел, отличные от тех, что используются в языковом стандарте **en-us**.

## <a name="syntax-specifics"></a>Особенности синтаксиса

**Правило заливки**

Для необязательного правила заливки возможны два значения: **F0** или **F1**. (**F** всегда в верхнем регистре.) **F0** — это значение по умолчанию; оно задает поведение заливки **EvenOdd**, поэтому обычно его не указывают. Используйте **F1**, чтобы получить поведение заливки **Nonzero**. Эти значения заливки совпадают со значениями перечисления [**FillRule**](https://msdn.microsoft.com/library/windows/apps/br210030).

**Команда перемещения**

Указывает начальную точку для новой фигуры.

| Синтаксис |
|--------|
| `M ` _startPoint_ <br/>- или -<br/>`m` _startPoint_|

| Термин | Описание |
|------|-------------|
| _startPoint_ | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870) <br/>Начальная точка новой фигуры.|

**M** в верхнем регистре означает, что *startPoint* — это абсолютная координата; **m** в нижнем регистре означает, что *startPoint* — это смещение относительно предыдущей точки или же относительно (0,0), если предыдущей точки не было.

**Примечание.** Допустимо указывать несколько точек после команды перемещения. К этим точкам проводится линия, как если бы вы указали команду линии. Однако такой стиль не рекомендуется; используйте вместо этого команду выделенной линии.

**Команды рисования**

Команда рисования может состоять из нескольких команд фигур: линия, горизонтальная линия, вертикальная линия, кривая Безье третьего порядка, кривая Безье второго порядка, гладкая кривая Безье третьего порядка, гладкая кривая Безье второго порядка и дуга эллипса.

Для всех команд рисования регистр имеет значение. Буквы в верхнем регистре означают абсолютные координаты, а буквы в нижнем регистре означают координаты относительно предыдущей команды.

Контрольные точки для сегмента указываются относительно конечной точки предыдущего сегмента. При последовательном вводе нескольких команд одного типа можно опустить повторяющуюся команду. Например, команда `L 100,200 300,400` эквивалентна `L 100,200 L 300,400`.

**Команда линии**

Создает прямую линию между текущей точкой и указанной конечной точкой. `l 20 30` и `L 20,30` — примеры допустимых команд линии. Определяет эквивалент объекта [**LineGeometry**](https://msdn.microsoft.com/library/windows/apps/br210117).

| Синтаксис |
|--------|
| `L` _endPoint_ <br/>- или -<br/>`l` _endPoint_ |

| Термин | Описание |
|------|-------------|
| endPoint | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870)<br/>Конечная точка линии.|

**Команда горизонтальной линии**

Создает горизонтальную линию между текущей точкой и указанной х-координатой. `H 90`  — пример допустимой команды горизонтальной линии.

| Синтаксис |
|--------|
| `H ` _x_ <br/> - или - <br/>`h ` _x_ |

| Термин | Описание |
|------|-------------|
| x | [**Double**](https://msdn.microsoft.com/library/windows/apps/system.double.aspx) <br/> X-координата конечной точки линии. |

**Команда вертикальной линии**

Создает вертикальную линию между текущей точкой и указанной y-координатой. `v 90`  — пример допустимой команды вертикальной линии.

| Синтаксис |
|--------|
| `V ` _y_ <br/> - или - <br/> `v ` _y_ |

| Термин | Описание |
|------|-------------|
| *y* | [**Double**](https://msdn.microsoft.com/library/windows/apps/system.double.aspx) <br/> Y-координата конечной точки линии. |

**Команда кривой Безье третьего порядка**

Создает кривую Безье третьего порядка между текущей точкой и указанной конечной точкой при помощи двух указанных контрольных точек (*controlPoint1* и *controlPoint2*). `C 100,200 200,400 300,200`  — пример допустимой команды кривой. Определяет эквивалент объекта [**PathGeometry**](https://msdn.microsoft.com/library/windows/apps/br210168) с объектом [**BezierSegment**](https://msdn.microsoft.com/library/windows/apps/br228068).

| Синтаксис |
|--------|
| `C ` *controlPoint1* *controlPoint2* *endPoint* <br/> - или - <br/> `c ` *controlPoint1* *controlPoint2* *endPoint* |

| Термин | Описание |
|------|-------------|
| *controlPoint1* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870) <br/> Первая контрольная точка кривой, определяющая начальный тангенс кривой. |
| *controlPoint2* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870) <br/> Вторая контрольная точка кривой, определяющая конечный тангенс кривой. |
| *endPoint* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870) <br/> Конечная точка кривой. | 

**Команда кривой Безье второго порядка**

Создает кривую Безье второго порядка между текущей точкой и указанной конечной точкой при помощи указанной контрольной точки (*controlPoint*). `q 100,200 300,200`  — пример допустимой команды кривой Безье второго порядка. Определяет эквивалент объекта [**PathGeometry**](https://msdn.microsoft.com/library/windows/apps/br210168) с объектом [**QuadraticBezierSegment**](https://msdn.microsoft.com/library/windows/apps/br210249).

| Синтаксис |
|--------|
| `Q ` *controlPoint endPoint* <br/> - или - <br/> `q ` *controlPoint endPoint* |

| Термин | Описание |
|------|-------------|
| *controlPoint* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870) <br/> Контрольная точка кривой, определяющая начальный и конечный тангенсы кривой. |
| *endPoint* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870)<br/> Конечная точка кривой. |

**Команда гладкой кривой Безье третьего порядка**

Создает кривую Безье третьего порядка между текущей точкой и указанной конечной точкой. Первой контрольной точкой считается отражение второй контрольной точки предыдущей команды относительно текущей точки. Если предыдущей команды нет или она не является командой кривой Безье третьего порядка или гладкой кривой Безье третьего порядка, считается, что первая контрольная точка совпадает с текущей точкой. Вторая контрольная точка — контрольная точка для конца кривой — указывается с помощью *controlPoint2*. Например, `S 100,200 200,300` — допустимая команда гладкой кривой Безье третьего порядка. Эта команда определяет эквивалент объекта [**PathGeometry**](https://msdn.microsoft.com/library/windows/apps/br210168) с объектом [**BezierSegment**](https://msdn.microsoft.com/library/windows/apps/br228068), где был предыдущий сегмент кривой.

| Синтаксис |
|--------|
| `S` *controlPoint2* *endPoint* <br/> - или - <br/>`s` *controlPoint2 endPoint* |

| Термин | Описание |
|------|-------------|
| *controlPoint2* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870) <br/> Контрольная точка кривой, определяющая конечный тангенс кривой. |
| *endPoint* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870)<br/> Конечная точка кривой. |

**Команда гладкой кривой Безье второго порядка**

Создает кривую Безье второго порядка между текущей точкой и указанной конечной точкой. Контрольной точкой считается отражение контрольной точки предыдущей команды относительно текущей точки. Если предыдущей команды нет или она не является командой кривой Безье второго порядка или гладкой кривой Безье второго порядка, контрольная точка совпадает с текущей точкой. Эта команда определяет эквивалент объекта [**PathGeometry**](https://msdn.microsoft.com/library/windows/apps/br210168) с объектом [**QuadraticBezierSegment**](https://msdn.microsoft.com/library/windows/apps/br210249), где был предыдущий сегмент кривой.

| Синтаксис |
|--------|
| `T` *controlPoint* *endPoint* <br/> - или - <br/> `t` *controlPoint* *endPoint* |

| Термин | Описание |
|------|-------------|
| *controlPoint* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870)<br/> Контрольная точка кривой, определяющая начальный и конечный тангенсы кривой. |
| *endPoint* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870)<br/> Конечная точка кривой. |

**Команда дуги эллипса**

Создает дугу эллипса между текущей точкой и указанной конечной точкой. Определяет эквивалент объекта [**PathGeometry**](https://msdn.microsoft.com/library/windows/apps/br210168) с объектом [**ArcSegment**](https://msdn.microsoft.com/library/windows/apps/br228054).

| Синтаксис |
|--------|
| `A ` *size* *rotationAngle* *isLargeArcFlag* *sweepDirectionFlag* *endPoint* <br/> - или - <br/>`a ` *sizerotationAngleisLargeArcFlagsweepDirectionFlagendPoint* |

| Термин | Описание |
|------|-------------|
| *size* | [**Size**](https://msdn.microsoft.com/library/windows/apps/br225995)<br/>Радиусы дуги по оси x и по оси y. |
| *rotationAngle* | [**Double**](https://msdn.microsoft.com/library/windows/apps/system.double.aspx) <br/> Поворот эллипса в градусах. |
| *isLargeArcFlag* | Значение «1», если угол дуги должен быть больше или равен 180 градусам. В противном случае — значение «0». |
| *sweepDirectionFlag* | Значение «1», если дуга рисуется в направлении положительного угла. В противном случае — значение «0». |
| *endPoint* | [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870) <br/> Конечная точка дуги.|
 
**Команда закрытия**

Завершает текущую фигуру и создает линию, соединяющую текущую точку с начальной точкой фигуры. Эта команда создает соединение линий (угол) между последним и первым сегментом фигуры.

| Синтаксис |
|--------|
| `Z` <br/> — или — <br/> `z ` |

**Синтаксис точки**

Описывает координаты точки (x и y). См. также [**Point**](https://msdn.microsoft.com/library/windows/apps/br225870).

| Синтаксис |
|--------|
| *x*,*y*<br/> - или - <br/>*x* *y* |

| Термин | Описание |
|------|-------------|
| *x* | [**Double**](https://msdn.microsoft.com/library/windows/apps/system.double.aspx) <br/> X-координата точки. |
| *y* | [**Double**](https://msdn.microsoft.com/library/windows/apps/system.double.aspx) <br/> Y-координата точки. |

**Дополнительные примечания**

Вместо стандартного числового значения вы также можете использовать следующие специальные значения. Эти значения указываются с учетом регистра.

-   **Infinity**: представляет **PositiveInfinity**.
-   **\-Infinity**: представляет **NegativeInfinity**.
-   **NaN**: представляет **NaN**.

Вместо десятичных или целых чисел можно использовать экспоненциальное представление. Например, `+1.e17` — допустимое значение.

## <a name="design-tools-that-produce-move-and-draw-commands"></a>Средства проектирования, создающие команды перемещения и рисования

**Перо** и другие инструменты рисования в Blend для Microsoft Visual Studio 2015 обычно создают объект [**Path**](https://msdn.microsoft.com/library/windows/apps/br243355) с использованием команд перемещения и рисования.

Вы можете увидеть существующие данные команд перемещения и рисования в некоторых частях элемента управления, определенных в стандартных XAML-шаблонах для элементов управления в среде выполнения Windows. Например, некоторые элементы управления используют [**PathIcon**](https://msdn.microsoft.com/library/windows/apps/dn252722), который содержит данные, определенные как команды перемещения и рисования.

Существуют средства экспорта и подключаемые модули, доступные для других распространенных средств разработки, которые работают с векторной графикой и умеют выводить вектор в форме XAML. Они обычно создают объекты [**Path**](https://msdn.microsoft.com/library/windows/apps/br243355) в контейнере макета с помощью команд перемещения и рисования для [**Path.Data**](https://msdn.microsoft.com/library/windows/apps/br243356). В XAML может быть несколько элементов **Path**, чтобы можно было применять разные кисти. Многие из этих средств экспорта и подключаемые модули были первоначально написаны для XAML вWindows Presentation Foundation (WPF) и Silverlight, но этот синтаксис пути XAML совпадает с XAML среды выполнения Windows. Чаще всего можно использовать блоки XAML из средства экспорта и вставлять их прямо в XAML-страницу среды выполнения Windows. (Но вы не сможете использовать элемент **RadialGradientBrush**, если он был частью преобразованного XAML, так как XAML среды выполнения Windows не поддерживает эту кисть.)

## <a name="related-topics"></a>Ссылки по теме

* [Рисование фигур](https://msdn.microsoft.com/library/windows/apps/mt280380)
* [Использование кистей](https://msdn.microsoft.com/library/windows/apps/mt280383)
* [**Path.Data**](https://msdn.microsoft.com/library/windows/apps/br243356)
* [**PathIcon**](https://msdn.microsoft.com/library/windows/apps/dn252722)


