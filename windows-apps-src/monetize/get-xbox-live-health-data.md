---
description: Используйте этот метод в API аналитики для Microsoft Store для получения данных работоспособности Xbox Live.
title: Получение данных работоспособности в Xbox Live
ms.date: 06/04/2018
ms.topic: article
keywords: Windows 10, uwp, службы Store, API аналитики для Microsoft Store, аналитика Xbox Live, работоспособность, ошибки пользователя
ms.localizationpriority: medium
ms.openlocfilehash: 8a311550541391d9aa5dc035bc73130274dc9e0e
ms.sourcegitcommit: e63fbd7a63a7e8c03c52f4219f34513f4b2bb411
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2019
ms.locfileid: "58162910"
---
# <a name="get-xbox-live-health-data"></a>Получение данных работоспособности в Xbox Live


Используйте этот метод в API аналитики для Microsoft Store для получения данных работоспособности для своей [игры с поддержкой Xbox Live](https://docs.microsoft.com/gaming/xbox-live//index.md). Эта информация также доступна в [отчет по аналитике в Xbox](../publish/xbox-analytics-report.md) в центре партнеров.

> [!IMPORTANT]
> Этот метод поддерживает только игры для Xbox или игры, использующие службы Xbox Live. Эти игры, в том числе игры, опубликованные [партнерами Майкрософт](https://docs.microsoft.com/gaming/xbox-live//developer-program-overview.md#microsoft-partners), и отправленные в рамках программы [ID@Xbox, должны пройти [процесс утверждения концепции](../gaming/concept-approval.md)](https://docs.microsoft.com/gaming/xbox-live//developer-program-overview.md#id). В настоящее время этот метод не поддерживает игры, опубликованные в рамках программы [Xbox Live Creators Program](https://docs.microsoft.com/gaming/xbox-live//get-started-with-creators/get-started-with-xbox-live-creators.md).

## <a name="prerequisites"></a>предварительные требования

Для использования этого метода сначала необходимо сделать следующее:

* Если вы еще не сделали этого, выполните все [необходимые условия](access-analytics-data-using-windows-store-services.md#prerequisites) для API аналитики для Microsoft Store.
* [Получите маркер доступа Azure AD](access-analytics-data-using-windows-store-services.md#obtain-an-azure-ad-access-token), который будет использоваться в заголовке запроса этого метода. После получения токена доступа у вас будет 60 минут, чтобы использовать его до окончания его срока действия. После истечения срока действия токена можно получить новый токен.

## <a name="request"></a>Запрос


### <a name="request-syntax"></a>Синтаксис запроса

| Метод | Универсальный код ресурса (URI) запроса       |
|--------|----------------------|
| GET    | ```https://manage.devcenter.microsoft.com/v1.0/my/analytics/gameanalytics``` |


### <a name="request-header"></a>Заголовок запроса

| Header        | Тип   | Описание                                                                 |
|---------------|--------|-----------------------------------------------------------------------------|
| Authorization | строка | Обязательный. Маркер доступа Azure AD в форме **носителя** &lt; *маркера*&gt;. |


### <a name="request-parameters"></a>Параметры запроса


| Параметр        | Тип   |  Описание      |  Обязательно  
|---------------|--------|---------------|------|
| applicationId | строка | [Код продукта в Store](in-app-purchases-and-trials.md#store-ids) для игры, по которой требуется получить данные работоспособности Xbox Live.  |  Да  |
| metricType | строка | Строка, определяющая тип аналитических данных Xbox Live, которые необходимо получить. Для этого метода укажите значение **callingpattern**.  |  Да  |
| startDate | date | Начальная дата диапазона дат, для которого требуется получить данные работоспособности. По умолчанию используется текущая дата минус 30 дней. |  Нет  |
| endDate | date | Конечная дата диапазона дат, для которого требуется получить данные работоспособности. По умолчанию используется текущая дата. |  Нет  |
| top | ssNoversion | Количество строк данных, возвращаемых в запросе. Максимальное значение и значение по умолчанию (если параметр не указан) — 10 000. Если в запросе содержится больше строк, то тело ответа будет содержать ссылку "Далее", которую можно использовать для запроса следующей страницы данных |  Нет  |
| skip | ssNoversion | Количество строк, пропускаемых в запросе. Используйте этот параметр для постраничного перемещения по большим наборам данных. Например, при top=10000 и skip=0 извлекаются первые 10 000 строк данных; при top=10000 и skip=10000 извлекаются следующие 10 000 строк данных и т. д. |  Нет  |
| filter | строка  | Один или несколько операторов для фильтрации строк в ответе. Каждое выражение содержит имя поля из тела ответа и значение, которое связано с помощью операторов **eq** или **ne**; выражения можно комбинировать, используя операторы **and** или **or**. В параметре *filter* строковые значения должны быть заключены в одиночные кавычки. Вы можете указать следующие поля из тела ответа:<p/><ul><li><strong>типа устройства</strong></li><li><strong>packageVersion</strong></li><li><strong>sandboxId</strong></li></ul> | Нет   |
| groupby | строка | Оператор, который применяет агрегирование данных только к указанным полям. Вы можете указать следующие поля из тела ответа:<p/><ul><li><strong>date</strong></li><li><strong>типа устройства</strong></li><li><strong>packageVersion</strong></li><li><strong>sandboxId</strong></li></ul><p/>Если задать одно или несколько полей *groupby*, другие поля *groupby*, в которых ничего не задано, будут иметь значение **All** в теле ответа. |  Нет  |


### <a name="request-example"></a>Пример запроса

Ниже приведен пример запроса на получение данных работоспособности для вашей игры с поддержкой Xbox Live. Замените значение *applicationId* кодом продукта в Store для вашей игры.


```syntax
GET https://manage.devcenter.microsoft.com/v1.0/my/analytics/gameanalytics?applicationId=9NBLGGGZ5QDR&metrictype=callingpattern&top=10&skip=0 HTTP/1.1
Authorization: Bearer <your access token>
```

## <a name="response"></a>Ответ

| Значение      | Тип   | Описание                  |
|------------|--------|-------------------------------------------------------|
| Значение      | Массив  | Массив объектов, содержащий информацию о работоспособности. Дополнительные сведения о данных в каждом объекте см. в следующей таблице.                                                                                                                      |
| @nextLink  | строка | При наличии дополнительных страниц данных эта строка содержит универсальный код ресурса (URI), который можно использовать для запроса следующей страницы данных. Например, это значение возвращается в том случае, если параметр **top** запроса имеет значение 10000, но для данного запроса имеется больше 10000 строк данных. |
| TotalCount | ssNoversion    | Общее количество строк в результирующих данных для запроса.   |


Элементы в массиве *Value* содержат следующие значения.

| Значение               | Тип   | Описание                           |
|---------------------|--------|-------------------------------------------|
| applicationId       | строка | Код продукта в Store для игры, по которой запрашиваются данные работоспособности.     |
| date                | строка | Первая дата в диапазоне дат, для которого требуется получить данные работоспособности. Если в запросе указан один день, это значение равно соответствующей дате. Если запрос указывает неделю, месяц или другой диапазон дат, это значение равно первой дате в этом диапазоне дат |
| deviceType          | строка | Одна из следующих строк, указывающая тип устройства, на котором использовалась ваша игра:<p/><ul><li><strong>XboxOne</strong></li><li><strong>WindowsOneCore</strong> (это значение указывает ПК)</li><li><strong>Неизвестный</strong></li></ul>  |
| sandboxId     | строка |   Идентификатор песочницы, созданный для этой игры. Это может быть значение RETAIL или идентификатор для частной песочницы.   |
| packageVersion     | строка |  Версия пакета из четырех частей для игры.  |
| callingPattern     | Объект |  Объект [callingPattern](#callingpattern), который предоставляет ответы службы, устройства и данные пользователя для каждого кода состояния, возвращаемого каждой службой Xbox Live, используемой вашей игрой для заданного диапазона дат.     |


### <a name="callingpattern"></a>callingPattern

| Значение      | Тип   | Описание                  |
|------------|--------|-------------------------------------------------------|
| служба      | строка  |   Имя службы Xbox Live, к которой относятся данные работоспособности.       |
| конечная точка      | строка  |   Конечная точка службы Xbox Live, к которой относятся данные работоспособности.        |
| httpStatusCode      | строка  |  Код статуса HTTP для этого набора данных работоспособности.<p/><p/>**Примечание.**&nbsp;&nbsp;Код состояния **429E** означает, что вызов службы прошел успешно только потому, что [детально настроенное ограничение скорости](https://docs.microsoft.com/gaming/xbox-live//using-xbox-live/best-practices/fine-grained-rate-limiting.md) не использовалось во время вызова. Детально настроенное ограничение скорости может быть принудительно применено в будущем, если службы подвергнется большим нагрузкам, и в этом случае вызов получит [код состояния HTTP 429](https://docs.microsoft.com/gaming/xbox-live//using-xbox-live/best-practices/fine-grained-rate-limiting.md#http-429-response-object).         |
| serviceResponses      | number  | Количество ответов службы, возвративших указанный код состояния.         |
| uniqueDevices      | number  |  Количество уникальных устройства, которые вызвали службу и получили указанный код состояния.       |
| uniqueUsers      | number  |   Количество уникальных пользователей, которые получили код указанного состояния.       |


### <a name="response-example"></a>Пример ответа

В следующем примере демонстрируется пример тела ответа JSON на данный запрос. Имена служб и конечные точки, показанные в этом примере, не являются реальными и используются только в качестве примера.

```json
{
  "Value": [
    {
      "applicationId": "9NBLGGGZ5QDR",
      "date": "2018-01-30",
      "deviceType": "All",
      "sandboxId": "RETAIL",
      "packageVersion": "Unknown",
      "callingpattern": [
        {
          "service": "userstats",
          "endpoint": "UserStats.BatchReadHandler.POST",
          "httpStatusCode": "200",
          "serviceResponses": 160891,
          "uniqueDevices": 410,
          "uniqueUsers": 410
        },
        {
          "service": "userstats",
          "endpoint": "UserStats.BatchStatReadHandler.GET",
          "httpStatusCode": "200",
          "serviceResponses": 422,
          "uniqueDevices": 0,
          "uniqueUsers": 30
        }
      ],
    }
  ],
  "@nextLink": null,
  "TotalCount": 1
}
```

## <a name="related-topics"></a>См. также

* [Доступ к данным аналитики с помощью служб Microsoft Store](access-analytics-data-using-windows-store-services.md)
* [Получить аналитические данные Xbox Live](get-xbox-live-analytics.md)
* [Получение данных достижения Xbox Live](get-xbox-live-achievements-data.md)
* [Получение данных концентратора-игр Xbox Live](get-xbox-live-game-hub-data.md)
* [Получение данных клуба Xbox Live](get-xbox-live-club-data.md)
* [Получение данных в многопользовательской, Xbox Live](get-xbox-live-multiplayer-data.md)
