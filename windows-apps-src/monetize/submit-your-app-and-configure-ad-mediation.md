---
author: mcleanbyron
ms.assetid: 69E05E56-B5F0-4D4C-A1FF-B6EAFF5D0E28
description: "Во время отправки можно настроить необходимое поведение посредничества рекламы. Вы сможете изменить это поведение позже, не внося изменений в код и не отправляя новые пакеты."
title: "Отправка приложения и настройка рекламного посредника"
ms.sourcegitcommit: ec7ce299545de8e5c167e1934fb9a0b4f4370948
ms.openlocfilehash: 13dd6a9c38d85ead29a43f470b7c0f63d025d612

---

# Отправка приложения и настройка рекламного посредника


\[ Обновлено для приложений UWP в Windows10. Статьи о Windows8.x см. в [архиве](http://go.microsoft.com/fwlink/p/?linkid=619132) \]


Как только вы создали приложение, включили все рекламные сети, которые захотите использовать, и проверили, что всё работает, вы готовы отправить приложение. Во время отправки можно настроить необходимое поведение посредничества рекламы. Вы сможете изменить это поведение позже, не внося изменений в код и не отправляя новые пакеты.

## Создание базовой конфигурации для пакета приложения


При загрузке пакетов Центр разработки автоматически выявляет, что вы используете посредничество рекламы, и определяет, какие рекламные сети используются. На странице **Пакеты** вы увидите ссылку **Настройка рекламного посредника**. Щелкните эту ссылку, чтобы перейти на страницу [Получение дохода с помощью рекламы](https://msdn.microsoft.com/library/windows/apps/mt170658), где вы сможете настроить логику работы посредника в разделе **Рекламный посредник Windows**. Дополнительные сведения о других разделах на этой странице см. в разделе Получение дохода с помощью рекламы.

При первой настройке параметров рекламного посредника вы создадите базовую конфигурацию. После настройки базовой конфигурации можно добавить конфигурации для конкретных рынков, чтобы воспользоваться преимуществами определенных рекламных сетей на разных рынках. Если вы решили не настраивать параметры рекламного посредника до отправки приложения, Центр разработки автоматически применит [настройки по умолчанию](#default-ad-mediation-settings). Вы сможете [изменить эти параметры позже](#optimize-ad-mediation-after-the-app-has-been-published).

Ниже описаны действия, которые нужно выполнить, чтобы создать базовую конфигурацию в разделе **Рекламный посредник Windows** на странице **Получение дохода с помощью рекламы**.

1.  В разделе **Настройка посредника для** убедитесь, что выбран пакет приложения, который требуется настроить.
2.  В разделе **Цель** убедитесь, что выбран параметр **Базовый**.
3.  В разделе **Частота обновления** задайте длину цикла посредничества (как часто должны отображаться новые объявления). Длительность цикла должна составлять от 30 до 120 секунд.
  > 
            **Примечание**. Если вы уже настроили частоту обновления для одного из порталов рекламных сетей, обязательно задайте ту же частоту обновления здесь.

4.  Затем в разделе **Рекламный посредник Windows** представлены все рекламные сети, используемые вашим приложением, а также описаны два разных способа указания того, как часто приложение должно использовать каждую рекламную сеть. Выберите один из следующих параметров в раскрывающемся списке **Тип посредника**:

    -   
            **Упорядочить по весу**. Выберите этот параметр, чтобы применять значения в процентах к каждой рекламной сети, которые определяют, как часто рекламные сети должны использоваться приложением. Общее число процентов, установленное для всех рекламных сетей, должно равняться 100%. Дополнительные сведения см. в разделе [Упорядочивание рекламных сетей по весу](#order-ad-networks-by-weight).
    -   
            **Упорядочить по рангу**. Выберите этот параметр, чтобы применять к каждой рекламной сети номер ранжирования от 1 до *n*, который определяет, как часто приложение должно использовать каждую рекламную сеть. Дополнительные сведения см. в разделе [Упорядочивание рекламных сетей по рангу](#order-ad-networkds-by-rank).

    Центр разработки автоматически применяет [настройки по умолчанию](#default-ad-mediation-settings), которые указывают, как часто приложение должно использовать каждую рекламную сеть.

5.  В списке рекламных сетей, используемых приложением, щелкните стрелку раскрывающегося меню для каждого поставщика рекламной сети для просмотра необходимых параметров каждой из сетей и введите обязательные параметры. Перечень этих параметров см. в разделе [Выбор рекламных сетей и управление ними](select-and-manage-your-ad-networks.md).

    В развернутом списке параметров каждой сети при необходимости можно использовать поле **Таймаут**, чтобы указать время в секундах (от 2 до 120), в течение которого рекламный посредник должен ждать после отправки запроса на объявление из этой рекламной сети, прежде чем отключить этот запрос и отправить его в другую сеть. Если вы уже [указали это значение в коде](add-and-use-the-ad-mediator-control.md#set-timeouts), оно переопределяет значение, заданное здесь.

    Если вы используете сеть Microsoft Advertising, обратите внимание на следующее.

    -   Параметры для **Microsoft Advertising** заполняются автоматически в зависимости от содержимого пакета приложения. По желанию можно указать свои собственные значения **ИД приложения** и **ИД рекламного блока** для **Microsoft Advertising**.
    -   В дополнение к **Microsoft Advertising**, также существует строка для **Microsoft Advertising house ads**. Собственные объявления предоставляют возможность создавать бесплатные рекламные объявления ваших приложений в других ваших приложениях. Хотя собственные объявления бесплатные, выбранный объем собственной рекламы выделяется из одного пула с другими рекламными сетями. Поэтому, если выделить запросы рекламы для параметра **Microsoft Advertising house ads**, весь суммарный объем рекламы будет выделен для собственных объявлений. Если вы выделяете запросы на рекламу собственным объявлениям, то при этом должны создать собственную рекламную кампанию минимум для еще одного приложения, зарегистрированного в вашей учетной записи разработчика. Дополнительные сведения см. в разделе [Общие сведения о собственных рекламных объявлениях](https://msdn.microsoft.com/library/windows/apps/mt148566).

6.  Щелкните **Сохранить**, чтобы сохранить базовую конфигурацию.

### Упорядочивание рекламных сетей по весу

Выберите этот параметр в раскрывающемся списке **Тип посредника**, чтобы указать значения в процентах, которые определяют, как часто приложение должно использовать каждую рекламную сеть. Общее число процентов, установленное для всех рекламных сетей, должно равняться 100%.

Для автоматического равномерного распространения запросов по всем вашим сетям щелкните ссылку **Распространять запросы объявлений равномерно по всем активным рекламным сетям**. Для неравномерного распространения запросов используйте элементы управления "ползунки", чтобы указать, как часто приложение должно использовать каждую рекламную сеть. Общее число процентов, установленное для всех рекламных сетей, должно равняться 100%. Доступны несколько вариантов настройки с помощью "ползунков".

-   Если вы перетаскиваете "ползунок" к числу, это число будет указывать процент времени, когда эта рекламная сеть будет вызвана первой в цикле посредничества для конкретного приложения.
-   Если перетащить "ползунок" к элементу **Резерв**, это означает, что данная рекламная сеть должна вызываться только в том случае, если ни одна из рекламных сетей с назначенным процентом не может предоставить объявление. Это эквивалентно установке значения 0% для процентов.
-   Если переместить ползунок к элементу **Неактивна**, это будет означать, что данная рекламная сеть использоваться не будет. Сборки для рекламной сети останутся в пакете, но посредник не будет пытаться вызвать их. Этот параметр можно установить для конфигураций для конкретных рынков, чтобы исключить рекламные сети, которые известны своими низкими показателями или которые не поддерживаются на определенном рынке.
-   Если для рекламной сети установить процентное значение, все другие "ползунки", для которых установлено значение, отличное от значения **Резерв**, будут автоматически отрегулированы так, чтобы суммарное распределение равнялось 100%. Если для рекламной сети установить флажок **Заблокировать**, то настройка этой рекламной сети останется зафиксированной на текущем значении. Затем можно изменить значения для других рекламных сетей без влияния этих изменений на значение заблокированной рекламной сети

### Упорядочивание рекламных сетей по рангу

Выберите этот параметр в раскрывающемся списке **Тип посредника**, чтобы применить к каждой рекламной сети номер ранжирования от 1 до *n*, который определяет, как часто приложение должно использовать каждую рекламную сеть.

Если снять флажок **Активна** для рекламной сети, она никогда не будет вызываться. Сборки для рекламной сети останутся в пакете, но посредник не будет пытаться вызвать их. Этот параметр можно установить для конфигураций конкретных рынков, чтобы исключить рекламные сети, которые известны своими низкими показателями, или которые не поддерживаются на определенном рынке.

### Параметры рекламного посредника по умолчанию

По умолчанию Центр разработки применяет к приложениям следующие настройки рекламного посредника на странице **Монетизация с использованием объявлений**. Такие же значения по умолчанию применяются, если вы решили не настраивать рекламный посредник до отправки своего приложения.

-   Если ваше приложение использует Microsoft Advertising, для параметра **Microsoft Advertising** устанавливается значение 100 (если выбрать параметр **Упорядочить по весу**) или 1 (если выбрать параметр **Упорядочить по рангу**), а для других рекламных сетей устанавливается значение "Неактивна".
-   Если ваше приложение не использует Microsoft Advertising, значение "Неактивна" устанавливается для всех рекламных сетей.

## Создание новой целевой конфигурации


После создания базовой конфигурации для своего приложения вы можете создать дополнительные конфигурации, которые будут использоваться на определенных рынках. Новые конфигурации наследуют начальные параметры из базовой конфигурации, но вы можете изменить их для определенных поддерживаемых вашим приложением рынков.

Чтобы создать новую целевую конфигурацию, выполните следующие действия.

1.  В разделе **Цель** выберите рынок, для которого нужно создать новую конфигурацию.
2.  Укажите необходимые значения частоты обновления и распространения рекламных запросов.
3.  Щелкните **Сохранить**, чтобы сохранить новую конфигурацию.

## Оптимизация рекламного посредника после публикации приложения


Если необходимо настроить посредничество рекламы для конкретного приложения, это можно сделать в любое время, не оправляя приложения повторно. Это полезно, если вы уже добавили рекламные сети в свое приложение, для которых ранее не были настроены учетные записи, или если вы узнали, что одна из рекламных сетей не может надежно заполнять объявления на определенных рынках. Можно внести изменения в базовую конфигурацию, а также в конфигурации для конкретных рынков. При необходимости также можно добавить или удалить конфигурации для конкретных рынков.

Чтобы вернуться к параметрам посредничества для вашего приложения, выполните одно из следующих действий.

-   На странице обзора вашей учетной записи, на панели мониторинга щелкните свое приложение в разделе **Рекламный посредник**.
-   На странице обзора приложения, на панели мониторинга разверните элемент **Получение дохода** и щелкните **Монетизация с использованием объявлений**.

## Параметры рекламного посредника и обновление приложений


При отправке обновления для приложения существующая конфигурация рекламного посредника для этого приложения автоматически применяется к пакету обновления в случае выполнения следующих условий.

-   Количество элементов управления **AdMediatorControl** совпадает с количеством элементов управления в предыдущем пакете приложения, и все элементы управления имеют те же идентификаторы, что и в предыдущем пакете приложения.
-   Список поставщиков рекламной сети совпадает со списком в предыдущем пакете приложения.

Если хоть одно из этих условий не выполняется, вам нужно будет заново создавать базовую конфигурацию и все применимые целевые конфигурации для конкретных рынков для вашего приложения.

> 
            **Примечание**. Идентификатор **AdMediatorControl** создается при перетаскивании элемента управления в рабочую область конструирования приложения. Этот идентификатор не изменяется, за исключением случаев удаления элемента управления и затем замены его путем перетаскивания нового элемента управления в ту же рабочую область конструирования.

 

## Просмотр отчетов рекламного посредника в универсальной информационной панели Центра разработки


Чтобы просмотреть отчеты по посредничеству рекламы, перейдите в раздел **Аналитика** в Центре разработки и щелкните **Посредничество рекламы**. Подробнее о этом отчете см. в разделе [Отчет по посредничеству рекламы](https://msdn.microsoft.com/library/windows/apps/mt148521).

## Примеры сценариев


Можно настроить рекламные сети различными способами для поддержки различных целей и сценариев. Примеры ниже показывают, как можно настроить рекламный посредник с помощью параметра **Упорядочить по весу**, если вы включили три рекламные сети. В качестве примеров сетей будут использоваться рекламные сети Microsoft Advertising, Inneractive и AdDuplex.

### Пример 1.

Перед началом оптимизации вы хотите узнать частоту заполнения и стоимость за тысячу просмотров (eCPM) для всех сетей.

Для начала установите равномерное распределение трафика посредничества для всех сетей. Позже можно просмотреть отчеты каждой из рекламных сетей, чтобы определить рекламные сети с наивысшими показателями для каждого рынка.

Через несколько дней или недель вы хотите проверить частоту заполнения и eCPM для каждого из порталов рекламных сетей. Это поможет определить наилучшие рекламные сети для каждого рынка. Затем можно внести изменения для определенных рынков (или для всех), не отправляя новые пакеты.

### Пример 2.

Вы хотите использовать сеть Microsoft Advertising первой при любой возможности. Если Microsoft Advertising не может предоставить объявление, вы можете использовать любую из других рекламных сетей как резервную, при этом ни одна из оставшихся сетей не будет иметь приоритета над другими сетями.

| Рекламная сеть            | Конфигурация |
|-----------------------|---------------|
| Microsoft             | 100%          |
| Inneractive           | Резервное копирование        |
| AdDuplex              | Резервное копирование        |

### Пример 3.

В целом вы хотите сначала использовать сеть Microsoft Advertising. Если Microsoft Advertising не может предоставить объявление, вы хотите, чтобы Inneractive вызывалась перед AdDuplex.

| Рекламная сеть            | Конфигурация |
|-----------------------|---------------|
| Microsoft             | 90%           |
| Inneractive           | 10%           |
| AdDuplex              | Резервное копирование        |

### Пример 4.

Вы хотите в равной мере использовать Microsoft Advertising и Inneractive, обеспечив в приложении большее разнообразие объявлений, чем при использовании только одной сети, которая всегда вызывается первой. Если ни одна из рекламных сетей недоступна, вы сможете использовать AdDuplex как резервную.

| Рекламная сеть            | Конфигурация |
|-----------------------|---------------|
| Microsoft             | 50%           |
| Inneractive           | 50%           |
| AdDuplex              | Резервное копирование        |


## Ссылки по теме

* [Выбор рекламных сетей и управление ими](select-and-manage-your-ad-networks.md)
* [Добавление и использование элемента управления рекламного посредника](add-and-use-the-ad-mediator-control.md)
* [Проверка реализации рекламного посредника](test-your-ad-mediation-implementation.md)
* [Устранение неполадок рекламного посредника](troubleshoot-ad-mediation.md)
 

 



<!--HONumber=Jun16_HO4-->


