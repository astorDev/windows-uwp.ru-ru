---
author: mcleanbyron
ms.assetid: F45E6F35-BC18-45C8-A8A5-193D528E2A4E
description: "Узнайте, как включить покупки из приложения и пробные версии в приложениях UWP."
title: "Покупки из приложения и пробные версии"
ms.author: mcleans
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: "windows 10, uwp, покупки из приложения, IAP, надстройки, пробные версии, потребляемые, длительного пользования"
translationtype: Human Translation
ms.sourcegitcommit: c6b64cff1bbebc8ba69bc6e03d34b69f85e798fc
ms.openlocfilehash: ade314f79edf73527f29e937f8eab987c902802f
ms.lasthandoff: 02/07/2017

---

# <a name="in-app-purchases-and-trials"></a>Покупки из приложения и пробные версии

Пакет Windows SDK предоставляет API, которые можно использовать для реализации следующих функций, позволяющих получать прибыль от своего приложения универсальной платформы Windows (UWP):

* **Покупки из приложения**&nbsp;&nbsp;Независимо от того, является ли ваше приложение бесплатным или нет, вы можете продавать содержимое, другие приложения или новые функциональные возможности (например, разблокирование следующего уровня игры) прямо из приложения.

* **Функциональность пробной версии**&nbsp;&nbsp;Если вы настраиваете свое приложение в качестве [бесплатной пробной версии на информационной панели Центра разработки для Windows](../publish/set-app-pricing-and-availability.md#free-trial), можно привлечь их к приобретению полной версии приложения путем удаления или ограничения некоторых функций в течение пробного периода. Вы можете также включить такие компоненты, как баннеры или водяные знаки, которые будут отображаться только во время испытательного срока, пока пользователь не купит приложение.

Эта статья содержит обзорные сведения о том, как в приложениях UWP работают покупки из приложения и пробные версии.

<span id="choose-namespace" />
## <a name="choose-which-namespace-to-use"></a>Выбор пространства имен

Существует два разных пространствах имен, которые можно использовать для добавления функций покупок из приложения и пробной версии в приложениях UWP в зависимости от того, для какой версии Windows 10 предназначены ваши приложения. Несмотря на то что API в этих пространствах имен служат тем же целям, они различаются принципами разработки и имеют несовместимый код.

* **[Windows.Services.Store](https://msdn.microsoft.com/library/windows/apps/windows.services.store.aspx)**&nbsp;&nbsp;Начиная с Windows 10 версии 1607, приложения могут использовать API в этом пространстве имен для реализации функциональности покупок из приложения и пробных версий. Рекомендуется использовать элементы из этого пространства имен, если ваше приложение предназначено для Windows 10 версии 1607 или выше. Это пространство имен поддерживает новейшие типы надстроек, включая потребляемые надстройки, управляемые Магазином, а его архитектура обеспечивает совместимость с будущими продуктами и компонентами, которые поддерживаются Центром разработки для Windows и Магазином. Дополнительные сведения об этом пространстве имен см. в разделе [Покупки из приложения и пробные версии, использующие пространство имен Windows.Services.Store](#api_intro) этой статьи.

* **[Windows.ApplicationModel.Store](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.store.aspx)**&nbsp;&nbsp;Все версии Windows 10 также поддерживают устаревший API для покупок из приложения и пробных версий в этом пространстве имен. Несмотря на то что любое приложение UWP для Windows 10 может использовать это пространство имен, его невозможно обновить для поддержки новых типов продуктов и функций в Центре разработки или Магазине в будущем. Сведения об этом пространстве имен см. в разделе [Покупки из приложения и пробные версии, использующие пространство имен Windows.ApplicationModel.Store](in-app-purchases-and-trials-using-the-windows-applicationmodel-store-namespace.md).

<span id="concepts" />
## <a name="basic-concepts"></a>Основные понятия

В этом разделе рассматриваются основные принципы покупки из приложения и пробных версий в приложениях UWP. Большая часть сказанного здесь актуальна для обоих пространств имен: **Windows.Services.Store** и **Windows.ApplicationModel.Store**, если не указано иное.

Каждый элемент, предлагаемый в Магазине, как правило, называется *продукт*. Большинство разработчиков работают со следующими типами продуктов: *приложения* и *надстройки* (которые также известны под названием «продукты из приложения» или API).

Надстройкой называют продукт или функцию, которую вы предоставляете своим клиентам (пользователям) в контексте приложения: например, валюту для использования в приложении или игре, новые карты или оружие для игры, возможность использовать приложение без рекламы, а также цифровое содержимое (музыку или видео) для приложений, в которых реализована возможность предоставления такого типа содержимого. С каждым приложением и каждой надстройкой связана лицензия, указывающая, имеет ли пользователь право на использование приложения или надстройки. Если пользователь имеет право на использование приложения или надстройки в качестве пробной версии, лицензия также предоставляет дополнительную информацию об этой пробной версии.

Чтобы предоставлять клиентам надстройки в своем приложении, необходимо [определить надстройку для вашего приложения на информационной панели Центра разработки](../publish/iap-submissions.md), чтобы Магазин был оповещен об этом. Затем ваше приложение может использовать API в пространстве имен **Windows.Services.Store** или **Windows.ApplicationModel.Store**, чтобы предложить пользователю надстройку в качестве покупки из приложения.

Приложения UWP могут иметь следующие типы надстроек.

| Тип надстройки |  Описание  |
|---------|-------------------|
| Длительное пользование  |  Надстройка, которая существует в течение срока, указанного вами на [информационной панели Центра разработки для Windows](../publish/enter-iap-properties.md). <p/><p/>По умолчанию срок действия надстроек длительного пользования никогда не истекает, а приобрести их можно только один раз. Если указать для надстройки определенный срок действия, пользователь сможет повторно приобрести ее по окончании срока действия. |
| Потребляемые надстройки, управляемые разработчиком  |  Надстройка, которую можно приобрести, использовать и приобрести снова. Этот тип надстройки часто используется для валюты в приложении. <p/><p/>Для этого типа потребляемых надстроек вы отвечаете за отслеживание баланса пользователя по продуктам, представляемым надстройкой, а также за сообщение Магазину о том, что купленная надстройка израсходована, после того как пользователь израсходует все элементы. Пользователь не может снова приобрести надстройку, пока ваше приложение не сообщит об израсходовании предыдущей покупки. <p/><p/>Например, если ваша надстройка представляет 100 игровых монет и пользователь израсходовал 10 монет, ваше приложение или служба должны поддерживать для пользователя новый баланс остатка в 90 монет. Когда пользователь израсходует все 100 монет, ваше приложение должно сообщить, что надстройка израсходована, после чего пользователь снова сможет приобрести 100 монет из надстройки.    |
| Потребляемые надстройки, управляемые Магазином  |  Надстройка, которую можно приобрести, использовать и приобрести снова. Этот тип надстройки часто используется для валюты в приложении.<p/><p/>Для этого типа потребляемых надстроек учет баланса пользователя производится Магазином. Когда пользователь использует какие-либо элементы, вы должны сообщить Магазину, что эти элементы израсходованы, после чего Магазин обновляет баланс пользователя. Приложение может в любой момент запросить текущий баланс пользователя. Когда пользователь израсходует все элементы, он снова может приобрести надстройку.  <p/><p/> Например, если надстройка представляет начальную сумму в 100 игровых монет и пользователь израсходовал 10 монет, приложение сообщает Магазину, что израсходованы 10 единиц надстройки, и Магазин обновляет баланс. Когда пользователь израсходует все 100 монет, он сможет снова купить 100 монет надстройки. <p/><p/>**Примечание.**&nbsp;&nbsp;Потребляемые элементы, управляемые Магазином, доступны начиная с Windows 10 версии 1607. Для использования управляемых магазином надстроек ваше приложение должно быть предназначено для Windows 10 версии 1607 или выше, и оно должно использовать API в пространстве имен **Windows.Services.Store**, а не **Windows.ApplicationModel.Store**.  |

<span />

>**Примечание.**&nbsp;&nbsp;Другие типы надстроек, например надстройки длительного пользования с пакетами (также известны как "загружаемое содержимое" или DLC), доступны ограниченному кругу разработчиков и не освещаются в этой документации.

<span id="api_intro" />
## <a name="in-app-purchases-and-trials-using-the-windowsservicesstore-namespace"></a>Покупки из приложения и пробные версии, использующие пространство имен Windows.Services.Store

Далее в этой статье описана реализация покупок из приложения и пробных версий с использованием пространства имен [Windows.Services.Store](https://msdn.microsoft.com/library/windows/apps/windows.services.store.aspx). Это пространство имен доступно только для приложений, предназначенных для Windows 10 версии 1607 или выше, и мы рекомендуем использовать это пространство имен вместо [Windows.ApplicationModel.Store](https://msdn.microsoft.com/library/windows/apps/windows.applicationmodel.store.aspx), если возможно.

Сведения о пространстве имен **Windows.ApplicationModel.Store** см. [в этой статье](in-app-purchases-and-trials-using-the-windows-applicationmodel-store-namespace.md).

### <a name="get-started-with-the-storecontext-class"></a>Начало работы с классом StoreContext

Главной точкой входа в пространство имен **Windows.Services.Store** является класс [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx). Этот класс предоставляет методы, которые можно использовать, чтобы получить сведения о текущем приложении и его доступных надстройках, получить лицензионные сведения о текущем приложении или его надстройках, приобрести приложение или надстройку для текущего пользователя и решить другие задачи. Чтобы получить объект [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx), выполните одно из следующих действий.

* В однопользовательском приложении (то есть приложении, которое работает только в контексте пользователя, который запустил это приложение) воспользуйтесь статическим методом [GetDefault](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.getdefault.aspx), чтобы получить объект **StoreContext**, который можно использовать для доступа к актуальным для пользователя данным, связанным с Магазином Windows. Большинство приложений UWP — это однопользовательские приложения.

  > [!div class="tabbedCodeSnippets"]
  ```csharp
  Windows.Services.Store.StoreContext context = StoreContext.GetDefault();
  ```

* В [многопользовательском](../xbox-apps/multi-user-applications.md) приложении используйте статический метод [GetForUser](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.getforuser.aspx), чтобы получить объект **StoreContext**, который можно использовать для доступа к данным, связанным с Магазином Windows. Речь идет о данных для конкретного пользователя, который при работе с приложением выполнил вход с учетной записью Майкрософт. В следующем примере мы получим объект **StoreContext** для первого доступного пользователя.

  > [!div class="tabbedCodeSnippets"]
  ```csharp
  var users = await Windows.System.User.FindAllAsync();
  Windows.Services.Store.StoreContext context = StoreContext.GetForUser(users[0]);
  ```

>**Примечание**&nbsp;&nbsp;Классические приложения для Windows, использующие [мост для настольных компьютеров](https://developer.microsoft.com/windows/bridges/desktop), должны выполнить дополнительные действия для настройки объекта [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx), чтобы его можно было использовать. Дополнительные сведения см. в [этом разделе](#desktop).

Получив объект [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx), можно начать вызывать методы этого объекта для получения сведений о продукте из Магазина для текущего приложения и его надстроек, получать сведения о лицензии для текущего приложения и его надстроек, приобретать приложение или надстройку для текущего пользователя и выполнять другие задачи. Дополнительные сведения об общих задачах, которые можно выполнять с помощью этого объекта, см. в следующих статьях:

* [Получение информации о продукте для приложений и надстроек](get-product-info-for-apps-and-add-ons.md)
* [Получение информации о лицензии для приложений и надстроек](get-license-info-for-apps-and-add-ons.md)
* [Поддержка покупок приложений и расширений внутри приложения](enable-in-app-purchases-of-apps-and-add-ons.md)
* [Поддержка покупок потребляемых надстроек](enable-consumable-add-on-purchases.md)
* [Внедрение пробной версии приложения](implement-a-trial-version-of-your-app.md)

Пример приложения, в котором показано, как использовать класс **StoreContext** и другие типы в пространстве имен **Windows.Services.Store**, см. в разделе [Образец из Магазина](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/Store).

<span id="implement-iap" />
### <a name="implement-in-app-purchases"></a>Реализация покупок из приложения

Чтобы предложить покупки из приложения пользователям вашего приложения, используя пространство имен **Windows.Services.Store**, выполните следующие действия:

1. Если ваше приложение предлагает надстройки, которые можно приобрести, [создайте отправки надстроек для вашего приложения на информационной панели Центра разработки](https://msdn.microsoft.com/windows/uwp/publish/add-on-submissions).

2. Напишите код в приложении для [извлечения сведений о продукте для вашего приложения или надстройки, предлагаемой приложением,](get-product-info-for-apps-and-add-ons.md) а затем [определите, активна ли лицензия](get-license-info-for-apps-and-add-ons.md) (то есть имеется ли у пользователя лицензия на использование приложения или надстройки). Если лицензия неактивна, отобразите пользовательский интерфейс, предлагающий приложение или надстройку для продажи пользователю в качестве покупки из приложения.

3. Если пользователь решает приобрести ваше приложение или надстройку, используйте для покупки продукта соответствующий метод.

  * Если пользователь покупает приложение или надстройку для долгосрочного использования, следуйте указаниям в разделе [Включение покупок из приложений для приложений и надстроек](enable-in-app-purchases-of-apps-and-add-ons.md).

  * Если пользователь покупает потребляемую надстройку, следуйте инструкциям в разделе [Включение покупок потребляемых надстроек](enable-consumable-add-on-purchases.md).

4. Проверьте внедрение, следуя [руководству по тестированию](#testing) в этой статье.

<span id="implement-trial" />
### <a name="implement-trial-functionality"></a>Реализации функциональности пробной версии

Чтобы исключить или ограничить функции в пробной версии приложения с помощью пространства имен **Windows.Services.Store**, выполните следующие действия:

1. [Настройте приложение в качестве бесплатной пробной версии на информационной панели Центра разработки Windows](../publish/set-app-pricing-and-availability.md#free-trial).

2. Напишите код в приложении, чтобы [извлечь сведения о продукте для вашего приложения или надстройки, предлагаемой в приложении,](get-product-info-for-apps-and-add-ons.md) а затем [определить, является ли связанная с приложением лицензия лицензией на пробную версию](get-license-info-for-apps-and-add-ons.md).

3. Исключите или ограничьте определенные функции приложения, если это пробная версия, а затем включите их, если пользователь приобретет полную лицензию. Дополнительные сведения и пример кода см. в разделе [Внедрение пробной версии приложения](implement-a-trial-version-of-your-app.md).

4. Проверьте внедрение, следуя [руководству по тестированию](#testing) в этой статье.

<span id="testing" />
### <a name="test-your-in-app-purchase-or-trial-implementation"></a>Проверка вашей покупки из приложения или реализации пробной версии

Пространство имен **Windows.Services.Store** не предоставляет класс, который можно использовать для имитации лицензионных сведений во время тестирования. Вместо этого необходимо опубликовать приложение в Магазине и скачать его на свое устройство разработки, чтобы использовать его лицензию для тестирования. В приложениях, использующих пространство имен **Windows.ApplicationModel.Store**, действует несколько другой принцип, поскольку эти приложения могут использовать класс [CurrentAppSimulator](https://msdn.microsoft.com/library/windows/apps/hh779766) для моделирования лицензионных сведений во время тестирования.

Если приложение использует API в пространстве имен **Windows.Services.Store** для доступа к информации для вашего приложения и его надстроек, выполните следующие инструкции, чтобы протестировать код.

1. Если ваше приложение еще не опубликовано и не доступно в Магазине, убедитесь, что приложение соответствует минимальным требованиям [комплекта сертификации приложений для Windows](https://developer.microsoft.com/windows/develop/app-certification-kit), [отправьте свое приложение](https://msdn.microsoft.com/windows/uwp/publish/app-submissions) на информационную панель Центра разработки для Windows и убедитесь, что ваше приложение прошло сертификацию и доступно в Магазине. При желании можно [скрыть приложение в Магазине](https://msdn.microsoft.com/windows/uwp/publish/set-app-pricing-and-availability), чтобы оно было недоступно клиентам на этапе тестирования.

2. Затем убедитесь, что вы выполнили следующие действия:

  * Напишите код в приложении, которое использует класс [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx) и другие связанные типы в пространстве имен **Windows.Services.Store**, чтобы реализовать функцию [покупок из приложения](#implement-iap) или [пробной версии](#implement-trial).

  * Если ваше приложение предлагает надстройку, которую можно приобрести, [создайте отправку надстройки для вашего приложения на информационной панели Центра разработки](https://msdn.microsoft.com/windows/uwp/publish/add-on-submissions).

  * Если вы хотите исключить или ограничить некоторые функциональные возможности пробной версии приложения, [настройте приложение в качестве бесплатной пробной версии на информационной панели Центра разработки для Windows](../publish/set-app-pricing-and-availability.md#free-trial).

3. Открыв проект в Visual Studio, щелкните **Меню проекта**, укажите на **Магазин** и выберите **Связать приложение с Магазином**. Выполните инструкции мастера, чтобы связать проект приложения с приложением в вашей учетной записи Центра разработки для Windows, которое требуется использовать для тестирования.

  >**Примечание.**&nbsp;&nbsp;Если не связать свой проект с приложением в Магазине, методы[StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx) присвоят свойству **ExtendedError** возвращаемых значений этих методов значение кода ошибки 0x803F6107. Это значение указывает, что Магазин ничего не знает об этом приложении.

4. Если вы еще не сделали этого, установите приложение из Магазина (см. предыдущий шаг), запустите приложение один раз и затем закройте его. Это гарантирует, что на устройстве разработки установлена действующая лицензия приложения.

5. Запустите свой проект или начните его отладку в Visual Studio. Код должен извлечь данные приложения и надстройки из приложения Магазина, которое вы связали с локальным проектом. В ответ на предложение переустановить приложение выполните инструкции, а затем запустите свой проект или начните его отладку.

>**Примечание.**&nbsp;&nbsp;После выполнения шагов 1–5 вы сможете продолжить обновлять код вашего приложения, а затем выполнить отладку обновленного проекта на компьютере для разработки без отправки новых пакетов приложения в Магазин. Чтобы получить локальную лицензию, которая будет использоваться для тестирования, необходимо всего один раз скачать версию вашего приложения в Магазине на ваш компьютер для разработки. Вам всего лишь необходимо отправить новые пакеты приложения в Магазин после завершения тестирования, и когда вам потребуется открыть доступ для пользователей к покупкам из приложения или возможностям пробной версии вашего приложения.

<span id="receipts" />
### <a name="receipts-for-in-app-purchases"></a>Чеки для покупок из приложения

Пространство имен **Windows.Services.Store** не предоставляет API, который можно использовать для получения чека об успешном совершении покупки, в коде приложения. Это отличается от приложений, использующих пространство имен **Windows.ApplicationModel.Store**, которое может использовать [клиентский API для извлечения чека о выполнении транзакции](use-receipts-to-verify-product-purchases.md).

Если функция покупок из приложения реализована с использованием пространства имен **Windows.Services.Store** и требуется поверить, приобрел ли этот клиент приложение или надстройку, можно воспользоваться [запросом метода продуктов ](query-for-products.md) в [API REST коллекции Магазина Windows](view-and-grant-products-from-a-service.md). Возвращаемые этим методом данные подтверждают, имеет ли указанный клиент право на использование этого продукта, и предоставляют информацию для транзакции, в которой пользователь приобрел этот продукт. API коллекции Магазина Windows использует для извлечения этой информации аутентификацию Azure AD.

<span id="desktop" />
### <a name="using-the-storecontext-class-with-the-desktop-bridge"></a>Использование класса StoreContext с мостом для настольных ПК

Классические приложения, использующие [мост для настольных компьютеров](https://developer.microsoft.com/windows/bridges/desktop), могут реализовать покупки из приложения и пробную версию с помощью класса [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx). Тем не менее если у вас есть классические приложения Win32 или классическое приложение, которое содержит дескриптор окна (HWND), связанный со структурой визуализации (например, приложение WPF), приложение должно настроить объект **StoreContext** так, чтобы указать, какое окно приложения является окном-владельцем модальных диалоговых окон, отображаемых объектом.

Многие участники класса **StoreContext** (и участники других связанных типов, доступ к которым осуществляется через объект **StoreContext**) отображают пользователю модальное диалоговое окно для выполнения связанных с Магазином операций, например покупки продукта. Если в классическом приложении не настроен объект **StoreContext**, чтобы задать владельца окна для модальных диалоговых окон, этот объект будет возвращать неточные данные или ошибки.

Чтобы настроить объект **StoreContext** в классическом приложении, использующем мост для настольных компьютеров, выполните следующие действия.

  1. Выполните одно из следующих действий, чтобы предоставить приложению доступ к интерфейсу [IInitializeWithWindow](https://msdn.microsoft.com/library/windows/desktop/hh706981.aspx).

    * Если приложение написано на управляемом языке, например C# или Visual Basic, объявите интерфейс **IInitializeWithWindow** в коде приложения с атрибутом [ComImport](https://msdn.microsoft.com/library/system.runtime.interopservices.comimportattribute.aspx), как показано в следующем примере кода на C#. В этом примере предполагается, что файл кода имеет оператор **using** для пространства имен **System.Runtime.InteropServices**.

      > [!div class="tabbedCodeSnippets"]
      ```csharp
      [ComImport]
      [Guid("3E68D4BD-7135-4D10-8018-9FB6D9F33FA1")]
      [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
      public interface IInitializeWithWindow
      {
          void Initialize(IntPtr hwnd);
      }
      ```

    * Если приложения написано на языке C++, добавьте ссылку на файл заголовка shobjidl.h в коде. Файл заголовка содержит объявление интерфейса **IInitializeWithWindow**.

  2. Получите объект [StoreContext](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.aspx), используя метод [GetDefault](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.getdefault.aspx) (или метод [GetForUser](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storecontext.getforuser.aspx), если ваше приложение является [многопользовательским](../xbox-apps/multi-user-applications.md)), как описано выше в этой статье, и приведите этот объект к объекту [IInitializeWithWindow](https://msdn.microsoft.com/library/windows/desktop/hh706981.aspx). Затем вызовите метод [IInitializeWithWindow.Initialize](https://msdn.microsoft.com/library/windows/desktop/hh706982.aspx) и передайте дескриптор окна, которое вы хотите сделать владельцем любых модальных диалоговых окон, которые отображаются методами **StoreContext**. В следующем примере кода на C# показана передача дескриптора главного окна приложения методу.

    > [!div class="tabbedCodeSnippets"]
    ```csharp
    StoreContext context = StoreContext.GetDefault();
    IInitializeWithWindow initWindow = (IInitializeWithWindow)(object)context;
    initWindow.Initialize(System.Diagnostics.Process.GetCurrentProcess().MainWindowHandle);
    ```

<span id="products-skus" />
### <a name="products-skus-and-availabilities"></a>Продукты, SKU и доступность

Каждый продукт в Магазине имеет по меньшей мере одну *SKU*, а каждая SKU — по меньшей мере одну *доступность*. Разработчики избавлены от необходимости работать с этими абстрактными концепциями на информационной панели Центра разработки для Windows, и большинство разработчиков никогда не определяют SKU или доступности для своих приложений или надстроек. Поскольку объектная модель для продуктов из Магазина в пространстве имен **Windows.Services.Store** все же содержит SKU и доступности, общие сведения об этих понятиях будут вам полезны.

| Тип объекта |  Описание  |
|---------|-------------------|
| [StoreProduct](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storeproduct.aspx)  |  Этот класс представляет любой тип продукта, который доступен в Магазине, включая приложение или надстройку. Этот класс предоставляет свойства, которые можно использовать для получения доступа к данным, таким как код продукта в Магазине, изображения и видео для описания в Магазине и сведения о ценах. Кроме того, класс предоставляет методы, которые можно использовать для приобретения продукта. |
| [StoreSku](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storesku.aspx) |  Этот класс представляет *SKU* для продукта. SKU — это конкретная версия продукта с уникальным описанием, ценой и прочими сведениями. У каждого приложения или надстройки имеется SKU по умолчанию. Единственный случай, когда разработчик может иметь несколько SKU для приложения, это если публикуется и полная, и пробная версии приложения (в каталоге Магазина каждая из этих версий будет иметь свою SKU одного и того же приложения). <p/><p/> Некоторые издатели могут определять собственные SKU. Например, крупный издатель игр может выпустить игру с одной SKU для стран, где показывать кровь красным запрещено и, следовательно, нужно показать ее зеленым цветом, а другую SKU — чтобы показывать кровь красной в любых странах. Кроме того, издатель, продающий цифровое видеосодержимое, может опубликовать две SKU для видео: одну — для версии высокой четкости, а другую — для версии стандартной четкости. <p/><p/> Каждый продукт имеет свойство [Skus](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storeproduct.skus.aspx), которое можно использовать для доступа к SKU. |
| [StoreAvailability](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storeavailability.aspx)  |  Этот класс представляет *доступность* для SKU. Доступность — это конкретная версия SKU с уникальной ценовой информацией. Каждая SKU имеет доступность по умолчанию. Некоторые издатели имеют возможность определять собственные доступности, предлагая разные ценовые варианты для данной SKU. <p/><p/> Каждая SKU имеет свойство [Availabilities](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storesku.availabilities.aspx), которое можно использовать для доступа к доступности. Для большинства разработчиков каждая SKU имеет одну доступность по умолчанию.  |

<span id="store_ids" />
### <a name="store-ids"></a>Коды продукта в Магазине

С каждым приложением и каждой надстройкой в Магазине связан специальный **код продукта в Магазине**. Многие API в пространстве имен **Windows.Services.Store** требуют указания кода продукта в Магазине для выполнения операции с приложением или надстройкой. Продукты, SKU и доступности имеют код продукта в Магазине разных форматов.

| Тип объекта |  Формат кода продукта в Магазине  |
|---------|-------------------|
| [StoreProduct](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storeproduct.aspx)  |  Код любого продукта в Магазине — это буквенно-цифровая строка, состоящая из 12 символов, например ```9NBLGGH4R315```. Код приложения или надстройки в Магазине доступен на информационной панели Центра разработки для Windows и возвращается объектом [StoreProduct](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storeproduct.storeid.aspx) свойства [StoreId](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storeproduct.aspx). Этот идентификатор иногда называется *кодом продукта в Магазине*. |
| [StoreSku](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storesku.aspx) |  Код SKU в Магазине имеет формат ```<product Store ID>/xxxx```, где ```xxxx``` — это буквенно-цифровая строка из 4 символов, идентифицирующая SKU для продукта. Например, ```9NBLGGH4R315/000N```. Этот идентификатор возвращается свойством [StoreId](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storesku.storeid.aspx) объекта [StoreSku](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storesku.aspx) и иногда называется *кодом SKU в Магазине*. |
| [StoreAvailability](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storeavailability.aspx)  |  Код доступности в Магазине имеет формат ```<product Store ID>/xxxx/yyyyyyyyyyyy```, где ```xxxx``` — это буквенно-цифровая строка из 4 символов, которая определяет SKU для продукта, а ```yyyyyyyyyyyy``` — это буквенно-цифровая строка из 12 символов, которая определяет доступность для SKU. Например, ```9NBLGGH4R315/000N/4KW6QZD2VN6X```. Этот идентификатор возвращается свойством [StoreId](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storeavailability.storeid.aspx) объекта [StoreAvailability](https://msdn.microsoft.com/library/windows/apps/windows.services.store.storeavailability.aspx) и иногда называется *кодом доступности в Магазине*.  |

## <a name="related-topics"></a>Связанные статьи

* [Получение информации о продукте для приложений и надстроек](get-product-info-for-apps-and-add-ons.md)
* [Получение информации о лицензии для приложений и надстроек](get-license-info-for-apps-and-add-ons.md)
* [Поддержка покупок приложений и расширений внутри приложения](enable-in-app-purchases-of-apps-and-add-ons.md)
* [Поддержка покупок потребляемых расширений внутри приложения](enable-consumable-add-on-purchases.md)
* [Реализация пробной версии приложения](implement-a-trial-version-of-your-app.md)
* [Внутренние покупки приложения и пробные версии, использующие пространство имен Windows.ApplicationModel.Store](in-app-purchases-and-trials-using-the-windows-applicationmodel-store-namespace.md)

