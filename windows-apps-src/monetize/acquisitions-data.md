---
description: Этот метод можно используйте в API анализа Microsoft Store для получения получения статистических данных в формате JSON для приложений универсальной платформы Windows и Xbox One игры, которые были, полученные через портал разработчиков Xbox (XDP) и доступны на панели мониторинга аналитики XDP.
title: Получение данных ввод в эксплуатацию для игр и приложений
ms.date: 03/06/2019
ms.topic: article
keywords: windows 10, uwp, рекламная сеть, метаданные приложения
ms.localizationpriority: medium
ms.openlocfilehash: beca5620f25713e8a07e5dbaf64e955d920702a7
ms.sourcegitcommit: df8e4143e81a1c5fe1aa5f14407b8dd5f155a12e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2019
ms.locfileid: "57829917"
---
# <a name="get-acquisitions-data-for-your-games-and-apps"></a>Получение данных ввод в эксплуатацию для игр и приложений 
Этот метод можно используйте в API анализа Microsoft Store для получения получения статистических данных в формате JSON для приложений универсальной платформы Windows и Xbox One игры, которые были, полученные через портал разработчиков Xbox (XDP) и доступны на панели мониторинга аналитики XDP. 

> [!NOTE]
> Этот API не поддерживает ежедневные сводные данные до 1 октября 2016 г. 

## <a name="prerequisites"></a>предварительные требования
Для использования этого метода сначала необходимо сделать следующее: 

* Если вы еще не сделали этого, выполните все [необходимые условия](access-analytics-data-using-windows-store-services.md) для API аналитики для Microsoft Store. 
* [Получите маркер доступа Azure AD](access-analytics-data-using-windows-store-services.md), который будет использоваться в заголовке запроса этого метода. После получения токена доступа у вас будет 60 минут, чтобы использовать его до окончания его срока действия. После истечения срока действия токена можно получить новый токен. 

## <a name="request"></a>Запрос
### <a name="request-syntax"></a>Синтаксис запроса

| Метод | Универсальный код ресурса (URI) запроса |
| --- | --- |
| GET | `https://manage.devcenter.microsoft.com/v1.0/my/analytics/acquisitions` |

### <a name="request-header"></a>Заголовок запроса

| Header | Тип | Описание |
| --- | --- | --- |
| Authorization | строка | Обязательный. Маркер доступа Azure AD в форме **носителя** `<token>`. |

### <a name="request-parameters"></a>Параметры запроса

| Параметр | Тип | Описание | Обязательно |
| --- | --- | --- | --- |
| applicationId | строка | Код продукта для игры на Xbox One, для которой запрашиваются данные о покупках. Чтобы получить идентификатор продукта своей игры, перейдите в игру в программе Analytics XDP и получить идентификатор продукта из URL-адрес. Кроме того при загрузке данных приобретения из отчет по аналитике центра партнеров, идентификатор продукта входит в TSV-файл.  | Да |
| startDate | date | Начальная дата диапазона дат, для которого требуется получить данные о покупках. По умолчанию используется текущая дата.  | Нет |
| endDate | date | Конечная дата диапазона дат, для которого требуется получить данные о покупках. По умолчанию используется текущая дата.  | Нет |
| top | целое число | Количество возвращаемых строк данных. Максимальное значение и значение по умолчанию (если параметр не указан) — 10 000. Если в запросе содержится больше строк, то тело ответа будет содержать ссылку "Далее", которую можно использовать для запроса следующей страницы данных  | Нет |
| skip | целое число | Количество строк, пропускаемых в запросе. Используйте этот параметр для постраничного перемещения по большим наборам данных. Например *верхней = 10000 и пропустить = 0* извлекает сначала 10000 строк данных, *верхней = 10000 и пропустить = 10000* извлекает рядом 10000 строк данных и т. д.  | Нет |
| filter | строка | Один или несколько операторов для фильтрации строк в ответе. Каждое выражение содержит имя поля из тела ответа и значение, которое связано с помощью операторов **eq** или **ne**; выражения можно комбинировать, используя операторы **and** или **or**. Строковые значения должны заключаться в одинарные кавычки в параметр filter. Например, *filter=market eq 'US' and gender eq 'm'*.  <br/> Вы можете указать следующие поля из тела ответа: <ul><li>**acquisitionType**</li><li>**Срок действия**</li><li>**клиентам магазинов**</li><li>**Пол**</li><li>**на рынке**</li><li>**версия ОС**</li><li>**типа устройства**</li><li>**sandboxId**</li></ul> | Нет |
| aggregationLevel | строка | Определяет диапазон времени, для которого требуется получить сводные данные. Можно использовать следующие строки: **day**, **week** или **month**. Если параметр не задан, значение по умолчанию — **day**.  | Нет |
| orderby | строка | Оператор, который определяет порядок полученных значений данных для каждой покупки. Синтаксис *orderby = поле [order], [order],...* Параметр *field* может быть одной из следующих строк: <ul><li>**date**</li><li>**acquisitionType**</li><li>**Срок действия**</li><li>**клиентам магазинов**</li><li>**Пол**</li><li>**на рынке**</li><li>**версия ОС**</li><li>**типа устройства**</li><li>**paymentInstrumentType**</li><li>**sandboxId**</li><li>**xboxTitleIdHex**</li></ul> Параметр *order* является необязательным и может принимать значения **asc** или **desc**, которые указывают, соответственно, порядок сортировки по возрастанию или по убыванию для каждого поля. Значение по умолчанию — **asc**. Пример: строка *orderby*: *orderby=date,market*  | Нет |
| groupby | строка | Оператор, который применяет агрегирование данных только к указанным полям. Можно указать следующие поля: <ul><li>**date**</li><li>**ApplicationName**</li><li>**acquisitionType**</li><li>**возрастным группам**</li><li>**клиентам магазинов**</li><li>**Пол**</li><li>**на рынке**</li><li>**версия ОС**</li><li>**типа устройства**</li><li>**paymentInstrumentType**</li><li>**sandboxId**</li><li>**xboxTitleIdHex**</li></ul> Возвращенные строки данных будут содержать поля, указанные в параметре *groupby*, а также: <ul><li>**date**</li><li>**Идентификатор приложения**</li><li>**Количество приобретений**</li></ul> *Groupby* параметр может использоваться с параметром aggregationLevel. Например: *& groupby = возрастным группам, рынка и aggregationLevel = неделя*  | Нет |

### <a name="request-example"></a>Пример запроса
В следующем примере демонстрируются несколько запросов на получение информации о покупках игры на Xbox One. Замените *applicationId* значение с Идентификатором продукта для игры.  

```syntax
GET https://manage.devcenter.microsoft.com/v1.0/my/analytics/acquisitions?applicationId=9WZDNCRFHXHT&startDate=1/1/2017&endDate=2/1/2019&top=10&skip=0 HTTP/1.1 
Authorization: Bearer <your access token> 

GET https://manage.devcenter.microsoft.com/v1.0/my/analytics/acquisitions?applicationId=9WZDNCRFHXHT&startDate=1/1/2017&endDate=2/1/2019&skip=0&filter=market eq 'US' and gender eq 'm' HTTP/1.1 
Authorization: Bearer <your access token> 
```

## <a name="response"></a>Ответ

### <a name="response-body"></a>Тело ответа
| Значение | Тип | Описание |
| --- | --- | --- |
| Значение | Массив | Массив объектов, содержащий сводную информацию о покупках для игры. Дополнительные сведения о данных в каждом объекте см. далее в разделе [Значения информации о покупках](#acquisition-values). |
| @nextLink | строка | При наличии дополнительных страниц данных эта строка содержит универсальный код ресурса (URI), который можно использовать для запроса следующей страницы данных. Например, это значение возвращается в том случае, если параметр **top** запроса имеет значение 10 000, но для данного запроса имеется больше 10 000 строк с информацией о покупках |
| TotalCount | целое число | Общее количество строк в результирующих данных для запроса. |

### <a name="acquisition-values"></a>Значения в информации о покупках 
Элементы в массиве *Value* содержат следующие значения. 

| Значение | Тип | Описание |
| --- | --- | --- |
| date | строка | Первая дата в диапазоне дат, для которого требуется получить данные о покупках. Если в запросе указан один день, это значение равно соответствующей дате. Если запрос указывает неделю, месяц или другой диапазон дат, это значение равно первой дате в этом диапазоне дат |
| applicationId | строка | Код продукта для игры на Xbox One, для которой запрашиваются данные о покупках. |
| applicationName | строка | Отображаемое имя игры. |
| acquisitionType | строка | Одна из следующих строк, указывающих тип приобретения:  <ul><li>**бесплатно**</li><li>**Пробная версия**</li><li>**Платные**</li><li>**Код акции**</li><li>**Iap**</li><li>**Подписка Iap**</li><li>**Частные аудитории**</li><li>**Pre заказа**</li><li>**Xbox Game Pass** (или **Game Pass** при запросе данных до 23 марта 2018 г.)</li><li>**диск**</li><li>**Предоплаченные кода**</li><li>**Оплата за Pre заказа**</li><li>**Отмененный заказ Pre**</li><li>**Невыполненных заказов Pre**</li></ul> |
| age | строка | Одна из следующих строк, указывающая возрастную группу пользователя, совершившего приобретение: <ul><li>**меньше, чем 13**</li><li>**13-17**</li><li>**18-24**</li><li>**25-34**</li><li>**35-44**</li><li>**44-55**</li><li>**больше, чем 55**</li><li>**Неизвестный**</li></ul> |
| deviceType | строка | Одна из следующих строк, указывающая тип устройства, на котором было выполнено приобретение: <ul><li>**ПК**</li><li>**Телефон**</li><li>**Консоль**</li><li>**Интернета вещей**</li><li>**Server**</li><li>**Планшета**</li><li>**Holographic**</li><li>**Неизвестный**</li></ul> |
| gender | строка | Одна из следующих строк, указывающая пол пользователя, совершившего приобретение: <ul><li>**m**</li><li>**F**</li><li>**Неизвестный**</li></ul> |
| market | строка | Код страны по стандарту ISO 3166 для рынка, на котором произошла покупка |
| osVersion | строка | Версия ОС, в которой произведена покупка. Для этого метода это значение всегда равно **Windows 10**. |
| paymentInstrumentType | строка | Одна из следующих строк, указывающая платежную инструкцию, использовавшуюся для приобретения: <ul><li>**Кредитная карта**</li><li>**Прямой дебетовой карты**</li><li>**Выводимые покупки**</li><li>**Баланс MS**</li><li>**Оператор мобильной связи**</li><li>**Online банковский перевод**</li><li>**PayPal**</li><li>**Операция разбиения**</li><li>**Маркер активации**</li><li>**Ноль выплаченная сумма**</li><li>**eWallet**</li><li>**Неизвестный**</li></ul> |
| sandboxId | строка | Идентификатор песочницы, созданный для этой игры. Это может быть значение **розничной ТОРГОВЛИ** или идентификатор закрытый "песочницы". |
| storeClient | строка | Одна из следующих строк, указывающая версию Store, где совершено приобретение: <ul><li>**Windows Phone Store (клиент)**</li><li>**Microsoft Store (client)** (или **Windows Store (client)**, если запрашиваются данные до 23 марта 2018 г.) </li><li>**Microsoft Store (web)** (или **Windows Store (web)**, если запрашиваются данные до 23 марта 2018 г.) </li><li>**Закупка организациями**</li><li>**Другие**</li></ul> |
| xboxTitleId | строка | Идентификатор продукта Xbox Live (представлен в шестнадцатеричной системе счисления), назначенный порталом разработчиков для Xbox (XDP) для игр с поддержкой Xbox Live. |
| acquisitionQuantity | number | Число покупок, выполненных на указанном уровне агрегирования |
| purchasePriceUSDAmount | number | Сумма, уплаченная пользователем за приобретение с конвертацией в доллары США по ежемесячно обновляемому обменному курсу. |
| purchaseTaxUSDAmount | number | Сумма налога, применяемого к приобретению, с конвертацией в доллары США. |
| localCurrencyCode | строка | Локальный код валюты, в зависимости от страны, учетной записи центра партнеров.  |
| xboxProductId | строка | Идентификатор продукта Xbox продукта из XDP, если это применимо.  |
| availabilityId | строка | Идентификатор доступности продукта из XDP, если это применимо.  |
| skuId | строка | Идентификатор SKU продукта из XDP, если это применимо.  |
| skuDisplayName  | строка | Номер SKU отображаемое имя продукта из XDP, если это применимо.  |
| xboxParentProductId | строка | Идентификатор продукта Xbox родительского продукта из XDP, если это применимо.  |
| parentProductName | строка | Имя продукта родительского продукта из XDP, если это применимо.  |
| productTypeName | строка | Имя типа продукта продукта из XDP, если это применимо.  |
| purchaseTaxType | строка | Тип налогового покупки продукта из XDP, если это применимо.  |
| purchasePriceLocalAmount | number | Приобрести объем локального цены продукта от XDP, если это применимо.  |
| purchaseTaxLocalAmount | number | Локальный сумма налога покупки продукта из XDP, если это применимо.  |

### <a name="response-example"></a>Пример ответа
В следующем примере демонстрируется пример тела ответа JSON на данный запрос. 

```JSON
{ 
    "Value": [ 
        { 
            "date": "2019-01-15T01:00:00.0000000Z", 
            "applicationId": "9WZDNCRFHXHT", 
            "applicationName": null, 
            "acquisitionType": "Paid", 
            "age": null, 
            "deviceType": "Phone", 
            "gender": null, 
            "market": "US", 
            "osVersion": "Windows 10", 
            "paymentInstrumentType": null, 
            "sandboxId": "RETAIL", 
            "storeClient": "Microsoft Store (client)", 
            "xboxTitleId": null, 
            "localCurrencyCode": "USD", 
            "xboxProductId": null, 
            "availabilityId": "B42LRTSZ2MCJ", 
            "skuId": "0010", 
            "skuDisplayName": null, 
            "xboxParentProductId": null, 
            "parentProductName": null, 
            "productTypeName": "Game", 
            "purchaseTaxType": "TaxesNotIncluded", 
            "acquisitionQuantity": 1, 
            "purchasePriceUSDAmount": 3.08, 
            "purchasePriceLocalAmount": 3.08, 
            "purchaseTaxUSDAmount": 0.09, 
            "purchaseTaxLocalAmount": 0.09 
        } 
    ], 

    "@nextLink": "acquisitions?applicationId=9WZDNCRFHXHT&aggregationLevel=day&startDate=2017-01-01T08:00:00.0000000Z&endDate=2019-01-16T08:44:15.6045249Z&top=1&skip=1", 
    
    "TotalCount": 12221 
} 
```

 
