---
author: mcleanbyron
Description: "Вот некоторые решения ряда распространенных проблем разработки, связанных с рекламным посредником."
title: "Устранение неполадок рекламного посредника"
ms.assetid: 8728DE4F-E050-4217-93D3-588DD3280A3A
ms.sourcegitcommit: 10dcf3c2b8ea530b94e9c17ada80aaa98e9418fe
ms.openlocfilehash: f32dc28c9b199c11a1932639f49ab4c29d3e1e8f

---

# Устранение неполадок рекламного посредника


\[ Обновлено для приложений UWP в Windows10. Статьи о Windows8.x см. в [архиве](http://go.microsoft.com/fwlink/p/?linkid=619132) \]

Вот некоторые решения ряда распространенных проблем разработки, связанных с рекламным посредником.

**Не удается добавить AdMediatorControl в рабочей области конструирования**  
При первом перетаскивании элемента управления **AdMediatorControl** в конструктор в проекте UWP, Windows8.1 или Windows Phone 8.1 с применением C# или Visual Basic с XAML, Visual Studio добавляет в проект необходимую ссылку на блок рекламного посредника, при этом сам элемент управления еще не добавляется в конструктор. Для добавления элемента управления щелкните пункт «ОК» в сообщении Visual Studio, подождите несколько секунд, пока обновится конструктор, и еще раз перетащите элемент управления в конструктор.

Если все же не удается добавить элемент управления к конструктор, убедитесь в том, что ваш проект предназначен для соответствующей архитектуры обработчика для приложения (например, **x86**) и что не выбран вариант **Любой процессор**. Элемент управления невозможно добавить в конструктор, если проект предназначен для **Любого процессора** платформы построения.


            *
              *AdMediatorControl отображает сообщение об ошибке “&lt;*width*
            &gt; x &lt;*height*&gt; не поддерживается” во время выполнения при предоставлении объявлений от Microsoft** Microsoft advertising поддерживает лишь [определенные определенные размеры объявлений, рекомендуемые Некоммерческим партнерством содействия развитию интерактивной рекламы (Interactive Advertising Bureau — IAB)](add-and-use-the-ad-mediator-control.md#supported-ad-sizes-for-microsoft-advertising). В некоторых случаях, даже если задается высота и ширина элемента управления рекламного посредника в конструкторе или в коде XAML, соответствующая одному из этих поддерживаемых размеров объявлений, проблемы масштабирования и округления могут помешать предоставлению рекламы платформой рекламного посредника. Чтобы избежать этой проблемы, установите в своем коде для необязательных параметров **Width** и **Height** значения одного из поддерживаемых Microsoft Advertising размеров объявления.

В следующем примере кода показано, как задается размер 728 x 90 для необязательных параметров **Ширина** и **Высота** для Microsoft Advertising.

```CSharp
myAdMediatorControl.AdSdkOptionalParameters[AdSdkNames.MicrosoftAdvertising]["Width"] = 728;
myAdMediatorControl.AdSdkOptionalParameters[AdSdkNames.MicrosoftAdvertising]["Height"] = 90;
```

**Рекламный посредник не включает местоположение (широту и долготу) для рекламной сети**  
Если включить определение местоположения в приложении, то элемент управления рекламного посредника автоматически получит координаты широты и долготы и передаст их в рекламные сети, которые поддерживают данную функцию.

**Элемент управления рекламного объявления Smaato выровнен неправильно**  
С помощью дополнительных параметров попробуйте задать значения для элементов управления пакета SDK.

```CSharp
myAdMediatorControl.AdSdkOptionalParameters[AdSdkNames.Smaato]["Margin"] = new Thickness(0, -20, 0, 0);
myAdMediatorControl.AdSdkOptionalParameters[AdSdkNames.Smaato]["Width"] = 50d;
myAdMediatorControl.AdSdkOptionalParameters[AdSdkNames.Smaato]["Height"] = 320d;
```

**Элемент управления рекламного объявления AdDuplex отображается в неправильном размере (отображается в размере 250x250)**  
Рекламный посредник не задает значение размера, поэтому необходимо использовать дополнительный параметр **Size**. Пример.

```CSharp
myAdMediatorControl.AdSdkOptionalParameters[AdSdkNames.AdDuplex]["Size"] = "160x600";
```

**Отображается сообщение об ошибке Something is covering the ad control (Что-то перекрывает элемент управления рекламным объявлением)**  
Ad Duplex всегда отображает сообщение об ошибке, если рекламное объявление закрыто в приложении частично или целиком. 
            [Здесь описано, как устранить](http://blog.adduplex.com/2014/01/solving-something-is-covering-ad.mdl) эту ошибку.

**Отображается сообщение об ошибке "Конфликт между двумя файлами"**  
Вы поставили ссылку на сборки Microsoft Advertising в другом месте приложения. Рекламный посредник предназначен для работы только в вашем приложении и не будет работать при наличии других ссылок на сборки Microsoft Advertising. Удалите ссылки на сборки Microsoft Advertising вручную и переустановите пакет SDK Microsoft Store Engagement and Monetization для сброса ошибки.

**Возникло непредвиденное поведение после изменения значения RefreshRate в файле AdMediator.config**

После настройки рекламных сетей путем запуска компонента **Ad Mediator** в диалоговом окне **Добавить подключенную службу** в Visual Studio сведения о конфигурации по умолчанию сохраняются в файле AdMediator.config вашего проекта. Этот файл не предназначен для изменения напрямую. Вместо этого вы можете изменить эти сведения (в том числе частоту обновления новых объявлений) при [настройке параметров рекламного посредника вашего приложения](submit-your-app-and-configure-ad-mediation.md) после отправки пакета приложения на информационную панель Центра разработки для Windows.

При изменении значения **RefreshRate** в файле AdMediator.config следует помнить, что это значение должно содержать целое число от 30 до 120, представляющее собой интервал обновления в секундах. Если указано целое число меньше 30 или больше 120, платформа рекламного посредника автоматически использует частоту обновления 60 секунд.

## Ссылки по теме

* [Выбор рекламных сетей и управление ими](select-and-manage-your-ad-networks.md)
* [Добавление и использование элемента управления рекламного посредника](add-and-use-the-ad-mediator-control.md)
* [Проверка реализации рекламного посредника](test-your-ad-mediation-implementation.md)
* [Отправка приложения и настройка рекламного посредника](submit-your-app-and-configure-ad-mediation.md)
 

 



<!--HONumber=Jun16_HO4-->


