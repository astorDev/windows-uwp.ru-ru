---
author: Xansky
description: Используйте этот метод в API аналитики для Microsoft Store для получения многопользовательских данных Xbox Live.
title: Получение многопользовательских данных в Xbox Live
ms.author: mhopkins
ms.date: 06/04/2018
ms.topic: article
keywords: Windows 10, uwp, службы Store, API аналитики для Microsoft Store, аналитика Xbox Live, многопользовательский
ms.localizationpriority: medium
ms.openlocfilehash: 6074f3774d099c63f6c39ac4ef0e95a7b6745912
ms.sourcegitcommit: 93c0a60cf531c7d9fe7b00e7cf78df86906f9d6e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2018
ms.locfileid: "7574846"
---
# <a name="get-xbox-live-multiplayer-data"></a>Получение многопользовательских данных в Xbox Live


Используйте этот метод в API аналитики для Microsoft Store для получения многопользовательских данных для своей [игры с поддержкой Xbox Live](../xbox-live/index.md) с разбивкой по дням или месяцам. Эта информация также доступна в [аналитический отчет Xbox](../publish/xbox-analytics-report.md) в центре партнеров.

> [!IMPORTANT]
> Этот метод поддерживает только игры для Xbox или игры, использующие службы Xbox Live. Эти игры, в том числе игры, опубликованные [партнерами Майкрософт](../xbox-live/developer-program-overview.md#microsoft-partners), и отправленные в рамках программы [ID@Xbox, должны пройти [процесс утверждения концепции](../gaming/concept-approval.md)](../xbox-live/developer-program-overview.md#id). В настоящее время этот метод не поддерживает игры, опубликованные в рамках программы [Xbox Live Creators Program](../xbox-live/get-started-with-creators/get-started-with-xbox-live-creators.md).

## <a name="prerequisites"></a>Что вам понадобится

Для использования этого метода сначала необходимо сделать следующее:

* Если вы еще не сделали этого, выполните все [необходимые условия](access-analytics-data-using-windows-store-services.md#prerequisites) для API аналитики для Microsoft Store.
* [Получите маркер доступа Azure AD](access-analytics-data-using-windows-store-services.md#obtain-an-azure-ad-access-token), который будет использоваться в заголовке запроса этого метода. После получения маркера доступа у вас будет 60минут, чтобы использовать его до окончания срока действия маркера. После истечения срока действия маркера можно получить новый маркер.

## <a name="request"></a>Запрос


### <a name="request-syntax"></a>Синтаксис запроса

| Метод | URI запроса       |
|--------|----------------------|
| GET    | ```https://manage.devcenter.microsoft.com/v1.0/my/analytics/gameanalytics``` |


### <a name="request-header"></a>Заголовок запроса

| Заголовок        | Тип   | Описание                                                                 |
|---------------|--------|-----------------------------------------------------------------------------|
| Authorization | Строка | Обязательный. Маркер доступа Azure AD в формате **Bearer** &lt;*token*&gt;. |


### <a name="request-parameters"></a>Параметры запроса


| Параметр        | Тип   |  Описание      |  Обязательный  
|---------------|--------|---------------|------|
| applicationId | строка | [Код продукта в Store](in-app-purchases-and-trials.md#store-ids) для игры, по которой требуется получить многопользовательские данные Xbox Live.  |  Да  |
| metricType | строка | Строка, определяющая тип аналитических данных Xbox Live, которые необходимо получить. Для этого метода укажите значение **multiplayerdaily** для получения ежедневных многопользовательских данных или **multiplayermonthly** для получения ежемесячных многопользовательских данных.  |  Да  |
| startDate | date | Начальная дата диапазона дат, для которого требуется получить многопользовательские данные. Для **multiplayerdaily** значением по умолчанию являются 3 месяца до сегодняшней даты. Для **multiplayermonthly** значением по умолчанию является 1 год до сегодняшней даты. |  Нет  |
| endDate | date | Конечная дата диапазона дат, для которого требуется получить многопользовательские данные. По умолчанию используется текущая дата. |  Нет  |
| top | int | Количество строк данных, возвращаемых в запросе. Максимальное значение и значение по умолчанию (если параметр не указан) — 10 000. Если в запросе содержится больше строк, то тело ответа будет содержать ссылку «Далее», которую можно использовать для запроса следующей страницы данных |  Нет  |
| skip | int | Количество строк, пропускаемых в запросе. Используйте этот параметр для постраничного перемещения по большим наборам данных. Например, при top=10000 и skip=0 извлекаются первые 10 000 строк данных; при top=10000 и skip=10000 извлекаются следующие 10 000 строк данных и т. д. |  Нет  |
| filter | строка  | Одно или несколько выражений для фильтрации строк в ответе. Каждое выражение содержит имя поля из тела ответа и значение, которое связано с помощью операторов **eq** или **ne**; выражения можно комбинировать, используя операторы **and** или **or**. В параметре *filter* строковые значения должны быть заключены в одиночные кавычки. Вы можете указать следующие поля из тела ответа:<p/><ul><li><strong>deviceType</strong></li><li><strong>packageVersion</strong></li><li><strong>market</strong></li><li><strong>subscriptionName</strong></li></ul> | Нет   |
| groupby | строка | Выражение, которое применяет агрегирование данных только к указанным полям. Вы можете указать следующие поля из тела ответа:<p/><ul><li><strong>date,</strong></li><li><strong>deviceType,</strong></li><li><strong>packageVersion</strong></li><li><strong>market</strong></li><li><strong>subscriptionName</strong></li></ul><p/>Если задать одно или несколько полей *groupby*, другие поля *groupby*, в которых ничего не задано, будут иметь значение **All** в теле ответа. |  Нет  |


### <a name="request-example"></a>Пример запроса

Ниже приведен пример запроса на получение многопользовательских данных для вашей игры с поддержкой Xbox Live. Замените значение *applicationId* кодом продукта в Store для вашей игры.


```syntax
GET https://manage.devcenter.microsoft.com/v1.0/my/analytics/gameanalytics?applicationId=9NBLGGGZ5QDR&metrictype=multiplayerdaily&top=10&skip=0 HTTP/1.1
Authorization: Bearer <your access token>
```

## <a name="response"></a>Ответ

| Значение      | Тип   | Описание                  |
|------------|--------|-------------------------------------------------------|
| Значение      | массив  | Массив объектов, содержащих многопользовательские данные, где каждый объект представляет собой набор данных для указанного периода в днях или месяцах, сгруппированных времени по заданным значениям **filter** и **groupby**. Дополнительные сведения о данных в каждом объекте см. в разделах [Многопользовательская аналитика по дням](#daily-multiplayer-analytics) и [Многопользовательская аналитика по месяцам](#monthly-multiplayer-analytics).     |
| @nextLink  | строка | При наличии дополнительных страниц данных эта строка содержит универсальный код ресурса (URI), который можно использовать для запроса следующей страницы данных. Например, это значение возвращается в том случае, если параметр **top** запроса имеет значение 10000, но для данного запроса имеется больше 10000 строк данных. |
| TotalCount | int    | Общее количество строк в результирующих данных для запроса. |


### <a name="daily-multiplayer-analytics"></a>Многопользовательская аналитика по дням

Элементы в массиве *Value* содержат следующие значения при запросе многопользовательских аналитических данных по дням (то есть при указании **multiplayerdaily** для параметра **metricType**).

| Значение               | Тип   | Описание                           |
|---------------------|--------|-------------------------------------------|
| date                | строка | Дата для многопользовательских данных. |
| applicationId       | строка | Код продукта в Store для игры, по которой запрашиваются многопользовательские данные.     |
| applicationName       | строка |  Название игры, для которой запрашиваются многопользовательские данные.     |
| market       | строка | Двухбуквенный код страны по ISO 3166, обозначающий рынок, откуда поступили многопользовательские данные.       |
| packageVersion     | строка |  Версия пакета из четырех частей для игры.  |
| deviceType          | строка | Одна из следующих строк, указывающая тип устройства, с которого поступили многопользовательские данные:<p/><ul><li><strong>Console (консоль),</strong></li><li><strong>ПК</strong></li><li>**Unknown (неизвестно).**</li></ul>  |
| subscriptionName     | строка |  Имя подписки, используемой для многопользовательских данных. Возможные значения включают **Xbox Game Pass** и **""** (если нет подписки).  |
| dailySessionCount     | число |  Количество многопользовательских сессий для игры в указанную дату.  |
| engagementDurationMinutes     | число |  Общее количество минут, в течение которых пользователи участвовали в многопользовательских сеансах игры в указанную дату.  |
| dailyActiveUsers     | число |  Общее количество активных пользователей многопользовательских сессий для игры в указанную дату.  |
| dailyActiveDevices     | число |  Общее количество активных устройств в многопользовательских сессиях для игры в указанную дату.  |
| dailyNewUsers     | число |  Общее количество новых пользователей многопользовательских сессий для игры в указанную дату.  |
| monthlyActiveUsers     | число |  Общее количество активных пользователей многопользовательских сессий в месяце, на который приходится указанная дата.  |
| monthlyActiveDevices     | число | Общее количество активных устройств в многопользовательских сессиях для игры в месяц, на который приходится указанная дата.   |
| monthlyNewUsers     | число |  Общее количество новых пользователей многопользовательских сессий для игры в месяце, на который приходится указанная дата.  |


### <a name="monthly-multiplayer-analytics"></a>Многопользовательская аналитика по месяцам

Элементы в массиве *Value* содержат следующие значения при запросе многопользовательских аналитических данных по месяцам (то есть при указании **multiplayermonthly** для параметра **metricType**).

| Значение               | Тип   | Описание                           |
|---------------------|--------|-------------------------------------------|
| date                | строка | Первая дата в месяце для многопользовательских данных. |
| applicationId       | строка | Код продукта в Store для игры, по которой запрашиваются многопользовательские данные.     |
| applicationName       | строка |  Название игры, для которой запрашиваются многопользовательские данные.     |
| market       | строка | Двухбуквенный код страны по ISO 3166, обозначающий рынок, откуда поступили многопользовательские данные.       |
| packageVersion     | строка |  Версия пакета из четырех частей для игры.  |
| deviceType          | строка | Одна из следующих строк, указывающая тип устройства, с которого поступили многопользовательские данные:<p/><ul><li><strong>Console (консоль),</strong></li><li><strong>ПК</strong></li><li>**Unknown (неизвестно).**</li></ul>  |
| subscriptionName     | строка |  Имя подписки, используемой для многопользовательских данных. Возможные значения включают **Xbox Game Pass** и **""** (если нет подписки).  |
| monthlySessionCount     | число |  Количество многопользовательских сессий для игры за указанный месяц.   |
| engagementDurationMinutes     | число |  Общее количество минут, в течение которых пользователи участвовали в многопользовательских сеансах игры за указанный месяц.  |
| monthlyActiveUsers     | число | Общее количество активных пользователей многопользовательских сессий за указанный месяц.   |
| monthlyActiveDevices     | число | Общее количество активных устройств в многопользовательских сессиях для игры за указанный месяц.   |
| monthlyNewUsers     | число |  Общее количество новых пользователей многопользовательских сессий для игры за указанный месяц.  |
| averageDailyActiveUsers     | число |  Среднее количество активных пользователей многопользовательских сессий в день для игры за указанный месяц.  |
| averageDailyActiveDevices     | число |  Среднее количество активных устройств в многопользовательских сессиях для игры за указанный месяц.  |


### <a name="response-example"></a>Пример ответа

В следующем примере демонстрируется образец тела ответа JSON для варианта этого запроса по дням (то есть при указании **multiplayerdaily** для параметра **metricType**).

```json
{
  "Value": [
    {
      "date": "2018-01-07",
      "applicationId": "9NBLGGGZ5QDR",
      "applicationName": "Contoso Sports",
      "market": "All",
      "packageVersion": "",
      "deviceType": "All",
      "subscriptionName": "All",
      "dailySessionCount": 976711,
      "engagementDurationMinutes": 16836064.5,
      "dailyActiveUsers": 180377,
      "dailyActiveDevices": 153359,
      "dailyNewUsers": 8638,
      "monthlyActiveUsers": 779984,
      "monthlyActiveDevices": 606495,
      "monthlyNewUsers": 212093
    },
    {
      "date": "2018-01-05",
      "applicationId": "9NBLGGGZ5QDR",
      "applicationName": "Contoso Sports",
      "market": "All",
      "packageVersion": "",
      "deviceType": "All",
      "subscriptionName": "All",
      "dailySessionCount": 857433,
      "engagementDurationMinutes": 14087724.5,
      "dailyActiveUsers": 166630,
      "dailyActiveDevices": 143065,
      "dailyNewUsers": 9646,
      "monthlyActiveUsers": 764947,
      "monthlyActiveDevices": 595368,
      "monthlyNewUsers": 204248
    },
  ],
  "@nextLink": null,
  "TotalCount":2
}
```

## <a name="related-topics"></a>Статьи по теме

* [Доступ к аналитическим данным с помощью служб Microsoft Store](access-analytics-data-using-windows-store-services.md)
* [Получение аналитических данных Xbox Live](get-xbox-live-analytics.md)
* [Получение данных о достижениях в Xbox Live](get-xbox-live-achievements-data.md)
* [Получение данных работоспособности в Xbox Live](get-xbox-live-health-data.md)
* [Получение данных центра игр в Xbox Live](get-xbox-live-game-hub-data.md)
* [Получение данных клуба в Xbox Live](get-xbox-live-club-data.md)
