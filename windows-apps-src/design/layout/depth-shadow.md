---
author: knicholasa
description: Z-глубина, или относительная глубина и тень — это два способа включить глубину в приложение, чтобы помочь пользователям сосредоточиться на естественном и эффективном уровне.
title: Z-глубина и тень для приложений UWP
template: detail.hbs
ms.author: nichola
ms.date: 04/19/2019
ms.topic: article
ms.custom: 19H1
keywords: windows 10, uwp
pm-contact: chigy
ms.localizationpriority: medium
ms.openlocfilehash: 5e9197be38d1edfdad41a434132f318cdf3f45ea
ms.sourcegitcommit: 445320ff0ee7323d823194d4ec9cfa6e710ed85d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2019
ms.locfileid: "72282413"
---
# <a name="z-depth-and-shadow"></a>Глубина трехмерной сцены и тени

![GIF-файл, показывающий четыре серых прямоугольника, расположенных по диагонали, один поверх другого. GIF анимируется, чтобы тени отображались и исчезают.](images/elevation-shadow/shadow.gif)

Создание визуальной иерархии элементов в пользовательском интерфейсе делает пользовательский интерфейс удобным для просмотра и передачи данных, которые важны для внимания. Повышение прав, действия по выделению элементов пользовательского интерфейса, часто используются для достижения такой иерархии в программном обеспечении. В этой статье рассматривается создание повышения прав в приложении UWP с помощью z-глубины и тени.

Z-глубина — это термин, используемый в сочетании с создателями трехмерных приложений для обозначения расстояния между двумя поверхностями вдоль оси z. Здесь показано, как закрыть объект в средстве просмотра. Его можно рассматривать как аналогичную концепцию координат x/y, но в направлении z.

## <a name="why-use-z-depth"></a>Зачем использовать z-глубину?

В физическом мире мы будем сосредоточиться на объектах, которые ближе к нам. Этот пространственный порывом также можно применить к цифровому пользовательскому интерфейсу. Например, если вы перемещаете элемент ближе к пользователю, он инстинктивно фокус на элемент. Перемещая элементы пользовательского интерфейса ближе к оси z, можно создавать визуальную иерархию между объектами, помогая пользователям в своем приложении естественно и эффективно выполнять задачи.

## <a name="what-is-shadow"></a>Что такое теневая копия?

Тень — это один из способов, которым пользователь воспринимает повышение прав. Освещение выше объекта с повышенными привилегиями создает тень на поверхности ниже. Чем выше объект, тем более крупнее и более мягким тень. Объекты с повышенными правами в пользовательском интерфейсе не должны иметь теней, но они помогают создать внешний вид повышения прав.

В приложениях UWP Shadows следует использовать в целевым, а не Aesthetic образом. Использование слишком большого количества теней уменьшит или исключит способность тени сосредоточиться на пользователе.

Если вы используете стандартные элементы управления, Семешадов тени будут автоматически включены в пользовательский интерфейс. Однако можно вручную включить тени в пользовательском интерфейсе с помощью интерфейсов API Семешадов или DropShadow. 

## <a name="themeshadow"></a>ThemeShadow

Тип Семешадов можно применить к любому элементу XAML для отображения теней соответствующим образом на основе координат x, y и z. Семешадов также автоматически корректирует другие характеристики окружающей среды:

- Адаптируется к изменениям в освещении, пользовательской теме, среде приложений и оболочке.
- Автоматически применяет тени к элементам на основе z-глубины. 
- Обеспечивает синхронизацию элементов при их перемещении и изменении прав.
- Обеспечивает согласованность теней во всех приложениях и между ними.

Вот как Семешадов реализован в Менуфлйоут. У Менуфлйоут есть встроенный опыт, в котором Главная поверхность имеет повышенный уровень до 32px, и каждое дополнительное каскадное меню открывается и 8px над меню, из которого оно открывается.

![Снимок экрана Семешадов, примененный к Менуфлйоут с тремя открытыми, вложенными меню. Первое меню имеет более высокий уровень 32px, и каждое последующее меню, открывающееся из предыдущего меню, становится более высоким, 8px тем самым тем, что оно оставляет отдельную тень на фоне.](images/elevation-shadow/themeshadow-menuflyout.png)

### <a name="themeshadow-in-common-controls"></a>Семешадов в стандартных элементах управления

Следующие стандартные элементы управления будут автоматически использовать Семешадов для приведения теней из глубины 32px, если не указано иное.

- [Контекстное меню](../controls-and-patterns/menus.md), [панель команд](../controls-and-patterns/app-bars.md), [всплывающее окно панели команд](../controls-and-patterns/command-bar-flyout.md), строка [меню](../controls-and-patterns/menus.md#create-a-menu-bar)
- [Диалоги и всплывающие окна](../controls-and-patterns/dialogs.md) (диалоговое окно в 64px)
- [NavigationView](../controls-and-patterns/navigationview.md)
- [ComboBox](../controls-and-patterns/combo-box.md), [DropDownButton, SplitButton, тогглесплитбуттон](../controls-and-patterns/buttons.md)
- [теачингтип](../controls-and-patterns/dialogs-and-flyouts/teaching-tip.md)
- [AutoSuggestBox](../controls-and-patterns/auto-suggest-box.md) 
- [Выбор календаря, даты и времени](../controls-and-patterns/date-and-time.md)
- [Подсказка](../controls-and-patterns/tooltips.md) (16px)
- [Управление транспортным носителем](../controls-and-patterns/media-playback.md#media-transport-controls), [инктулбар](../controls-and-patterns/inking-controls.md)
- [Подключенная анимация](../motion/connected-animation.md)

Примечание. Всплывающие окна будут применять Семешадов только при компиляции с Windows 10 версии 1903 или более поздней версией пакета SDK.

### <a name="themeshadow-in-popups"></a>Семешадов в всплывающих окнах

Часто в пользовательском интерфейсе приложения используется всплывающее окно для сценариев, в которых требуется вмешательство пользователя и быстрое действие. Это отличный пример, когда необходимо использовать теневую копию для создания иерархии в пользовательском интерфейсе приложения.

Семешадов автоматически приводит тени при применении к любому элементу XAML во [всплывающем](/uwp/api/windows.ui.xaml.controls.primitives.popup)окне. Он будет приводить к теням на фоновом содержимом приложения, а также к другим открытым всплывающим подсказкам.

Чтобы использовать Семешадов с всплывающими окнами, используйте свойство `Shadow`, чтобы применить Семешадов к элементу XAML. Затем следует повысить уровень элемента от других элементов, находящийся за ним, например с помощью компонента z свойства `Translation`.
Для большинства всплывающих окон рекомендуемое повышение по умолчанию относительно фонового содержимого приложения — 32 эффективных пикселов.

В этом примере показан прямоугольник во всплывающем окне приведение тени к содержимому фонового приложения и других всплывающих окон, расположенных за ним:

```xaml
<Popup>
    <Rectangle x:Name="PopupRectangle" Fill="Lavender" Height="48" Width="96">
        <Rectangle.Shadow>
            <ThemeShadow />
        </Rectangle.Shadow>
    </Rectangle>
</Popup>
```

```csharp
// Elevate the rectangle by 32px
PopupRectangle.Translation += new Vector3(0, 0, 32);
```

![Одно прямоугольное всплывающее окно с тенью.](images/elevation-shadow/PopupRectangle.png)

### <a name="disabling-default-themeshadow-on-custom-flyout-controls"></a>Отключение Семешадов по умолчанию для пользовательских всплывающих элементов управления

Элементы управления, основанные на [всплывающих](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.flyout)окнах, [датепиккерфлйоут](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.datepickerflyout), [менуфлйоут](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.menuflyout) или [тимепиккерфлйоут](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.timepickerflyout) , автоматически используют семешадов для приведения тени.

Если тень по умолчанию не будет отображаться в содержимом элемента управления, ее можно отключить, задав для свойства [исдефаултшадовенаблед](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.flyoutpresenter.isdefaultshadowenabled) значение `false` на связанном флйоутпресентер.

```xaml
<Flyout>
    <Flyout.FlyoutPresenterStyle>
        <Style TargetType="FlyoutPresenter">
            <Setter Property="IsDefaultShadowEnabled" Value="False" />
        </Style>
    </Flyout.FlyoutPresenterStyle>
</Flyout>
```

### <a name="themeshadow-in-other-elements"></a>Семешадов в других элементах

В общем случае мы советуем тщательно подумать об использовании теневой копии и ограничить ее использование в случаях, когда она представляет осмысленную визуальную иерархию. Однако мы предоставляем способ приведения тени из любого элемента пользовательского интерфейса, если у вас есть сложные сценарии, требующие этого.

Для приведения тени из элемента XAML, который не находится во всплывающем окне, необходимо явно указать другие элементы, которые могут получать тень в коллекции `ThemeShadow.Receivers`. Получатели не могут быть предком приведения в визуальном дереве.

В этом примере показаны два прямоугольника, которые приводят тени к сетке за ними:

```xaml
<Grid>
    <Grid.Resources>
        <ThemeShadow x:Name="SharedShadow" />
    </Grid.Resources>

    <Grid x:Name="BackgroundGrid" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" />

    <Rectangle x:Name="Rectangle1" Height="100" Width="100" Fill="Turquoise" Shadow="{StaticResource SharedShadow}" />

    <Rectangle x:Name="Rectangle2" Height="100" Width="100" Fill="Turquoise" Shadow="{StaticResource SharedShadow}" />
</Grid>
```

```csharp
/// Add BackgroundGrid as a shadow receiver and elevate the casting buttons above it
SharedShadow.Receivers.Add(BackgroundGrid);

Rectangle1.Translation += new Vector3(0, 0, 16);
Rectangle2.Translation += new Vector3(120, 0, 32);
```

![Два бирюзовых прямоугольника рядом друг с другом и с тенями.](images/elevation-shadow/SharedShadow.png)

### <a name="performance-best-practices-for-themeshadow"></a>Рекомендации по повышению производительности для Семешадов

1. Система устанавливает ограничение в 5 пар получателей приведений и отключается при превышении тени. Придерживайтесь ограниченного системой ограничения в 5 пар получателей приведений.

2. Ограничьте число настраиваемых элементов получателя до минимально необходимого.

3. Если несколько элементов приемника имеют одинаковое повышение прав, попробуйте объединить их, нажимая на один родительский элемент.

4. Если несколько элементов будут приводить к одному и тому же типу тени на одни и те же элементы приемника, добавьте тень в качестве общего ресурса и используйте его повторно.

## <a name="drop-shadow"></a>Тень

DropShadow не реагирует на среду автоматически и не использует источники освещения. Примеры реализации см. в разделе [класс dropshadow](https://docs.microsoft.com/uwp/api/windows.ui.composition.dropshadow).

## <a name="which-shadow-should-i-use"></a>Какую тень использовать?

| Свойство | ThemeShadow | DropShadow |
| - | - | - | - |
| **Минимальный пакет SDK** | Windows 10, версия 1903 | 14393 |
| **Адаптируемости** | Да | Нет |
| **Индивидуальн** | Нет | Да |
| **Источник освещения** | Автоматически (глобальная по умолчанию, но может переопределяться для каждого приложения) | Нет |
| **Поддерживается в трехмерных средах** | Да | Нет |

- Помните, что теневой целью является предоставление осмысленной иерархии, а не простой визуальной обработки.
- Как правило, рекомендуется использовать Семешадов, который автоматически адаптируется к своей среде.
- Для проблем с производительностью Ограничьте число теней, используйте другие визуальные элементы или используйте DropShadow.
- Если у вас есть более сложные сценарии для создания визуальной иерархии, рассмотрите возможность использования других визуальных возможностей (например, цвета). Если требуется теневая копия, используйте DropShadow.
