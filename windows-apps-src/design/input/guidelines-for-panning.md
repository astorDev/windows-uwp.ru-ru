---
Description: Сдвиг или прокрутка обеспечивают пользователю навигацию в рамках единого представления, позволяя просматривать содержимое, которое выходит за пределы окна просмотра. Примеры представлений включают структуру папок компьютера, библиотеку документов или фотоальбом.
title: Сдвиг
ms.assetid: b419f538-c7fb-4e7c-9547-5fb2494c0b71
label: Panning
template: detail.hbs
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 945368e27c4f6215d2f5df20d52d916ead3597dd
ms.sourcegitcommit: b52ddecccb9e68dbb71695af3078005a2eb78af1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2019
ms.locfileid: "74257946"
---
# <a name="guidelines-for-panning"></a>Руководство по функции сдвига


Сдвиг или прокрутка обеспечивают пользователю навигацию в рамках единого представления, позволяя просматривать содержимое, которое выходит за пределы окна просмотра. Примеры представлений включают структуру папок компьютера, библиотеку документов или фотоальбом.

> **Важные API-интерфейсы**: [**Windows.UI.Input**](https://docs.microsoft.com/uwp/api/Windows.UI.Input), [**Windows.UI.Xaml.Input**](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Input)


## <a name="dos-and-donts"></a>Рекомендации


**Индикаторы панорамирования и полосы прокрутки**

-   Перед загрузкой содержимого в приложение убедитесь, что возможен сдвиг (прокрутка).

-   Отображайте индикаторы сдвига и полосы прокрутки, чтобы давать подсказки о расположении и размере. Скрывайте их, если в приложении реализован специальный метод навигации.

    **Обратите внимание** ,  в отличие от стандартных полос прокрутки, индикаторы панорамирования являются исключительно информативными. Они не предоставляются для устройств ввода, и с ними нельзя производить никаких манипуляций.

     

**Панорамирование с одной осью (одномерные переполнение)**

-   Применяйте сдвиг вдоль одной оси для областей содержимого, выходящих за одну из границ окна просмотра (вертикальную или горизонтальную).

    -   Вертикальный сдвиг для одномерного списка элементов.
    -   Горизонтальный сдвиг для сетки элементов.
-   Не используйте обязательные точки переключения для сдвига по одной оси, если пользователь должен иметь возможность производить сдвиг и останавливаться между точками переключения. Обязательные точки переключения гарантируют, что пользователь остановится на точке переключения. Вместо этого используйте бесконтактные точки переключения.

**Панорамирование произвольной формы (двухмерный Overflow)**

-   Применяйте сдвиг по двум осям для областей содержимого, которые выходят за обе границы окна просмотра (вертикальную и горизонтальную).

    -   Переопределите поведение направляющих и используйте свободный сдвиг для неорганизованного содержимого, которое пользователь, вероятно, будет двигать в различных направлениях.
-   Свободный сдвиг обычно подходит для переходов внутри изображений и карт.

**Постраничное представление**

-   Используйте обязательные точки прикрепления, если содержимое состоит из несвязанных элементов или требуется показать какой-либо элемент полностью. Это может относиться к страницам книги или журнала, колонке элементов или отдельным изображениям.

    -   На каждой логической границе должна быть размещена точка переключения.
    -   Размер каждого элемента должен быть подобран так, чтобы он помещался в области просмотра.

**Логические и ключевые точки**

-   Используйте бесконтактные точки прикрепления, если в содержимом присутствуют ключевые точки или логические области, в которых пользователь часто будет останавливаться. Например, это заголовок раздела.

-   Если указаны максимальный и минимальный размер или границы, с помощью визуальной обратной связи необходимо показать, когда пользователь достигает этих границ или превышает их.

**Связывание внедренного или вложенного содержимого**

-   Используйте сдвиг вдоль одной оси (обычно горизонтальной) и макеты столбцов для содержимого на основе текста и сеток. В этих случаях содержимое обычно переносится и естественным образом перетекает из столбца в столбец, благодаря чему взаимодействие с пользователем остается единообразным и обнаруживаемым в различных приложениях UWP.

-   Не используйте встроенные области сдвига для отображения текста или элементов списка. Поскольку индикаторы сдвига и полосы прокрутки отображаются только при обнаружении ввода внутри такой области, то и взаимодействие с пользователем не является интуитивным и обнаруживаемым.

-   Не помещайте области сдвига одну за другой или друг в друга, если обе они поддерживают сдвиг в одном направлении, как показано ниже. Это может привести к тому, что родительская область будет непроизвольно сдвигаться при достижении границы сдвига в дочерней области. Размещайте плоскости сдвигов перпендикулярно друг другу.

    ![Дочерняя и родительская области сдвигов, которые прокручиваются в одном направлении.](images/scrolling-embedded3.png)

## <a name="additional-usage-guidance"></a>Дополнительные рекомендации по использованию

При сенсорном взаимодействии сдвиг с помощью жеста прокрутки или скольжения одним или несколькими пальцами похож на прокрутку с помощью мыши. Сдвиг больше похож на поворот колесика мыши или перетаскивание ползунка полосы прокрутки, чем на щелчок в полосе прокрутки. Если в API не установлено различие или оно не требуется для конкретного пользовательского интерфейса Windows, мы просто будем обращаться к обоим действиям в качестве панорамирования.

> <div id="main">
> <strong>Изменение поведения при обновлении Windows 10 для дизайнеров</strong> По умолчанию, вместо выделения текста активное перо теперь прокручивается и ретуширование в приложениях UWP (таких как сенсорное касание, Сенсорная панель и пассивное перо).  
> Если ваше приложение зависит от предыдущего поведения, вы можете переопределить прокрутку пера и вернуться к предыдущему алгоритму. Дополнительные сведения см. в разделе справки по API <a href="https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.scrollviewer">класс ScrollViewer</a>.
> </div>

В зависимости от устройства ввода пользователь осуществляет сдвиг соответствующей области с помощью следующих элементов.

-   Мыши, сенсорной панели или активного пера для нажатия кнопки со стрелкой для прокрутки, перетаскивания ползунка полосы прокрутки или щелчка в пределах полосы прокрутки.
-   Колесика мыши для эмуляции перетаскивания ползунка полосы прокрутки.
-   Расширенные кнопки (XBUTTON1 и XBUTTON2), если они поддерживаются мышью.
-   Клавиш со стрелками на клавиатуре для эмуляции перетаскивания ползунка полосы прокрутки или клавиш на странице для эмуляции нажатия полосы прокрутки.
-   Касания, сенсорной панели или неактивного пера для скольжения или прокрутки пальцами в нужном направлении.

Скольжение подразумевает медленное перемещение пальцев в направлении сдвига. В результате скольжения содержимое передвигается с той же скоростью и на то же расстояние, что и пальцы. В результате прокрутки (быстрого скольжения и поднимания пальцев) к анимации сдвига применяются следующие физические эффекты.

-   Замедление (инерция). Если пользователь убирает пальцы, сдвиг начинает замедляться. напоминает торможение на скользкой поверхности);
-   Амортизация. Движущая сила сдвига во время замедления вызывает слабый эффект отражения, если достигается точка прикрепления или граница области содержимого.

**Типы панорамирования**

Windows 8 поддерживает три типа панорамирования:

-   Сдвиг по одной оси поддерживается только в одном направлении (горизонтальном или вертикальном).
-   "Рельсовый" сдвиг поддерживается во всех направлениях. Тем не менее, когда пользователь пересекает пороговое значение расстояния в определенном направлении, сдвиг ограничивается этой осью.
-   Свободный сдвиг поддерживается во всех направлениях.

**Пользовательский интерфейс панорамирования**

Взаимодействие сдвига обладает уникальными для каждого устройства ввода особенностями, но в любом случае обеспечивает схожие возможности.

**Области, поддерживающие сдвиг**. Области, поддерживающие сдвиг, доступны разработчикам приложений UWP на JavaScript во время разработки посредством каскадных таблиц стилей (CSS).

Есть два режима отображения сдвига в зависимости от обнаруженного устройства ввода.

-   Индикаторы сдвига для сенсорного ввода.
-   Полосы прокрутки для других устройств ввода, в том числе мыши, клавиатуры и пера.

**Обратите внимание** ,  индикаторы панорамирования видны, только если Контактное лицо находится в регионе паннабле. Аналогичным образом полоса прокрутки отображается, только когда указатель мыши, курсор пера или фокус клавиатуры находится в области, поддерживающей прокрутку.

 

**Индикаторы сдвига**. Индикатор сдвига похож на ползунок полосы прокрутки. Ширина индикатора сдвига обратно пропорциональна длине отображаемого содержимого. Расположение индикатора сдвига указывает на расположение просматриваемого содержимого относительно всей области просмотра.

На следующем рисунке показаны две области разной длины с индикаторами сдвига.

![Две области сдвига разной длины с индикаторами сдвига.](images/scrolling-indicators.png)

**Поведение сдвига**
**Точки прикрепления** Сдвиг жестом прокрутки добавляет во взаимодействие эффект инерции, когда прекращается сенсорный контакт. В результате инерции содержимое продолжает сдвигаться даже в отсутствие движения пользователя, пока не пройдет некоторое пороговое расстояние. Точки прикрепления позволяют настраивать эффект инерции.

Они задают логические остановки в содержимом приложения. С точки зрения пользователя точки прикрепления выступают как механизм разбивки на страницы, избавляя его от лишних жестов прокрутки и перетаскивания в крупных областях сдвига. С помощью точек прикрепления можно исправлять неточности сенсорного ввода и обеспечивать отображение определенной части важной информации в окне просмотра.

Существует два типа точек прикрепления.

-   Приблизительные: точка прикрепления выбирается после завершения контакта, если инерция прекращается в пределах порогового значения расстояния точки прикрепления. Сдвиг может останавливаться между двумя бесконтактными точками прикрепления.
-   Принудительные. Выделенная точка прикрепления располагается непосредственно до или после последней точки прикрепления, пересеченной перед завершением контакта (в зависимости от направления и скорости жеста). Сдвиг должен останавливаться только в обязательной точке прикрепления.

Точки прикрепления используются в приложениях, которые имитируют разбивку содержимого на страницы или содержат логически сгруппированные элементы, поддерживающие динамическую перегруппировку для обеспечения соответствия окну просмотра или экрану, например в веб-браузерах и приложениях для просмотра фотографий.

На следующих рисунках показано, как сдвиг до определенной точки приводит к автоматическому сдвигу содержимого до логического расположения.

|                                                                |                                                                                         |                                                                                                                 |
|----------------------------------------------------------------|-----------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|
| ![Область, поддерживающая сдвиг.](images/ux-panning-snap1.png) | ![Область, которая сдвигается влево.](images/ux-panning-snap2.png) | ![Область с остановленным сдвигом в логической точке прикрепления.](images/ux-panning-snap3.png) |
| Прокрутите для сдвига.                                                  | Прекратите сенсорный контакт.                                                                     | Область для сдвига останавливается в точке прикрепления, а не в точке, где прекращен сенсорный контакт.                                |

 

**Ограничители**. Высота и ширина содержимого могут превышать размеры и разрешение устройства отображения. Поэтому часто требуется двухмерный сдвиг (по горизонтали и вертикали). В этом случае ограничители улучшают взаимодействие с пользователем, давая преимущество сдвигу вдоль осей движения (вертикальной или горизонтальной).

Принцип работы ограничителей показан на следующем рисунке.

![Схема экрана с ограничителями сдвига.](images/ux-panning-rails.png)

**Связывание внедренного или вложенного содержимого**

Когда пользователь достигает предела масштабирования или прокрутки для элемента, вложенного в другой масштабируемый или прокручиваемый элемент, можно указать, должен ли родительский элемент продолжать операцию масштабирования или прокрутки, начатую в его дочернем элементе. Это называется связыванием масштабирования или прокрутки.

Связывание используется для областей, которые поддерживают сдвиг в одном направлении и содержат дочерние области, которые, в свою очередь, поддерживают сдвиг в одном направлении или сдвиг в произвольных направлениях (при касании в одной из дочерних областей). При достижении границы сдвига дочерней области в определенном направлении активируется сдвиг в родительской области в том же направлении.

Если область сдвига расположена внутри другой области сдвига, то между контейнером и встроенным содержимым должно быть достаточно свободного пространства. На следующих рисунках показана область сдвига, которая расположена внутри другой области сдвига. Каждая из этих областей поддерживает сдвиг перпендикулярно сдвигу другой области. Пользователям достаточно пространства для сдвига в каждой области.

![Встроенная область сдвига.](images/scrolling-embedded.png)

Если свободного пространства недостаточно, как видно на следующем рисунке, встроенная область сдвига может повлиять на возможности сдвига в контейнере и привести к непроизвольному сдвигу в одной или нескольких областях.

![Недостаточно пространства для встроенной области сдвига.](images/ux-panning-embedded-wrong.png)

Этот способ также полезен для приложений, например фотоальбомов или карт, которые поддерживают как свободный сдвиг в пределах отдельной фотографии или карты, так и сдвиг вдоль одной оси в альбоме (до предыдущей или следующей фотографии) или в области сведений. В приложениях, где показывается область сведений или область параметров, соответствующая изображению или карте, поддерживающей свободный сдвиг, рекомендуется начинать создание макета с области сведений или параметров, поскольку область свободного сдвига изображения или карты может вызывать конфликт со сдвигом в области сведений.

## <a name="related-articles"></a>Связанные статьи


* [Настраиваемые взаимодействия с пользователем](https://docs.microsoft.com/windows/uwp/design/layout/index)
* [Оптимизация ListView и GridView](https://docs.microsoft.com/windows/uwp/debug-test-perf/optimize-gridview-and-listview)
* [Специальные возможности клавиатуры](https://docs.microsoft.com/windows/uwp/accessibility/keyboard-accessibility)

**Примеры**
* [Пример базового ввода](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/BasicInput)
* [Пример ввода с небольшой задержкой](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/LowLatencyInput)
* [Пример режима взаимодействия с пользователем](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/UserInteractionMode)
* [Пример визуальных элементов фокуса](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/XamlFocusVisuals)

**Примеры из архива**
* [Входные данные: пример событий пользовательского ввода XAML](https://code.msdn.microsoft.com/windowsapps/Input-3dff271b)
* [Входные данные: пример возможностей устройства](https://code.msdn.microsoft.com/windowsapps/Input-device-capabilities-31b67745)
* [Входные данные: пример проверки нажатия касания](https://code.msdn.microsoft.com/windowsapps/Touch-Hit-Testing-sample-5e35c690)
* [Пример прокрутки XAML, панорамирования и масштабирования](https://code.msdn.microsoft.com/windowsapps/xaml-scrollviewer-pan-and-949d29e9)
* [Входные данные: Пример упрощенного рукописного ввода](https://code.msdn.microsoft.com/windowsapps/Input-simplified-ink-sample-11614bbf)
* [Входные данные: пример использования жестов Windows 8](https://docs.microsoft.com/samples/browse/?redirectedfrom=MSDN-samples)
* [Входные данные: пример манипуляций иC++жестов ()](https://code.msdn.microsoft.com/windowsapps/Manipulations-and-gestures-362b6b59)
* [Пример входных данных DirectX Touch](https://code.msdn.microsoft.com/windowsapps/Simple-Direct3D-Touch-f98db97e)
 

 




