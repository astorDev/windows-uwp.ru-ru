---
Description: Узнайте, как спроектировать и оптимизировать приложения UWP, чтобы они предоставляли наилучшее возможное взаимодействие как для опытных пользователей клавиатуры, так и для людей с ограниченными возможностями, а также соответствовали другим требованиям к специальным возможностям.
title: Взаимодействие с помощью клавиатуры
ms.assetid: FF819BAC-67C0-4EC9-8921-F087BE188138
label: Keyboard interactions
template: detail.hbs
keywords: клавиатура, специальные возможности, навигация, фокус, текст, ввод, взаимодействия с пользователем, геймпад, пульт ДУ
ms.date: 03/29/2017
ms.topic: article
pm-contact: chigy
design-contact: kimsea
dev-contact: niallm
doc-status: Published
ms.openlocfilehash: 449f0c81bdd54d99ef0977ca1c9b6ba10ba5eae7
ms.sourcegitcommit: b52ddecccb9e68dbb71695af3078005a2eb78af1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2019
ms.locfileid: "74258357"
---
# <a name="keyboard-interactions"></a>Взаимодействие с помощью клавиатуры

![Главное изображение клавиатуры](images/keyboard/keyboard-hero.jpg)

Узнайте, как спроектировать и оптимизировать приложения UWP, чтобы они предоставляли наилучшее возможное взаимодействие как для опытных пользователей клавиатуры, так и для людей с ограниченными возможностями, а также соответствовали другим требованиям к специальным возможностям.

На разных устройствах ввод с клавиатуры — важная составляющая общего взаимодействия с универсальной платформой Windows (UWP). Хорошо разработанное взаимодействие с помощью клавиатуры позволяет эффективно переходить по пользовательскому интерфейсу приложения и получать доступ ко всем функциональным возможностям, не отрывая рук от клавиатуры.

![изображение клавиатуры и геймпада](images/keyboard/keyboard-gamepad.jpg)

***Общие шаблоны взаимодействия используются на клавиатуре и планшете***

В этом разделе мы уделим особое внимание проектированию приложений UWP для ввода с клавиатуры на ПК. Однако хорошо спроектированная клавиатура важна для поддержки специальных средств, таких как экранный диктор Windows, использования [программных клавиатур](#software-keyboard) , таких как сенсорная клавиатура и экранная клавиатура (ОСК), а также для обработки других типов устройств ввода, таких как игровой планшет Xbox и удаленное управление.

Многие требования и рекомендации, рассмотренные здесь, в том числе [визуальные элементы фокуса](#focus-visuals), [клавиши доступа](#access-keys) и [навигацию пользовательского интерфейса](#navigation), также можно применять для других сценариев.

**ПРИМЕЧАНИЕ.** Хотя для ввода текста используются аппаратные и программные клавиатуры, основное внимание в этом разделе уделяется навигации и взаимодействию.

## <a name="built-in-support"></a>Встроенная поддержка

Наряду с мышью клавиатура является наиболее широко используемым периферийным устройством ПК и, следовательно, одним из фундаментальных компонентов взаимодействия с компьютером. Пользователи ПК ожидают всестороннего и согласованного взаимодействия с системой и отдельными приложениям в ответ на ввод с клавиатуры.

Все элементы управления UWP имеют встроенную поддержку широких возможностей взаимодействия с пользователем, в том числе с помощью клавиатуры, а сама платформа предоставляет серьезную основу для вариантов взаимодействия с помощью клавиатуры, которые, по вашему мнению, лучше всего подходят для пользовательских элементов управления и приложений.

![изображение клавиатуры с телефоном](images/keyboard/keyboard-phone.jpg)

***UWP поддерживает клавиатуру с любым устройством***

## <a name="basic-experiences"></a>Основные возможности
![Устройства на основе фокуса](images/keyboard/focus-based-devices.jpg)

Как упоминалось ранее, устройства ввода, такие как геймпад и пульт ДУ Xbox, и средства специальных возможностей, например экранный диктор, во многом работают при навигации и применении команд так же, как и клавиатура. Общие принципы взаимодействия для разных типов ввода и средств требуют минимума дополнительных усилий со стороны пользователя и помогают добиться цели универсальной платформы Windows: "создать один раз и запускать где угодно".

При необходимости мы обсудим ключевые отличия, которые следует учитывать, и опишите все меры, которые следует учитывать.

Ниже приводится список устройств и средств, описанных в этом разделе:

| Устройство/средство                       | Описание     |
|-----------------------------------|-----------------|
|Клавиатура (аппаратная и программная)   |Помимо стандартной аппаратной клавиатуры, приложения UWP поддерживают две программные клавиатуры: [сенсорную (или программную) клавиатуру](#software-keyboard) и [экранную клавиатуру](#on-screen-keyboard).|
|Геймпад и пульт дистанционного управления         |Геймпад Xbox и пульт дистанционного управления — основные устройства ввода при [взаимодействии на расстоянии 3 м](../devices/designing-for-tv.md). Подробнее о поддержке геймпада и пульта дистанционного управления в UWP см. в разделе [Взаимодействие с помощью геймпада и пульта дистанционного управления](gamepad-and-remote-interactions.md).|
|Средства чтения с экрана (экранный диктор)          |Экранный диктор — встроенное средство чтения с экрана для Windows, обеспечивающее уникальное взаимодействие и функциональные возможности, но все равно зависящее от базовой навигации и ввода с помощью клавиатуры. Дополнительные сведения об экранном дикторе см. в разделе [Начало работы с экранным диктором](https://support.microsoft.com/help/22798/windows-10-complete-guide-to-narrator).|

## <a name="custom-experiences-and-efficient-keyboarding"></a>Персонализированное взаимодействие и эффективная поддержка клавиатуры
Как уже упоминалось, поддержка клавиатуры крайне важна для удобного взаимодействия с пользователями с различными навыками, возможностями и ожиданиями. Мы рекомендуем уделить первостепенное внимание следующему.
- Поддержка навигации и взаимодействия с помощью клавиатуры
    - Убедитесь, что активные элементы указаны как остановки перехода (а не активные — нет) и используется логичный и предсказуемый порядок навигации (см. раздел [Остановки перехода](#tab-stops))
    - Установите начальный фокус на самом логичном элементе (см. [Исходный фокус](#initial-focus)).
    - Реализуйте возможности навигации с помощью клавиш со стрелками для "внутренних переходов" (см. [Навигация](#navigation)).
- Поддержка сочетаний клавиш
    - Предоставьте сочетания клавиш для быстрых действий (см. [Сочетания клавиш](#accelerators)).
    - Предоставьте ключи доступа для навигации по пользовательскому интерфейсу приложения (см. [раздел ключи доступа](access-keys.md)).

### <a name="focus-visuals"></a>Визуальные элементы фокуса

UWP поддерживает дизайн с одним визуальным элементом фокуса. Этого достаточно для всех типов ввода и взаимодействия.
визуальный ![фокуса](images/keyboard/focus-visual.png)

Визуальный элемент фокуса:

- отображается, когда элемент пользовательского интерфейса получает фокус от клавиатуры, геймпада или пульта дистанционного управления;
- отображается в виде выделенной границы вокруг элемента пользовательского интерфейса, указывая на возможность выполнять действие;
- позволяет пользователю уверенно перемещаться по пользовательскому интерфейсу приложения;
- можно настроить для вашего приложения (см. раздел [Хорошо видимые визуальные элементы фокуса](guidelines-for-visualfeedback.md#high-visibility-focus-visuals)).

**ПРИМЕЧАНИЕ.** Визуальный элемент фокуса UWP отличается от прямоугольника фокуса экранного диктора.

### <a name="tab-stops"></a>Остановки перехода

Чтобы использовать элемент управления (в том числе элементы навигации) с помощью клавиатуры, фокус должен быть размещен на элементе. Одним из способов получения фокуса клавиатуры элементом управления является предоставление доступа к нему через навигацию по вкладкам путем определения ее в качестве позиции табуляции в последовательности табуляции приложения.

Чтобы элемент управления включался в последовательность табуляции, свойство " [включилось](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.control#Windows_UI_Xaml_Controls_Control_IsEnabled) " должно иметь значение **true** , а свойство [IsTabStop](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_IsTabStop) должно иметь значение **true**.

Чтобы специально исключить элемент управления из последовательности табуляции, присвойте [](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_IsTabStop) свойству IsTabStop **значение false**.

По умолчанию последовательность табуляции отражает порядок, в котором создаются элементы пользовательского интерфейса. Например, если `StackPanel`содержит `Button`, `Checkbox` и `TextBox`, последовательность табуляции — `Button`, `Checkbox` и `TextBox`.

Можно переопределить порядок табуляции по умолчанию, задав свойство [TabIndex](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_TabIndex) .

#### <a name="tab-order-should-be-logical-and-predictable"></a>Последовательность табуляции должна быть логичной и предсказуемой

Хорошо разработанная модель навигации с помощью клавиатуры, использующая логичную и прогнозируемую последовательность табуляции, делает приложение более интуитивно понятным и помогает пользователям изучать, открывать для себя и получать функциональные возможности более эффективно и продуктивно.

Все интерактивные элементы управления должны иметь позиции табуляции (если они не находятся в [группе](#control-group)), а неинтерактивные элементы управления, такие как метки, — нет.

Избегайте пользовательских остановок перехода, из-за которых фокус хаотично перемещается по элементам приложения. Например, список элементов управления в пользовательском интерфейсе, подобном форме, должен иметь последовательность табуляции сверху вниз и слева направо (в зависимости от региона).

Дополнительные сведения о настройке позиции табуляции см. в разделе [Специальные возможности клавиатуры](../accessibility/keyboard-accessibility.md) .

#### <a name="try-to-coordinate-tab-order-and-visual-order"></a>Старайтесь согласовать остановки перехода и визуальный порядок

Координация порядка табуляции и визуального порядка (также называемого порядком чтения или порядком отображения) помогает сократить путаницу для пользователей при переходе по пользовательскому интерфейсу приложения.

Постарайтесь оценить и предоставить самые важные команды, элементы управления и содержимое первыми в последовательности табуляции и визуальном порядке. Однако фактическое расположение на экране может зависеть от родительского контейнера макета и определенных свойств дочерних элементов, которые влияют на макет. В частности, визуальный порядок макетов, использующих метафору сетки или таблицы, может сильно отличаться от последовательности табуляции.

**ПРИМЕЧАНИЕ.** Визуальный порядок также зависит от языка и языкового стандарта.

### <a name="initial-focus"></a>Исходный фокус

Исходный фокус указывает элемент пользовательского интерфейса, получающий фокус при первом запуске или активации приложения или страницы. При использовании клавиатуры это элемент из этого элемента, который пользователь начинает взаимодействовать с ИНТЕРФЕЙСом приложения.

Для приложений UWP начальным фокусом является элемент с наибольшим значением [TabIndex](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_TabIndex) , который может получать фокус. Дочерние элементы элементов управления контейнера игнорируются. При одинаковых показателях фокус получает первый элемент визуального дерева.

#### <a name="set-initial-focus-on-the-most-logical-element"></a>Установите начальный фокус на самом логичном элементе

Установите начальный фокус на элементе пользовательского интерфейса для первого, или основного, действия, которое пользователи, скорее всего, выполнят при запуске приложения или переходе на страницу. Вот несколько примеров.
-   В приложении для фотографий фокус устанавливается на первом элементе в галерее
-   В приложении для музыки фокус устанавливается на кнопке воспроизведения

#### <a name="dont-set-initial-focus-on-an-element-that-exposes-a-potentially-negative-or-even-disastrous-outcome"></a>Не устанавливайте начальный фокус на элемент, который предоставляет потенциально отрицательный или даже катастрофный результат

Этот уровень функциональности должен быть выбран пользователем. Установка начального фокуса на элементе, активация которого приводит к значительным результатам, может стать причиной потери данных или доступа к системе. Например, не устанавливайте фокус на кнопку удалить при переходе по электронной почте.

Дополнительные сведения о переопределении порядка табуляции см. в разделе [Навигация по фокусу](focus-navigation.md) .

### <a name="navigation"></a>Навигация

Навигация с помощью клавиатуры обычно поддерживается с помощью клавиши табуляции и клавиш со стрелками.

![клавиша табуляции и клавиши со стрелками](images/keyboard/tab-and-arrow.png)

По умолчанию элементы управления UWP следуют базовым принципам поведения клавиатуры, изложенным ниже.
-   **Клавиши табуляции** выполняют переход между элементами с возможностью действия и активными элементами в последовательности табуляции.
-   **SHIFT + TAB** выполняют переход по элементам управления в обратной последовательности табуляции. Если пользователь перейдет внутри элемента управления с помощью клавиши со стрелкой, фокус переместится на последнее известное значение внутри элемента управления.
-   **Клавиши со стрелками** предоставляют возможность «внутренней навигации» для элемента управления. Когда пользователь входит во «внутреннюю навигацию», клавиши со стрелками не выполняют переход за пределы элемента управления. Вот несколько примеров.
    -   Клавиша со стрелкой вверх или вниз перемещает фокус в `ListView` и `MenuFlyout`
    -   Изменить выбранные в данный момент значения для `Slider` и `RatingsControl`
    -   Переместить курсор внутрь `TextBox`
    -   Развернуть или свернуть элементы внутри `TreeView`

Используйте эти поведения по умолчанию для оптимизации навигации с помощью клавиатуры приложения.

#### <a name="use-inner-navigation-with-sets-of-related-controls"></a>Использование «внутренней навигации» с наборами связанных элементов управления

Предоставление навигации по клавишам со стрелками в набор связанных элементов управления усиливает их связь в общей организации пользовательского интерфейса приложения.

Например, показанный здесь элемент управления `ContentDialog` обеспечивает внутреннюю навигацию по умолчанию для горизонтального ряда кнопок (для пользовательских элементов управления в разделе [группы элементов управления](#control-group)).

![пример диалогового окна](images/keyboard/dialog.png)

***Взаимодействие с коллекцией связанных кнопок упрощается с помощью навигации по клавише со стрелкой***

Если элементы отображаются в одном столбце, клавиша со стрелкой вверх или вниз выполняет перемещение между элементами. Если элементы отображаются в одном ряду, для перехода между ними нужно нажимать клавиши со стрелками влево и вправо. Если элементы расположены в несколько столбцов, для навигации используются все 4 клавиши со стрелками.

#### <a name="define-a-single-tab-stop-for-a-collection-of-related-controls"></a>Определение одной позиции табуляции для коллекции связанных элементов управления

Определив одну позицию табуляции для коллекции связанных или комплементарных элементов управления, можно сократить количество общих вкладок в приложении.

Например, на изображениях ниже показаны два столбика элементов управления `ListView`. На изображении слева показана навигация с помощью клавиши со стрелкой, в которой используется остановка перехода для перемещения между элементами управления `ListView`. На изображении справа показано, как можно упростить навигацию между дочерними элементами, исключив необходимость в переборе родительских элементов управления с помощью клавиши табуляции.


<table>
  <td><img src="images/keyboard/arrow-and-tab.png" alt="arrow and tab" /></td>
  <td><img src="images/keyboard/arrow-only.png" alt="arrow only" /></td>
</table>

***Взаимодействие с двумя элементами управления ListView с накоплением можно сделать более простым и эффективным благодаря устранению позиции табуляции и переходу с помощью только клавиш со стрелками.***

См. раздел [Группа элементов управления](#control-group), чтобы узнать, как применить примеры оптимизации для пользовательского интерфейса вашего приложения.

### <a name="interaction-and-commanding"></a>Взаимодействие и команды

Когда элемент управления имеет фокус, пользователь может взаимодействовать с ним и вызывать любые связанные функции с помощью особого ввода с клавиатуры.

#### <a name="text-entry"></a>Ввод текста

Для элементов управления, специально разработанных для текстового ввода, например `TextBox` и `RichEditBox`, используются все варианты ввода с клавиатуры для ввода текста и перемещения по нему. Такие клавиатурные команды имеют приоритет над другими. Например, в раскрывающемся меню для элемента управления `AutoSuggestBox` клавиша **ПРОБЕЛ** не распознается как команда выбора.

![ввод текста](images/keyboard/text-entry.png)

#### <a name="space-key"></a>Клавиша ПРОБЕЛ

Вне режима ввода текста клавиша **ПРОБЕЛ** вызывает действие или команду, связанную со сфокусированным элементом управления (как и при нажатии на сенсорном экране или щелчке мышью).

![Клавиша ПРОБЕЛ](images/keyboard/space-key.png)

#### <a name="enter-key"></a>Клавиша ВВОД

Клавиша **ВВОД** может выполнять разные распространенные функции при взаимодействии с пользователем, в зависимости от сфокусированного элемента управления.
-   Активирует командные элементы управления, такие как `Button` или `Hyperlink`. Чтобы не запутать конечного пользователя, клавиша **ВВОД** также активирует элементы управления, которые похожи на командные, например `ToggleButton` или `AppBarToggleButton`.
-   Отображает средство выбора пользовательского интерфейса для таких элементов управления, как `ComboBox` и `DatePicker`. Клавиша **ВВОД** также выполняет передачу и закрывает средство выбора.
-   Активирует такие элементы управления списком, как `ListView`, `GridView` и `ComboBox`.
    -   Клавиша **ВВОД**, как и клавиша **ПРОБЕЛ**, выполняет выбор элементов списка и сетки, если нет дополнительных действий, связанных с этими элементами (открытие нового окна).
    -   Если с элементом управления связано дополнительное действие, клавиша **ВВОД** выполняет его, а клавиша **ПРОБЕЛ** выполняет выбор.

**ПРИМЕЧАНИЕ.** Клавиши **ВВОД** и **ПРОБЕЛ** выполняют одно и то же действие часто, но не всегда.

![Клавиша ВВОД](images/keyboard/enter-key.png)

Клавиша ESC позволяет пользователю отменить промежуточный элемент пользовательского интерфейса (а также все текущие действия этого интерфейса).

Вот примеры в этом режиме взаимодействия:
-   Пользователь открывает `ComboBox` с выбранным значением и использует клавиши со стрелками для перемещения фокуса выбора на новое значение. Нажатие клавиши ESC закрывает `ComboBox` и восстанавливает в качестве выбранного исходное значение.
-   Пользователь инициирует окончательное удаление для сообщения электронной почты и получает запрос `ContentDialog` на подтверждение действия. Пользователь решает, что не желает выполнять это действие, и нажимает клавишу **ESC**, чтобы закрыть диалоговое окно. Так как клавиша **ESC** связана с кнопкой **Отмена**, диалоговое окно закроется, а действие будет отменено. Клавиша **ESC** влияет только на промежуточный элемент пользовательского интерфейса, она не закрывает пользовательский интерфейс приложения и не выполняет обратный переход.

![Клавиша ESC](images/keyboard/esc-key.png)

#### <a name="home-and-end-keys"></a>Клавиши HOME и END

С помощью клавиш **HOME** и **END** пользователь может прокрутить область пользовательского интерфейса в начало или в конец.

Вот примеры в этом режиме взаимодействия:
-   Для элементов управления `ListView` и `GridView` клавиша **HOME** перемещает фокус на первый элемент и прокручивает область интерфейса так, чтобы он был показан на экране. Клавиша **END** делает то же самое с последним элементом.
-   Для элемента управления `ScrollView` клавиша **HOME** выполняет прокрутку до верхней части области, а клавиша **END** — до нижней (фокус не меняется).

![Клавиши HOME и END](images/keyboard/home-and-end.png)

#### <a name="page-up-and-page-down-keys"></a>Клавиши PAGE UP и PAGE DOWN

С помощью клавиш **PAGE** пользователь может прокручивать область пользовательского интерфейса дискретно.

Например, для элементов управления `ListView` и `GridView` клавиша **PAGE UP** прокручивает область вверх на "страницу" (обычно высота окна просмотра) и перемещает фокус в ее верхнюю часть. Кроме того, клавиша **PAGE DOWN** прокручивает область вниз по странице и перемещает фокус в нижнюю часть области.

![Клавиши PAGE UP и PAGE DOWN](images/keyboard/page-up-and-down.png)

### <a name="keyboard-shortcuts"></a>Сочетания клавиш

Сочетания клавиш позволяют упростить использование приложения, предоставляя расширенную поддержку специальных возможностей и улучшенную эффективность для пользователей с клавиатуры.

Помимо поддержки навигации и активации с помощью клавиатуры в приложении, рекомендуется также предоставить ярлыки для функциональности приложения. Навигация по вкладкам обеспечивает хороший, базовый уровень поддержки клавиатуры, но с более сложным пользовательским интерфейсом также может потребоваться добавить поддержку сочетаний клавиш. 

Сочетание клавиш — комбинация клавиш, улучшающая производительность путем предоставления пользователям удобного доступа к функциям приложения. Существует два вида ярлыка:
-   [Ускорители](#accelerators) — это ярлыки, которые вызывают команду приложения. Ваше приложение может или не предоставлять конкретный пользовательский интерфейс, соответствующий команде. Ускорители обычно состоят из клавиши CTRL + клавиша с буквой.
-   [Ключи доступа](#access-keys) — это ярлыки, которые устанавливают фокус на конкретный пользовательский интерфейс в приложении. Обычные ключи доступа состоят из клавиши ALT и клавиши с буквой.

Обеспечение согласованных сочетаний клавиш, поддерживающих аналогичные задачи в приложениях, делает их гораздо более полезными и мощными и помогает пользователям запомнить их.

#### <a name="accelerators"></a>Ускорители

Ускорители помогают пользователям выполнять обычные действия в приложении гораздо быстрее и эффективнее. 

Примеры ускорителей:
-   При нажатии клавиш CTRL + N в любом месте **почтового** приложения запускается новый элемент электронной почты.
-   Нажатие клавиш CTRL + E в любом месте в Microsoft ребра (и многих Microsoft Store приложениях) запускает поиск.

Ускорители обладают следующими характеристиками:
-   В основном они используют сочетания клавиш CTRL и функции (сочетания клавиш для систем Windows также используют клавиши ALT + не алфавитно-цифровые ключи и ключ эмблемы Windows).
-   Они назначаются только наиболее часто используемым командам.
-   Они предназначены для запоминания и описываются только в меню, подсказках и справке.
-   Они влияют на все приложение, когда это поддерживается.
-   Их следует назначать единообразно, как только они запомнили и не задокументированы напрямую.

#### <a name="access-keys"></a>Ключи доступа

См. страницу [Клавиши доступа](access-keys.md), чтобы получить более подробные сведения о поддержке клавиш доступа с помощью UWP.

Клавиши доступа предоставляют пользователям с нарушениями двигательных функций возможность нажимать клавиши по одной для действий с определенным элементом пользовательского интерфейса. Кроме того, клавиши доступа можно использовать для передачи сведений о дополнительных сочетаниях клавиш, благодаря чему опытные пользователи смогут быстро выполнять действия.

Клавиши доступа обладают следующими характеристиками.
-   Они используют клавишу ALT и буквенно-цифровую клавишу.
-   Они предназначены главным образом для специальных возможностей.
-   Они задокументированы непосредственно в пользовательском интерфейсе, расположенном рядом с элементом управления, с помощью [ключевых советов](access-keys.md).
-   Они действуют только в текущем окне и перемещают фокус на соответствующий пункт меню или элемент управления.
-   Ключи доступа должны быть постоянно назначены часто используемым командам (особенно кнопки фиксации), когда это возможно.
-   Они локализуются.

#### <a name="common-keyboard-shortcuts"></a>Основные сочетания клавиш

В следующей таблице представлен небольшой пример часто используемых сочетаний клавиш. 

| Действие                               | Командная клавиша                                      |
|--------------------------------------|--------------------------------------------------|
| Выделить все                           | CTRL+A                                           |
| Постоянный выбор                  | SHIFT+клавиша со стрелкой                                  |
| Сохранить                                 | CTRL+S                                           |
| Поиск                                 | CTRL+F                                           |
| Print                                | CTRL+P                                           |
| Копировать                                 | CTRL+C                                           |
| Вырезать                                  | CTRL+X                                           |
| Вставка                                | CTRL+V                                           |
| Отменить                                 | CTRL+Z                                           |
| Следующая вкладка                             | CTRL+TAB                                         |
| Закрыть вкладку                            | CTRL+F4 или CTRL+W                                |
| Контекстное масштабирование                        | CTRL+знак "плюс" или CTRL+знак "минус"                                 |

Полный список системных ярлыков Windows см. в разделе [сочетания клавиш для Windows](https://support.microsoft.com/help/12445/windows-keyboard-shortcuts). Общие ярлыки приложений см. в разделе [сочетания клавиш для приложений Майкрософт](https://support.microsoft.com/help/13805/windows-keyboard-shortcuts-in-apps).

## <a name="advanced-experiences"></a>Расширенное взаимодействие

В этом разделе мы рассмотрим некоторые более сложные виды взаимодействия с клавиатурой, которые поддерживаются приложениями UWP, а также некоторые виды поведения, которые следует учитывать при использовании приложения на различных устройствах и с помощью различных средств.

### <a name="control-group"></a>Группа управления

Можно сгруппировать набор связанных или дополняющих друг друга элементов управления в «группу управления» (или направление области), что позволит выполнять «внутреннюю навигацию» с помощью клавиш со стрелками. Группа элементов управления может быть одной остановкой перехода, или можно указать несколько остановок перехода в пределах группы элементов управления.

#### <a name="arrow-key-navigation"></a>Навигация с помощью клавиш со стрелками

Пользователи ожидают поддержки навигации с помощью клавиш со стрелками при наличии группы аналогичных, связанных элементов управления в области пользовательского интерфейса:
-   `AppBarButtons` в `CommandBar`
-   `ListItems` или `GridItems` внутри `ListView` или `GridView`
-   `Buttons` внутри `ContentDialog`

Элементы управления UWP поддерживают навигацию с помощью клавиш со стрелками по умолчанию. Для пользовательских макетов и групп элементов управления используйте `XYFocusKeyboardNavigation="Enabled"`, чтобы обеспечить аналогичное поведение.

Рекомендуется добавить поддержку навигации по клавишам со стрелками при использовании следующих элементов управления:

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/dialog.png" alt="Dialog buttons"/></p>
      <p><sup>Кнопки диалогового окна</sup></p>
      <p><img src="images/keyboard/radiobutton.png" alt="Radio buttons"/></p>
      <p><sup>Элементов RadioButton</sup></p>     
    </td>
    <td>
      <p><img src="images/keyboard/appbar.png" alt="AppBar buttons"/></p>
      <p><sup>аппбарбуттонс</sup></p>
      <p><img src="images/keyboard/list-and-grid-items.png" alt="List and Grid items"/></p>
      <p><sup>ListItems и Гридитемс</sup></p>
    </td>    
  </tr>
</table>

#### <a name="tab-stops"></a>Остановки перехода

В зависимости от функциональности и макета приложения лучшим вариантом навигации для группы управления может быть одна позиция табуляции с навигацией по стрелкам к дочерним элементам, нескольким позициям табуляции или некоторой комбинации.

##### <a name="use-multiple-tab-stops-and-arrow-keys-for-buttons"></a>Используйте несколько остановок перехода и клавиши со стрелками для кнопок

Пользователи, которым нужны специальные возможности, полагаются на устоявшиеся правила навигации с помощью клавиатуры, по которым обычно не используются клавиши со стрелками для навигации по коллекции кнопок. Тем не менее пользователи, у которых не ухудшено зрение, могут считать такое поведение естественным.

Пример поведения UWP по умолчанию в данном случае — `ContentDialog`. Хотя можно использовать клавиши со стрелками для перехода между кнопками, каждая кнопка также является остановкой перехода.

##### <a name="assign-single-tab-stop-to-familiar-ui-patterns"></a>Назначайте одну остановку перехода знакомым шаблонам пользовательского интерфейса

Если в макете применяется известный шаблон пользовательского интерфейса для группы элементов управления, назначение одной остановки перехода группе может повысить эффективность навигации для пользователей.

Ниже перечислены примеры таких данных.
-   `RadioButtons`
-   Несколько `ListViews`, которые выглядят как один `ListView`
-   Любой пользовательский интерфейс, который выглядит и работает в виде сетки плиток (например, плитки меню "Пуск")

#### <a name="specifying-control-group-behavior"></a>Указание поведения для группы элементов управления

Используйте следующие API для поддержки поведения пользовательской группы элементов управления (все они рассматриваются более подробно далее в этом разделе):

-   [XYFocusKeyboardNavigation](focus-navigation.md#2d-directional-navigation-for-keyboard) разрешает навигацию между элементами управления с помощью клавиш со стрелками.
-   [TabFocusNavigation](focus-navigation.md#tab-navigation) показывает, сколько здесь остановок перехода, несколько или одна.
-   [FindFirstFocusableElement и FindLastFocusableElement](focus-navigation-programmatic.md#find-the-first-and-last-focusable-element) устанавливает фокус на первом элементе с помощью клавиши **HOME** и на последнем элементе с помощью клавиши **END**.

На следующем рисунке показано интуитивно понятное поведение при навигации с помощью клавиатуры для группы элементов управления — связанных переключателей. В этом случае мы рекомендуем одну остановку перехода для группы элементов управления, внутренней навигации между переключателями с помощью клавиш со стрелками, привязку клавиши **HOME** к первому переключателю, а клавиши **END** — к последнему.

![объединение элементов](images/keyboard/putting-it-all-together.png)

### <a name="keyboard-and-narrator"></a>Клавиатура и экранный диктор

Экранный диктор — это средство специальных возможностей пользовательского интерфейса, ориентированное на пользователей клавиатуры (также поддерживаются другие типы ввода). Тем не менее функции экранного диктора выходят за рамки взаимодействия с помощью клавиатуры, поддерживаемые в приложениях UWP. При разработке приложения UWP для экранного диктора требуется особое внимание. ([Основная страница экранного диктора](https://support.microsoft.com/help/22808/windows-10-narrator-basics) поможет пользователю с ним взаимодействовать.)

Некоторые различия между вариантами поведения клавиатуры UWP и вариантами, которые поддерживаются экранным диктором:
-   Дополнительные сочетания клавиш для навигации по элементам пользовательского интерфейса, которые не предоставляются при стандартной навигации с помощью клавиатуры, например CAPS LOCK + клавиши со стрелками для чтения меток элементов управления.
-   Переход к отключенным элементам. По умолчанию отключенные элементы недоступны при стандартной навигации с помощью клавиатуры.
-   «Представления» управления для ускоренной навигации в зависимости от детализации пользовательского интерфейса. Пользователи могут переходить к элементам, символам, словам, строкам, абзацам, ссылкам, заголовкам, таблицам, ориентирам и рекомендациям. Стандартная навигация с помощью клавиатуры предоставляет эти объекты как обычный список, который может быть затруднителен для навигации без сочетания клавиш.

#### <a name="case-study--autosuggestbox-control"></a>Практический пример: элемент управления AutoSuggestBox

Кнопка "Поиск" для `AutoSuggestBox` недоступна при стандартной навигации с помощью клавиатуры, если используются клавиша табуляции и клавиши со стрелками, поскольку пользователь может нажать клавишу **ВВОД**, чтобы отправить запрос поиска. Однако она доступна через экранный диктор при нажатии клавиши CAPS LOCK + клавиши со стрелками.

![Фокус с клавиатуры при автозаполнении](images/keyboard/auto-suggest-keyboard.png)

*С помощью клавиатуры пользователь нажимает* клавишу ***Ввод*** , *чтобы отправить поисковый запрос* .

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/auto-suggest-narrator-1.png" alt="autosuggest narrator focus"/></p>
      <p><em>С помощью экранного диктора пользователи нажимают клавишу <strong>Ввод</strong> , чтобы отправить поисковый запрос.</em></p>
    </td>
    <td>
      <p><img src="images/keyboard/auto-suggest-narrator-2.png" alt="autosuggest narrator focus on search"/></p>
      <p><em>С помощью экранного диктора пользователи также могут получить доступ к кнопке поиска, используя <strong>клавишу Caps Lock + стрелка вправо</strong>, а затем нажав клавишу <strong>пробел</strong> .</em></p>
    </td>
  </tr>
</table>

### <a name="keyboard-and-the-xbox-gamepad-and-remote-control"></a>Клавиатура, геймпад Xbox и пульт дистанционного управления

Геймпады Xbox и пульты управления поддерживают многие виды поведения клавиатуры UWP и взаимодействия. Однако из-за недостатка различных основных параметров, доступных на клавиатуре, геймпад и пульт дистанционного управления не имеют многих возможностей оптимизации клавиатуры (пульт дистанционного управления даже больше ограничен, чем геймпад).

Дополнительные сведения о поддержке UWP для планшета и входных данных удаленного управления см. в разделе [взаимодействие планшета и удаленного управления](gamepad-and-remote-interactions.md) .

Ниже показаны некоторые основные сопоставления между клавиатурой, геймпадом и пультом дистанционного управления.

| **Клавиатура**  | **Игровой планшет**                         | **Удаленное управление**  |
|---------------|-------------------------------------|---------------------|
| Пробел         | Кнопка A                            | Кнопка выбора       |
| ВВОД         | Кнопка A                            | Кнопка выбора       |
| ESCAPE        | кнопка B                            | Кнопка "Назад"         |
| HOME или END      | Нет данных                                 | Нет данных                 |
| PAGE UP и PAGE DOWN  | Кнопка курка для вертикальной прокрутки, кнопка бампера для горизонтальной прокрутки   | Нет данных                 |

Некоторые основные различия, которые следует иметь в виду при разработке приложения UWP для использования с помощью геймпада и пульта дистанционного управления, приведены ниже:
-   Для ввода текста пользователь должен нажать A, чтобы активировать элемент управления текстом.
-   Перемещение фокуса не ограничивается группами элементов управления — пользователи могут свободно перейти на любой фокусирующийся элемент пользовательского интерфейса в приложении.

    **ПРИМЕЧАНИЕ.** Можно переместить фокус на любой фокусирующийся элемент пользовательского интерфейса в направлении нажатия клавиши, если он не находится в наложенном пользовательском интерфейсе или если не указано [включение фокуса](gamepad-and-remote-interactions.md#focus-engagement), что препятствует входу фокуса в область или выходу из нее до включения или выключения с помощью кнопки A. Подробнее см. в разделе [Направленная навигация](#directional-navigation).
-   Кнопки крестовины и левого джойстика используются для перемещения фокуса между элементами управления и внутренней навигации.

    **ПРИМЕЧАНИЕ.** Геймпад и пульт дистанционного управления выполняют переход только к элементам, находящимся в том же визуальном порядке, что и нажатые клавиши направления. Навигация в указанном направлении отключается, когда нет последующего элемента, на котором можно установить фокус. В некоторых ситуациях пользователи клавиатуры не всегда имеют такое ограничение. Подробнее см. в разделе [Встроенная оптимизация клавиатуры](#built-in-keyboard-optimization).

#### <a name="directional-navigation"></a>Направленная Навигация

Направленная навигация управляется с помощью вспомогательного класса UWP [Диспетчер фокуса](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Input.FocusManager), который принимает нажатую клавишу направления (клавишу со стрелкой, крестовину) и пытается переместить фокус в соответствующем визуальном направлении.

В отличие от клавиатуры, когда приложение выходит из [режима мыши](gamepad-and-remote-interactions.md#mouse-mode), направление навигации применяется ко всему приложению для планшета и пульта дистанционного управления. Дополнительные сведения об оптимизации направленной навигации см. в статье [взаимодействие планшета и удаленного управления](gamepad-and-remote-interactions.md) .

**ПРИМЕЧАНИЕ.** Навигация с помощью клавиши табуляции на клавиатуре не считается направленной. Дополнительные сведения см. в разделе [Остановки перехода](#tab-stops).

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/directional-navigation.png" alt="directional navigation"/></p>
      <p><strong>поддерживается <em>направленной навигации</strong></br>Используя направленные клавиши (стрелки клавиатуры, игровой планшет и удаленное управление D-Pad), пользователь может перемещаться между различными элементами управления.</em></p>
    </td>
    <td>
      <p><img src="images/keyboard/no-directional-navigation.png" alt="no directional navigation"/></p>
      <p><em><strong>направление навигации не поддерживается</strong> </br>Пользователь не может перемещаться между различными элементами управления с помощью клавиш направления. Другие методы перехода между элементами управления (клавиша TAB) не затрагиваются.</em></p>
    </td>
  </tr>
</table>

### <a name="built-in-keyboard-optimization"></a>Встроенная оптимизация клавиатуры

В зависимости от используемых элементов управления и макета, приложения UWP можно оптимизировать специально для ввода с клавиатуры.

В следующем примере показана группа элементов списка, сетки и меню, которые были назначены одной остановке перехода (см. раздел [Остановки перехода](#tab-stops)). Когда группа в фокусе, внутренняя навигация выполняется с помощью клавиш направления со стрелками в соответствии с визуальным порядком (см. раздел [Навигация](#navigation)).

![Навигация с помощью клавиш со стрелками по одному столбцу](images/keyboard/single-column-arrow.png)

***Навигация по клавише со стрелкой одного столбца***

![Навигация с помощью клавиш со стрелками по одной строке](images/keyboard/single-row-arrow.png)

***Навигация по клавишам со стрелкой в одной строке***

![Навигация с помощью клавиш со стрелками по нескольким столбцам и строкам](images/keyboard/multiple-column-and-row-navigation.png)

***Навигация по клавишам со стрелкой нескольких столбцов или строк***

#### <a name="wrapping-homogeneous-list-and-grid-view-items"></a>Перенос однородных элементов из представления списка и сетки

Направленная навигация не всегда является наиболее эффективным способом перехода по нескольким строкам и столбцам из элементов списка и сетки.

**ПРИМЕЧАНИЕ.** Пункты меню — это обычно списки в один столбец, но в некоторых случаях могут применяться особые правила фокусировки (см. раздел [Всплывающее окно пользовательского интерфейса](#popup-ui)).

Объекты списка и сетки можно создать с помощью нескольких строк или столбцов. Обычно они развертываются по строкам (элементы сначала заполняют всю строку, после чего начинают заполнять следующую строку) или по столбцам (элементы сначала заполняют весь столбец, после чего начинают заполнять следующий столбец). Выбор варианта развертки (по строке или столбцу) зависит от направления прокрутки, и вы должны убедиться, что порядок элементов с ним не конфликтует.

Когда при развертке по строкам (элементы заполняются слева направо, сверху вниз) фокус находится на последнем элементе в строке и нажата клавиша со стрелкой вправо, фокус перемещается на первый элемент в следующей строке. Это же происходит в обратном направлении: когда фокус установлен на первом элементе строки и нажата клавиша со стрелкой влево, фокус перемещается к последнему элементу предыдущей строки.

Когда при развертке по столбцам (элементы заполняются сверху вниз и слева направо) фокус находится на последнем элементе в столбце и пользователь нажимает клавишу со стрелкой вниз, фокус перемещается на первый элемент следующего столбца. Это же происходит в обратном направлении: когда фокус установлен на первом элементе столбца и нажата клавиша со стрелкой вверх, фокус перемещается к последнему элементу предыдущего столбца.

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/row-major-keyboard.png" alt="row major keyboard navigation"/></p>
      <p><em>Основная навигация по строкам</em></p>
    </td>
    <td>
      <p><img src="images/keyboard/column-major-keyboard.png" alt="column major keyboard navigation"/></p>
      <p><em>Основная навигация по столбцам клавиатуры</em></p>
    </td>
  </tr>
</table>

#### <a name="popup-ui"></a>Всплывающий пользовательский интерфейс

Как уже упоминалось, следует попытаться обеспечить направление навигации, соответствующее визуальному порядку элементов управления в пользовательском интерфейсе приложения.

Некоторые элементы управления (такие как контекстное меню, меню команды CommandBar и меню автоподбора) отображают всплывающее меню в расположении и направлении (по умолчанию вниз) относительно основного элемента управления и доступного пространства экрана. Обратите внимание, что во время выполнения на начало направления могут влиять различные факторы.

<table>
  <td><img src="images/keyboard/command-bar-open-down.png" alt="command bar opens down with down arrow key" /></td>
  <td><img src="images/keyboard/command-bar-open-up.png" alt="command bar opens up with down arrow key" /></td>
</table>

Для этих элементов управления при первом открытии меню (и отсутствии элемента, выбранного пользователем) клавиша со стрелкой вниз всегда устанавливает фокус на первый элемент, а клавиша со стрелкой вверх всегда устанавливает фокус на последний элемент в меню. 

Если последний элемент имеет фокус и нажата клавиша со стрелкой вниз, фокус переместится к первому элементу в меню. Аналогично, если первый элемент имеет фокус и нажата клавиша со стрелкой вверх, фокус переместится к последнему элементу в меню. Такое поведение называется *циклическим* и полезно для навигации по всплывающим меню, которые могут открываться в непредсказуемых направлениях.

> [!NOTE]
> Следует избегать циклического запуска в пользовательских интерфейсах, не являющихся всплывающими, когда пользователи могут перехватываться в бесконечном цикле. 

Рекомендуется эмулировать эти же поведения в пользовательских элементах управления. Пример кода для реализации этого поведения можно найти в документации по [программной навигации по фокусу](focus-navigation-programmatic.md#find-the-first-and-last-focusable-element) .

## <a name="test-your-app"></a>Тестирование приложения

Протестируйте свое приложение со всех поддерживаемых устройств ввода, чтобы переход по элементам пользовательского интерфейса был согласованным и интуитивно понятным, а посторонние элементы не нарушали последовательность табуляции неожиданным образом.

## <a name="related-articles"></a>Связанные статьи
* [События клавиатуры](keyboard-events.md)
* [Распознавание устройств ввода](identify-input-devices.md)
* [Ответ на присутствие сенсорной клавиатуры](respond-to-the-presence-of-the-touch-keyboard.md)
* [Пример визуальных элементов фокуса](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/XamlFocusVisuals)

## <a name="appendix"></a>Приложение

### <a name="software-keyboard"></a>Программная клавиатура

Программная клавиатура отображается на экране, пользователь может работать на ней вместо физической для ввода текста и данных с помощью сенсорного экрана, мыши, пера, стилуса или другого указательного устройства (сенсорный экран необязателен). На сенсорном экране таких клавиатур можно касаться непосредственно для ввода текста. На устройствах с Xbox One можно выбирать отдельные клавиши путем перемещения визуального фокуса или с помощью сочетания клавиш на геймпаде или пульте дистанционного управления.

![Сенсорная клавиатура Windows 10](images/keyboard/default.png)

***Сенсорная клавиатура Windows 10***

![Экранная клавиатура Xbox One](images/keyboard/xbox-onscreen-keyboard.png)

***Клавиатура Xbox на одной экранной клавиатуре***

В зависимости от устройства программная клавиатура появляется, когда в фокус попадает текстовое поле или другой редактируемый текстовый элемент управления либо когда пользователь включает ее вручную на странице **Центр уведомлений**:

![Значок сенсорной клавиатуры в Центре уведомлений](images/keyboard/touch-keyboard-notificationcenter.png)

Если приложение программным способом перемещает фокус на элемент управления для ввода текста, сенсорная клавиатура не вызывается. Это исключает выполнение непредвиденных операций, не инициированных пользователем. Однако клавиатура автоматически скрывается, когда фокус программно перемещается на элемент, отличный от элемента управления для ввода текста.

Сенсорная клавиатура обычно остается видимой, когда пользователь переходит по элементам управления в форме. Это поведение может меняться в зависимости от других типов элементов управления в форме.

Ниже приведен список элементов управления, которые могут получать фокус в сеансе ввода текста с помощью сенсорной клавиатуры, не закрывая клавиатуру. Чтобы напрасно не перегружать пользовательский интерфейс и не запутывать пользователя, сенсорная клавиатура остается на виду, так как пользователь скорее всего будет переходить между этими элементами управления и вводом текста с помощью сенсорной клавиатуры.

-   Флажок
-   поле со списком;
-   Переключатель
-   полоса прокрутки;
-   дерево;
-   элемент дерева;
-   Меню
-   Строка меню
-   элемент меню;
-   панель инструментов;
-   List
-   элемент списка.

Вот примеры различных режимов сенсорной клавиатуры. На первом рисунке показана раскладка по умолчанию, а на втором — раскладка мини-клавиатуры (может предлагаться не для всех языков).

![сенсорная клавиатура в режиме раскладки по умолчанию](images/keyboard/default.png)

***Сенсорная клавиатура в режиме макета по умолчанию***

![сенсорная клавиатура в режиме развернутой раскладки](images/keyboard/extendedview.png)

***Сенсорная клавиатура в режиме расширенного макета***

Успешное взаимодействие с клавиатурой позволяет пользователям выполнять основные сценарии приложений, пользуясь только клавиатурой, то есть пользователи имеют доступ ко всем интерактивным элементам интерфейса и могут активировать любую функцию по умолчанию. Несколько факторов могут влиять на степень успеха, включая навигацию с помощью клавиатуры, клавиши доступа для специальных возможностей и сочетания клавиш для опытных пользователей.

**Обратите внимание** ,  сенсорная клавиатура не поддерживает переключение и большинство системных команд.

#### <a name="on-screen-keyboard"></a>Экранная клавиатура
Как и программная клавиатура, экранная клавиатура — это визуальная программная клавиатура, которую можно использовать вместо физической для ввода текста и данных с использованием сенсорного экрана, мыши, пера или другого указательного устройства (сенсорный экран необязателен). Экранная клавиатура предназначена для систем, не имеющих физической клавиатуры, или для людей с нарушениями двигательных функций, которые не позволяют им пользоваться традиционными физическими устройствами ввода. Экранная клавиатура имитирует почти все (если не все) функции аппаратной клавиатуры.

Экранную клавиатуру можно включить на странице "Клавиатура" в разделе "Параметры" &gt; "Специальные возможности".

**ПРИМЕЧАНИЕ.** Сенсорная клавиатура имеет более низкий приоритет, чем экранная, и в присутствии последней не отображается.

![Экранная клавиатура](images/keyboard/osk.png)

***Экранная клавиатура***

На странице [Экранная клавиатура](https://support.microsoft.com/help/10762/windows-use-on-screen-keyboard) приведены дополнительные сведения об экранной клавиатуре.

## <a name="related-articles"></a>Связанные статьи

- [Специальные возможности клавиатуры](../accessibility/keyboard-accessibility.md)
