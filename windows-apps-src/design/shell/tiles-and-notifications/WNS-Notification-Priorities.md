---
title: Приоритеты уведомления WNS
description: Описание различных приоритетов, которые можно задать для уведомления о
ms.date: 01/10/2017
ms.topic: article
keywords: Windows 10, uwp, WinRT API, WNS
localizationpriority: medium
ms.openlocfilehash: 2719c3228c95075eb2a940d12b6c91049b67f524
ms.sourcegitcommit: 82edc63a5b3623abce1d5e70d8e200a58dec673c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2019
ms.locfileid: "58291792"
---
# <a name="wns-notification-priorities"></a>Приоритеты уведомления WNS
Установив приоритет уведомления с простой заголовок сообщения WNS POST, можно управлять как уведомления доставляются в ситуациях конфиденциальных батареи.

## <a name="power-on-windows"></a>Включение Windows
Как дополнительные пользователи работают только на устройства от батареи, сводя к минимуму использование энергии стала стандартной обязательным требованием для всех приложений. Если приложения потребляют больше энергии, чем значение, которые они предоставляют, пользователи могут удалить приложения. Хотя операционная система Windows снижает энергопотребление на батарею, где это возможно, это приложение отвечает за эффективное взаимодействие. 

Приоритеты WNS — один из способов перемещения некритические работать с аккумулятора. Приоритеты WNS сообщаете системе уведомления, которое должно быть доставлено мгновенно и который можно подождать, пока устройство подключено к источнику питания. С помощью этих подсказок выводить уведомления, точное время, их можно использовать для пользователя и приложения. 

## <a name="power-modes-on-the-device"></a>Режимы питания на устройстве
Все устройства Windows работает через разнообразные режимы питания (батареи, экономия заряда и расходы), а пользователи ожидают, что различные поведения из приложений в различных режимах. Если устройство включено, все уведомления должны доставляться. В режиме экономии заряда должны доставляться только наиболее важные уведомления. При подключении устройства, можно выполнить синхронизацию или не содержащую время критически важные операции.

Windows не знает, какие уведомления важны для любого пользователя или приложения, поэтому система полностью зависит от приложения для задания приоритета вправо для их получения уведомлений. 

## <a name="priorities"></a>Приоритеты
Существует четыре приоритета для приложения для использования при отправке Push-уведомлений. Приоритет имеет значение на отдельные уведомления, позволяет выбрать, какие уведомления должны доставляться мгновенно (например, Мгновенное сообщение) и какие из них может ожидать (например, обратитесь в службу обновления фото).

Приоритеты должны: 

|    Priority    |    Переопределение пользователя    |    Описание    |    Пример    |
|----------------|---------------------|-------------------|---------------|
|    Высокий    |    Да, пользователь может блокировать все уведомления из приложения или может препятствовать запуску приложения регулируется в режиме экономии заряда.    |    Наиболее важные уведомления, которые необходимо доставить сразу при любых обстоятельствах, когда устройство может получать уведомления. Такие вещи, как VoIP звонки или критических оповещений, которые следует пробуждения устройства попадают в эту категорию.    |    Вызовы VoIP, время - критических оповещений    |
|    Средний    |    Да, пользователь может блокировать все уведомления из приложения или может препятствовать запуску приложения регулируется в режиме экономии заряда.    |    Эти вещи, которые не являются как важные, вещи, которые не должны происходить сразу, но будет самым пользователей, если они не работают в фоновом режиме.    |    Вторичный синхронизации учетных записей электронной почты, обновляет живую плитку.    |
|    Низкий    |    Да, пользователь может блокировать все уведомления из приложения или может препятствовать запуску приложения регулируется в режиме экономии заряда.    |    Уведомления, которые лучше подходят только, когда пользователь использует устройство или когда фоновое действие имеет смысл. Они кэшируются и не обрабатывается до входа пользователя или вилки в своем устройстве.    |    Обратитесь в службу состояния (оперативный/автономный режим)    |
|    Очень низкий     |    Нет — он не может предотвратить регулируется в режиме экономии заряда уведомления с очень низким приоритетом.    |    Это практически так же, как с низким приоритетом, за исключением пользователей не может переопределить политику заставки батареи. Эти уведомления никогда не будут доставляться в Экономия заряда.    |    Синхронизацию файлов для службы синхронизации.    |

Обратите внимание на то, что многие приложения будут получать уведомления об различные приоритеты на протяжении их жизненного цикла. Так как приоритет имеет значение на основе-уведомлений, это не проблема. Приложение VoIP можно отправлять уведомления с высоким приоритетом для входящего вызова и следуйте его с низким приоритетом один при контакт перейдет в оперативный режим. 

## <a name="setting-the-priority"></a>Настройка приоритета

Установка приоритета на уведомления о запросах осуществляется с помощью дополнительных заголовка запроса POST, `X-WNS-PRIORITY`. Это целочисленное значение от 0 до 3 сопоставляющийся приоритет: 

| Имя приоритета | Значение X-WNS-ПРИОРИТЕТА | По умолчанию для: |
|---------------|----------------------|------------------|
| Высокий | 1 | Всплывающие уведомления |
| Meduim | 2 | Плитки и эмблемы |
| Низкий | 3 | Необработанное |
| Очень низкий | 4 |  |

Быть обратно совместима, установка приоритета не является обязательным. В случае, если приложение не задает приоритет их уведомления, система будет предоставлять приоритет по умолчанию. Значения по умолчанию отображаются на диаграмме выше и совместимости с существующим версиям Windows. 

## <a name="detailed-listing-of-desktop-behavior"></a>Подробное описание поведения рабочего стола 

Если доставка приложения через множество различных номеров SKU Windows обычно лучше всего выполните диаграммы в предыдущем разделе. 

Ниже перечислены более конкретные режимы, рекомендуемые для каждого уровня приоритета. Это не гарантирует, что каждое устройство будет работать точно в соответствии с диаграммы. Изготовители оборудования могут по-разному настроить поведение, но наиболее близкие к этой диаграммы. 

| Состояние устройства    | ПРИОРИТЕТ: Высокий    |    ПРИОРИТЕТ: Средний        | ПРИОРИТЕТ: Низкий    |    ПРИОРИТЕТ: Очень низкий    |
|-------------------------------------------------------|----------------------------------------------------|----------------------------------------------------|----------------------------------------------------|--------------------------|
|    Экран или питание от сети    |    Доставка    |    Доставка    |    Доставка    |    Доставка    |
|    Экран и от батареи    |    Доставка    |    Если пользователь исключен: доставлять Else: пакетной службы     |    Если пользователь исключен: доставлять Else: кэш *    |    Кэш    |
|    Экономия заряда включена    |    Если пользователь исключен: доставлять Else: кэша    |    Если пользователь исключен: доставлять Else: кэша    |    Если пользователь исключен: доставлять Else: кэша    |    Кэш     |
|    На аккумулятор + Экономия заряда с поддержкой + экрана    |    Если пользователь исключен: доставлять Else: кэша    |    Если пользователь исключен: доставлять Else: кэша    |    Если пользователь исключен: доставлять Else: кэша    |    Кэш    |

Обратите внимание, что с низким приоритетом уведомления будут доставлены по умолчанию для экрана off и аккумулятором только для Windows Phone на основе устройств. Это необходимо для совместимости maintian с существующая политика MPNS. Обратите внимание на то, что четвертый и пятый строки одинаковы, просто вызывая различных сценариев.

Исключение приложения в Экономия заряда, пользователей необходимо перейти к «Батареи использования по App» в параметрах и установите флажок «Разрешить приложение для выполнения фоновых задач». Этот выбор пользователя освобождает приложение от Экономия заряда для высокий, средний и низкий приоритет уведомления. Можно также вызвать [BackgroundExecutionManager API](https://docs.microsoft.com/uwp/api/windows.applicationmodel.background.backgroundexecutionmanager.requestaccesskindasync#Windows_ApplicationModel_Background_BackgroundExecutionManager_RequestAccessKindAsync_Windows_ApplicationModel_Background_BackgroundAccessRequestKind_System_String_) программно запрашивать разрешение пользователя.  

## <a name="related-topics"></a>См. также
- [Обзор служб push-уведомлений Windows (WNS)](windows-push-notification-services--wns--overview.md)
- [Запрашивает разрешение на выполнение в фоновом режиме](https://docs.microsoft.com/uwp/api/windows.applicationmodel.background.backgroundexecutionmanager.requestaccesskindasync#Windows_ApplicationModel_Background_BackgroundExecutionManager_RequestAccessKindAsync_Windows_ApplicationModel_Background_BackgroundAccessRequestKind_System_String_)
