---
Description: Узнайте о различных параметрах классических приложений Win32 для отправки всплывающих уведомлений.
title: Всплывающие уведомления из классических приложений
label: Toast notifications from desktop apps
template: detail.hbs
ms.date: 05/01/2018
ms.topic: article
keywords: Windows 10, UWP, Win32, Desktop, всплывающие уведомления, мост настольных систем, msix, разреженный пакет, параметры отправки всплывающих уведомлений, com-сервер, активатор com, com, имитация com, без com, без com, отправка всплывающего уведомления
ms.localizationpriority: medium
ms.openlocfilehash: b84120a592a1c2f5f18c6b6121568cbf126a582e
ms.sourcegitcommit: 87fd0ec1e706a460832b67f936a3014f0877a88c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/12/2020
ms.locfileid: "83234543"
---
# <a name="toast-notifications-from-desktop-apps"></a>Всплывающие уведомления из классических приложений

Классические приложения (включая Упакованные приложения [MSIX](https://docs.microsoft.com/windows/msix/desktop/source-code-overview) , приложения, использующие [разреженные пакеты](https://docs.microsoft.com/windows/apps/desktop/modernize/grant-identity-to-nonpackaged-apps) для получения удостоверений пакетов и классические приложения Win32 без пакетов) могут отправлять Интерактивные всплывающие уведомления так же, как приложения Windows. Однако существует несколько разных параметров поддержки классических приложений из-за разных схем активации.

В этой статье приведен список параметров, которые можно использовать для отправки всплывающих уведомлений в Windows 10. Каждый параметр полностью поддерживает...

* Сохранение в центре уведомлений
* Возможность активации как из всплывающего меню, так и из центра уведомлений
* Возможность активации, когда EXE-файл не запущен

## <a name="all-options"></a>Все параметры

В таблице ниже представлены параметры поддержки всплывающих уведомлений в классическом приложении и соответствующие поддерживаемые функции. Вы можете выбрать наиболее подходящий для вашего сценария параметр.<br/><br/>

| Параметр | Визуальные элементы | Действия | Входные данные | Активация внутри процесса |
| -- | -- | -- | -- | -- |
| [Активатор COM](#preferred-option---com-activator) | ✔️ | ✔️ | ✔️ | ✔️ |
| [Без COM / CLSID объекта-заглушки](#alternative-option---no-com--stub-clsid) | ✔️ | ✔️ | ❌ | ❌ |


## <a name="preferred-option---com-activator"></a>Предпочитаемый параметр — активатор COM

Это предпочтительный вариант, который работает для настольных приложений и поддерживает все функции уведомлений. Не бойтесь использовать "активатор COM"; у нас есть библиотека для приложений [C#](send-local-toast-desktop.md) и [C++](send-local-toast-desktop-cpp-wrl.md), которая упрощает работу, даже если вы никогда не писали COM-сервер до этого.<br/><br/>

| Визуальные элементы | Действия | Входные данные | Активация внутри процесса |
| -- | -- | -- | -- |
| ✔️ | ✔️ | ✔️ | ✔️ |

С помощью параметра "Активатор COM" в приложении можно использовать следующие шаблоны уведомлений и типы активации.<br/><br/>

| Шаблон и тип активации | MSIX/разреженный пакет | Классическое приложение Win32 |
| -- | -- | -- |
| ToastGeneric (передний план) | ✔️ | ✔️ |
| ToastGeneric (фон) | ✔️ | ✔️ |
| ToastGeneric (протокол) | ✔️ | ✔️ |
| Традиционные шаблоны | ✔️ | ❌ |

> [!NOTE]
> Если вы добавите активатор COM в существующее приложение пакета MSIX/sparse, активация переднего плана и фонового кода, а также устаревшие уведомления будут активировать активатор COM вместо командной строки.

Сведения об использовании этого параметра см. в статьях [Отправка локального всплывающего уведомления из приложений для настольных компьютеров C#](send-local-toast-desktop.md) или [Отправка уведомлений локального всплывающего уведомления из WRL Apps для настольных приложений C++](send-local-toast-desktop-cpp-wrl.md).


## <a name="alternative-option---no-com--stub-clsid"></a>Альтернативный параметр — без COM / CLSID объекта-заглушки

Если невозможно реализовать активатор COM, используйте этот альтернативный параметр. Однако вам придется пожертвовать некоторыми функциями, такими как поддержка ввода (текстовые поля на всплывающих уведомлениях) и активация внутри процесса.<br/><br/>

| Визуальные элементы | Действия | Входные данные | Активация внутри процесса |
| -- | -- | -- | -- |
| ✔️ | ✔️ | ❌ | ❌ |

Использование этого параметра (при реализации поддержки классических приложений Win32) накладывает значительные ограничения на доступные шаблоны уведомлений и типы активации, как показано ниже.<br/><br/>

| Шаблон и тип активации | MSIX/разреженный пакет | Классическое приложение Win32 |
| -- | -- | -- |
| ToastGeneric (передний план) | ✔️ | ❌ |
| ToastGeneric (фон) | ✔️ | ❌ |
| ToastGeneric (протокол) | ✔️ | ✔️ |
| Традиционные шаблоны | ✔️ | ❌ |

Для упакованных приложений [MSIX](https://docs.microsoft.com/windows/msix/desktop/source-code-overview) и приложений, использующих [разреженные пакеты](https://docs.microsoft.com/windows/apps/desktop/modernize/grant-identity-to-nonpackaged-apps), просто отправляйте всплывающие уведомления, такие как приложение UWP. Когда пользователь щелкает всплывающее уведомление, приложение запускается из командной строки с аргументами запуска, которые вы указали во всплывающем уведомлении.

Для классических приложений Win32 задайте AUMID, чтобы отправлять всплывающие уведомления. Также необходимо задать CLSID на ярлыке. Это может быть любой произвольный идентификатор GUID. Не добавляйте COM-сервер/активатор. Также необходимо добавить COM CLSID "объекта-заглушки", за счет чего центр уведомлений будет хранить уведомление. Обратите внимание, что можно использовать только всплывающие уведомления активации протокола, так как CLSID объекта-заглушки будет прерывать активацию любых других активаций всплывающих уведомлений. Таким образом необходимо обновить приложение для обеспечения поддержки активации протокола и активировать ваше приложение с помощью протокола всплывающих уведомлений.


## <a name="resources"></a>Ресурсы

* [Отправка локального всплывающего уведомлений из классических приложений C#](send-local-toast-desktop.md)
* [Отправка локального всплывающего уведомлений из классических приложений C++ WRL](send-local-toast-desktop-cpp-wrl.md)
* [Документация по содержимому всплывающего уведомления](adaptive-interactive-toasts.md)
