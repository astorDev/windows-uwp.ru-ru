---
author: adwilso
Description: Windows Push Notification Services (WNS) enables third-party developers to send toast, tile, badge, and raw updates from their own cloud service. There are many ways to send the notifications depending on the needs of your application
title: Выбор правильного типа канала push-уведомлений
ms.author: mijacobs
ms.date: 07/07/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: db2cf1c732669a2ae45b8a5eb427e8864446c800
ms.sourcegitcommit: 086001cffaf436e6e4324761d59bcc5e598c15ea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/27/2018
ms.locfileid: "5710294"
---
# <a name="choosing-the-right-push-notification-channel-type"></a>Выбор правильного типа канала push-уведомлений

В этой статье рассматриваются три типа каналов push-уведомлений UWP (основной, вспомогательный и альтернативный), которые помогут вам доставить содержимое в ваше приложение. 

(Дополнительные сведения о создании Push-уведомлений см. [Обзор служб Push-уведомлений Windows (WNS)](../tiles-and-notifications/windows-push-notification-services--wns--overview.md)). 

## <a name="types-of-push-channels"></a>Типы каналов push-уведомлений 

Существует три типа каналов push-уведомлений, которые можно использовать для отправки уведомлений приложению UWP. К ним относятся: 

[Основной канал](https://docs.microsoft.com/uwp/api/windows.networking.pushnotifications.pushnotificationchannelmanagerforuser#Methods_)— «традиционный» канал для push-уведомлений. Может использоваться в любом приложении в Магазине для отправки уведомлений следующих типов: плитка, всплывающее уведомление, индикатор события или необработанное уведомление (ссылка на описание всплывающих уведомлений, уведомлений плиток и индикаторов событий)

[Канал вспомогательных плиток](https://docs.microsoft.com/uwp/api/windows.networking.pushnotifications.pushnotificationchannelmanagerforuser#Methods_)— используется для отправки обновлений вспомогательным плиткам. Может использоваться только для отправки уведомлений плитки или индикатора событий вспомогательной плитке, закрепленной на начальном экране пользователя

[Альтернативный канал](https://docs.microsoft.com/uwp/api/windows.networking.pushnotifications.pushnotificationchannelmanagerforuser#Methods_)— новый тип канала, добавленный в обновлении Creators Update. Он позволяет отправлять необработанные уведомления в любое приложение UWP, в том числе незарегистрированное в Магазине. 

> [!NOTE]
> Независимо от того, какой канал push-уведомлений используется, когда приложение выполняется на устройстве, оно будет всегда сможет отправлять локальные всплывающие уведомления, а также уведомления плиток и индикатора событий. Оно может отправлять локальные уведомления из процессов переднего плана или из фоновой задачи. 


## <a name="primary-channels"></a>Основные каналы

Сейчас это наиболее часто используемые каналы в Windows, которые подходят для практически любого сценария, если приложение будет распространяться через Microsoft Store. Они позволяют отправлять приложению все типы уведомлений. 

### <a name="what-do-primary-channels-enable"></a>Какие возможности предоставляют основные каналы?

-   **Отправка обновлений плитки или индикатора событий основной плитке.** Если пользователь закрепил вашу плитку на начальном экране, вы сможете воспользоваться этим. Отправляйте обновления с полезной информацией или напоминания о работе с приложением. 
-   **Отправка всплывающих уведомлений.** Всплывающие уведомления позволяют немедленно показать нужную информацию пользователю. Они закрашиваются оболочкой поверх большинства приложений и динамически отображаются в центре уведомлений, чтобы пользователь мог вернуться и просмотреть их позже. 
-   **Отправка необработанных уведомлений для инициализации фоновой задачи.** Иногда требуется выполнить некоторые действия от имени пользователя в зависимости от уведомления. Необработанные уведомления позволяют выполнять фоновые задачи вашего приложения. 
-   **Шифрование сообщений в процессе передачи обеспечивается Windows с помощью TLS.** Сообщения шифруются при передаче в WNS и на устройство пользователя.  

### <a name="limitations-of-primary-channels"></a>Ограничения основных каналов

-   Необходимо использовать API-интерфейс REST WNS для отправки уведомлений, который не является стандартным у поставщиков устройств. 
-   Для каждого приложения можно создать только один канал. 
-   Приложение должно быть зарегистрировано в Microsoft Store.

### <a name="creating-a-primary-channel"></a>Создание основного канала 

```csharp
PushNotificationChannel channel = 
    await PushNotificationChannelManager.CreatePushNotificationChannelForApplicationAsync();
```

## <a name="secondary-tile-channels"></a>Каналы вспомогательных плиток

Эти каналов можно использовать для отправки обновлений плиток и индикаторов событий вспомогательной плитке. Они позволяют сообщать пользователям об интересных действиях или сведениях, с которыми они могут взаимодействовать в приложении, таких как новые сообщения в групповом чате или обновленные спортивные результаты. 

### <a name="what-do-secondary-tile-channels-enable"></a>Какие возможности предоставляют каналы вспомогательных плиток?

-   Отправка уведомлений плитки или индикатора событий вспомогательным плиткам. Вспомогательные плитки — отличный способ привлечь внимание пользователей к вашему приложению. Они представляют собой ссылку на важные для пользователей сведения и помогают разместить соответствующую информацию на плитках, чтобы пользователи снова и снова возвращались к приложению.
-   Разделение каналов (и сроков действия) между различными плитками. Это позволяет разделить логику во внутренних процессах между различными типами вспомогательных плиток, которые пользователь может закрепить на начальном экране. 
-   Шифрование сообщений в процессе передачи обеспечивается Windows с помощью TLS. Сообщения шифруются при передаче в WNS и на устройство пользователя.  

### <a name="limitations-of-secondary-tile-channels"></a>Ограничения каналов вспомогательных плиток

-   Всплывающие или необработанные уведомления не поддерживаются. Система игнорирует всплывающие и необработанные уведомления, отправляемые вспомогательной плитке.
-   Приложение должно быть зарегистрировано в Microsoft Store.


### <a name="creating-a-secondary-tile-channel"></a>Создание канала вспомогательной плитки 

```csharp
PushNotificationChannel channel = 
    await PushNotificationChannelManager.CreatePushNotificationChannelForSecondaryTileAsync(tileId);
```

## <a name="alternate-channels"></a>Альтернативные каналы

Альтернативные каналы позволяют приложениям отправлять push-уведомления без регистрации в Microsoft Store или создания дополнительных каналов, помимо основного, для приложения. 
 
### <a name="what-do-alternate-channels-enable"></a>Какие возможности предоставляют альтернативные каналы?
-   Отправка необработанных push-уведомлений приложению UWP на любом устройстве с Windows. Альтернативные каналы поддерживают только необработанные уведомления.
-   Позволяют приложениям создавать несколько каналов необработанных push-уведомлений для различных функций в приложении. Приложение может создавать до 1000 альтернативных каналов, каждый из которых действие 30 дней. Все каналы можно контролировать и отменять в приложении по отдельности.
-   Альтернативные каналы push-уведомлений можно создать без регистрации приложения в Microsoft Store. Если приложение будет устанавливаться на устройства без регистрации в Microsoft Store, оно по-прежнему сможет получать push-уведомления.
-   Серверы могут передавать push-уведомления с помощью протокола стандартных API-интерфейсов REST консорциума W3C и протокола VAPID. Альтернативные каналы используют стандартный протокол W3C, что позволяет упростить логику сервера.
-   Полное и комплексное шифрование сообщений. Основной канал обеспечивает шифрование во время передачи сообщений, но если вы хотите добиться улучшенной защиты, альтернативные каналы позволяют приложению передавать заголовки шифрования для защиты сообщения. 

### <a name="limitations-of-alternate-channels"></a>Ограничения альтернативных каналов
-   Приложения не могут отправлять всплывающие уведомления, уведомления плиток и индикаторов событий. Альтернативный канал ограничивает возможности для отправки других типов уведомлений. Ваше приложение по-прежнему сможет отправлять локальные уведомления из фоновой задачи. 
-   Требуется отличный от основного или вспомогательного канала API-интерфейс REST. Так как используется стандартный API REST W3C, приложению потребуется различная логика для отправки всплывающих уведомлений и обновлений плитки.

### <a name="creating-an-alternate-channel"></a>Создание альтернативного канала 

```csharp
PushNotificationChannel webChannel = 
    await PushNotificationChannelManager.Current.CreateRawPushNotificationChannelWithAlternateKeyForApplicationAsync(applicationServerKey, appChannelId);
```

## <a name="channel-type-comparison"></a>Сравнение типов каналов
Вот краткое сравнение разных типов каналов.

<table>

<tr class="header">
<th align="left"><b>Тип</b></th>
<th align="left"><b>Всплывающее уведомление?</b></th>
<th align="left"><b>Обновление плитки и индикатора событий?</b></th>
<th align="left"><b>Необработанные уведомления?</b></th>
<th align="left"><b>Проверка подлинности</b></th>
<th align="left"><b>API</b></th>
<th align="left"><b>Требуется регистрация в Магазине?</b></th>
<th align="left"><b>Каналы</b></th>
<th align="left"><b>Шифрование</b></th>
</tr>


<tr class="odd">
<td align="left">Основной</td>
<td align="left">Да</td>
<td align="left">Да— только основная плитка</td>
<td align="left">Да</td>
<td align="left">OAuth</td>
<td align="left">API REST WNS</td>
<td align="left">Да</td>
<td align="left">Один на приложение</td>
<td align="left">Во время передачи</td>
</tr>
<tr class="even">
<td align="left">Вспомогательная плитка</td>
<td align="left">Нет</td>
<td align="left">Да— только вспомогательная плитка</td>
<td align="left">Нет</td>
<td align="left">OAuth</td>
<td align="left">API REST WNS</td>
<td align="left">Да</td>
<td align="left">Один на каждую вспомогательную плитку</td>
<td align="left">Во время передачи</td>
</tr>
<tr class="odd">
<td align="left">Альтернативный</td>
<td align="left">Нет</td>
<td align="left">Нет</td>
<td align="left">Да</td>
<td align="left">VAPID</td>
<td align="left">Стандарт WebPush W3C</td>
<td align="left">Нет</td>
<td align="left">1000 на приложение</td>
<td align="left">В процессе передачи; также доступно комплексное шифрования с передачей заголовков (требуется специальный код в приложении)</td>
</tr>
</table>

## <a name="choosing-the-right-channel"></a>Выбор правильного канала

В целом мы рекомендуем использовать основной канал в приложении с некоторыми исключениями: 

1. Если вы передаете обновление вспомогательной плитке, используйте канал push-уведомлений вспомогательных плиток.
2. При передаче каналов другим службам (например, для браузера) используйте альтернативный канал.
3. Если вы создаете приложение, которое не будет отображаться в Магазине Windows (например, бизнес-приложение), используйте альтернативный канал.
4. Если на сервере уже есть существующий веб-код для отправки уведомлений, который вы хотите повторно использовать, или вам необходимо несколько каналов для внутренней службы, используйте альтернативные каналы.

## <a name="related-articles"></a>Статьи по теме

* [Отправка локального уведомления на плитке](../tiles-and-notifications/sending-a-local-tile-notification.md)
* [Адаптивные и интерактивные всплывающие уведомления](../tiles-and-notifications/adaptive-interactive-toasts.md)
* [Краткое руководство: отправка push-уведомлений](https://msdn.microsoft.com/library/windows/apps/xaml/hh868252)
* [Обновление индикатора событий с помощью push-уведомлений](https://msdn.microsoft.com/library/windows/apps/hh465450)
* [Запрос, создание и сохранение канала уведомлений](https://msdn.microsoft.com/library/windows/apps/hh465412)
* [Перехват уведомлений для выполняемых приложений ](https://msdn.microsoft.com/library/windows/apps/hh465450)
* [Проверка подлинности с помощью службы push-уведомлений Windows (WNS)](https://msdn.microsoft.com/library/windows/apps/hh465407)
* [Заголовки запроса и ответа службы push-уведомлений](https://msdn.microsoft.com/library/windows/apps/hh465435)
* [Руководство и контрольный список для push-уведомлений](https://msdn.microsoft.com/library/windows/apps/hh761462)
* [Необработанные уведомления](raw-notification-overview.md)
