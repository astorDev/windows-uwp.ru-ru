---
author: jwmsft
description: Узнайте, как оптимизировать приложение для обеспечения наилучшего взаимодействия в пользовательском интерфейсе Sets.
title: Разработка для Sets
template: detail.hbs
ms.author: jimwalk
ms.date: 05/07/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp, заголовок окна
doc-status: Draft
ms.localizationpriority: medium
ms.openlocfilehash: 7c3e0e6ec7331e860c9153e2a2e29a51fb5848bd
ms.sourcegitcommit: 2a63ee6770413bc35ace09b14f56b60007be7433
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2018
ms.locfileid: "3930246"
---
# <a name="designing-for-sets"></a>Разработка для Sets

> [!IMPORTANT]
> В этой статье описана еще не выпущенная функция, которая может быть существенно изменена до коммерческого выпуска. Майкрософт не дает никаких гарантий, явных или подразумеваемых, в отношении предоставленной здесь информации.

Начиная с Windows Insider Preview компонент Sets доступен пользователям вашего приложения. С помощью Sets ваше приложение отображается в окне, которое может использоваться совместно с другими приложениями, и каждое приложение получает свою собственную вкладку в заголовке окна.

В этой статье мы рассмотрим области, где можно оптимизировать приложение для обеспечения наилучшего взаимодействия в пользовательском интерфейсе Sets.

> [!TIP]
> Дополнительные сведения о Sets см. в записи блога [Знакомство с Sets](https://insider.windows.com/en-us/articles/introducing-sets/) и беседе [Разработка для Sets](https://developer.microsoft.com/events/build/content/developing-for-sets-on-windows-10) с конференции Microsoft Build 2018.

## <a name="customizing-tab-visuals"></a>Настройка визуальных элементов вкладки

По умолчанию система пытается выбрать подходящий текст и цвета значков для вкладки вашего приложения, когда оно активно. Это гарантирует, что вкладка вашего приложения будет хорошо выглядеть с минимальными усилиями с вашей стороны даже в том случае, если вы не выполните оптимизацию под Sets.

Однако возможны ситуации, когда лучше настроить цвет вкладки для вашего приложения. В этом разделе мы рассмотрим поведение вкладки по умолчанию и обсудим, следует ли изменять его для вашего приложения.

### <a name="tab-states"></a>Состояния вкладки

Когда приложение работает в режиме Sets, его вкладка может находиться в одном из трех состояний: выбрано и активно, выбрано и неактивно или не выбрано и неактивно.

- **Выбрано и активно**: вкладка выбрана в наборе сгруппированных окон и находится в активном окне на переднем плане.

    (В этом документе все обсуждения изменений _активной_ вкладки означают выбранную и активную вкладку.)
- **Выбрано и неактивно**: вкладка выбрана в наборе сгруппированных окон, но не находится в активном окне на переднем плане.
- **Не выбрано и неактивно**: вкладка, которая не выбрана в наборе сгруппированных окон.

Цвет всех неактивных вкладок обновляется и поддерживается системой на основе системной темы. Изменить это поведение из вашего приложения невозможно.

По умолчанию выбранная и активная вкладка учитывает цвет системной темы, указанной пользователем в параметрах Windows. Изменить цвет вкладки приложения можно только для активной вкладки.

![Состояния вкладки в Sets](images/sets-tab-states.jpg)

### <a name="coloring-of-active-tabs"></a>Расцветка активных вкладок

Цвет активной вкладки определяется значениями, заданными в приложении или параметрах системы. Цвет вкладки, используемый для активного приложения, определяется следующим образом:

- Если цвет вкладки задан в приложении, он имеет наивысший приоритет. Цвет вкладки, заданный в вашем приложении, используется, когда приложение активно, независимо от параметров системы.
- В другом случае, если пользователь выбирает в параметрах Windows отображение цвета элементов в заголовках окон, используется системный цвет элементов.
  - Этот параметр находится в приложении "Параметры Windows" в разделе "Персонализация > Цвета > Отображать цвет элементов на следующих поверхностях: Заголовки окон".
- Наконец, если не заданы ни настройки приложения, ни настройки пользователя, вкладка использует текущий цвет системной темы.

### <a name="considerations-when-you-modify-tab-colors"></a>Особенности изменения цветов вкладок

Здесь мы обсудим ситуации, в которых может потребоваться изменение цвета вкладки для вашего приложения, и те аспекты, которые следует учитывать в таких случаях. Мы также обсудим некоторые ситуации, где рекомендуется не изменять цвет вкладки и оставить его на усмотрение системы.

#### <a name="match-your-brand-colors"></a>Соответствие фирменным цветам

Как правило, важнейшим фактором для изменения цвета вкладки является стремление задать цвет, соответствующий фирменному цвету торговой марки. При изменении вкладки приложения в соответствии с фирменным цветом следует проверить, как она будет выглядеть в свете других рекомендаций, приведенных в этом разделе и касающихся, например, макета приложения или различных цветов системной темы.

#### <a name="horizontal-layout"></a>Горизонтальное расположение

Если макет вашего приложения включает сплошную (не акриловую) полосу цвета, проходящую горизонтально в верхней части окна, это обычно хорошо способствует привязке приложения к его вкладке с помощью совпадающих цветов. Выберите сплошной цвет для своей вкладки, связанный с вашим приложением. В идеале, необходимо обеспечить непрерывность цвета, используемого в верхней части вашего приложения.

#### <a name="horizontal-layout-with-acrylic"></a>Горизонтальный макет с акрилом

Если в вашем приложении используется полоса акрилового материала, проходящая по горизонтали в верхней части окна, рекомендуется оставить цвет вкладки на усмотрение системы.

Также рекомендуется использовать здесь акриловый материал в приложении, а не в фоне, что позволяет фону приложения распространиться на эту область, избежав эффекта чередования, проявляемого в виде просвечивающих элементов приложения или рабочего стола, расположенных за этой полосой.

Обратите внимание, что пользователь в таком случае может задать для этих вкладок использование цвета элементов, чтобы они отображались либо в соответствии со светлой или темной темой, либо с цветом элементов.

#### <a name="vertical-layout"></a>Вертикальное расположение

Если макет вашего приложения содержит вертикальную область со сплошным цветом, рекомендуется не настраивать цвета вкладки. Положение вкладки над вашим приложением может быть в любой момент изменено пользователем, поэтому не стоит полагаться на непрерывность цвета между верхней частью приложения и вкладкой. Система использует другие визуальные подсказки, например тени, для соединения вкладки с приложением.

### <a name="how-to-modify-tab-colors"></a>Изменение цветов вкладок

Цвет активной вкладки использует существующие API-интерфейсы настройки заголовка окна. Если вы уже настроили цвет заголовка окна для приложения, это изменение также относится ко вкладке приложения, когда приложение работает в режиме Sets.

Чтобы изменить цвета вкладок, задайте свойства [ApplicationViewTitleBar](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.applicationviewtitlebar), чтобы определить:

- Сплошной цвет фона на вашей вкладке.
- Сплошной цвет для текста вашей вкладки.

В этом примере показано, как получить экземпляр ApplicationViewTitleBar и настроить его свойства цветов.

```csharp
// using Windows.UI.ViewManagement;
var titleBar = ApplicationView.GetForCurrentView().TitleBar;

// Set active window colors
titleBar.ForegroundColor = Windows.UI.Colors.White;
titleBar.BackgroundColor = Windows.UI.Colors.Green;
```

Дополнительные сведения см. в разделе _Простая настройка цвета_ статьи [Настройка заголовка окна](title-bar.md#simple-color-customization) и [Пример настройки заголовка окна](http://go.microsoft.com/fwlink/p/?LinkId=620613).

### <a name="considerations-for-full-title-bar-customization"></a>Сведения по полной настройке заголовка окна

Можно также полностью настроить заголовок окна приложения, как описано в разделе _Полная настройка_ статьи [Настройка заголовка окна](title-bar.md#full-customization). Это обычно делается для [применения акрила в заголовке окна](../style/acrylic.md#extend-acrylic-into-the-title-bar) или для размещения содержимого в заголовке окна. Если вы это делаете, обязательно выполните рекомендации для полноэкранного и планшетного режимов и отображайте специальное содержимое заголовка окна, только когда значение [CoreApplicationViewTitleBar.IsVisible](/uwp/api/windows.applicationmodel.core.coreapplicationviewtitlebar.isvisible) — **true**.

Если ваше приложение работает в режиме Sets, значение CoreApplicationViewTitleBar.IsVisible — **false** и содержимое заголовка окна отображаться не будет. Тем не менее, если вы не выполните эти рекомендации по скрытию специального содержимого заголовка окна, оно будет отображаться под вкладкой вашего приложения, а не в области заголовка.

Если вы поместили содержимое или функциональный элемент в пользовательский интерфейс специального заголовка окна, рассмотрите возможность обеспечения доступа к нему с другой поверхности пользовательского интерфейса в приложении.

### <a name="how-to-modify-the-tab-icon"></a>Изменение значка на вкладке

Чтобы обеспечить наилучший внешний вид значка вашего приложения в режиме Sets, необходимо предоставить альтернативный значок без основы для вашего приложения. (Значок приложения, используемый на вкладке вашего приложения, такой же, что и значок, используемый на панели задач). Назначение альтернативного значка — хорошо выглядеть на фоне с любым цветом. Альтернативный значок будет использоваться при наличии.

В манифесте приложения укажите альтернативный значок без основы в дополнение к обычному значку. Дополнительные сведения см. в разделе [значков приложений и логотипы](/windows/uwp/design/style/app-icons-and-logos). Значок, чтобы указать указывается в документации как «ресурсы списка целевых размеров без основы» в разделе [сведения о ресурсы значков приложения](/windows/uwp/design/style/app-icons-and-logos#more-about-app-icon-assets) этой статьи.

Если не указать альтернативный значок в манифесте приложения, система повторно применит в качестве основы для вашего значка цвет вкладки и будет использовать его.

![Значки, используемые в режиме Sets](images/sets-icons.png)

> Один и тот же значок используется на панели задач и на вкладке приложения.

## <a name="restore-previous-sets-with-user-activities"></a>Восстановление предыдущих элементов Sets с действиями пользователя

Преимущество режима Sets заключается в том, что он позволяет пользователям восстановить ранее открытые вкладки для приложений и веб-содержимого при запуске приложения или открытии документа. (Подробные сведения см. в видеоролике в записи блога [Знакомство с Sets](https://insider.windows.com/en-us/articles/introducing-sets/).) Это осуществляется за счет _действий пользователя_.

По умолчанию система создает действия пользователя от имени вашего приложения, что позволяет восстанавливать приложение во вкладке, когда пользователь запускает приложение или открывает документ. Тем не менее, действия пользователей по умолчанию, созданные системой, могут запускать ваше приложение только в состоянии по умолчанию. Они не могут восстановить приложение в состоянии, в котором оно было ранее в режиме Sets.

Можно провести оптимизацию приложения для режима Sets, создав специальные пользовательские действия. Создаваемое вами действие пользователя тесно связано с вашим приложением и позволяет восстановить его в том состоянии, в котором оно находилось в последний раз в восстанавливаемом режиме Sets.

Создание специального действия пользователя:

- Создайте ответ на инициированный ОС запрос [UserActivityRequest](https://docs.microsoft.com/uwp/api/windows.applicationmodel.useractivities.useractivityrequest), используя соответствующее действие [UserActivity](https://docs.microsoft.com/uwp/api/windows.applicationmodel.useractivities.useractivity).
- UserActivity содержит URI прямой ссылки активации, который система использует для запуска приложения в определенном контексте.

Дополнительные сведения см. в разделах [Событие UserActivityRequestManager.UserActivityRequested](https://docs.microsoft.com/uwp/api/windows.applicationmodel.useractivities.useractivityrequestmanager.useractivityrequested), [Обработка активации URI](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation) и [Продолжение активности пользователей даже на разных устройствах](https://docs.microsoft.com/windows/uwp/launch-resume/useractivities).

## <a name="enable-multi-instance-for-uwp-apps"></a>Включение нескольких экземпляров для приложений UWP

Начиная с Windows 10 версии 1803 приложения UWP поддерживают создание нескольких экземпляров. Приложения UWP по-прежнему допускают по умолчанию только один экземпляр, и необходимо явно указать для каждого приложения, что оно требует многоэкземплярности.

Если вы сделаете свое приложение многоэкземплярным, это предоставит пользователям преимущество в виде возможности запуска приложения в нескольких наборах режима Sets одновременно. Одноэкземплярное приложение может работать только в одном наборе режима Sets в определенный момент.

Дополнительные сведения о том, как включить многоэкземплярность для приложения UWP, см. в разделе [Создание универсального приложения для Windows с несколькими экземплярами](https://docs.microsoft.com/windows/uwp/launch-resume/multi-instance-uwp).

## <a name="use-an-in-app-back-button"></a>Использование кнопки «Назад» в приложении

Для реализации обратной навигации в приложении рекомендуется поместить кнопку «Назад» в пользовательский интерфейс вашего приложения в соответствии с [Рекомендациями по кнопке «Назад»](../basics/navigation-history-and-backwards-navigation.md). Если в приложении используется элемент управления NavigationView, рекомендуется использовать встроенную кнопку «Назад» для NavigationView.

Если ваше приложение использует системную кнопку «Назад», необходимо заменить ее кнопкой «Назад» в приложении. Это гарантирует, что результат нажатия пользователем кнопки «Назад» аналогичен независимо от того, работает ли приложение в режиме Sets, а также гарантирует, что визуальный элемент кнопки «Назад» остается единообразным в различных приложениях.

Подробные рекомендации по интеграции кнопки «Назад» в приложении см. в разделе [Журнал навигации и навигация в обратном направлении](../basics/navigation-history-and-backwards-navigation.md).

### <a name="support-for-the-system-back-button-in-sets"></a>Поддержка системной кнопки «Назад» в режиме Sets

Если ваше приложение использует системную кнопку «Назад», а не кнопку в приложении, системный пользовательский интерфейс будет все же отображать системную кнопку «Назад» для обеспечения обратной совместимости

- Если ваше приложение не работает в режиме Sets, кнопка «Назад» отображается в строке заголовка. Визуальные элементы и взаимодействие пользователя с кнопкой «Назад» не изменяются.
- Если ваше приложение работает в режиме Sets, кнопка «Назад» отображается в системной строке возврата.

Системная строка возврата — «полоса», которая размещается между полосой вкладок и областью содержимого приложения. Полоса проходит по ширине приложения, а кнопка «Назад» находится у левой границы. Высота полосы достаточна, чтобы обеспечить подходящий размер для касания кнопки «Назад».

![Системная строка возврата панель в режиме Sets](images/sets-system-back-bar.png)

> Системная строка возврата в приложении.

Системная строка возврата отображается динамически в зависимости от видимости кнопки «Назад». Если кнопка «Назад» видна, вставляется системная строка возврата, сдвигая содержимое приложения под полосой вкладок. Если кнопка «Назад» скрыта, системная строка возврата динамически убирается со сдвигом содержимого приложения вверх до полосы вкладок.

Чтобы избежать необходимости перемещать пользовательский интерфейс вашего приложения вверх или вниз, рекомендуется использовать кнопку «Назад» в приложении вместо системной кнопки.

Изменения заголовка окна переносятся и на вкладку приложения, и на системную строку возврата. Если вы используете API-интерфейсы ApplicationViewTitleBar для указания свойств цветов фона и переднего плана, цвета применяются к строке вкладок и системной строке возврата.

## <a name="related-articles"></a>Смежные разделы

- [Настройка заголовка окна](title-bar.md)
- [Журнал навигации и навигация в обратном направлении](../basics/navigation-history-and-backwards-navigation.md)
- [Цвет](../style/color.md)
