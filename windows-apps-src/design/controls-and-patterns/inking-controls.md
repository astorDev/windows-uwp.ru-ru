---
Description: Описанные инструменты для рукописного ввода
title: Элементы управления рукописным вводом
label: Inking Controls
template: detail.hbs
ms.date: 05/19/2017
ms.topic: article
keywords: windows 10, uwp
ms.assetid: 97eae5f3-c16b-4aa5-b4a1-dd892cf32ead
ms.localizationpriority: medium
ms.openlocfilehash: 56104dd5608356b47a405c37eba71e544c5ba23c
ms.sourcegitcommit: 37e4af3ba203295c7e88448414cf7ea537ab5402
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2020
ms.locfileid: "84257451"
---
# <a name="inking-controls"></a>Элементы управления рукописным вводом



Есть два элемента управления, которые упрощают рукописный ввод в приложениях для Windows. [InkCanvas](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.inkcanvas) и [InkToolbar](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.inktoolbar).

Элемент управления InkCanvas отображает ввод с помощью пера в виде росчерка пера (используя параметры цвета и толщины штриха по умолчанию) или росчерка стирания. Этот элемент управления представляет собой прозрачное наложение, которое не содержит никаких встроенных элементов пользовательского интерфейса для изменения свойств росчерка пера по умолчанию.

> [!NOTE]
> Элемент управления InkCanvas можно настроить так, чтобы обеспечить поддержку аналогичных функций для ввода с помощью мыши и сенсорного ввода.

Поскольку элемент управления InkCanvas не поддерживает изменение параметров росчерка пера по умолчанию, его можно связать с элементом управления InkToolbar. Элемент управления InkToolbar содержит настраиваемую и расширяемую коллекцию кнопок, которые включают связанные с рукописным вводом функции в элементе управления InkCanvas.

По умолчанию элемент управления InkToolbar содержит кнопки для рисования, стирания, выделения и отображения линейки. В зависимости от функции во всплывающем элементе могут отображаться другие параметры и команды, например цвет чернил, толщина росчерка и стирание всего написанного.

> [!NOTE]
> Элемент управления InkToolbar поддерживает ввод с помощью мыши и пера; кроме того, его можно настроить для распознавания сенсорного ввода.

<img src="images/ink-tools-invoked-toolbar.png" width="300" alt="InkToolbar palette flyout">

> **Важные API**: [класс InkCanvas](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.inkcanvas), [класс InkToolbar](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.inktoolbar), [класс InkPresenter](https://docs.microsoft.com/uwp/api/windows.ui.input.inking.inkpresenter), [Windows.UI.Input.Inking](https://docs.microsoft.com/uwp/api/Windows.UI.Input.Inking)


## <a name="is-this-the-right-control"></a>Выбор правильного элемента управления

InkCanvas позволяет включить в приложении базовые функции рукописного ввода, не предоставляя пользователю никаких настроек рукописного ввода.

По умолчанию росчерки отображаются как рукописный ввод при использовании кончика пера (штрих черной шариковой ручки толщиной 2 пикселя) и как ластик при использовании кончика ластика. Если кончик ластика отсутствует, InkCanvas можно настроить для отображения ввода кончиком пера в виде росчерка стирания.

Свяжите элементы управления InkCanvas и InkToolbar, чтобы предоставить пользователям интерфейс для активации функций рукописного ввода и настройки основных свойств пера, таких как размер штриха, цвет и форма кончика пера.

> [!NOTE] 
> Для более детальной настройки отображения росчерков пера с помощью элемента управления InkCanvas воспользуйтесь объектом [InkPresenter](https://docs.microsoft.com/uwp/api/windows.ui.input.inking.inkpresenter).

## <a name="examples"></a>Примеры

<table>
<th align="left">XAML Controls Gallery<th>
<tr>
<td><img src="images/xaml-controls-gallery-app-icon-sm.png" alt="XAML controls gallery"></img></td>
<td>
    <p>Если у вас установлено приложение <strong style="font-weight: semi-bold">галереи элементов управления XAML</strong>, щелкните здесь, чтобы <a href="xamlcontrolsgallery:/item/InkCanvas">открыть приложение и увидеть InkCanvas в действии</a>.</p>
    <ul>
    <li><a href="https://www.microsoft.com/store/productId/9MSVH128X2ZT">Получить приложение XAML Controls Gallery (Microsoft Store)</a></li>
    <li><a href="https://github.com/Microsoft/Xaml-Controls-Gallery">Получить исходный код (GitHub)</a></li>
    </ul>
</td>
</tr>
</table>

**Microsoft Edge**

В браузере Microsoft Edge элементы управления InkCanvas и InkToolbar используются для **веб-заметок**.  
![InkCanvas используется для рукописного ввода в Microsoft Edge](images/ink-tools-edge.png)

**Windows Ink Workspace**

Элементы управления InkCanvas и InkToolbar также используются в **Windows Ink Workspace** для **наброска на фрагменте экрана**.  
![Элемент управления InkToolbar в Windows Ink Workspace](images/ink-tools-ink-workspace.png)

## <a name="create-an-inkcanvas-and-inktoolbar"></a>Создание элементов управления InkCanvas и InkToolbar

Чтобы добавить элемент управления InkCanvas в приложение, достаточно одной строки разметки:

```xaml
<InkCanvas x:Name="myInkCanvas"/>
```

> [!NOTE]
> См. сведения о детальной настройке элемента управления InkCanvas с использованием InkPresenter в руководстве по [взаимодействию с помощью пера и Windows Ink в приложениях для Windows](https://docs.microsoft.com/windows/uwp/design/input/pen-and-stylus-interactions).

Элементы управления InkToolbar и InkCanvas необходимо использовать вместе. Чтобы включить элемент управления InkToolbar (со всеми встроенными инструментами) в приложение, необходима одна дополнительная строка разметки:

 ```xaml
<InkToolbar TargetInkCanvas="{x:Bind myInkCanvas}"/>
 ```

Она позволяет отобразить следующий элемент управления InkToolbar:
<img src="images/ink-tools-uninvoked-toolbar.png" width="250" alt="Basic InkToolbar">

### <a name="built-in-buttons"></a>Встроенные кнопки

Элемент управления InkToolbar содержит следующие встроенные кнопки:

**Перья**

- Шариковая ручка: рисует сплошной непрозрачный росчерк круглым кончиком пера. Размер росчерка зависит от давления на перо.
- Карандаш: рисует текстурированный полупрозрачный росчерк с плавными границами (полезно для многоуровневых эффектов затенения) круглым кончиком пера. Цвет росчерка (интенсивность) зависит от давления на перо.
- Маркер: рисует полупрозрачный росчерк прямоугольным кончиком пера.

Во всплывающем элементе можно настроить цветовую палитру и атрибуты размера (минимальный, максимальный, по умолчанию) для каждого пера.

**Средство**

- Ластик: удаляет все росчерки пера, которых касается. Обратите внимание, что удаляется весь росчерк пера, а не только часть, по которой провели ластиком.

**Переключение**

- Линейка: отображает или скрывает линейку. При рисовании у края линейки росчерк пера прикрепляется к линейке.  
 ![Визуальный элемент линейки, связанный с элементом управления InkToolbar](images/inking-tools-ruler.png)

Несмотря на то что это конфигурация по умолчанию, вы сохраняете полный контроль над составом встроенных кнопок в элементе управления InkToolbar вашего приложения.

### <a name="custom-buttons"></a>Пользовательские кнопки

В элементе управления InkToolbar представлены две группы кнопок разных типов.

1. Группа кнопок-инструментов, которая содержит встроенные кнопки для рисования, стирания и выделения. Сюда добавляются специальные перья и инструменты.
> [!NOTE]
> Функции являются взаимоисключающими.

2. Группа кнопок-переключателей, которая содержит встроенную кнопку линейки. Сюда добавляются специальные переключатели.
> [!NOTE]
> Эти функции не являются взаимоисключающими, их можно использовать вместе с другими активными элементами.

В зависимости от используемого приложения и требуемой функции рукописного ввода в элемент управления InkToolbar можно добавить любые нижеперечисленные кнопки (связанные со специальными функциями пера).

- Специальное перо — перо, для которого соответствующее приложение определяет цветовую палитру и свойства кончика пера, такие как форма, поворот и размер.
- Специальный инструмент — отличный от пера инструмент, который определяется соответствующим приложением.
- Специальный переключатель — включает или выключает определенную приложением функцию. Если функция включена, она действует вместе с активным инструментом.

> [!NOTE]
> Изменить порядок отображения встроенных кнопок невозможно. По умолчанию они отображаются в следующем порядке: шариковая ручка, карандаш, маркер, ластик и линейка. Специальные перья добавляются после последнего пера по умолчанию, кнопки специальных инструментов располагаются между кнопкой последнего пера и кнопкой ластика, а кнопки специальных переключателей — после кнопки линейки (специальные кнопки добавляются в порядке настройки).

Элемент управления InkToolbar может являться элементом верхнего уровня, но обычно он предоставляется с помощью кнопки или команды рукописного ввода. Для оформления значка верхнего уровня рекомендуется использовать глиф EE56 шрифта Segoe MLD2 Assets.

## <a name="inktoolbar-interaction"></a>Взаимодействие с элементом управления InkToolbar

Все встроенные кнопки перьев и инструментов включают всплывающее меню, где можно настроить свойства пера, а также форму и размер кончика пера. «Глиф расширения» ![Глиф InkToolbar](images/ink-tools-glyph.png) отображается на кнопке и указывает на наличие всплывающего элемента.

Всплывающий элемент отображается, когда пользователь повторно нажимает кнопку активного инструмента. Как только цвет или размер изменен, всплывающий элемент автоматически закрывается и рукописный ввод можно продолжать. Для специальных перьев и инструментов можно использовать всплывающий элемент по умолчанию или указать настраиваемый всплывающий элемент.

Ластик тоже имеет всплывающий элемент с командой **Удалить все рукописные данные**.  
![Элемент управления InkToolbar с отображающимся всплывающим элементом ластика](images/ink-tools-erase-all-ink.png)

 Сведения о пользовательской настройке и возможностях расширения см. в статье [Пример элемента управления SimpleInk](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/SimpleInk).

## <a name="dos-and-donts"></a>Что рекомендуется и что не рекомендуется делать

- Элемент управления InkCanvas (и рукописный ввод в общем) удобнее и эффективнее всего использовать с активным пером, однако если этого требует ваше приложение, мы рекомендуем включить поддержку рукописного ввода с помощью мыши и касания (включая неактивное перо).
- Используйте элемент управления InkToolbar вместе с InkCanvas, чтобы реализовать базовые функции и параметры рукописного ввода. Возможна программная настройка обоих элементов управления (InkCanvas и InkToolbar).
- Элемент управления InkToolbar (и рукописный ввод в общем) удобнее и эффективнее всего использовать с активным пером, однако если этого требует ваше приложение, можно включить поддержку рукописного ввода с помощью мыши и касания.
- Если реализуется поддержка рукописного ввода с помощью касаний, рекомендуется использовать значок "ED5F" шрифта Segoe MLD2 Assets для кнопки переключения с подсказкой "Сенсорный ввод".
- Если вы предоставляете возможность выделения жестом, рекомендуется использовать значок "EF20" шрифта Segoe MLD2 Assets для кнопки этого средства и подсказку "Инструмент выделения".
- Если используется несколько элементов управления InkCanvas, рекомендуется контролировать рукописный ввод на разных полотнах с помощью одного элемента управления InkToolbar.
- Для обеспечения оптимальной производительности рекомендуется изменить всплывающий элемент по умолчанию, вместо того чтобы создавать один специальный всплывающий элемент для инструментов по умолчанию и специальных инструментов.

## <a name="get-the-sample-code"></a>Получение примера кода

- [В примере использования элемента управления SimpleInk](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/SimpleInk) показано 8 сценариев реализации возможностей настройки и расширения элементов управления InkCanvas и InkToolbar. Каждый сценарий сопровождается базовыми инструкциями по наиболее распространенным ситуациям, в которых используется рукописный ввод, и реализации элементов управления.
- [Пример ComplexInk](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/ComplexInk) — демонстрация расширенных сценариев рукописного ввода.
- [Пример из коллекции элементов управления XAML](https://github.com/Microsoft/Xaml-Controls-Gallery) — ознакомьтесь со всеми элементами управления XAML в интерактивном режиме.

## <a name="related-articles"></a>Похожие статьи

- [Взаимодействие с пером и Windows Ink в приложениях для Windows](https://docs.microsoft.com/windows/uwp/design/input/pen-and-stylus-interactions)
- [Распознавание росчерков пера Windows Ink как текста и фигур](https://docs.microsoft.com/windows/uwp/design/input/convert-ink-to-text)
- [Хранение и извлечение данных движения пера Windows Ink](https://docs.microsoft.com/windows/uwp/design/input/save-and-load-ink)
