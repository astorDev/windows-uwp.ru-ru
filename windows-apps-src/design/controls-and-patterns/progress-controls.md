---
Description: Элемент управления "Ход выполнения" служит для уведомления пользователя о том, что выполняется длительная операция.
title: Руководство по элементам управления ходом выполнения
ms.assetid: FD53B716-C43D-408D-8B07-522BC1F3DF9D
label: Progress controls
template: detail.hbs
ms.date: 11/29/2019
ms.topic: article
keywords: windows 10, uwp
pm-contact: kisai
design-contact: jeffarn
dev-contact: mitra
doc-status: Published
ms.localizationpriority: medium
ms.openlocfilehash: 66dc74e73207feb9b155adffc116f857dcb3027d
ms.sourcegitcommit: 76e8b4fb3f76cc162aab80982a441bfc18507fb4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "80081631"
---
# <a name="progress-controls"></a>Элементы управления «Ход выполнения»

Элемент управления "Ход выполнения" служит для уведомления пользователя о том, что выполняется длительная операция. Это может означать, что пользователь не сможет взаимодействовать с приложением, когда индикатор выполнения отображается. Также в зависимости от того, какой индикатор используется, он может отображать время ожидания.

**Получение библиотеки пользовательского интерфейса Windows**

|  |  |
| - | - |
| ![Логотип WinUI](images/winui-logo-64x64.png) | Элемент управления **ProgressBar** является частью библиотеки пользовательского интерфейса Windows, пакета NuGet, который содержит новые элементы управления и компоненты пользовательского интерфейса для приложений UWP. Дополнительные сведения, включая инструкции по установке, см. в описании [библиотеки пользовательского интерфейса Windows](https://docs.microsoft.com/uwp/toolkits/winui/). |

> **API-интерфейсы библиотеки пользовательского интерфейса Windows:** [Класс ProgressBar](https://docs.microsoft.com/uwp/api/Microsoft.UI.Xaml.Controls.ProgressBar), [свойство IsIndeterminate](https://docs.microsoft.com/uwp/api/microsoft.ui.xaml.controls.progressbar.isindeterminate)
>
> **API платформы:** [класс ProgressBar](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.ProgressBar), [свойство IsIndeterminate](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.progressbar.isindeterminate), [класс ProgressRing](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.ProgressRing), [свойство IsActive](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.progressring.isactive).

> [!NOTE]
> Существует две версии элемента управления ProgressBar: одна в платформе, представленная пространством имен Windows.UI.Xaml; другая в библиотеке пользовательского интерфейса Windows, пространство имен — Microsoft.UI.Xaml. Хотя API для ProgressBar один и тот же, внешний вид элемента управления в этих двух версиях отличается. В этом документе будут показаны изображения новой версии библиотеки пользовательского интерфейса Windows.
В этом документе мы будем использовать в XAML псевдоним **muxc** для всех API библиотеки пользовательского интерфейса Windows, которую мы добавили в проект. Мы добавили его для нашего элемента [Page](https://docs.microsoft.com/uwp/api/windows.ui.xaml.controls.page):

```xaml
xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
```

В коде C# мы также будем использовать псевдоним **muxc** для всех API библиотеки пользовательского интерфейса Windows, которую мы добавили в проект. Мы добавили оператор **using** в верхней части файла:

```csharp
using muxc = Microsoft.UI.Xaml.Controls;
```

```vb
Imports muxc = Microsoft.UI.Xaml.Controls
```

## <a name="types-of-progress"></a>Типы хода выполнения

Существуют два элемента управления, предназначенных для индикации того, что операция выполняется, — ProgressBar и ProgressRing.

-   Состояние *determinate* индикатора ProgressBar отображает процент завершения задачи. Этот индикатор следует использовать, когда длительность операции известна, но ее выполнение не должно блокировать взаимодействие пользователя с приложением.
-   Состояние *indeterminate* индикатора ProgressBar показывает, что операция выполняется, это не блокирует взаимодействие пользователя с приложением, и продолжительность задачи неизвестна.
-   У индикатора ProgressRing есть только состояние *indeterminate*, и его следует применять, когда все остальные виды взаимодействия пользователя с приложением заблокированы до завершения операции.

Кроме того, элемент управления "Ход выполнения" предназначен только для чтения. С ним нельзя взаимодействовать. Это означает, что пользователь не может вызывать или использовать эти элементы управления напрямую.

![Состояния ProgressBar](images/progress-bar-two-states.png)

*Сверху вниз — неопределенное состояние ProgressBar и определенное состояние ProgressBar*

![Состояние ProgressRing](images/ProgressRing_SingleState.png)

*Неопределенное состояние ProgressRing*

## <a name="examples"></a>Примеры

<table>
<th align="left">XAML Controls Gallery<th>
<tr>
<td><img src="images/xaml-controls-gallery-app-icon-sm.png" alt="XAML controls gallery"></img></td>
<td>
    <p>Если у вас установлено приложение <strong style="font-weight: semi-bold">галереи элементов управления XAML</strong>, щелкните здесь, чтобы открыть приложение и увидеть <a href="xamlcontrolsgallery:/item/ProgressBar">ProgressBar</a> или <a href="xamlcontrolsgallery:/item/ProgressRing">ProgressRing</a> в действии.</p>
    <ul>
    <li><a href="https://www.microsoft.com/store/productId/9MSVH128X2ZT">Получить приложение XAML Controls Gallery (Microsoft Store)</a></li>
    <li><a href="https://github.com/Microsoft/Xaml-Controls-Gallery">Получить исходный код (GitHub)</a></li>
    </ul>
</td>
</tr>
</table>

## <a name="when-to-use-each-control"></a>Когда использовать каждый элемент управления

Не всегда очевидно, какой элемент управления или какое его состояние (определенное или неопределенное) следует использовать для индикации выполнения какой-либо операции. Иногда задача достаточно очевидна и совсем не требует индикации выполнения, но иногда даже при использовании индикатора выполнения требуется еще и текстовая строка для объяснения того, какая операция выполняется.

### <a name="progressbar"></a>ProgressBar
-   **Обладает ли элемент управления определенной продолжительностью или можно ли спрогнозировать завершение операции?**

    В таких случаях используйте определенное состояние ProgressBar и соответствующим образом обновляйте процент или другое значение хода выполнения.

-   **Может ли пользователь продолжить использование приложения, не следя за ходом выполнения операции?**

    Когда используется ProgressBar, взаимодействие происходит немодальным образом; обычно это означает, что действия пользователя не заблокированы до завершения этой операции и он может продолжить использование приложения другими способами, пока операция выполняется.

-   **Ключевые слова**

    Если ваша операция связана с этими ключевыми словами или если вы показываете подобный текст вместе с индикацией хода выполнения, которая соответствует этим ключевым словам, рекомендуется использовать ProgressBar:

    - *Загрузка...*
    - *Получение*
    - *Обработка...*

### <a name="progressring"></a>ProgressRing

-   **Вынуждает ли операция пользователя ожидать ее завершения, чтобы продолжить?**

    Если операция требует, чтобы взаимодействие с приложением полностью или по большей части прекратилось до ее завершения, более подходящим вариантом будет ProgressRing. Элемент управления ProgressRing используется для модальных взаимодействий; это означает, что действия пользователя блокируются до исчезновения ProgressRing.

-   **Ожидает ли приложение, что пользователь завершит задачу?**

    Если да, используйте ProgressRing, так как этот индикатор предназначен для отображения пользователю неизвестного времени ожидания.

-   **Ключевые слова**

    Если ваша операция связана с этими ключевыми словами или если вы показываете подобный текст вместе с индикацией хода выполнения, которая соответствует этим ключевым словам, рекомендуется использовать ProgressRing:

    - *Обновление*
    - *Вход...*
    - *Подключение...*

### <a name="no-progress-indication-necessary"></a>Индикация хода выполнения не требуется
-   **Нужно ли пользователю знать информацию о выполняемых действиях?**

    Например, если приложение скачивает что-либо в фоновом режиме, а пользователь не начинал скачивание, то ему необязательно знать о нем.

-   **Выполняется ли операция в фоновом режиме, не блокируя деятельность пользователя, и представляет ли она какой-то реальный интерес для пользователя?**

    Используйте текст, когда ваше приложение выполняет задачи, которые не должны всегда выводиться на экран, но вам нужно отображать их состояние.

-   **Важно ли пользователю только то, что операция выполнена?**

    Иногда лучше показать уведомление только после выполнения операции или сразу же предоставить визуальное указание, что операция выполнена, а завершающие действия выполнить в фоновом режиме.

## <a name="progress-controls-best-practices"></a>Рекомендации по использованию индикаторов хода выполнения

Иногда лучше увидеть визуальные примеры того, где и когда следует использовать различные индикаторы хода выполнения:

**ProgressBar — определенное состояние**

![Пример определенного состояния ProgressBar](images/progress-bar-determinate-example.png)

Первый пример относится к определенному состоянию ProgressBar. Если продолжительность операции известна, например во время установки, загрузки, настройки и т. п., лучше всего использовать определенное состояние ProgressBar.

**ProgressBar — неопределенное состояние**

![Пример неопределенного состояния ProgressBar](images/progress-bar-indeterminate-example.png)

Когда длительность операции неизвестна, используйте неопределенное состояние ProgressBar. Неопределенное состояние ProgressBar также хорошо подходит при заполнении виртуализированного списка и создании плавного визуального перехода от неопределенного к определенному состоянию индикатора ProgressBar.

-   **Выполняется ли операция в виртуализированной коллекции?**

    Если да, не создавайте индикатор хода выполнения для каждого элемента списка по мере их появления. Вместо этого используйте ProgressBar и поместите его в верхнюю часть коллекции загружаемых элементов, чтобы показать, что элементы подгружаются.

**ProgressRing — неопределенное состояние**

![Пример неопределенного состояния ProgressRing](images/PR_IndeterminateExample.png)

Неопределенное состояние ProgressRing используется, когда любое дальнейшее взаимодействие пользователя с приложением прекращается или приложение ожидает ввода пользователя для продолжения работы. "Вход..." является идеальным сценарием для использования ProgressRing; пользователь не может продолжить использование приложения, пока вход не выполнен.

## <a name="customizing-a-progress-control"></a>Настройка индикатора хода выполнения

Оба индикатора выполнения довольно простые, но возможность изменения некоторых визуальных особенностей элементов управления не очевидна.

**Определение размера ProgressRing**

ProgressRing можно увеличить до любого требуемого размера, но этот индикатор не может быть меньше 20x20 epx. Для изменения размера ProgressRing необходимо задать его высоту и ширину. Если задается только высота или ширина, элемент управления получит минимальный размер (20x20 epx), но если для высоты и ширины заданы два различных значения, используется наименьший из них.
Для обеспечения соответствия ProgressRing вашим потребностям устанавливайте одинаковые значения для длины и ширины.

```XAML
<ProgressRing Height="100" Width="100"/>
```

Для отображения и анимирования ProgressRing необходимо задать свойству IsActive значение true:

```XAML
<ProgressRing IsActive="True" Height="100" Width="100"/>
```

```C#
progressRing.IsActive = true;
```

**Раскрашивание индикаторов хода выполнения**

По умолчанию основные цвета индикаторов хода выполнения устанавливаются в соответствии с цветом элементов системы. Чтобы переопределить эту кисть, просто измените свойство переднего плана в любом элементе управления.

```XAML
<ProgressRing IsActive="True" Height="100" Width="100" Foreground="Blue"/>
<muxc:ProgressBar Width="100" Foreground="Green"/>
```

Изменение цвета переднего плана для ProgressRing приведет к изменению цвета точек. Свойство переднего плана ProgressBar изменяет цвет заливки индикатора; для изменения цвета незаполненной его части просто переопределите свойство заднего плана.

**Отображение курсора ожидания**

Иногда лучше показать только кратковременный курсор ожидания, когда приложению или операции требуется время на размышления, а вам необходимо показать пользователю, что с приложением или его областью, где находится курсор ожидания, не следует взаимодействовать, пока курсор ожидания не исчезнет.

```C#
Window.Current.CoreWindow.PointerCursor = new Windows.UI.Core.CoreCursor(Windows.UI.Core.CoreCursorType.Wait, 10);
```

## <a name="get-the-sample-code"></a>Получение примера кода

- [Пример из коллекции элементов управления XAML](https://github.com/Microsoft/Xaml-Controls-Gallery) — ознакомьтесь со всеми элементами управления XAML в интерактивном режиме.

## <a name="related-articles"></a>Похожие статьи

- [Класс ProgressBar](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.ProgressBar)
- [Класс ProgressRing](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.ProgressRing)

**Разработчикам (XAML)**
- [Добавление индикаторов хода выполнения](https://docs.microsoft.com/previous-versions/windows/apps/hh780651(v=win.10))
- [Как создать собственный неопределенный индикатор выполнения для Windows Phone](https://msdn.microsoft.com/library/windows/apps/gg442303.aspx)
