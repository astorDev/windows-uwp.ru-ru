---
Description: Разработайте приложение так, чтобы оно было хорошо и хорошо работает в смешанной реальности.
title: Проектирование для смешанной реальности
ms.assetid: ''
label: Designing for Mixed Reality
template: detail.hbs
isNew: true
keywords: Смешанная реальность, Hololens, дополненная реальность, взгляд, голос, контроллер
ms.date: 02/05/2018
ms.topic: article
pm-contact: chigy
design-contact: jeffarn
dev-contact: ''
doc-status: ''
ms.localizationpriority: medium
ms.openlocfilehash: 5aaa5b5a51ab2aea863fece8fb466f274a00ace3
ms.sourcegitcommit: 26bb75084b9d2d2b4a76d4aa131066e8da716679
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2020
ms.locfileid: "75684251"
---
# <a name="designing-for-mixed-reality"></a>Проектирование для смешанной реальности

Создайте приложение, которое хорошо выглядит в смешанной реальности, и воспользуйтесь преимуществами новых методов ввода.

## <a name="overview"></a>Обзор

[Смешанная реальность](https://developer.microsoft.com/windows/mixed-reality/mixed_reality) является результатом смешения физического и цифрового мира. На одном конце спектра смешанной реальности находятся такие устройства, как HoloLens (устройство, сочетающее созданное компьютером содержимое с реальным миром), а на другом — полностью иммерсивный режим виртуальной реальности (доступный при использовании гарнитуры смешанной реальности). Ознакомьтесь с [типами приложений смешанной реальности](https://developer.microsoft.com/windows/mixed-reality/types_of_mixed_reality_apps), чтобы увидеть примеры различных взаимодействий.

Почти все существующие приложения UWP выполняются в среде смешанной реальности в качестве двухмерных приложений без изменений, однако взаимодействие с пользователем можно улучшить, выполнив некоторые рекомендации, представленные в этом разделе.

![Режим смешанной реальности](images/MR-01.png)

Как гарнитура HoloLens, так и гарнитура смешанной реальности поддерживают приложений, работающих на платформе UWP, в двух различных типах взаимодействия. 

### <a name="2d-vs-immersive-experience"></a>Двухмерное и иммерсивное взаимодействия

Иммерсивные приложения занимают все пространство видимого пользователю дисплея, размещая его в центре представления, созданного приложением. Например иммерсивная игра может поместить пользователя на поверхность другой планеты, а приложение, представляющее собой туристический путеводитель, может поместить его в обстановку южноамериканской деревни. Для создания иммерсивного приложения требуется трехмерная графика или захваченное стереографическое видео. Иммерсивные приложения часто разрабатываются с помощью игровых движков сторонних производителей, таких как Unity или даже DirectX.

При создании иммерсивного приложения следует посетить [центр разработки Windows Mixed Reality](https://developer.microsoft.com/mixed-reality) для получения дополнительных сведений.

Двухмерное приложение выполняется как традиционное плоское окно в представлении пользователя. На устройстве HoloLens это означает, что представление закреплено на стене или в точке пространства гостиной или офиса пользователя в реальном мире. При использовании гарнитуры смешанной реальности приложение закреплено на стене в [смешанной реальности в домашних условиях](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/your-mixed-reality-home) (иногда называемой *Дом на обрыве*).

![Несколько приложений, работающих в смешанной реальности](images/MR-multiple.png)


Эти двухмерные приложения не занимают все пространство представления, а размещаются внутри него. В одной среде могут существовать сразу несколько двухмерных приложений.

Далее в этом разделе рассматриваются вопросы разработки для двухмерного взаимодействия.

## <a name="launching-2d-apps"></a>Запуск двухмерных приложений

![Меню "Пуск" смешанной реальности](images/MR-start-options.png)

Все приложения запускаются из меню "Пуск", а также существует возможность создания трехмерных объектов, выступающих в качестве средства запуска приложений. Посмотрите [это видео](https://www.youtube.com/watch?v=TxIslHsEXno) для получения дополнительных сведений.

## <a name="the-2d-app-input-overview"></a>Обзор методов ввода для двухмерных приложений

На платформах HoloLens и Mixed Reality поддерживаются клавиатуры и мыши. Клавиатуру и мышь можно связать с HoloLens напрямую через Bluetooth. Приложения смешанной реальности поддерживают мыши и клавиатуры, подключенные к главному компьютеру. Оба устройства могут быть полезными в ситуациях, когда необходима точность управления.

Также поддерживаются другие, более естественные методы ввода, которые могут быть особенно удобны, если пользователь не сидит за столом с реальной клавиатурой перед собой или когда требуется точное управление.

Без какого-либо дополнительного оборудования или кодирования приложения будет использовать взгляд — направление, в котором смотрит пользователь, — в качестве указателя мыши при работе с двухмерными приложениями. Эта функция реализована таким образом, будто указатель мыши перемещается по определенной поверхности в виртуальной сцене.

При стандартном взаимодействии, когда пользователь смотрит на элемент управления в приложении, это приводит к выделению этого элемента. Затем пользователь вызывает действие с помощью жеста (на устройстве HoloLens), контроллера или голосовой команды. Если пользователь выбирает поле ввода текста, появляется программная клавиатура. 


![Всплывающая клавиатура в смешанной реальности](images/MR-keyboard.png)

Важно отметить, что все варианты взаимодействия происходят автоматически без написания дополнительного кода с вашей стороны, как следствие выполнения приложения на платформе UWP. Входные данные от HoloLens и гарнитуры смешанной реальности будут передаваться двухмерному приложению в качестве сенсорного ввода. Это означает, что многие приложения UWP будут выполняться в смешанной реальности по умолчанию и будут пригодными для использования. 

При этом с помощью некоторой дополнительной работы взаимодействие можно значительно улучшить. Например, [голосовое управление](https://developer.microsoft.com/windows/mixed-reality/voice_design) может быть особенно эффективным. Среды HoloLens и смешанной реальности поддерживают голосовые команды для запуска приложений и взаимодействия с ними, поэтому включения такой поддержки станет естественным расширением этого подхода. Дополнительные сведения о добавлении поддержки голосовых команд в ваше приложение UWP см. в разделе [Речевые взаимодействия]( https://docs.microsoft.com/windows/uwp/design/input/speech-interactions). 


### <a name="selecting-the-right-controller"></a>Выбор верного контроллера

![Контроллер движений Mixed Reality](images/MR-controllers.png)

Специально для использования в смешанной реальности было разработано несколько инновационных методов ввода, в частности:

* [Ручные жесты](https://developer.microsoft.com/windows/mixed-reality/gestures) (только для HoloLens, используется только для запуска двухмерных приложений);
* [Поддержка геймпада](https://developer.microsoft.com/windows/mixed-reality/hardware_accessories) (обе среды);
* [Устройство Clicker](https://developer.microsoft.com/windows/mixed-reality/hardware_accessories) (только HoloLens);
* [Контроллеры движений](https://docs.microsoft.com/windows/mixed-reality/motion-controllers) (только устройства смешанной реальности, показаны выше).

Эти контроллеры обеспечивают естественное и точное взаимодействие с виртуальными объектами. Некоторые взаимодействия вы получаете без дополнительных затрат. Например, жест выбора HoloLens или нажатие клавиши или триггера Windows контроллера движения приведет к созданию ответного ввода, который вы ожидаете, опять же, без написания кода для вашей части.

В других случаях потребуется добавить код, чтобы воспользоваться преимуществами дополнительной информации и входных данных, которые становятся доступными. Например, контроллеры движений можно использовать для управления объектами с высоким уровнем точности, если вы написали код, который учитывает их положение и нажатия кнопок.

> [!NOTE]
> В целом, руководящий принцип состоит в том, чтобы всегда предоставлять пользователю максимально естественные и удобные методы ввода из возможных.


## <a name="2d-app-design-considerations-functionality"></a>Аспекты проектирования двухмерных приложений: функции

При создании приложения UWP, которое потенциально будет использоваться на платформе смешанной реальности, следует иметь в виду несколько аспектов.

* Перетаскивание может не работать должным образом при использовании контроллеров движений, геймпадов или жестов. Если в вашем приложении активно используется перетаскивание, необходимо предоставить альтернативный способ поддержки этого действия, такой как отображение диалогового окна для подтверждения перемещения объектов в новое место.

* Учитывайте изменения звука. Если ваше приложение воспроизводит звуковые эффекты, источником звука будет казаться место закрепления вашего приложения в виртуальном мире. По мере того, как пользователь удаляется от приложения, громкость звука будет уменьшаться. Дополнительные сведения см. в статье [Пространственный звук](https://docs.microsoft.com/windows/mixed-reality/spatial-sound).

* Учитывайте поле зрения и предоставляйте возможности. Не все устройства предоставляют такое же большое поле зрения, как монитор компьютера. Полные сведения см. в разделе [Голографический кадр](https://developer.microsoft.com/windows/mixed-reality/holographic_frame). Кроме того, пользователь может находиться на определенном расстоянии от работающего приложения. То есть приложение может отображаться закрепленным на стене в другом месте мира (реального или виртуального). Вашем приложению может потребоваться привлечь внимание пользователя или учесть, что не все представление отображается постоянно. Доступны всплывающие уведомления, однако еще одним способом привлечь внимание пользователя может быть воспроизведение звукового или [речевого](https://github.com/Microsoft/Windows-universal-samples/blob/master/Samples/SpeechRecognitionAndSynthesis/cs/Scenario_SynthesizeText.xaml.cs) оповещения.

* Двухмерное приложение автоматически получает [панель приложения](https://developer.microsoft.com/windows/mixed-reality/app_bar_and_bounding_box), которая позволяет пользователю перемещать и масштабировать приложение в виртуальной среде. Размер представления можно изменять по вертикали или пропорционально.


## <a name="2d-app-design-considerations-uiux"></a>Аспекты проектирования двухмерных приложений: взаимодействие с пользователем и пользовательский интерфейс

* Элементы управления XAML, которые реализуют [систему проектирования Fluent Design](https://docs.microsoft.com/windows/uwp/design/fluent-design-system/), например [представление навигации](https://docs.microsoft.com/windows/uwp/design/controls-and-patterns/navigationview) и эффекты, такие как [акрил](https://docs.microsoft.com/windows/uwp/design/style/acrylic), особенно хорошо работают в двухмерных приложениях смешанной реальности.

* Протестируйте размер текста и окон вашего приложение на устройстве смешанной реальности или по крайней мере в симуляторе имитаторе Windows Mixed Reality. Размер окна вашего приложения по умолчанию составляет 853×480 эффективных пикселей. Используйте более крупный размеры шрифтов (рекомендуется размер приблизительно 32 пункта) и ознакомьтесь с разделом [Обновление существующих универсальных приложения для Hololens](https://developer.microsoft.com/windows/mixed-reality/updating_your_existing_universal_app_for_hololens). Подробно эта тема рассматривается в статье [Оформление текста](https://developer.microsoft.com/windows/mixed-reality/typography). При работе в Visual Studio доступен параметр редактора разработки XAML для двухмерных приложений для HoloLens 57", который обеспечивает представление с правильным масштабом и размерами. 

![Текст, отображаемый в приложениях смешанной реальности, должен быть крупным.](images/MR-text.png)

* [Ваш взгляд является мышью](https://developer.microsoft.com/windows/mixed-reality/gaze_targeting). Когда пользователь смотрит на какой-либо объект, вызывается событие **сенсорного наведения**, поэтому при взгляд на объект может инициировать случайное появление всплывающего окна или другие нежелательные взаимодействия. Может потребоваться определить, что приложение в данный момент работает в смешанной реальности, и изменить это поведение. См. раздел **Поддержка среды выполнения** ниже. 

* Когда пользователь смотрит на определенный объект или указывает на него с помощью контроллера движения, вызывается событие **сенсорного наведения**. Оно состоит из **PointerPoint** где **PointerType** — **Touch**, но **IsInContact** имеет значение **false**. При возникновении некоторой формы фиксации (например, при нажатии кнопки геймпада A, устройства Clicker, триггера контроллера движения, или при распознавания голосовой команды "Выбрать") вызывается событие **сенсорное нажатие** с **PointerPoint**, где значение **IsInContact** становятся **true**. Подробные сведения об этих событиях ввода см. в разделе [Взаимодействие с помощью сенсорного ввода](https://docs.microsoft.com/windows/uwp/design/input/touch-interactions).

* Помните, что взгляд не обеспечивает такую же точность, как указатель мыши. Маленькие элементы для взаимодействия с помощью мыши или кнопки могут привести к неудобству для пользователей, поэтому измените размер элементов управления соответствующим образом. Если элементы управления предназначены для сенсорного ввода, они будут работать в смешанной реальности, но иногда целесообразно увеличить некоторые кнопки во время выполнения. См. раздел [Обновление существующих универсальных приложений для Hololens](https://developer.microsoft.com/windows/mixed-reality/updating_your_existing_universal_app_for_hololens).

* HoloLens определяет черный цвет как отсутствие света. Он просто не отображается, а на этом месте показывается "реальный мир". Не нужно использовать в приложение черный цвет, если это может привести к путанице. При использовании гарнитуры смешанной реальности, черный цвет отображается как есть.

* HoloLens не поддерживает цветовые темы в приложениях, и устанавливает по умолчанию синюю тему, чтобы обеспечить максимально удобство работы пользователей. Дополнительные советы по выбору доступны в [этом разделе](https://developer.microsoft.com/windows/mixed-reality/color,_light_and_materials), где описывается использование цветов и материалов в проектах смешанной реальности.


## <a name="other-points-to-consider"></a>Прочие моменты, которые следует принять во внимание

* Несмотря на то, что [мост для классических приложений](https://docs.microsoft.com/windows/uwp/porting/desktop-to-uwp-root) может помочь перенести существующих классические приложения (Win32) в Windows 10 и Microsoft Store, в настоящее время он не позволяет создавать приложения, работающие на устройствах HoloLens и в смешанной реальности.




## <a name="runtime-support"></a>Поддержка среды выполнения

Ваше приложение может определить, работает ли оно на устройстве смешанной реальности во время выполнения, и использовать это как возможность изменить размер элементов управления или другими способами оптимизировать приложение для использования с помощью гарнитуры.

Вот небольшой код, который изменяет размер текста в элементе управления XAML TextBlock только в том случае, если приложение используется на устройстве смешанной реальности.

```csharp

bool isViewingInMR = Windows.ApplicationModel.Preview.Holographic.HolographicApplicationPreview.IsCurrentViewPresentedOnHolographicDisplay();

            if (isViewingInMR)
            {
                // Running on headset, resize the XAML text
                textBlock.Text = "I'm running in Mixed Reality!";
                textBlock.FontSize = 32;
            }
            else
            {
                // Running on desktop
                textBlock.Text = "I'm running on the desktop.";
                textBlock.FontSize = 14;
            }

```





## <a name="related-articles"></a>Смежные разделы


* [Текущие ограничения для приложений, использующих интерфейсы API из оболочки](https://developer.microsoft.com/windows/mixed-reality/current_limitations_for_apps_using_apis_from_the_shell)
* [Создание 2D-приложений](https://developer.microsoft.com/windows/mixed-reality/building_2d_apps)
* [HoloLens: Создание 2D-приложений UWP для Microsoft HoloLens](https://channel9.msdn.com/Events/Build/2016/B854)
* [Условный XAML](https://docs.microsoft.com/windows/uwp/debug-test-perf/conditional-xaml)


