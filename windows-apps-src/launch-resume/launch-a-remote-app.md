---
author: PatrickFarley
title: Запуск приложения на удаленном устройстве
description: Узнайте, как запустить приложение на удаленном устройстве с использованием платформы Project Rome.
ms.author: pafarley
ms.date: 02/12/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, uwp, подключенных устройств, удаленными системами, Рим, project rome
ms.assetid: 54f6a33d-a3b5-4169-8664-653dbab09175
ms.localizationpriority: medium
ms.openlocfilehash: 58a420d73ba4a0cd51f909fd5d7d417af1cfb38f
ms.sourcegitcommit: 194ab5aa395226580753869c6b66fce88be83522
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2018
ms.locfileid: "4156365"
---
# <a name="launch-an-app-on-a-remote-device"></a>Запуск приложения на удаленном устройстве

В этой статье объясняется, как запустить приложение для Windows на удаленном устройстве.

Начиная с Windows 10 версии 1607, приложение UWP может запускать приложение UWP или классическое приложение для Windows удаленно на другом устройстве, которое также работает с Windows 10 версии 1607 или выше, при условии что вход на обоих устройствах выполнен с той же учетной записью Майкрософт (MSA). Это самый простой вариант использования Project Rome.

Функция удаленного запуска создает удобную пользовательскую среду для выполнения задач, и пользователь может начать выполнять задачу на одном устройстве и завершить на другом. Например, если пользователь слушает музыку на телефоне в своей машине, придя домой, он или она может продолжить воспроизведение на Xbox One. Удаленный запуск позволяет приложениям передавать контекстные данные в запускаемое удаленное приложение и продолжать работу в нем.

## <a name="preliminary-setup"></a>Предварительная настройка

### <a name="add-the-remotesystem-capability"></a>Добавление возможности remoteSystem

Чтобы приложение могло запускать другое приложение на удаленном устройстве, вам потребуется добавить возможность `remoteSystem` в манифест пакета приложений. Вы можете использовать конструктор манифестов приложений для добавления этой возможности, выбрав **Удаленная система** на вкладке **Возможности**. Кроме того, можно вручную добавить следующую строку в файл _Package.appxmanifest_ вашего проекта.

``` xml
<Capabilities>
   <uap3:Capability Name="remoteSystem"/>
</Capabilities>
```

### <a name="enable-cross-device-sharing"></a>Возможность совместной работы на разных устройствах

Кроме того на клиентском устройстве должно быть разрешено использование на нескольких устройствах. Этот параметр, доступ к которому можно получить в разделе **Параметры**: **Система** > **Общие возможности** > **Передача между устройствами**, включен по умолчанию. 

![страница параметров общих возможностей](images/shared-experiences-settings.png)

## <a name="find-a-remote-device"></a>Поиск удаленного устройства

Сначала вам потребуется найти устройство, к которому нужно подключиться. В статье [Обнаружение удаленных устройств](discover-remote-devices.md) подробно описано, как это сделать. Мы воспользуемся простым способом, не прибегая к фильтрации по типу устройства или подключения. Мы создадим наблюдатель удаленных систем для поиска удаленных устройств и создадим обработчики событий, которые возникают при удалении или обнаружении устройств. Так мы получим коллекцию удаленных устройств.

В коде из этих примеров требуется, чтобы в ваших файлах класса имелся оператор `using Windows.System.RemoteSystems`.

[!code-cs[Main](./code/RemoteLaunchScenario/MainPage.xaml.cs#SnippetBuildDeviceList)]

Перед удаленным запуском необходимо сначала вызвать метод `RemoteSystem.RequestAccessAsync()`. Проверьте полученное значение и убедитесь, что у вашего приложения есть разрешение на доступ к удаленным устройствам. Эта проверка может не удаться, если вы не добавили возможность `remoteSystem` в приложение.

Обработчики событий наблюдателя систем вызываются при обнаружении устройства, к которому можно подключиться, или прекращении доступа к нему. Мы будем использовать эти обработчики событий для ведения актуального списка устройств, к которым можно подключиться.

[!code-cs[Main](./code/RemoteLaunchScenario/MainPage.xaml.cs#SnippetEventHandlers)]


Мы будет отслеживать устройства по идентификатору удаленной системы с помощью **словаря**. Для содержания исчисляемого списка устройств используется класс **ObservableCollection**. Класс **ObservableCollection** также упрощает привязку списка устройств к пользовательскому интерфейсу, но мы не будем этого делать в нашем примере.

[!code-cs[Main](./code/RemoteLaunchScenario/MainPage.xaml.cs#SnippetMembers)]

Добавьте вызов метода `BuildDeviceList()` в код запуска приложения перед запуском удаленного приложения.

## <a name="launch-an-app-on-a-remote-device"></a>Запуск приложения на удаленном устройстве

Запустите приложение удаленно, указав устройство, к которому требуется подключиться, в API [**RemoteLauncher.LaunchUriAsync**](https://msdn.microsoft.com/library/windows/apps/windows.system.remotelauncher.launchuriasync.aspx). Для этого метода существует три перегрузки. В самой простой из них, используемой в этом примере, указывается универсальный код ресурса (URI), с помощью которого активируется приложение на удаленном устройстве. В этом примере с помощью URI открывается приложение "Карты" на удаленной системе с трехмерным представлением башни Спейс-Нидл.

Другие перегрузки **RemoteLauncher.LaunchUriAsync** позволяют указывать такие параметры, как URI веб-сайта для проверки невозможности запуска подходящего приложения, способного обработать этот URI, на удаленном устройстве, и необязательный список имен семейства пакетов, который можно использовать для запуска этого URI на удаленном устройстве. Вы также можете предоставить данные в виде пар "ключ-значение". Вы можете передать данные приложению, которое запускается, чтобы предоставить контекст для удаленного приложения, например название песни, которую требуется воспроизвести, и текущее расположение воспроизведения при передаче воспроизведения с одного устройства на другое.

В практических сценариях можно предоставить пользовательский интерфейс для выбора целевого устройства. Однако для упрощения этого примера мы воспользуемся только первым удаленным устройством из списка.

[!code-cs[Main](./code/RemoteLaunchScenario/MainPage.xaml.cs#SnippetRemoteUriLaunch)]

Объект [**RemoteLaunchUriStatus**](https://msdn.microsoft.com/library/windows/apps/windows.system.remotelaunchuristatus.aspx), возвращаемый методом **RemoteLauncher.LaunchUriAsync()**, содержит сведения об успешном удаленном запуске или причинах его сбоя.

## <a name="related-topics"></a>Статьи по теме

[Справочник по API удаленных систем](https://msdn.microsoft.com/library/windows/apps/Windows.System.RemoteSystems)  
[Обзор подключенных приложений и устройств (Project Rome)](connected-apps-and-devices.md)  
[Обнаружение удаленных устройств](discover-remote-devices.md)  
[Пример удаленных систем](https://github.com/Microsoft/Windows-universal-samples/tree/dev/Samples/RemoteSystems) демонстрирует, как обнаружить удаленную систему, запустить приложение в удаленной системе и использовать службы приложений для передачи сообщений между приложениями, работающими в двух системах.
