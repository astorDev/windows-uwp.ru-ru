---
author: TylerMSFT
title: "Запуск приложения по умолчанию для URI"
description: "Узнайте, как запускать приложение по умолчанию для универсального кода ресурса (URI). Универсальные коды ресурсов (URI) позволяют запустить приложение, чтобы выполнить определенную задачу. В этом разделе также приводится обзор множества схем URI, встроенных в Windows."
ms.assetid: 7B0D0AF5-D89E-4DB0-9B79-90201D79974F
ms.author: twhitney
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
translationtype: Human Translation
ms.sourcegitcommit: c6b64cff1bbebc8ba69bc6e03d34b69f85e798fc
ms.openlocfilehash: fcc1d056fc3a4cb8d57ae5082e62cf0b802bb4e7
ms.lasthandoff: 02/07/2017

---

# <a name="launch-the-default-app-for-a-uri"></a>Запуск приложения по умолчанию для URI

\[ Обновлено для приложений UWP в Windows 10. Статьи о Windows 8.x см. в [архиве](http://go.microsoft.com/fwlink/p/?linkid=619132) \]

**Важные API**

- [**LaunchUriAsync**](https://msdn.microsoft.com/library/windows/apps/hh701476)
-  [**PreferredApplicationPackageFamilyName**](https://msdn.microsoft.com/library/windows/apps/hh965482)
- [**DesiredRemainingView**](https://msdn.microsoft.com/library/windows/apps/dn298314)

Узнайте, как запускать приложение по умолчанию для универсального кода ресурса (URI). Универсальные коды ресурсов (URI) позволяют запустить приложение, чтобы выполнить определенную задачу. В этом разделе также приводится обзор множества схем URI, встроенных в Windows. Вы также можете запустить собственные схемы URI. Дополнительные сведения о регистрации собственной схемы URI и обработке активации URI см. в разделе [Обработка активации URI](handle-uri-activation.md).


Схемы URI позволяют открывать приложения, щелкая гиперссылки. Таким же образом можно создать электронное сообщение с помощью **mailto:** или открыть веб-браузер по умолчанию с помощью **http:**.

В этом разделе описываются указанные ниже схемы URI, встроенные в Windows:

| Схема URI | Запускает |
| -------|--------------|
|[bingmaps:, ms-drive-to: и ms-walk-to: ](#maps-app-uri-schemes) | Приложение «Карты» |
|[http:](#http-uri-scheme) | Веб-браузер по умолчанию |
|[mailto:](#email-uri-scheme) | Приложение электронной почты по умолчанию |
|[ms-call:](#call-app-uri-scheme) |  Приложение «Звонок» |
|[ms-chat:](#messaging-app-uri-scheme) | Приложение «Сообщения» |
|[ms-people:](#people-app-uri-scheme) | Приложение «Люди» |
|[ms-settings:](#settings-app-uri-scheme) | Приложение «Параметры» |
|[ms-store:](#store-app-uri-scheme)  | Приложение «Магазин» |
|[ms-tonepicker:](#tone-picker-uri-scheme) | Средство выбора звуковых сигналов |
|[ms-yellowpage:](#nearby-numbers-app-uri-scheme) | Приложения «Телефоны мест по соседству» |

<br> Например, следующая схема URI открывает браузер, заданный по умолчанию, и отображает веб-сайт Bing.

`http://bing.com`

Кроме того, вы можете запустить собственные схемы URI. Если ни одно из установленных приложений не предназначено для обработки URI, можно порекомендовать пользователю приложение для установки. Дополнительные сведения см. в разделе [Рекомендовать приложение, если для обработки URI нет доступных приложений](#recommend-an-app-if-one-is-not-available-to-handle-the-uri).

В большинстве случаев ваше приложение не может выбирать запускаемое приложение. Пользователь сам определяет, какое приложение запустить. Можно зарегистрировать несколько приложений для обработки одной схемы URI. Исключение составляют зарезервированные схемы URI. Регистрация зарезервированных схем URI игнорируется. Полный список зарезервированных схем URI см. в разделе [Обработка активации URI](handle-uri-activation.md). В тех случаях, когда несколько приложений могут зарегистрировать одну схему URI, ваше приложение может порекомендовать определенное приложение для запуска. Дополнительные сведения см. в разделе [Рекомендовать приложение, если для обработки URI нет доступных приложений](#recommend-an-app-if-one-is-not-available-to-handle-the-uri).

### <a name="call-launchuriasync-to-launch-a-uri"></a>Вызов метода LaunchUriAsync для запуска URI

Используйте метод [**LaunchUriAsync**](https://msdn.microsoft.com/library/windows/apps/hh701476) для запуска URI. При вызове этого метода ваше приложение должно быть приложением переднего плана, то есть быть видимым пользователю. Это требование обеспечивает контроль пользователя над ситуацией. Для соблюдения этого требования убедитесь, что все запуски URI напрямую связаны с пользовательским интерфейсом вашего приложения. Чтобы запустить URI, пользователь всегда должен выполнить какое-либо действие. Если вы попытаетесь запустить URI, когда приложение не находится на переднем плане, запуск завершится ошибкой, и будет выполнен обратный вызов для ошибки.

Сначала создайте объект [**System.Uri**](https://msdn.microsoft.com/library/windows/apps/system.uri.aspx) для представления URI, а затем передайте его методу [**LaunchUriAsync**](https://msdn.microsoft.com/library/windows/apps/hh701476). С помощью возвращаемого результата узнайте, был ли вызов выполнен успешно, как показано в следующем примере.

```cs
private async void launchURI_Click(object sender, RoutedEventArgs e)
{
   // The URI to launch
   var uriBing = new Uri(@"http://www.bing.com");

   // Launch the URI
   var success = await Windows.System.Launcher.LaunchUriAsync(uriBing);

   if (success)
   {
      // URI launched
   }
   else
   {
      // URI launch failed
   }
}
```

В некоторых случаях операционная система отправляет пользователю запрос, чтобы определить, действительно ли нужно переключиться между приложениями.

![Диалоговое окно предупреждения с перекрытием на фоне неактивного приложения. Диалоговое окно, запрашивающее у пользователя подтверждение переключения между приложениями, с кнопками «Да» и «Нет» в правой нижней части. Выбрана кнопка «Нет».](images/warningdialog.png)

Если вы хотите, чтобы этот запрос выполнялся постоянно, используйте свойство [**Windows.System.LauncherOptions.TreatAsUntrusted**](https://msdn.microsoft.com/library/windows/apps/hh701442), чтобы указать, что операционная система должна вывести на экран предупреждение.

```cs
// The URI to launch
var uriBing = new Uri(@"http://www.bing.com");

// Set the option to show a warning
var promptOptions = new Windows.System.LauncherOptions();
promptOptions.TreatAsUntrusted = true;

// Launch the URI
var success = await Windows.System.Launcher.LaunchUriAsync(uriBing, promptOptions);
```

### <a name="recommend-an-app-if-one-is-not-available-to-handle-the-uri"></a>Если приложение для обработки данного URI отсутствует, порекомендуйте приложение.

В некоторых случаях у пользователя может быть не установлено приложение для обработки запускаемого URI. Тогда по умолчанию операционная система предоставит пользователю ссылку для поиска подходящего приложения в Магазине. Если вы при этом хотите порекомендовать пользователю конкретное приложение, вы можете передать рекомендацию вместе с запускаемым URI.

Кроме того, рекомендации полезны при регистрации нескольких приложений для обработки схемы URI. Порекомендовав конкретное приложение, Windows откроет это приложение, при условии что оно уже установлено.

Чтобы порекомендовать приложение, вызовите метод [**Windows.System.Launcher.LaunchUriAsync(Uri, LauncherOptions)**](https://msdn.microsoft.com/library/windows/apps/hh701484), указав в качестве значения параметра [**LauncherOptions.preferredApplicationPackageFamilyName**](https://msdn.microsoft.com/library/windows/apps/hh965482) имя семейства пакета приложения Магазина, которое вы рекомендуете. Операционная система будет использовать эту информацию, чтобы заменить общий параметр (поиск приложения в Магазине) конкретным параметром (приобретение рекомендованного приложения в Магазине).

```cs
// Set the recommended app
var options = new Windows.System.LauncherOptions();
options.PreferredApplicationPackageFamilyName = "Contoso.URIApp_8wknc82po1e";
options.PreferredApplicationDisplayName = "Contoso URI Ap";

// Launch the URI and pass in the recommended app
// in case the user has no apps installed to handle the URI
var success = await Windows.System.Launcher.LaunchUriAsync(uriContoso, options);
```

### <a name="set-remaining-view-preference"></a>Настройка представления оставшегося пространства

Исходные приложения, вызывающие [**LaunchUriAsync**](https://msdn.microsoft.com/library/windows/apps/hh701476), могут запрашивать разрешение остаться на экране после запуска URI. По умолчанию Windows пытается поровну поделить все доступное пространство между исходным приложением и конечным приложением, обрабатывающим URI. Исходные приложения могут использовать свойство [**DesiredRemainingView**](https://msdn.microsoft.com/library/windows/apps/dn298314), чтобы сообщить операционной системе, что для окна приложения требуется больше или меньше доступного пространства. При помощи **DesiredRemainingView** также можно указать, что исходному приложению не нужно оставаться на экране после запуска URI и что его пространство можно полностью занять конечным приложением. Это свойство указывает только предпочтительный размер окна для вызывающего приложения. Оно не задает условия для других приложений, которые могут находиться на экране в это же время.

**Примечание.** Windows учитывает множество различных факторов при определении окончательного размера окна исходного приложения, например настройки исходного приложения, количество приложений на экране, ориентацию экрана и т. д. Задав [**DesiredRemainingView**](https://msdn.microsoft.com/library/windows/apps/dn298314), вы не гарантируете конкретного поведения окон для исходного приложения.

```cs
// Set the desired remaining view.
var options = new Windows.System.LauncherOptions();
options.DesiredRemainingView = Windows.UI.ViewManagement.ViewSizePreference.UseLess;

// Launch the URI
var success = await Windows.System.Launcher.LaunchUriAsync(uriContoso, options);
```

## <a name="uri-schemes"></a>Схемы URI ##

Ниже описаны различные схемы URI.
<br>

### <a name="call-app-uri-scheme"></a>Схема URI приложения «Звонок»

Ваше приложение может использовать схему URI **ms-call:** для запуска приложения «Звонок».

| Схема URI       | Результат                   |
|------------------|--------------------------|
| ms-call:settings | Вызов страницы параметров приложения. | 
<br>
### <a name="email-uri-scheme"></a>Схема URI электронной почты

Ваше приложение может использовать схему URI **mailto:** для запуска почтового приложения, заданного по умолчанию.

| Схема URI               | Результаты                                                                                                                                                     |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| mailto:                  | Запускает почтовое приложение, заданное по умолчанию.                                                                                                                             |
| mailto:\[адрес электронной почты\] | Запускает почтовое приложение и создает новое сообщение с указанным электронным адресом в строке «Кому». Обратите внимание, что электронная почта не отправляется, пока пользователь не нажмет кнопку «Отправить». |
<br>
### <a name="http-uri-scheme"></a>Схема URI HTTP

Ваше приложение может использовать схему URI **http:** для запуска веб-браузера, заданного по умолчанию.

| Схема URI | Результаты                           |
|------------|-----------------------------------|
| http:      | Запуск веб-браузера, заданного по умолчанию. |
<br>
### <a name="maps-app-uri-schemes"></a>Схемы URI приложения «Карты»

Ваше приложение может использовать схемы URI **bingmaps:**, **ms-drive-to:** и **ms-walk-to:** для [запуска приложения «Карты Windows» ](launch-maps-app.md) с определенными картами, маршрутами и результатами поиска. Например, следующий URI открывает приложение «Карты Windows» и отображает карту, в центре которой расположен Нью-Йорк.

`bingmaps:?cp=40.726966~-74.006076`

![Пример приложения Карты Windows.](images/mapnyc.png)

Дополнительные сведения см. в разделе [Запуск приложения «Карты Windows» ](launch-maps-app.md). Подробнее об использовании элемента управления картой в приложении описано в статье [Отображение карт с двухмерными и трехмерными представлениями, а также с представлениями Streetside](https://msdn.microsoft.com/library/windows/apps/mt219695).
<br>
### <a name="messaging-app-uri-scheme"></a>Схема URI приложения «Сообщения»

Ваше приложение может использовать схему URI **ms-chat:** для запуска приложения «Сообщения Windows».

| Схема URI |Результаты | |-- ---------|--------| | ms-chat:   | Запуск приложения «Сообщения». | | ms-chat:?ContactID={contacted}  |  Позволяет приложению для обмена сообщениями запускаться с определенными контактными сведениями.   | | ms-chat:?Body={body} | Позволяет приложению для обмена сообщениями запускаться со строкой, которая используется в качестве содержимого сообщения.| | ms-chat:?Addresses={address}&Body={body} | Позволяет приложению для обмена сообщениями запускаться с определенной информацией об адресах и со строкой для использования в качестве содержимого сообщения. Примечание. Адреса могут быть объединены. | | ms-chat:?TransportId={transportId}  | Позволяет приложению для обмена сообщениями запускаться с определенным кодом транспортировки. |
<br>
### <a name="tone-picker-uri-scheme"></a>Схема URI средства выбора звуковых сигналов

Ваше приложение может использовать схему URI **ms tonepicker:** для выбора мелодий звонка, сигналов будильника и системных звуковых сигналов. Можно также сохранить новые мелодии звонка и получить отображаемое имя звукового сигнала.

| Схема URI | Результаты |
|------------|---------|
| ms-tonepicker: | Выбор мелодий звонка, сигналов будильника и системных звуковых сигналов. |

Параметры передаются в API LaunchURI через [ValueSet](https://msdn.microsoft.com/library/windows/apps/windows.foundation.collections.valueset.aspx). Подробнее см. раздел [Выбор и сохранение звуковых сигналов с помощью схемы URI ms-tonepicker](launch-ringtone-picker.md).

### <a name="nearby-numbers-app-uri-scheme"></a>Схема URI приложения «Телефоны мест по соседству»
<br>
Ваше приложение может использовать схему URI **ms-yellowpage:** для запуска приложения «Телефоны мест по соседству».

| Схема URI | Результаты |
|------------|---------|
| ms-yellowpage:?input=\[ключевое слово\]&method=\[String или T9\] | Запуск приложения «Телефоны мест по соседству». `input` указывает ключевое слово, по которому требуется выполнить поиск. `method` указывает тип поиска (поиск строки или поиск по T9). <br> Если параметр `method` имеет значение `T9` (тип клавиатуры), параметр `keyword` должен быть цифровой строкой, соответствующей буквам на клавиатуре T9, по которым требуется произвести поиск.<br>Если параметр `method` имеет значение `String`, параметр `keyword` представляет собой ключевое слово, которое требуется найти. |
 
<br>
### <a name="people-app-uri-scheme"></a>Схема URI приложения «Люди»

Ваше приложение может использовать схему URI **ms-people:** для запуска приложения «Люди».
Дополнительные сведения см. в разделе [Запуск приложения «Люди»](launch-people-apps.md).

<br>
### <a name="settings-app-uri-scheme"></a>Схема URI приложения «Параметры»

Ваше приложение может использовать схему URI **ms-settings:** для [запуска приложения «Параметры» для Windows](launch-settings-app.md). Запуск приложения «Параметры» — важная составляющая создания приложения, учитывающего требования конфиденциальности. Если ваше приложение не может получить доступ к конфиденциальному ресурсу, рекомендуется предоставить пользователю удобную ссылку на параметры конфиденциальности для этого ресурса. Например, следующий URI открывает приложение «Параметры» и отображает параметры конфиденциальности камеры.

`ms-settings:privacy-webcam`

![Параметры конфиденциальности камеры.](images/privacyawarenesssettingsapp.png)

Дополнительные сведения см. в разделе: [Запуск приложения «Параметры» для Windows](launch-settings-app.md) и [Руководство по приложениям, учитывающим требования конфиденциальности](https://msdn.microsoft.com/library/windows/apps/hh768223).

<br>
### <a name="store-app-uri-scheme"></a>Схема URI приложения «Магазин»

Ваше приложение может использовать схему URI **ms-windows-store:** для [запуска приложения Магазина Windows](launch-store-app.md). Открытие страниц с подробным описанием продукта, страниц с обзором продукта, страниц поиска и др. Например, следующий URI открывает приложение Магазина Windows и запускает домашнюю страницу Магазина.

`ms-windows-store://home/`

Дополнительные сведения см. в разделе [Запуск приложения Магазина Windows](launch-store-app.md).

