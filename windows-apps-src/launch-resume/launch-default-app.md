---
author: TylerMSFT
title: "Запуск приложения по умолчанию для URI"
description: "Узнайте, как запускать приложение по умолчанию для универсального кода ресурса (URI). Универсальные коды ресурсов (URI) позволяют запустить приложение, чтобы выполнить определенную задачу. В этом разделе также приводится обзор множества схем URI, встроенных в Windows."
ms.assetid: 7B0D0AF5-D89E-4DB0-9B79-90201D79974F
ms.sourcegitcommit: 9011d2e2e1e51edc89851e815d31e13390c24f96
ms.openlocfilehash: d454317d135e2b2b952c16fb00685e34b489865c

---

# Запуск приложения по умолчанию для URI


\[ Обновлено для приложений UWP в Windows 10. Статьи о Windows 8.x см. в [архиве](http://go.microsoft.com/fwlink/p/?linkid=619132) \]


**Важные API**

-   [**LaunchUriAsync**](https://msdn.microsoft.com/library/windows/apps/hh701476)
-   [**PreferredApplicationPackageFamilyName**](https://msdn.microsoft.com/library/windows/apps/hh965482)
-   [**DesiredRemainingView**](https://msdn.microsoft.com/library/windows/apps/dn298314)

Узнайте, как запускать приложение по умолчанию для универсального кода ресурса (URI). Универсальные коды ресурсов (URI) позволяют запустить приложение, чтобы выполнить определенную задачу. В этом разделе также приводится обзор множества схем URI, встроенных в Windows. Вы также можете запустить собственные схемы URI. Дополнительные сведения о регистрации собственной схемы URI и обработке активации URI см. в разделе [Обработка активации URI](handle-uri-activation.md).

## Запуск URI


Схемы URI позволяют открывать приложения, щелкнув гиперссылки. Вы можете создать электронное сообщение с помощью **mailto:** или открыть веб-браузер по умолчанию с помощью **http:**. В этом разделе описываются некоторые схемы URI, встроенные в Windows:

-   [ms-settings: схема URI](#settings) запускает приложение «Параметры» для Windows;
-   [ms-store: схема URI](#store) запускает приложение Магазина Windows;
-   [http: схема URI](#browser) запускает веб-браузер, заданный по умолчанию;
-   [mailto: схема URI](#email) запускает почтовое приложение, заданное по умолчанию;
-   [Схемы URI bingmaps:, ms-drive-to: и ms-walk-to:](#maps) запускают приложение «Карты Windows».

Например, следующая схема URI открывает браузер, заданный по умолчанию, и отображает веб-сайт Bing.

`http://bing.com`

Кроме того, вы можете запустить собственные схемы URI. Если ни одно из установленных приложений не предназначено для обработки URI, можно порекомендовать пользователю приложение для установки. Дополнительные сведения см. в разделе [Рекомендация приложения](#recommend).

В большинстве случаев ваше приложение не может выбрать запущенное приложение. Пользователь сам определяет, какое приложение запустить. Можно зарегистрировать несколько приложений для обработки одной схемы URI. Исключение составляют зарезервированные схемы URI. Регистрация зарезервированных схем URI игнорируется. Полный список зарезервированных схем URI см. в разделе [Обработка активации URI](handle-uri-activation.md). В тех случаях, когда несколько приложений могут зарегистрировать одну схему URI, ваше приложение может порекомендовать определенное приложение для запуска. Дополнительные сведения см. в разделе [Рекомендация приложения](#recommend).

### Вызов LaunchUriAsync

Используйте метод [**LaunchUriAsync**](https://msdn.microsoft.com/library/windows/apps/hh701476) для запуска URI. При вызове этого метода ваше приложение должно быть приложением переднего плана, то есть быть видимым пользователю. Это требование обеспечивает контроль пользователя над ситуацией. Для соблюдения этого требования убедитесь, что все запуски URI напрямую связаны с пользовательским интерфейсом вашего приложения. Чтобы запустить URI, пользователь всегда должен выполнить какое-либо действие. Если вы попытаетесь запустить URI, когда приложение не находится на переднем плане, запуск завершится ошибкой, и будет выполнен обратный вызов для ошибки.

Сначала создайте объект [**System.Uri**](https://msdn.microsoft.com/en-us/library/windows/apps/system.uri.aspx) для представления URI, а затем передайте его методу [**LaunchUriAsync**](https://msdn.microsoft.com/library/windows/apps/hh701476). С помощью возвращаемого результата узнайте, был ли вызов выполнен успешно, как показано в следующем примере.

```cs
private async void launchURI_Click(object sender, RoutedEventArgs e)
{
   // The URI to launch
   var uriBing = new Uri(@"http://www.bing.com");

   // Launch the URI
   var success = await Windows.System.Launcher.LaunchUriAsync(uriBing);

   if (success)
   {
      // URI launched
   }
   else
   {
      // URI launch failed
   }
}
```

В некоторых случаях операционная система отправляет пользователю запрос, чтобы определить, действительно ли нужно переключиться между приложениями.

![Диалоговое окно предупреждения с перекрытием на фоне неактивного приложения. Диалоговое окно, запрашивающее у пользователя подтверждение переключения между приложениями, с кнопками «Да» и «Нет» в правой нижней части. Выбрана кнопка «Нет».](images/warningdialog.png)

Если вы хотите, чтобы этот запрос выполнялся постоянно, используйте свойство [**Windows.System.LauncherOptions.TreatAsUntrusted**](https://msdn.microsoft.com/library/windows/apps/hh701442), чтобы указать, что операционная система должна вывести на экран предупреждение.

```cs
// The URI to launch
var uriBing = new Uri(@"http://www.bing.com");

// Set the option to show a warning
var promptOptions = new Windows.System.LauncherOptions();
promptOptions.TreatAsUntrusted = true;

// Launch the URI
var success = await Windows.System.Launcher.LaunchUriAsync(uriBing, promptOptions);
```

### Рекомендация приложения

В некоторых случаях у пользователя может быть не установлено приложение для обработки запускаемого URI. Тогда по умолчанию операционная система предоставит пользователю ссылку для поиска подходящего приложения в Магазине. Если вы при этом хотите порекомендовать пользователю конкретное приложение, вы можете передать рекомендацию вместе с запускаемым URI.

Кроме того, рекомендации полезны при регистрации нескольких приложений для обработки схемы URI. Порекомендовав конкретное приложение, Windows откроет это приложение, при условии что оно уже установлено.

Чтобы порекомендовать приложение, вызовите метод [**Windows.System.Launcher.LaunchUriAsync(Uri, LauncherOptions)**](https://msdn.microsoft.com/library/windows/apps/hh701484), указав в качестве значения параметра [**LauncherOptions.preferredApplicationPackageFamilyName**](https://msdn.microsoft.com/library/windows/apps/hh965482) имя семейства пакета приложения Магазина, которое вы рекомендуете. Операционная система будет использовать эту информацию, чтобы заменить общий параметр (поиск приложения в Магазине) конкретным параметром (приобретение рекомендованного приложения в Магазине).

```cs
// Set the recommended app
var options = new Windows.System.LauncherOptions();
options.PreferredApplicationPackageFamilyName = "Contoso.URIApp_8wknc82po1e";
options.PreferredApplicationDisplayName = "Contoso URI Ap";

// Launch the URI and pass in the recommended app
// in case the user has no apps installed to handle the URI
var success = await Windows.System.Launcher.LaunchUriAsync(uriContoso, options);
```

### Настройка представления оставшегося пространства

Исходные приложения, вызывающие [**LaunchUriAsync**](https://msdn.microsoft.com/library/windows/apps/hh701476), могут запрашивать разрешение остаться на экране после запуска URI. По умолчанию Windows пытается поровну поделить все доступное пространство между исходным приложением и конечным приложением, обрабатывающим URI. Исходные приложения могут использовать свойство [**DesiredRemainingView**](https://msdn.microsoft.com/library/windows/apps/dn298314), чтобы сообщить операционной системе, что для окна приложения требуется больше или меньше доступного пространства. При помощи **DesiredRemainingView** также можно указать, что исходному приложению не нужно оставаться на экране после запуска URI и что его пространство можно полностью занять конечным приложением. Это свойство указывает только предпочтительный размер окна для вызывающего приложения. Оно не задает условия для других приложений, которые могут находиться на экране в это же время.

**Примечание.** Windows учитывает множество различных факторов при определении окончательного размера окна исходного приложения, например настройки исходного приложения, количество приложений на экране, ориентацию экрана и т. д. Задав [**DesiredRemainingView**](https://msdn.microsoft.com/library/windows/apps/dn298314), вы не гарантируете конкретного поведения окон для исходного приложения.

 

```cs
// Set the desired remaining view.
var options = new Windows.System.LauncherOptions();
options.DesiredRemainingView = Windows.UI.ViewManagement.ViewSizePreference.UseLess;

// Launch the URI
var success = await Windows.System.Launcher.LaunchUriAsync(uriContoso, options);
```

## Схемы URI приложения «Карты Windows»


Ваше приложение может использовать схемы URI **bingmaps:**, **ms-drive-to:** и **ms-walk-to:** для [запуска приложения «Карты Windows» ](launch-maps-app.md) с определенными картами, маршрутами и результатами поиска. Например, следующий URI открывает приложение «Карты Windows» и отображает карту, в центре которой расположен Нью-Йорк.

`bingmaps:?cp=40.726966~-74.006076`

![Пример приложения Карты Windows.](images/mapnyc.png)

Дополнительные сведения см. в разделе [Запуск приложения «Карты Windows» ](launch-maps-app.md). Подробнее об использовании элемента управления картой в приложении описано в статье [Отображение карт с двухмерными и трехмерными представлениями, а также с представлениями Streetside](https://msdn.microsoft.com/library/windows/apps/mt219695).

## Схема URI приложения «Параметры» для Windows


Ваше приложение может использовать схему URI **ms-settings:** для [запуска приложения «Параметры» для Windows](launch-settings-app.md). Запуск приложения «Параметры» — важная составляющая создания приложения, учитывающего требования конфиденциальности. Если ваше приложение не может получить доступ к конфиденциальному ресурсу, рекомендуется предоставить пользователю удобную ссылку на параметры конфиденциальности для этого ресурса. Например, следующий URI открывает приложение «Параметры» и отображает параметры конфиденциальности камеры.

`ms-settings:privacy-webcam`

![Параметры конфиденциальности камеры.](images/privacyawarenesssettingsapp.png)

Дополнительные сведения см. в разделе: [Запуск приложения «Параметры» для Windows](launch-settings-app.md) и [Руководство по приложениям, учитывающим требования конфиденциальности](https://msdn.microsoft.com/library/windows/apps/hh768223).

## Схема URI приложения Магазина Windows


Ваше приложение может использовать схему URI **ms-windows-store:** для [запуска приложения Магазина Windows](launch-store-app.md). Открытие страниц с подробным описанием продукта, страниц с обзором продукта, страниц поиска и др. Например, следующий URI открывает приложение Магазина Windows и запускает домашнюю страницу Магазина.

`ms-windows-store://home/`

Дополнительные сведения см. в разделе [Запуск приложения Магазина Windows](launch-store-app.md).

## Схема URI приложения «Звонок»


Ваше приложение может использовать схему URI **ms-call:** для запуска приложения «Звонок».

| Схема URI       | Результаты                               |
|------------------|---------------------------------------|
| ms-call:settings | Запускает страницу с параметрами приложения «Звонок». |

 

## Схема URI приложения «Чат»


Ваше приложение может использовать схему URI **ms-chat:** для запуска приложения «Сообщения».

| Схема URI                               | Результаты                                                                                                                                                                                |
|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ms-chat:                                 | Запускает приложение для обмена сообщениями.                                                                                                                                                            |
| ms-chat:?ContactID={contacted}           | Позволяет приложению для обмена сообщениями запускаться с определенными контактными сведениями.                                                                                               |
| ms-chat:?Body={body}                     | Позволяет приложению для обмена сообщениями запускаться со строкой для использования в качестве содержимого сообщения.                                                                                    |
| ms-chat:?Addresses={address}&Body={body} | Позволяет приложению для обмена сообщениями запускаться с определенными сведениями об адресах и со строкой для использования в качестве содержимого сообщения. Примечание. Адреса могут быть объединены. |
| ms-chat:?TransportId={transportId}       | Позволяет приложению для обмена сообщениями запускаться с определенным кодом транспортировки.                                                                                                        |

 

## Схема URI электронной почты


Ваше приложение может использовать схему URI **mailto:** для запуска почтового приложения, заданного по умолчанию.

| Схема URI               | Результаты                                                                                                                                                     |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| mailto:                  | Запускает почтовое приложение, заданное по умолчанию.                                                                                                                             |
| mailto:\[адрес электронной почты\] | Запускает почтовое приложение и создает новое сообщение с указанным электронным адресом в строке «Кому». Обратите внимание, что электронная почта не отправляется, пока пользователь не нажмет кнопку «Отправить». |

 

## Схема URI HTTP


Ваше приложение может использовать схему URI **http:** для запуска веб-браузера, заданного по умолчанию.

| Схема URI | Результаты                           |
|------------|-----------------------------------|
| http:      | Запускает веб-браузер, заданный по умолчанию. |

 

## Схема URI приложения «Находящиеся рядом цифры»


Ваше приложение может использовать схему URI **ms-yellowpage:** для запуска приложения «Находящиеся рядом цифры».

| Схема URI                                            | Результаты                                                                               |
|-------------------------------------------------------|---------------------------------------------------------------------------------------|
| ms-yellowpage:?input=\[keyword\]&method=\[String|T9\] | Запускает установленное приложение поиска объектов (POI), которое поддерживает новый URI. |

 

## Схема URI приложения «Люди»


Ваше приложение может использовать схему URI **ms-people:** для запуска приложения «Люди».

Дополнительные сведения см. в разделе [Запуск приложения «Люди» ](launch-people-apps.md).

 

 



<!--HONumber=Jun16_HO4-->


