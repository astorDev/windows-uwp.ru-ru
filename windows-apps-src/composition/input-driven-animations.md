---
author: jwmsft
title: Анимации на основе ввода
description: Узнайте, как использовать анимации ввода в интерфейсе приложения.
ms.author: jimwalk
ms.date: 10/10/2017
ms.topic: article
keywords: windows 10, uwp, анимация
ms.localizationpriority: medium
ms.openlocfilehash: 04eabb4c70143a08f5b850e6444f7f3d21a9dd4a
ms.sourcegitcommit: ca96031debe1e76d4501621a7680079244ef1c60
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2018
ms.locfileid: "5816323"
---
# <a name="input-driven-animations"></a>Анимации на основе ввода

В этой статье приводятся вводные сведения об API InputAnimation и даются рекомендации по использованию этих типов анимации в вашем пользовательском интерфейсе.

## <a name="prerequisites"></a>Предварительные требования

Подразумевается, что вы знакомы с понятиями, которые рассматриваются в этих статьях:

- [Анимации на основе связей](relation-animations.md)

## <a name="smooth-motion-driven-from-user-interactions"></a>Плавное движение на основе взаимодействия с пользователем

На языке проектирования Fluent взаимодействие между конечными пользователями и приложениями имеет ключевое значение. Приложения должны не только выглядеть соответствующе, но и естественно и динамично реагировать на взаимодействие с ними пользователей. Это означает, что когда палец касается экрана, пользовательский интерфейс должен корректно реагировать на меняющуюся степень ввода; прокрутка должна выполняться плавно, а сдвигаемое по экрану содержимое— "прилипать" к пальцу.

Создание пользовательского интерфейса, который плавно и динамично реагирует на пользовательский ввод, обеспечивает высокую лояльность пользователей: когда пользователь взаимодействует с разными элементами пользовательского интерфейса, движение не только хорошо выглядит, но и ощущается плавно и естественно. Это облегчает взаимодействие конечных пользователей с приложением, делает работу с продуктом более запоминающейся и приятной.

## <a name="expanding-past-just-touch"></a>Расширение возможностей пользовательского интерфейса

Несмотря на то что касание— это один из наиболее распространенных инструментов, которые конечные пользователи используют для работы с содержимым пользовательского интерфейса, нельзя забывать и о таких методах ввода, как мышь и перо. В таких сценариях очень важно, чтобы конечные пользователи чувствовали, что пользовательский интерфейс динамично реагирует на их ввод независимо от используемого метода ввода. При создании взаимодействия "движение" на основе ввода следует быть осведомленным о разных методах ввода.

## <a name="different-input-driven-motion-experiences"></a>Разные взаимодействия "движение" на основе ввода

Пространство InputAnimation предоставляет несколько разных взаимодействий, позволяющих создавать динамически реагирующее движение. Как и другие элементы системы анимирования пользовательского интерфейса Windows, эти анимации на основе ввода функционируют в независимом потоке, что делает взаимодействие "движение" более динамичным. Однако в некоторых случаях, где взаимодействие основано на существующих элементах управления и компонентах XAML, части этих взаимодействий по-прежнему привязаны к пользовательскому интерфейсу.

Существует три базовых взаимодействия, которые создаются при построении динамичных анимаций движения на основе ввода:

1. Усовершенствование существующих взаимодействий ScrollView: положение ScrollViewer для XAML может запускать динамические анимации.
1. Взаимодействия на основе положения указателя: использование положения курсора в элементе UIElement с выполненной проверкой нажатия для выполнения динамических анимаций.
1. Пользовательские взаимодействия с манипуляциями с помощью InteractionTracker : создание внепоточных манипулятивных взаимодействий с широкими возможностями пользовательской настройки с использованием InteractionTracker (холст с возможностью прокрутки/масштабирования).

## <a name="enhancing-existing-scrollviewer-experiences"></a>Усовершенствование существующих взаимодействий ScrollViewer

Один из стандартных способов создания более динамичных взаимодействий заключается в создании элементов поверх существующего элемента управления ScrollViewer для XAML. В таких ситуациях положение прокрутки ScrollViewer используется для создания дополнительных компонентов пользовательского интерфейса, которые делают простое взаимодействие с прокруткой более динамичным. К числу примеров относятся закрепленные/скрытые заголовки и параллакс.

![Представление списка с параллаксом](images/animation/parallax.gif)

![Скрытый заголовок](images/animation/shy-header.gif)

При создании этих типов взаимодействия необходимо следовать общей формуле:

1. Откройте набор ScrollManipulationPropertySet за пределами ScrollViewer для XAML, который необходимо анимировать.
    - Осуществляется с использованием API ElementCompositionPreview.GetScrollViewerManipulationPropertySet(UIElement element)
    - Возвращает набор CompositionPropertySet, содержащий свойство под названием **Translation**
1. Создайте составную анимацию ExpressionAnimation с выражением, которое ссылается на свойство Translation.
1. Запустите анимацию в свойстве объекта CompositionObject.

Дополнительные сведения о создании таких взаимодействий см. в разделе [Расширение возможностей существующих взаимодействий ScrollViewer](scroll-input-animations.md).

## <a name="pointer-position-driven-experiences"></a>Взаимодействия на основе положения указателя

Еще одно стандартное динамическое взаимодействие, включающее ввод,— это запуск анимации с учетом положения указателя, например курсора мыши. В таких ситуациях разработчики используют расположение курсора, когда выполняется проверка его нажатия в элементе UIElement для XAML, что делает возможным создание таких взаимодействий, как отображение важных сведений.

![Пример прикрепления важных сведений к указателю](images/animation/spotlight-reveal.gif)

![Пример поворота указателя](images/animation/pointer-rotate.gif)

При создании этих типов взаимодействия необходимо следовать общей формуле:

1. Осуществите доступ к набору PointerPositionPropertySet за пределами элемента UIElement для XAML, положение курсора которого во время проверки нажатия вы хотите знать.
    - Осуществляется с использованием API ElementCompositionPreview.GetPointerPositionPropertySet(UIElement element)
    - Возвращает набор CompositionPropertySet, содержащий свойство под названием **Position**
1. Создайте составную анимацию CompositionExpressionAnimation с выражением, которое ссылается на свойство Position.
1. Запустите анимацию в свойстве объекта CompositionObject.

## <a name="custom-manipulation-experiences-with-interactiontracker"></a>Пользовательские взаимодействия с манипуляциями, выполняемые с помощью InteractionTracker

Одна из сложностей при использовании ScrollViewer для XAML заключается в том, что элемент связан с потоком пользовательского интерфейса. В результате взаимодействия прокрутки и масштабирования могут отставать и функционировать нестабильно, если поток пользовательского интерфейса занят. В результате качество взаимодействия оставляет желать лучшего. Кроме того, настроить многие аспекты взаимодействия ScrollViewer невозможно. InteractionTracker был создан для решения обеих проблем, предоставляя набор "строительных блоков" для создания пользовательских взаимодействий с манипуляциями, выполняемых в независимом потоке.

![Пример трехмерных взаимодействий](images/animation/interactions-3d.gif)

![Пример анимации путем оттягивания](images/animation/pull-to-animate.gif)

При создании взаимодействий с InteractionTracker необходимо следовать общей формуле:

1. Создайте объект InteractionTracker и определите его свойства.
1. Создайте источники VisualInteractionSources для любого визуального элемента CompositionVisual, который должен фиксировать потребляемый InteractionTracker ввод.
1. Создайте Composition ExpressionAnimation с выражением, которое ссылается на свойство Position модуля InteractionTracker.
1. Запустите анимацию в свойстве Composition Visual, которая должна управляться модулем InteractionTracker.
