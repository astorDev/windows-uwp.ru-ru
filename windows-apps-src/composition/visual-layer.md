---
ms.assetid: a2751e22-6842-073a-daec-425fb981bafe
title: Визуальный уровень
description: API Windows.UI.Composition предоставляет доступ к уровню композиции, находящемуся между уровнем платформы (XAML) и уровнем графики (DirectX).
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 599c2625bffff40a30f26bfb40f7cce9c97acdd1
ms.sourcegitcommit: 681c70f964210ab49ac5d06357ae96505bb78741
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/27/2018
ms.locfileid: "7716132"
---
# <a name="visual-layer"></a>Визуальный уровень

Визуальный уровень обеспечивает высокую производительность, API абстрактного режима для графики, эффектов и анимации и является основой для всех элементов пользовательского интерфейса на всех устройствах Windows.Определение элементов пользовательского интерфейса выполняется декларативным способом, и визуальный уровень использует аппаратное ускорение графики для плавной отрисовки содержимого, эффектов и анимации без скачков независимо от потока пользовательского интерфейса приложения.

Важные основные положения:

* Знакомые API WinRT.
* Архитектура, обеспечивающая более динамичный пользовательский интерфейс и взаимодействия.
* Концепции, согласованные со средствами разработки.
* Линейная масштабируемость без внезапного снижения производительности.

Ваши приложения Windows UWP уже используют визуальный уровень через одну из инфраструктур пользовательского интерфейса. Визуальный уровень позволяет также легко напрямую выполнять пользовательскую отрисовку, создавать эффекты и анимации.

![Уровни инфраструктуры пользовательского интерфейса: уровень платформы (Windows.UI.XAML) основан на визуальном уровне (Windows.UI.Composition), который, в свою очередь, построен на графическом уровне (DirectX)](images/layers-win-ui-composition.png)

## <a name="whats-in-the-visual-layer"></a>Что такое визуальный уровень?

Основные функции визуального уровня:

1. **Содержимое**: облегченная компоновка пользовательского нарисованного содержимого.
1. **Эффекты**: система создания эффектов пользовательского интерфейса в реальном времени, позволяющая анимировать, соединять и настраивать эффекты.
1. **Анимация**: выразительная анимация без привязки к конкретной платформе, которая не зависит от потока пользовательского интерфейса.

### <a name="content"></a>Содержимое

Размещение содержимого, его преобразование и доступ к нему обеспечивает система анимации и эффектов с использованием визуальных элементов. В основе иерархии классов находится класс [**Visual**](https://msdn.microsoft.com/library/windows/apps/Dn706858)— упрощенный прокси-сервер с гибким потоком в процессе приложения для визуального состояния в компоновщике. Вложенные классы Visual включают [**ContainerVisual**](https://msdn.microsoft.com/library/windows/apps/Dn706810) , позволяющий дочерним элементам создавать деревья визуальных элементов и [**SpriteVisual**](https://msdn.microsoft.com/library/windows/apps/Mt589433) , который содержит содержимое и может быть заполнен сплошными цветами, пользовательским содержимым или визуальными эффектами. Вместе эти типы Visual составляют визуальную древовидную структуру для двумерного пользовательского интерфейса и позволяют создавать наиболее видимые элементы FrameworkElements XAML.

Дополнительные сведения см. в обзоре [визуальных объектов композиции](composition-visual-tree.md).

### <a name="effects"></a>Эффекты

Система эффектов в визуальном уровне позволяет применить цепочку эффектов фильтра и прозрачности к визуальному элементу или дереву таких элементов. Это система эффектов пользовательского интерфейса, которые не следует путать с эффектами изображений и мультимедиа. Эффекты работают совместно с системой анимации, позволяя пользователям создавать плавную и динамичную анимацию свойств эффектов, которая отрисовывается независимо от потока пользовательского интерфейса. Эффекты в визуальном уровне представляют собой креативные структурные элементы, которые можно комбинировать и анимировать для создания специальных интерактивных возможностей.

Помимо цепочек анимируемых эффектов, визуальный уровень также поддерживает модель освещения. Она позволяет визуальным элементам имитировать свойства материалов, реагируя на анимируемые источники освещения. Визуальные элементы также могут отбрасывать тени. Для создания реалистичного ощущения глубины можно сочетать освещение и тени.

Дополнительные сведения см. в обзоре [эффектов композиции](composition-effects.md).

### <a name="animations"></a>Анимации

Система анимации в визуальном уровне позволяет перемещать визуальные элементы, анимировать эффекты и создавать преобразования, клипы и другие свойства.Эта система не привязана к платформе и разработана для повышения производительности.Она не зависит от потока пользовательского интерфейса, благодаря чему обеспечивается плавность и масштабируемость.Она позволяет использовать как знакомые методы создания анимации по ключевым кадрам с изменением свойств с течением времени, так и настраивать математические отношения между различными свойствами, включая пользовательский ввод, чтобы напрямую создавать безупречные скоординированные эффекты.

Дополнительную информацию см. в обзоре [анимации композиции](composition-animation.md).

### <a name="working-with-your-xaml-uwp-app"></a>Работа с приложением UWP XAML.

Получить доступ к визуальному элементу, созданному платформой XAML, и к поддержке видимого элемента FrameworkElement можно с помощью класса [**ElementCompositionPreview**](https://msdn.microsoft.com/library/windows/apps/Mt608976) в [**Windows.UI.Xaml.Hosting**](https://msdn.microsoft.com/library/windows/apps/Hh701908). Обратите внимание, что визуальные элементы, созданные для вас платформой, имеют определенные ограничения, касающиеся настройки. Это связано с тем, что платформа управляет смещением, преобразованием и временем жизни. Однако можно создавать собственные визуальные элементы и вкладывать их в существующий элемент XAML через ElementCompositionPreview или путем добавления в существующий ContainerVisual в визуальной древовидной структуре.

Дополнительные сведения см. в обзоре [использования визуального уровня с помощью XAML](using-the-visual-layer-with-xaml.md).

## <a name="additional-resources"></a>Дополнительные ресурсы

* [**Полная справочная документация для API**](https://msdn.microsoft.com/library/windows/apps/Dn706878)
* Расширенные примеры пользовательского интерфейса и композиции в [WindowsUIDevLabs GitHub](https://github.com/microsoft/windowsuidevlabs)
* [Windows.UI.Composition Sample Gallery](https://aka.ms/winuiapp)
* [Веб-канал @windowsui в Твиттере ](https://twitter.com/windowsui)
* Ознакомьтесь со статьей Кенни Керра (Kenny Kerr) на MSDN, которая посвящена этому API: [Graphics and Animation — Windows Composition Turns 10](https://msdn.microsoft.com/magazine/mt590968) (Графика и анимация — композиция в Windows 10)
