---
ms.assetid: a2751e22-6842-073a-daec-425fb981bafe
title: Визуальный уровень
description: API-интерфейс Windows.UI.Composition предоставляет доступ к уровню композиции, находящемуся между уровнем платформы (XAML) и уровнем графики (DirectX).
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: bf9cc4f97cdfcb02eb725b81163f215b22b259e4
ms.sourcegitcommit: 6f32604876ed480e8238c86101366a8d106c7d4e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/21/2019
ms.locfileid: "67318057"
---
# <a name="visual-layer"></a>Визуальный уровень

Визуальный уровень обеспечивает высокую производительность, API абстрактного режима для графики, эффектов и анимации и является основой для всех элементов пользовательского интерфейса на всех устройствах Windows. Определение элементов пользовательского интерфейса выполняется декларативным способом, и визуальный уровень использует аппаратное ускорение графики для плавной отрисовки содержимого, эффектов и анимации без скачков независимо от потока пользовательского интерфейса приложения.

Важные основные положения:

* Знакомые API WinRT.
* Архитектура, обеспечивающая более динамичный пользовательский интерфейс и взаимодействия.
* Концепции, согласованные со средствами разработки.
* Линейная масштабируемость без внезапного снижения производительности.

Ваши приложения Windows UWP уже используют визуальный уровень через одну из инфраструктур пользовательского интерфейса. Визуальный уровень позволяет также легко напрямую выполнять пользовательскую отрисовку, создавать эффекты и анимации.

![Уровни инфраструктуры пользовательского интерфейса: уровень платформы (Windows.UI.XAML) основан на визуальном уровне (Windows.UI.Composition), который, в свою очередь, построен на графическом уровне (DirectX)](images/layers-win-ui-composition.png)

## <a name="whats-in-the-visual-layer"></a>Что такое визуальный уровень?

Основные функции визуального уровня:

1. **Содержимое**: Упрощенный композиции из пользовательского рисуемого содержимого
1. **Эффекты**: Системы, эффекты можно анимировать, по цепочке и настроен эффектов пользовательского интерфейса в режиме реального времени
1. **Анимации**: Выразительный, зависящего от платформы выполнялись независимо от потока пользовательского интерфейса анимации

### <a name="content"></a>Content

Размещение содержимого, его преобразование и доступ к нему обеспечивает система анимации и эффектов с использованием визуальных элементов. В основе иерархии классов находится класс [**Visual**](https://docs.microsoft.com/uwp/api/Windows.UI.Composition.Visual) — упрощенный прокси-сервер с гибким потоком в процессе приложения для визуального состояния в компоновщике. Вложенные классы визуального элемента включают  [**ContainerVisual** ](https://docs.microsoft.com/uwp/api/Windows.UI.Composition.ContainerVisual) для дочерних элементов создавать деревья визуальных элементов и [ **SpriteVisual** ](https://docs.microsoft.com/uwp/api/Windows.UI.Composition.SpriteVisual) , содержит содержимое и может быть окрашен либо сплошным цветом, пользовательских эффектов рисуемого содержимого или визуального элемента. Вместе эти типы Visual составляют визуальную древовидную структуру для двумерного пользовательского интерфейса и позволяют создавать наиболее видимые элементы FrameworkElements XAML.

Дополнительные сведения см. в обзоре [визуальных объектов композиции](composition-visual-tree.md).

### <a name="effects"></a>Эффекты

Система эффектов в визуальном уровне позволяет применить цепочку эффектов фильтра и прозрачности к визуальному элементу или дереву таких элементов. Это система эффектов пользовательского интерфейса, которые не следует путать с эффектами изображений и мультимедиа. Эффекты работают совместно с системой анимации, позволяя пользователям создавать плавную и динамичную анимацию свойств эффектов, которая отрисовывается независимо от потока пользовательского интерфейса. Эффекты в визуальном уровне представляют собой креативные структурные элементы, которые можно комбинировать и анимировать для создания специальных интерактивных возможностей.

Помимо цепочек анимируемых эффектов, визуальный уровень также поддерживает модель освещения. Она позволяет визуальным элементам имитировать свойства материалов, реагируя на анимируемые источники освещения. Визуальные элементы также могут отбрасывать тени. Для создания реалистичного ощущения глубины можно сочетать освещение и тени.

Дополнительные сведения см. в обзоре [эффектов композиции](composition-effects.md).

### <a name="animations"></a>Анимации

Система анимации в визуальном уровне позволяет перемещать визуальные элементы, анимировать эффекты и создавать преобразования, клипы и другие свойства.  Эта система не привязана к платформе и разработана для повышения производительности.  Она не зависит от потока пользовательского интерфейса, благодаря чему обеспечивается плавность и масштабируемость.  Она позволяет использовать как знакомые методы создания анимации по ключевым кадрам с изменением свойств с течением времени, так и настраивать математические отношения между различными свойствами, включая пользовательский ввод, чтобы напрямую создавать безупречные скоординированные эффекты.

Дополнительную информацию см. в обзорном материале [Анимации композиции](composition-animation.md).

### <a name="working-with-your-xaml-uwp-app"></a>Работа с приложением UWP XAML.

Получить доступ к визуальному элементу, созданному платформой XAML, и к поддержке видимого элемента FrameworkElement можно с помощью класса [**ElementCompositionPreview**](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Hosting.ElementCompositionPreview) в [**Windows.UI.Xaml.Hosting**](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Hosting). Обратите внимание, что визуальные элементы, созданные для вас платформой, имеют определенные ограничения, касающиеся настройки. Это связано с тем, что платформа управляет смещением, преобразованием и временем жизни. Однако можно создавать собственные визуальные элементы и вкладывать их в существующий элемент XAML через ElementCompositionPreview или путем добавления в существующий ContainerVisual в визуальной древовидной структуре.

Дополнительные сведения см. в обзоре [использования визуального уровня с помощью XAML](using-the-visual-layer-with-xaml.md).

### <a name="working-with-your-desktop-app"></a>Работа с Классические приложения

Чтобы улучшить представление и функциональные возможности в WPF, Windows Forms, можно использовать визуальном уровне и C++ классических приложений Win32. Вы можете перенести Острова содержимого для использования на визуальном уровне и остальная часть пользовательского интерфейса в его существующую платформу. Это означает, что можно внести существенные обновления и улучшения пользовательского интерфейса приложения без необходимости вносить значительные изменения в существующий код базового.

Дополнительные сведения см. в статье [Using the Visual layer in desktop apps](/windows/apps/desktop/modernize/visual-layer-in-desktop-apps) (Использование визуального уровня в классических приложениях).

## <a name="additional-resources"></a>Дополнительные ресурсы

* [**Полную справочную документацию по API**](https://docs.microsoft.com/uwp/api/Windows.UI.Composition)
* Расширенные примеры пользовательского интерфейса и композиции в [WindowsUIDevLabs GitHub](https://github.com/microsoft/WindowsCompositionSamples)
* [Коллекция примеров Windows.UI.Composition](https://aka.ms/winuiapp)
* [@windowsui Веб-канал Twitter ](https://twitter.com/windowsui)
* Прочитайте статью MSDN Кенни Керр этот API-интерфейс: [Графика и анимация — переход композиции к версии Windows 10](https://msdn.microsoft.com/magazine/mt590968)
