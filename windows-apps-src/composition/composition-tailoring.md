---
author: daneuber
title: Скорректировать композиции
description: Используйте API композиции адаптировать ваш пользовательский Интерфейс, оптимизации производительности и параметры пользователя и характеристик устройства.
ms.author: jimwalk
ms.date: 07/16/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 66384c4df3195ae0fff35ae5dd7e1b1983204068
ms.sourcegitcommit: 1e5590dd10d606a910da6deb67b6a98f33235959
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/31/2018
ms.locfileid: "3227822"
---
# <a name="tailoring-effects--experiences-using-windows-ui"></a>Настройка эффектов и взаимодействия с помощью пользовательского интерфейса Windows

Пользовательский Интерфейс Windows предоставляет множество красивых эффектов, анимации и означает, что для выделить среди других. Тем не менее, отвечающих ожиданиям пользователей для повышения производительности и подлежит по-прежнему является необходимой частью создания успешно приложений. Универсальная платформа Windows поддерживает семейство больших, различных устройств, которые имеют различные функции и возможности. Чтобы обеспечить включительно взаимодействие для всех пользователей, необходимо обеспечить масштабирования вашего приложения на различных устройствах и заданных настроек пользователя. Настройка пользовательского интерфейса можно предоставить эффективно использовать возможности устройства и убедитесь, что взаимодействие с пользователем для человеческого глаза и включительно.

Настройка пользовательского интерфейса — это широкие категории, включающая работы для эффективного превосходного пользовательского интерфейса относительно по следующим аспектам:

- Следуя и адаптации к параметрам пользователя для эффектов
- Поддерживайте параметры пользователя для анимации
- Оптимизация пользовательского интерфейса для данного аппаратных возможностей

Здесь мы рассмотрим, как адаптировать эффекты и анимации с использованием визуального уровня в областях выше, но существует множество других средств для адаптации приложения, чтобы обеспечить отличный конечного пользователя. Руководство по документы доступны о том, как [адаптировать ваш пользовательский Интерфейс](/design/layout/screen-sizes-and-breakpoints-for-responsive-design.md) для различных устройств и [Создать скорости отклика интерфейса пользователя](/design/layout/responsive-design.md).

## <a name="user-effects-settings"></a>Параметры пользователя эффектов

Пользователи могут настраивать свое взаимодействие с Windows по ряду причин, которые приложений следует учитывать и приспособиться к тому. Единственная область, конечные пользователи могут управлять меняется типы эффектов, которые они будут видеть используется во всей системе.

### <a name="transparency-effects-settings"></a>Параметры эффектов прозрачности.

Один параметр такого эффекта, пользователи могут настраивать является включение эффектов прозрачности или отключить. Это можно найти в приложение "Параметры" в разделе Персонализация > цвета, либо с помощью приложения "Параметры" > Специальные возможности > отображения.

![Параметр прозрачности в параметрах](images/tailoring-transparency-setting.png)

При включении никакого эффекта, который использует прозрачность будут отображаться должным образом. Это относится к Акрил, HostBackdropBrush или любой пользовательский эффект графа, не полностью непрозрачный.

При выключении акриловый материал будет автоматически возвращаться к сплошным цветом, так как акриловая кисть XAML ожидать передачи данных для этого события по умолчанию. Здесь мы см. приложение "Калькулятор", соответствующим образом всплывающему до сплошного цвета при эффектов прозрачности не включены.

![Калькулятор с помощью Акрила](images/tailoring-acrylic.png)
![калькулятором с Акрил реакция на параметры прозрачности](images/tailoring-acrylic-fallback.png)

Тем не менее для всех пользовательских эффектов приложение должно реагировать на [UISettings.AdvancedEffectsEnabled](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.uisettings.advancedeffectsenabledchanged) свойство или событие [AdvancedEffectsEnabledChanged](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.uisettings.advancedeffectsenabledchanged) и отключения диаграммы эффекта/эффекта использовать эффект, который имеет не имеет прозрачности. В качестве примера используется следующим образом:

```cs
public MainPage()
{
   var uisettings = new UISettings();
   bool advancedEffects = uisettings.AdvancedEffectsEnabled;
   uisettings.AdvancedEffectsEnabledChanged += Uisettings_AdvancedEffectsEnabledChanged;
}

private void Uisettings_AdvancedEffectsEnabledChanged(UISettings sender, object args)
{
    // TODO respond to sender.AdvancedEffectsEnabled
}
```

## <a name="animations-settings"></a>Параметры анимации

Аналогичным образом, следует ожидать и реагировать на свойство [UISettings.AnimationsEnabled](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.uisettings.animationsenabled) , чтобы обеспечить анимации включен или отключать на основе параметров пользователя в параметрах приложения > Специальные возможности > дисплея.

![Параметр анимации в параметрах](images/tailoring-animations-setting.png)

```cs
public MainPage()
{
   var uisettings = new UISettings();
   bool animationsEnabled = uisettings.AnimationsEnabled;
   // TODO respond to animations settings
}

```

## <a name="leveraging-the-capabilities-api"></a>Используя возможности API

За счет использования [compositioncapabilities;](/uwp/api/windows.ui.composition.compositioncapabilities) API-интерфейсы, можно определить, какие композиции функций доступны и производительной на определенных оборудования и адаптировать макет, чтобы убедиться, что конечным пользователям получить эффективный и красивых взаимодействия на любом устройстве. API-интерфейсы предоставляют средства для проверки возможности системы оборудования для реализации плавный эффект масштабирования для различных форм-факторов. Это упрощает соответствующим образом адаптировать приложение для создания красивых и удобством завершения работы.

Этот API предоставляет методы и прослушивателя событий, который может быть использовано для эффекта, масштабирование решения для пользовательского интерфейса приложения. Функция определяет, насколько хорошо система может обработать сложные композиции и отрисовки операции и затем возвращает сведения в модели легко использовать разработчики могут использовать.

### <a name="using-composition-capabilities"></a>Используя возможности композиции

Функциональные возможности compositioncapabilities; уже выполняется устройствами функций, таких как Акриловый материал, где материал возвращается к эффекта более эффективный в зависимости от сценария и оборудования.

API-Интерфейс можно добавить в существующий код в несколько этапов.

1. Получить объект возможностей в конструкторе приложения.

    ```cs
    _capabilities = CompositionCapabilities.GetForCurrentView();
    ```

1. Зарегистрируйте прослушиватель событий измененных возможности для вашего приложения.

    ```cs
    _capabilities.Changed += HandleCapabilitiesChanged;
    ```

1. Добавление содержимого в метод обратного вызова событий для обработки различных уровней возможностей. Это может оказаться или аналогичные к следующему шагу.
1. При использовании эффектов, сначала проверьте объект возможностей. Рассмотрите возможность использования условные проверки или переключение операторов управления, в зависимости от того, как вы хотите адаптировать эффекты.

    ```cs
    if (_capabilities.AreEffectsSupported())
    {
        // Add incremental effects updates here

        if (_capabilities.AreEffectsFast())
        {
            // Add more advanced effects here where applicable
        }
    }
    ```

Полный пример кода можно найти в [репозитории Github пользовательского интерфейса Windows](https://github.com/Microsoft/WindowsUIDevLabs/tree/master/SampleGallery/Samples/SDK%2015063/CompCapabilities).

## <a name="fast-vs-slow-effects"></a>Быстрого или медленного эффектов

На основе отзывов от предоставленного [AreEffectsSupported](/uwp/api/windows.ui.composition.compositioncapabilities.areeffectssupported) и [AreEffectsFast](/uwp/api/windows.ui.composition.compositioncapabilities.areeffectsfast) методов в CompositionCapabilties API, приложение можно решить менять дорого или неподдерживаемого эффекты для других эффектов по своему выбору, оптимизированных для этого устройства. Некоторые эффекты заведомо не более интенсивно чем другие постоянно и следует использовать с осторожностью, и другие эффекты можно использовать более свободно. Для всех эффектов тем не менее, следует соблюдать осторожность при цепочки и анимации как некоторые сценарии или сочетания могут быть изменены характеристики производительности диаграммы эффекта. Ниже приведены некоторые характеристики производительности правило для отдельных эффектов:

- Эффекты, которые заведомо влияние высокую производительность предъявляются — гауссова размытия, тени маски, BackDropBrush, HostBackDropBrush и визуального уровня. Они не рекомендуются для устаревших устройств [(уровень компонентов 9.1 9.3)](https://msdn.microsoft.com/library/windows/desktop/ff476876(v=vs.85).aspx)и следует применять с осторожностью высокопроизводительных устройств.
- Эффекты влияние на производительность средний: матрицы цветов, определенных BlendModes эффект наложения (яркость, цвет, насыщенности и тон), вспышки, SceneLightingEffect и (в зависимости от сценария) BorderEffect. Эти эффекты могут работать с некоторых сценариях на устаревших устройствах, но следует соблюдать осторожность при цепочки и анимации. Рекомендуем ограничения использования двух или менее и анимация только переходы.
- Все эффекты влияние на низкой производительности и работает во всех случаях рациональные при анимации и цепочки.

## <a name="related-articles"></a>Еще по теме

- [Методы создания отзывчивого дизайна UWP](https://docs.microsoft.com/windows/uwp/design/layout/responsive-design)
- [Настройка устройства UWP](https://docs.microsoft.com/windows/uwp/design/layout/screen-sizes-and-breakpoints-for-responsive-design)
