---
title: Настройка композиции
description: Используйте API композиции для настройки пользовательского интерфейса, оптимизировать производительность и обеспечивать пользовательские настройки и характеристики устройства.
ms.date: 07/16/2018
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: bcc9a6d89a143d8fd03d73dbd83b832ed9513ee2
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57644419"
---
# <a name="tailoring-effects--experiences-using-windows-ui"></a>Настройка эффекты & сред с помощью пользовательского интерфейса Windows

Пользовательский Интерфейс Windows предоставляет множество визуально привлекательные эффекты анимации и означает, что для дифференциации. Тем не менее отвечающие ожиданиям пользователей для повышения производительности и подлежит остается неотъемлемой частью создания успешные приложения. Универсальная платформа Windows поддерживает семейство больших и разнообразных устройств, которые имеют различные функции и возможности. Чтобы обеспечить включительно возможности для всех пользователей, необходимо для обеспечения масштабирования приложений на устройствах и использовать пользовательские параметры. Настройка пользовательского интерфейса можно позволяют эффективно использовать возможности устройства и обеспечить взаимодействие с пользователями приятной и включительно.

Настройка пользовательского интерфейса является широкие категории, которая объединяет в себе действий по обеспечению высокой производительностью, визуально привлекательные пользовательского интерфейса, с учетом следующих областях:

- Уважайте и адаптации к параметры пользователя для эффектов
- Согласование параметров пользователей для анимации
- Оптимизация для заданного аппаратные возможности пользовательского интерфейса

Здесь мы расскажем, как настроить эффекты и анимации с помощью на визуальном уровне в областях выше, но существует множество других средств, чтобы адаптировать приложение, чтобы обеспечить удобный пользовательский. Руководство можно найти по [адаптировать пользовательский Интерфейс](/windows/uwp/design/layout/screen-sizes-and-breakpoints-for-responsive-design) для различных устройств и [создания быстро реагирующего пользовательского интерфейса](/windows/uwp/design/layout/responsive-design).

## <a name="user-effects-settings"></a>Параметры пользователя эффектов

Пользователи могут настроить свои Windows по ряду причин, которые приложения должны поддерживать и адаптироваться к. Одну область, которую конечные пользователи могут управлять меняется эффектов, которые они видят используется во всей системе.

### <a name="transparency-effects-settings"></a>Параметры эффектов прозрачности

Один такой эффект параметр, который пользователи могут настраивать преобразовала эффектов прозрачности, включить или выключить. Его можно найти в настройках приложения в разделе персонализации > цвета, либо через приложение "Параметры" > специальных возможностей > отображения.

![Параметр прозрачности в параметрах](images/tailoring-transparency-setting.png)

При включении любого эффект, который использует прозрачность будут отображаться должным образом. Это относится к Acrylic, HostBackdropBrush или любая диаграмма настраиваемого эффекта, который не является полностью непрозрачным.

При выключенном акриловая материал автоматически вернется к сплошной цвет потому, что в XAML акриловая кисть учла это событие по умолчанию. Здесь мы видим приложение калькулятора, соответствующим образом откат к сплошным цветом при эффектов прозрачности не включены:

![Калькулятор с Acrylic](images/tailoring-acrylic.png)
![калькулятором с Acrylic, реагирование на параметры прозрачности](images/tailoring-acrylic-fallback.png)

Тем не менее, для приложения влияет на любые пользовательские должен отвечать на [UISettings.AdvancedEffectsEnabled](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.uisettings.advancedeffectsenabledchanged) свойство или [AdvancedEffectsEnabledChanged](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.uisettings.advancedeffectsenabledchanged) событий и switch out эффект/эффект граф, чтобы использовать эффект, имеет прозрачность отсутствует. Пример этого приведен ниже:

```cs
public MainPage()
{
   var uisettings = new UISettings();
   bool advancedEffects = uisettings.AdvancedEffectsEnabled;
   uisettings.AdvancedEffectsEnabledChanged += Uisettings_AdvancedEffectsEnabledChanged;
}

private void Uisettings_AdvancedEffectsEnabledChanged(UISettings sender, object args)
{
    // TODO respond to sender.AdvancedEffectsEnabled
}
```

## <a name="animations-settings"></a>Параметры анимации

Аналогичным образом, приложения должны ожидать передачи данных и реагировать на них [UISettings.AnimationsEnabled](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.uisettings.animationsenabled) свойство, чтобы обеспечить анимации включить или отключить на основе настроек пользователя в параметрах > специальных возможностей > отображения.

![Параметр анимации в параметрах](images/tailoring-animations-setting.png)

```cs
public MainPage()
{
   var uisettings = new UISettings();
   bool animationsEnabled = uisettings.AnimationsEnabled;
   // TODO respond to animations settings
}

```

## <a name="leveraging-the-capabilities-api"></a>Используя возможности API

За счет использования [CompositionCapabilities](/uwp/api/windows.ui.composition.compositioncapabilities) API, можно обнаружить, какие композиции функциями доступны и эффективным на данный оборудования и настраивать конструктора для обеспечения пользователи могут получать высокопроизводительные и визуально привлекательные возможности для какого-либо устройство. API-интерфейсы предоставляют средства для проверки возможностей оборудования системы для реализации нормальные эффект масштабирования для разнообразных форм-факторов. Это облегчает соответствующим образом адаптировать приложения для создания привлекательных и простой конечным пользователем.

Этот API предоставляет методы и прослушивателя событий, который может использоваться, чтобы сделать эффект, масштабирование решения для пользовательского интерфейса приложения. Эта функция определяет, насколько хорошо система может обрабатывать сложные композиции и операциях отрисовки и возвращает данные в модель простой в использовании для разработчиков для использования.

### <a name="using-composition-capabilities"></a>С помощью возможностей компоновки

Функциональные возможности CompositionCapabilities уже используются для функции, такие как Акриловая материал, где материал возвращается к больший эффект производительность в зависимости от сценария и оборудования.

API можно добавить в существующий код в несколько простых шагов.

1. Получить объект возможности в конструкторе вашего приложения.

    ```cs
    _capabilities = CompositionCapabilities.GetForCurrentView();
    ```

1. Регистрация прослушивателя измененное событие возможности для вашего приложения.

    ```cs
    _capabilities.Changed += HandleCapabilitiesChanged;
    ```

1. Добавьте в метод обратного вызова событий для обработки различных уровней возможностей содержимое. Это может оказаться или аналогичные к следующему шагу.
1. Если вы используете эффекты, сначала проверьте объект возможностей. Рассмотрите возможность использования проверки условия или переключитесь операторы управления, в зависимости от того, как вы хотите адаптировать эффекты.

    ```cs
    if (_capabilities.AreEffectsSupported())
    {
        // Add incremental effects updates here

        if (_capabilities.AreEffectsFast())
        {
            // Add more advanced effects here where applicable
        }
    }
    ```

Полный пример кода можно найти на [репозиторий Github пользовательского интерфейса Windows](https://github.com/Microsoft/WindowsUIDevLabs/tree/master/SampleGallery/Samples/SDK%2015063/CompCapabilities).

## <a name="fast-vs-slow-effects"></a>Быстрое сравнение медленно эффекты

На основе отзывов из предоставленного [AreEffectsSupported](/uwp/api/windows.ui.composition.compositioncapabilities.areeffectssupported) и [AreEffectsFast](/uwp/api/windows.ui.composition.compositioncapabilities.areeffectsfast) методы в интерфейсе API CompositionCapabilities, приложение может попытаться эффекты дорогих или не поддерживается для замены другие эффекты по своему выбору, оптимизированные для устройства. Некоторые эффекты, гарантированно поддерживают постоянно быть более ресурсоемким чем другие и следует использовать с осторожностью и другие эффекты можно использовать более свободно. Для всех эффектов тем не менее, следует соблюдать осторожность при цепочки и анимации в некоторых сценариях или сочетания может изменить характеристики производительности эффект графа. Ниже приведены некоторые характеристики производительности правило для отдельных эффектов.

- Эффекты, которые заведомо негативно сказаться на высокой производительности приведены — гауссова Размытие, маска тени, BackDropBrush, HostBackDropBrush и слой Visual. Их не рекомендуется использовать для устройств нижний предел [(функция уровень 9.1-9.3)](https://msdn.microsoft.com/library/windows/desktop/ff476876(v=vs.85).aspx)и следует применять с осторожностью на устройствах верхний предел.
- Матрицы цветов, определенных BlendModes эффект Blend (яркость, цвет, насыщенность и Hue), включают эффекты влияние на производительность средних SpotLight SceneLightingEffect и (в зависимости от сценария) BorderEffect. Эти эффекты могут работать с определенных сценариях на устройствах нижний предел, но следует соблюдать осторожность при цепочки и анимации. Рекомендуем ограничения использования, до двух или меньше и анимации на основе только переходов.
- Все другие эффекты влияют на низкую производительность и работает во всех случаях разумным при анимации и создание цепочки.

## <a name="related-articles"></a>Связанные статьи

- [Методы гибкий Дизайн для универсальной платформы Windows](https://docs.microsoft.com/windows/uwp/design/layout/responsive-design)
- [Настройка устройства универсальной платформы Windows](https://docs.microsoft.com/windows/uwp/design/layout/screen-sizes-and-breakpoints-for-responsive-design)
