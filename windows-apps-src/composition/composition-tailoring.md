---
author: daneuber
title: Особого композиции
description: Используйте API композиции адаптировать ваш пользовательский Интерфейс, оптимизировать производительность и параметры пользователя и характеристик устройства.
ms.author: jimwalk
ms.date: 07/16/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 66384c4df3195ae0fff35ae5dd7e1b1983204068
ms.sourcegitcommit: 4f6dc806229a8226894c55ceb6d6eab391ec8ab6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/20/2018
ms.locfileid: "4086003"
---
# <a name="tailoring-effects--experiences-using-windows-ui"></a>Особого эффектов и взаимодействия с помощью пользовательского интерфейса Windows

Пользовательский Интерфейс Windows предоставляет множество красивых эффектов анимации и означает, что для выделить среди других. Тем не менее, отвечающих ожиданиям пользователей для повышения производительности и подлежит по-прежнему является необходимой частью создания успешно приложений. Универсальная платформа Windows поддерживает широкой и разнообразной Семейство устройств, которые имеют различные функции и возможности. Чтобы обеспечить включительно взаимодействие для всех пользователей, необходимо обеспечить масштабирования вашего приложения на различных устройствах и заданных настроек пользователя. Адаптации пользовательского интерфейса можно предоставить эффективно использовать возможности устройства и убедитесь, что взаимодействие с пользователем для человеческого глаза и включительно.

Адаптации пользовательского интерфейса — это широкие категории, включающая работы для эффективного, превосходного пользовательского интерфейса относительно по следующим аспектам:

- Следуя и адаптации к параметрами пользователя для эффектов
- Поддерживайте параметры пользователя для анимации
- Оптимизация пользовательского интерфейса для данного аппаратные возможности

Здесь мы рассмотрим, как адаптировать эффекты и анимации в визуальном уровне в областях выше, но существует множество других средств для адаптации приложения, чтобы обеспечить отличный конечного пользователя. Руководство по документы доступны о том, как [адаптировать ваш пользовательский Интерфейс](/design/layout/screen-sizes-and-breakpoints-for-responsive-design.md) для различных устройств и [создания интерфейса с быстрым откликом](/design/layout/responsive-design.md).

## <a name="user-effects-settings"></a>Параметры пользователя эффектов

Пользователи могут настраивать свое взаимодействие с Windows, по ряду причин, которых приложения должны заданных и приспособиться к тому. Единственная область, конечные пользователи могут управлять меняется типы эффектов, которые они будут видеть используется во всей системе.

### <a name="transparency-effects-settings"></a>Параметры эффектов прозрачности.

Один такого эффекта параметра, которые пользователи могут настраивать при включении эффектов прозрачности или отключить. Это можно найти в приложении "Параметры" в разделе Персонализация > цвета, либо с помощью приложения "Параметры" > Специальные возможности > дисплея.

![Параметр прозрачности в параметрах](images/tailoring-transparency-setting.png)

При включении никакого эффекта, который использует прозрачность будут отображаться должным образом. Это относится к Акрил, HostBackdropBrush или любой пользовательский эффект графа, не полностью непрозрачный.

При выключении, акриловый материал будет автоматически возвращаться к сплошным цветом, так как акриловая кисть XAML ожидать передачи данных для этого события по умолчанию. Здесь мы см. приложение "Калькулятор", соответствующим образом возврат к всплывающему сплошным цветом при эффектов прозрачности не включены.

![Калькулятор с помощью Акрила](images/tailoring-acrylic.png)
![калькулятором с Акрил реакция на параметры прозрачности](images/tailoring-acrylic-fallback.png)

Тем не менее для всех пользовательских эффектов приложению отвечать на [UISettings.AdvancedEffectsEnabled](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.uisettings.advancedeffectsenabledchanged) свойство или событие [AdvancedEffectsEnabledChanged](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.uisettings.advancedeffectsenabledchanged) и переход из диаграммы эффекта/эффекта, чтобы использовать эффект, который имеет не имеет прозрачности. В качестве примера используется следующим образом:

```cs
public MainPage()
{
   var uisettings = new UISettings();
   bool advancedEffects = uisettings.AdvancedEffectsEnabled;
   uisettings.AdvancedEffectsEnabledChanged += Uisettings_AdvancedEffectsEnabledChanged;
}

private void Uisettings_AdvancedEffectsEnabledChanged(UISettings sender, object args)
{
    // TODO respond to sender.AdvancedEffectsEnabled
}
```

## <a name="animations-settings"></a>Параметры анимации

Аналогичным образом приложения следует ожидать и реагировать на свойство [UISettings.AnimationsEnabled](https://docs.microsoft.com/uwp/api/windows.ui.viewmanagement.uisettings.animationsenabled) , чтобы обеспечить анимации включен или отключать на основе параметров пользователя в параметрах > Специальные возможности > дисплея.

![Параметр анимации в параметрах](images/tailoring-animations-setting.png)

```cs
public MainPage()
{
   var uisettings = new UISettings();
   bool animationsEnabled = uisettings.AnimationsEnabled;
   // TODO respond to animations settings
}

```

## <a name="leveraging-the-capabilities-api"></a>За счет использования возможностей API

С помощью [compositioncapabilities;](/uwp/api/windows.ui.composition.compositioncapabilities) API-интерфейсы, можно определить, какие композиции функций доступны и производительной на определенных оборудования и адаптировать макет, чтобы убедиться, что конечным пользователям получить эффективный и красивых взаимодействия на любом устройстве. API-интерфейсы предоставляют средства для проверки возможности системы оборудования для реализации плавный эффекта, масштабирование для различных форм-факторов. Это упрощает соответствующим образом адаптировать приложение для создания красивых и оптимальную улучшат впечатление пользователей.

Этот API предоставляет методы и прослушивателя событий, который может использоваться для сделать эффект масштабирования решения для пользовательского интерфейса приложения. Функции определяет, насколько хорошо система может обработать сложные композиции и операциях отрисовки и затем возвращает данные в модели легко использовать разработчики могут использовать.

### <a name="using-composition-capabilities"></a>Используя возможности композиции

Функциональные возможности compositioncapabilities; используется уже функций, таких как Акриловый материал, где материал возвращается к больший эффект высокопроизводительных в зависимости от сценария и оборудования.

API-Интерфейс можно добавить в существующий код в несколько этапов.

1. Получить объект возможности в конструкторе приложения.

    ```cs
    _capabilities = CompositionCapabilities.GetForCurrentView();
    ```

1. Зарегистрируйте прослушиватель измененные события возможности для вашего приложения.

    ```cs
    _capabilities.Changed += HandleCapabilitiesChanged;
    ```

1. Добавление содержимого в метод обратного вызова событий для обработки различных уровней возможностей. Это может оказаться или аналогичные к следующему шагу.
1. При использовании эффектов, сначала проверьте объект возможностей. Рассмотрите возможность использования условные проверки или переключение операторов управления, в зависимости от того, как вы хотите адаптировать эффектов.

    ```cs
    if (_capabilities.AreEffectsSupported())
    {
        // Add incremental effects updates here

        if (_capabilities.AreEffectsFast())
        {
            // Add more advanced effects here where applicable
        }
    }
    ```

Полный пример кода можно найти в [репозитории Github пользовательского интерфейса Windows](https://github.com/Microsoft/WindowsUIDevLabs/tree/master/SampleGallery/Samples/SDK%2015063/CompCapabilities).

## <a name="fast-vs-slow-effects"></a>Быстрого или медленного эффектов

На основе отзывов от предоставленного [AreEffectsSupported](/uwp/api/windows.ui.composition.compositioncapabilities.areeffectssupported) и [AreEffectsFast](/uwp/api/windows.ui.composition.compositioncapabilities.areeffectsfast) методов в CompositionCapabilties API, приложение может решить, менять дорого или неподдерживаемого эффекты для других эффектов выбирать, которые оптимизированы для этого устройства. Некоторые эффекты были определены как согласованно более интенсивно чем другие и следует использовать с осторожностью, и другие эффекты можно использовать более свободно. Для всех эффектов Однако следует соблюдать осторожность при цепочки и анимация как некоторых сценариев или сочетания могут быть изменены характеристики производительности диаграммы эффекта. Ниже приведены некоторые характеристики производительности правилом для отдельных эффектов:

- Эффекты, которые заведомо влияние высокой производительности, следующим образом: гауссова размытия, маска теней, BackDropBrush, HostBackDropBrush и визуального уровня. Они не рекомендуются для устаревших устройств [(уровень компонентов 9.1 9.3)](https://msdn.microsoft.com/library/windows/desktop/ff476876(v=vs.85).aspx)и следует применять с осторожностью на устройствах с высокой окончания.
- Эффекты влияние на производительность средних: матрицы цветов, определенных BlendModes эффект Blend (яркости цвета, насыщенности и Hue), вспышки, SceneLightingEffect, а также (в зависимости от сценария) BorderEffect. Эти эффекты могут работать с некоторых сценариях на устаревших устройствах, но следует соблюдать осторожность при цепочки и анимации. Рекомендуем ограничения использования два или менее и переходы только в котором выполняется анимация.
- Все другие эффекты влияние на низкой производительности и работает во всех случаях рациональные, когда анимация и цепочки.

## <a name="related-articles"></a>Еще по теме

- [Методы создания отзывчивого дизайна UWP](https://docs.microsoft.com/windows/uwp/design/layout/responsive-design)
- [Особого устройств UWP](https://docs.microsoft.com/windows/uwp/design/layout/screen-sizes-and-breakpoints-for-responsive-design)
