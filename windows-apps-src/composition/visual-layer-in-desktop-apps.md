---
title: Модернизируйте классического приложения с на визуальном уровне
description: Использование слоя визуализации для улучшения пользовательского интерфейса Классические приложения .NET или Win32.
ms.date: 03/18/2019
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 05793c023fa0a0b08d4487e859f31442c7c1d53a
ms.sourcegitcommit: e63fbd7a63a7e8c03c52f4219f34513f4b2bb411
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2019
ms.locfileid: "58174173"
---
# <a name="modernize-your-desktop-app-using-the-visual-layer"></a>Модернизируйте классического приложения с на визуальном уровне

Теперь можно использовать интерфейсы API универсальной платформы Windows в настольных приложениях не универсальной платформы Windows для улучшения представление и функциональные возможности в WPF, Windows Forms, и C++ приложений Win32 и воспользоваться преимуществами последних функций пользовательского интерфейса Windows 10, которые доступны только с помощью универсальной платформы Windows.

Во многих случаях можно использовать [XAML о-ва](../xaml-platform/xaml-host-controls.md) добавить современные элементы управления XAML в приложение. Тем не менее если вам нужно создать пользовательские интерфейсы, которые выходят за рамки встроенных элементов управления, можно открыть визуальном уровне API-интерфейсы.

Визуальном уровне обеспечивает высокий уровень производительности, API абстрактного режима для графики, эффекты и анимация. Она является основой для пользовательского интерфейса на устройствах Windows 10. Элементы управления XAML UWP построены на визуальном уровне, и позволяет многие аспекты [Fluent Design System](../design/fluent-design-system/index.md), например Light, глубина, движения, материалы и масштабирования.

![Пользовательский интерфейс, созданными на визуальном уровне](images/interop/pull-to-animate.gif)

> _Пользовательский интерфейс, созданными на визуальном уровне_

## <a name="create-a-visually-engaging-user-interface-in-any-windows-app"></a>Создание визуально привлекательных пользовательского интерфейса во всех приложениях Windows

Визуальном уровне позволяет создавать привлекательные интерфейсы, с помощью упрощенного композиции из пользовательского рисуемого содержимого (визуальных элементах) и применяя мощные анимацию, эффекты и манипуляции для этих объектов в приложении. Визуальном уровне не заменяет все существующие платформы пользовательского интерфейса; Вместо этого он является ценным дополнением к эти платформы.

Можно использовать визуальном уровне, чтобы предоставить приложению уникальный внешний вид и получить удостоверение, что отличает его от других приложений. Он также позволяет принципами проектирования Fluent, которые позволяют приложений проще в использовании, рисование дополнительные взаимодействия пользователей. Например его можно использовать для создания визуальных подсказок и экрана анимированные переходы, которые показывают отношения между элементами на экране.

## <a name="visual-layer-features"></a>Функции на визуальном уровне

### <a name="brushes"></a>Кисти

[Кисти композиции](composition-brushes.md) позволяют рисовать объекты пользовательского интерфейса сплошным цветом, градиенты, изображения, видео, сложные последствия и многое другое.

![Которого создана с автором материал](images/interop/egg.gif)

> _Созданные с помощью которого [материал создатель демонстрационное приложение](https://github.com/Microsoft/WindowsCompositionSamples/tree/master/Demos/MaterialCreator)._

### <a name="effects"></a>Эффекты

[Эффекты композиции](composition-effects.md) свет, тени и список эффекты фильтров. Они могут быть анимированы, настройки и по цепочке, а затем применяются напрямую к визуальных элементов. SceneLightingEffect могут сочетаться с освещением композиции для создания атмосферы, глубины и материалов.

![Источники света и материалы](images/interop/light-interop.gif)

> _Источники света и материал демонстрируются в [коллекции примеров скомпоновать пользовательский Интерфейс Windows](https://github.com/Microsoft/WindowsCompositionSamples/tree/master/SampleGallery)._

### <a name="animations"></a>Анимации

[Композиции анимаций](composition-animation.md) выполняются непосредственно в процессе компоновщиком, независимо от потока пользовательского интерфейса. Это гарантирует плавный переход и масштаб, таким образом, можно выполнять большое количество одновременных, явные анимации. Помимо знакомы анимации с опорными кадрами для изменения свойств диска со временем можно использовать выражениях математические отношения между разными свойствами, включая пользовательский ввод. Входной анимации на основе позволяют создавать пользовательский Интерфейс, который динамически и гибкого реагирует на ввод пользователя, что может привести к более поздней версии служб взаимодействия пользователя.

![Пользовательский интерфейс, созданными на визуальном уровне](images/interop/swipe-scroller.gif)

> _Демонстрируется движения в [коллекции примеров скомпоновать пользовательский Интерфейс Windows](https://github.com/Microsoft/WindowsCompositionSamples/tree/master/SampleGallery)._

## <a name="keep-your-existing-codebase-and-adopt-incrementally"></a>Сохранить в существующей базе кода и внедрять постепенно

Код в существующие приложения требует значительных вложений, вы не хотите потерять. Вы можете перенести _о-ва_ содержимого для использования на визуальном уровне и остальная часть пользовательского интерфейса в его существующую платформу. Это означает, что можно внести существенные обновления и улучшения пользовательского интерфейса приложения без необходимости вносить значительные изменения в существующий код базового.

## <a name="samples-and-tutorials"></a>Примеры и учебники

Сведения об использовании на визуальном уровне в приложениях, поэкспериментировав с нашими примерами. Эти примеры и учебники помогут вам приступить к использованию на визуальном уровне и как компоненты работают.

### <a name="win32"></a>Win32

- [Использование на визуальном уровне с Win32](using-the-visual-layer-with-win32.md) учебника
  - [Образец Hello композиции](https://github.com/Microsoft/Windows.UI.Composition-Win32-Samples/tree/master/cpp/HelloComposition)
- [Образец Hello векторы](https://github.com/Microsoft/Windows.UI.Composition-Win32-Samples/tree/master/cpp/HelloVectors)
- [Пример виртуальной поверхности](https://github.com/Microsoft/Windows.UI.Composition-Win32-Samples/tree/master/cpp/VirtualSurfaces)
- [Пример записи экрана](https://github.com/Microsoft/Windows.UI.Composition-Win32-Samples/tree/master/cpp/ScreenCaptureforHWND)

### <a name="windows-forms"></a>Windows Forms

- [Использование на визуальном уровне с Windows Forms](using-the-visual-layer-with-windows-forms.md) учебника
  - [Образец Hello композиции](https://github.com/Microsoft/Windows.UI.Composition-Win32-Samples/tree/master/dotnet/WinForms/HelloComposition)
- [Пример Visual уровень интеграции](https://github.com/Microsoft/Windows.UI.Composition-Win32-Samples/tree/master/dotnet/WinForms/VisualLayerIntegration)

### <a name="wpf"></a>WPF

- [С помощью на визуальном уровне с помощью WPF](using-the-visual-layer-with-wpf.md) учебника
  - [Образец Hello композиции](https://github.com/Microsoft/Windows.UI.Composition-Win32-Samples/tree/master/dotnet/WPF/HelloComposition)
- [Пример Visual уровень интеграции](https://github.com/Microsoft/Windows.UI.Composition-Win32-Samples/tree/master/dotnet/WPF/VisualLayerIntegration)
- [Пример записи экрана](https://github.com/Microsoft/Windows.UI.Composition-Win32-Samples/tree/master/dotnet/WPF/ScreenCapture)

## <a name="limitations"></a>Ограничения

Хотя многие возможности визуального слоя работать так же, при размещении в приложении для настольных систем, как в приложении UWP, некоторые функции имеют ограничения. Ниже приведены некоторые ограничения, которые следует учитывать:

- Зависит от цепочки эффект [Win2D](http://microsoft.github.io/Win2D/html/Introduction.htm) описания эффект. [Пакет Win2D NuGet](https://www.nuget.org/packages/Win2D.uwp) не поддерживается в настольных приложениях, поэтому нужно перекомпилировать его из [исходный код](https://github.com/Microsoft/Win2D).
- Проверка попадания, нужно выполнять вычисления границы путем прохода визуального дерева, самостоятельно. Это так же, как на визуальном уровне, в универсальной платформы Windows, за исключением того, в этом случае отсутствует элемент XAML, можно легко привязать к проверке на пересечение.
- На визуальном уровне нет примитив для отрисовки текста.
- При совместном использовании две разные технологии пользовательского интерфейса, такие как WPF и на визуальном уровне, они могут выступать ответственного за отрисовку собственные пикселей на экране, и они не могут совместно использовать пикселей. В результате содержимое визуальный слой всегда отображается поверх другого содержимого пользовательского интерфейса. (Этот процесс называется _airspace_ проблему.) Вам может потребоваться дополнительное программирование и тестирование для обеспечения содержимое на визуальном уровне изменяет размер с помощью пользовательского интерфейса ведущего приложения и не скрывать другое содержимое.
- Содержимое, размещенное в настольном приложении автоматически не изменение размера и масштабирование для точек на ДЮЙМ. Чтобы убедиться, что содержимое обрабатывает изменения DPI может потребоваться дополнительные действия. (См. в разделе учебники по определенной платформы Дополнительные сведения.)

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Визуальный уровень](visual-layer.md)
- [Композиции visual](composition-visual-tree.md)
- [Композиция кисти](composition-brushes.md)
- [Эффекты композиции](composition-effects.md)
- [Композиции анимаций](composition-animation.md)

Справочник по API

- [Windows.UI.Composition](/uwp/api/Windows.UI.Composition)