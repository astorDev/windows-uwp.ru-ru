---
title: Вводные сведения о буферах
description: Буферный ресурс — это коллекция полностью распределенных по типам данных, сгруппированных в элементы.
ms.assetid: 494FDF57-0FBE-434C-B568-06F977B40263
keywords:
- Вводные сведения о буферах
author: michaelfromredmond
ms.author: mithom
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 14e78aec9afa361b2627d62d92f0ee7d7ab0565b
ms.sourcegitcommit: e2fca6c79f31e521ba76f7ecf343cf8f278e6a15
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2018
ms.locfileid: "6968993"
---
# <a name="introduction-to-buffers"></a>Вводные сведения о буферах


Буферный ресурс — это коллекция полностью распределенных по типам данных, сгруппированных в элементы. Буферы хранят данные, например координаты текстур в *буфере вершин*, индексы в *буфере индексов*, данные констант шейдера в *буфере констант*, векторы положений, векторы нормалей и состояния устройства.

Элемента буфера состоит из 1 до 4 компонентов. Элементы буфера могут включать в себя упакованные значения данных (например, значения поверхности R8G8B8A8), единичные 8-разрядные целые числа или четыре 32-разрядных значения с плавающей запятой.

Буфер создается как неструктурированный ресурс. Поскольку он неструктурированный, буфер не может содержать либо уровни MIP, не может получить фильтрацию при чтении и не может быть множественной дискретизацией.

## <a name="span-idbuffertypesspanspan-idbuffertypesspanspan-idbuffertypesspanbuffer-types"></a><span id="Buffer_Types"></span><span id="buffer_types"></span><span id="BUFFER_TYPES"></span>Типы буферов


Ниже перечислены типы ресурсов буфера, поддерживаемые в Direct3D 11.

-   [Буфер вершин](#vertex-buffer)
-   [Буфер индексов](#index-buffer)
-   [Буфер констант](#shader-constant-buffer)

### <a name="span-idvertexbufferspanspan-idvertexbufferspanspan-idvertexbufferspanspan-idvertex-bufferspanvertex-buffer"></a><span id="Vertex_Buffer"></span><span id="vertex_buffer"></span><span id="VERTEX_BUFFER"></span><span id="vertex-buffer"></span>Буфер вершин

Буфер вершин содержит данные вершин, используемые для определения геометрии. К данным вершин относятся координаты положения, данные цвета, данные координат текстуры, данные нормали и т. д.

Простой пример буфера вершин — это один из которых содержит только данные о положении. Его можно изобразить, как на следующем рисунке.

![иллюстрация буфера вершин, который содержит данные положения](images/d3d10-resources-single-element-vb2.png)

Чаще всего буфер вершин содержит все данные, необходимые для полного описания трехмерных вершин. Примером этого может быть буфер вершин, который содержит положение, нормаль и координаты текстуры для каждой вершины. Эти данные обычно упорядочены в виде наборов элементов для каждой вершины, как показано на следующем рисунке.

![иллюстрация буфера вершин, который содержит данные положения, нормали и текстуры](images/d3d10-vertex-buffer-element.png)

Этот буфер вершин содержит данные вершин; Каждая вершина хранит три элемента (положение, нормаль и координаты текстуры). Положение и нормаль обычно задаются с помощью трех 32-разрядных значений с плавающей запятой, а координаты текстуры — с помощью двух 32-разрядных значений с плавающей запятой.

Для доступа к данным из буфера вершин необходимо знать, к какой вершине доступа, а также следующие параметры буфера:

-   Offset — число байтов от начала буфера до данных для первой вершины;
-   BaseVertexLocation — количество байтов от смещения до первой вершины, используемой с помощью соответствующего вызова рисования.

Перед созданием буфера вершин необходимо определить его макет. После создания объекта макета входных данных его привязать на [этап сборщика входных данных (IA)](input-assembler-stage--ia-.md).

### <a name="span-idindexbufferspanspan-idindexbufferspanspan-idindexbufferspanspan-idindex-bufferspanindex-buffer"></a><span id="Index_Buffer"></span><span id="index_buffer"></span><span id="INDEX_BUFFER"></span><span id="index-buffer"></span>Буфер индексов

Буферы индексов содержит целочисленные указатели для буферов вершин и используется для более эффективной отрисовки примитивов. Буфер индексов содержит последовательный набор 16-разрядных или 32-разрядных индексов; каждый индекс используется для идентификации вершины в буфере вершин. Буфер индексов можно изобразить, как на следующем рисунке.

![иллюстрация буфера индексов](images/d3d10-index-buffer.png)

Последовательные индексы, хранящиеся в буфере индексов, обнаруживаются по следующим параметрам:

-   Смещение — количество байтов, полученных от базового адреса буфер индексов.
-   StartIndexLocation - указывает первого элемента буфера индексов базовый адрес и смещение. Местоположение меню "Пуск" представляет первый индекс для отрисовки.
-   IndexCount — число индексов для отрисовки.

Меню "Пуск" буфера индексов = адрес базового буфера индексов + смещение (в байтах) + StartIndexLocation \ * ElementSize (в байтах);

В этом расчет ElementSize — это размер каждого элемента буфера индексов, который имеет два или четыре байта.

### <a name="span-idshaderconstantbufferspanspan-idshaderconstantbufferspanspan-idshaderconstantbufferspanspan-idshader-constant-bufferspanconstant-buffer"></a><span id="Shader_Constant_Buffer"></span><span id="shader_constant_buffer"></span><span id="SHADER_CONSTANT_BUFFER"></span><span id="shader-constant-buffer"></span>Буфер констант

Буфер констант позволяет эффективно поставлять данные констант шейдера в конвейере. Буфер констант можно использовать для хранения результатов этапа вывода потока. Буфер констант выглядит так же, как буфер вершин с одним элементом, как показано на следующем рисунке.

![иллюстрация буфера констант шейдера](images/d3d10-shader-resource-buffer.png)

Каждый элемент хранит определяемую форматом данных константу с числом компонентов от 1 до 4.

Буфер констант можно использовать только флаг одной привязки, который не может быть в сочетании с любой другой флаг привязки.

Для чтения буфера констант шейдера из шейдера, используйте функции загрузки HLSL. На каждом этапе шейдера можно определить до 15 буферов констант шейдера, причем каждый буфер может содержать до 4096 констант.

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Статьи по теме


[Буферы вершин и индексов](vertex-and-index-buffers.md)

 

 




