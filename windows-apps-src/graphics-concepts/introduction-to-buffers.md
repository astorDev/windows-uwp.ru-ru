---
title: "Вводные сведения о буферах"
description: "Буферный ресурс — это коллекция полностью распределенных по типам данных, сгруппированных в элементы."
ms.assetid: 494FDF57-0FBE-434C-B568-06F977B40263
keywords:
- "Вводные сведения о буферах"
author: mtoepke
ms.author: mtoepke
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
translationtype: Human Translation
ms.sourcegitcommit: c6b64cff1bbebc8ba69bc6e03d34b69f85e798fc
ms.openlocfilehash: ec2d181daca8f9ece8e1d364cd58234feb85977a
ms.lasthandoff: 02/07/2017

---

# <a name="introduction-to-buffers"></a>Вводные сведения о буферах


Буферный ресурс — это коллекция полностью распределенных по типам данных, сгруппированных в элементы. Буферы хранят данные, например координаты текстур в *буфере вершин*, индексы в *буфере индексов*, данные констант шейдера в *буфере констант*, векторы положений, векторы нормалей и состояния устройства.

Элемент буфера состоит из компонентов числом от 1 до 4. Элементы буфера могут включать в себя упакованные значения данных (например, значения поверхности R8G8B8A8), единичные 8-разрядные целые числа или четыре 32-разрядных значения с плавающей запятой.

Буфер создается как неструктурированный ресурс. Поскольку он неструктурированный, буфер не может содержать какие-либо уровни MIP, не может использовать фильтрацию при чтении и не может подвергаться множественной дискретизации.

## <a name="span-idbuffertypesspanspan-idbuffertypesspanspan-idbuffertypesspanbuffer-types"></a><span id="Buffer_Types"></span><span id="buffer_types"></span><span id="BUFFER_TYPES"></span>Типы буферов


Ниже приведены типы буферных ресурсов, поддерживаемые Direct3D 11.

-   [Буфер вершин](#vertex-buffer)
-   [Буфер индексов](#index-buffer)
-   [Буфер констант](#shader-constant-buffer)

### <a name="span-idvertexbufferspanspan-idvertexbufferspanspan-idvertexbufferspanspan-idvertex-bufferspanvertex-buffer"></a><span id="Vertex_Buffer"></span><span id="vertex_buffer"></span><span id="VERTEX_BUFFER"></span><span id="vertex-buffer"></span>Буфер вершин

Буфер вершин содержит данные вершин, используемые для определения геометрии. К данным вершин относятся координаты положения, данные цвета, данные координат текстуры, данные нормали и т. д.

Самый простой пример буфера вершин — это буфер, который содержит только данные положения. Его можно изобразить, как на следующем рисунке.

![иллюстрация буфера вершин, который содержит данные положения](images/d3d10-resources-single-element-vb2.png)

Чаще всего буфер вершин содержит все данные, необходимые для полного описания трехмерных вершин. Примером этого может быть буфер вершин, который содержит положение, нормаль и координаты текстуры для каждой вершины. Эти данные обычно упорядочены в виде наборов элементов для каждой вершины, как показано на следующем рисунке.

![иллюстрация буфера вершин, который содержит данные положения, нормали и текстуры](images/d3d10-vertex-buffer-element.png)

Этот буфер вершин содержит данные по каждой вершине; для каждой вершины сохраняются три элемента (положение, нормаль и координаты текстуры). Положение и нормаль обычно задаются с помощью трех 32-разрядных значений с плавающей запятой, а координаты текстуры — с помощью двух 32-разрядных значений с плавающей запятой.

Для доступа к данным из буфера вершин необходимо знать, какая вершина нужна, а также следующие дополнительные параметры буфера.

-   Смещение — число байтов от начала буфера до данных для первой вершины.
-   BaseVertexLocation — количество байтов от смещения до первой вершины, используемой с помощью соответствующего вызова рисования.

Перед созданием буфера вершин необходимо определить его макет. После создания объекта макета входных данных привяжите его к [этапу сборщика входных данных (IA)](input-assembler-stage--ia-.md).

### <a name="span-idindexbufferspanspan-idindexbufferspanspan-idindexbufferspanspan-idindex-bufferspanindex-buffer"></a><span id="Index_Buffer"></span><span id="index_buffer"></span><span id="INDEX_BUFFER"></span><span id="index-buffer"></span>Буфер индексов

Буферы индексов содержат целочисленные указатели в буферы вершин и используются для более эффективной отрисовки примитивов. Буфер индексов содержит последовательный набор 16-разрядных или 32-разрядных индексов; каждый индекс используется для идентификации вершины в буфере вершин. Буфер индексов можно изобразить, как на следующем рисунке.

![иллюстрация буфера индексов](images/d3d10-index-buffer.png)

Последовательные индексы, хранящиеся в буфере индексов, обнаруживаются по следующим параметрам.

-   Смещение — число байтов от базового адреса буфера индексов.
-   StartIndexLocation — указывает первый элемент буфера индексов из базового адреса, а также смещение. Начальное расположение представляет первый индекс для отрисовки.
-   IndexCount — число индексов для отрисовки.

Начало буфера индексов = базовый адрес буфера индексов + смещение (в байтах) + StartIndexLocation \* ElementSize (в байтах).

В этом расчете ElementSize — это размер каждого элемента буфера индексов, представляющий собой два или четыре байта.

### <a name="span-idshaderconstantbufferspanspan-idshaderconstantbufferspanspan-idshaderconstantbufferspanspan-idshader-constant-bufferspanconstant-buffer"></a><span id="Shader_Constant_Buffer"></span><span id="shader_constant_buffer"></span><span id="SHADER_CONSTANT_BUFFER"></span><span id="shader-constant-buffer"></span>Буфер констант

Буфер констант позволяет эффективно поставлять данные констант шейдера в конвейер. Буфер констант можно использовать для хранения результатов этапа вывода потока. Концептуально буфер констант аналогичен одноэлементному буферу вершин, что показано на следующем рисунке.

![иллюстрация буфера констант шейдера](images/d3d10-shader-resource-buffer.png)

Каждый элемент хранит определяемую форматом данных константу с числом компонентов от 1 до 4.

Буфер констант может использовать только один флаг привязки, который невозможно сочетать с каким-либо другим флагом привязки.

Для чтения буфера констант шейдера из шейдера используйте функцию загрузки HLSL. На каждом этапе шейдера можно определить до 15 буферов констант шейдера, причем каждый буфер может содержать до 4096 констант.

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Статьи по теме


[Буферы вершин и индексов](vertex-and-index-buffers.md)

 

 





