---
title: Использование системных значений
description: Создаваемые системой значения генерируются этапом сборщика входных данных (на основе введенных пользователем семантических элементов) в целях повышения эффективности операций шейдера.
ms.assetid: C7CBA81D-68CA-4E9A-95E3-8185C280C843
keywords:
- Использование системных значений
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 6efe7aa27721f519ba93052abf2d0e8189f58941
ms.sourcegitcommit: c01c29cd97f1cbf050950526e18e15823b6a12a0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2018
ms.locfileid: "8696161"
---
# <a name="span-iddirect3dconceptsusingsystem-generatedvaluesspanusing-system-generated-values"></a><span id="direct3dconcepts.using_system-generated_values"></span>Использование системных значений


Создаваемые системой значения генерируются [этапом сборщика входных данных (IA)](input-assembler-stage--ia-.md) (на основе заданной пользователем [семантики](https://msdn.microsoft.com/library/windows/desktop/bb509647) входных данных) в целях повышения эффективности операций шейдера. Благодаря прикреплению определенных данных, таких как идентификатор экземпляра (видимый [этапу шейдера вершин (VS)](vertex-shader-stage--vs-.md)), идентификатор вершины (видимый VS) или идентификатор примитива (видимый [этапу шейдера геометрии (GS)](geometry-shader-stage--gs-.md)/[этапу построителя текстуры (PS)](pixel-shader-stage--ps-.md)), последующий этап шейдера может искать эти системные значения для оптимизации обработки на этом этапе.

Например, этап VS может искать идентификатор экземпляра для получения дополнительных повершинных данных для шейдера или для выполнения других операций; этапы GS и PS могут использовать идентификатор примитива, чтобы аналогичным образом получить попримитивные данные.

## <a name="span-idvertexidspanspan-idvertexidspanspan-idvertexidspanvertexid"></a><span id="VertexID"></span><span id="vertexid"></span><span id="VERTEXID"></span>VertexID


Идентификатор вершины используется каждым этапом шейдеров для идентификации каждой вершины. Это 32-разрядное целое число без знака, значение по умолчанию — 0. Оно присваивается вершине при обработке примитива [этапом сборщика входных данных (IA)](input-assembler-stage--ia-.md). Чтобы дать этапу IA указание формировать повершинные идентификаторы, прикрепите семантику повершинных идентификаторов к объявлению входных данных шейдера.

IA будет добавлять идентификатор вершины к каждой вершине, предназначенной для использования этапами шейдеров. При каждом вызове метода рисования идентификатор вершины увеличивается на 1. При индексированных вызовах метода рисования счетчик сбрасывается обратно в начальное значение. При переполнении идентификатора вершин (если значение превышает 2³² – 1) он возвращается в 0.

Для всех типов примитивов у вершин есть связанные с ними идентификаторы вершин (вне зависимости от смежности).

## <a name="span-idprimitiveidspanspan-idprimitiveidspanspan-idprimitiveidspanprimitiveid"></a><span id="PrimitiveID"></span><span id="primitiveid"></span><span id="PRIMITIVEID"></span>PrimitiveID


Идентификатор примитива используется каждым этапом шейдеров для идентификации каждого примитива. Это 32-разрядное целое число без знака, значение по умолчанию — 0. Оно присваивается примитиву при обработке примитива [этапом сборщика входных данных (IA)](input-assembler-stage--ia-.md). Чтобы дать этапу IA указание формировать идентификаторы примитивов, прикрепите семантику идентификаторов примитивов к объявлению входных данных шейдера.

Этап IA будет добавлять идентификатор примитива к каждому примитиву, предназначенному для использования [этапом шейдера геометрии (GS)](geometry-shader-stage--gs-.md) или [этапом шейдера вершин (VS)](vertex-shader-stage--vs-.md) (в зависимости от того, какой из них будет активен после этапа IA). Для каждого индексированного вызова метода рисования идентификатор примитива увеличивается на 1, однако всякий раз, когда начинается новый экземпляр, идентификатор примитива сбрасывается в 0. Все остальные вызовы метода рисования не изменяют значение идентификатора экземпляра. При переполнении идентификатора экземпляра (если значение превышает 2³² – 1) он возвращается в 0.

[Этап шейдера пикселей (PS)](pixel-shader-stage--ps-.md) не предполагает отдельного входа для идентификатора примитива; однако любые входные данные шейдера пикселей, в которых указан идентификатор примитива, использует режим постоянной интерполяции.

Поддержка автоматического формирования идентификатора примитива для смежных примитивов отсутствует. Для примитивов со смежностью, таких как полоса треугольников со смежностью, идентификатор примитива ведется только для внутренних примитивов (несмежных примитивов), подобных набору примитивов в полосе треугольников без смежности.

## <a name="span-idinstanceidspanspan-idinstanceidspanspan-idinstanceidspaninstanceid"></a><span id="InstanceID"></span><span id="instanceid"></span><span id="INSTANCEID"></span>InstanceID


Идентификатор экземпляра используется на каждом этапе шейдера для идентификации обрабатываемой в данный момент геометрии. Это 32-разрядное целое число без знака, значение по умолчанию — 0.

[Этап сборщика входных данных (IA)](input-assembler-stage--ia-.md) будет добавлять идентификатор экземпляра к каждой вершине, если объявление входных данных шейдера вершин содержит семантику идентификаторов экземпляров. Для каждого индексированного вызова метода рисования идентификатор экземпляра увеличивается на 1. Все остальные вызовы метода рисования не изменяют значение идентификатора экземпляра. При переполнении идентификатора экземпляра (если значение превышает 2³² – 1) он возвращается в 0.

## <a name="span-idexamplespanspan-idexamplespanspan-idexamplespanexample"></a><span id="Example"></span><span id="example"></span><span id="EXAMPLE"></span>Пример


На следующем рисунке показано, как системные значения прикрепляются к экземплярам полосы треугольников на [этапе сборщика входных данных (IA)](input-assembler-stage--ia-.md).

![иллюстрация системных значений для экземпляров полосы треугольников](images/d3d10-ia-example.png)

В таблицах ниже показаны системные значения, созданные для обоих экземпляров одной и той же полосы треугольников. Первый экземпляр (экземпляр U) показан синим цветом, второй экземпляр (экземпляр V) — зеленым. Сплошными линиями соединяются вершины в примитивах, штриховыми — смежные вершины.

В следующих таблицах показаны созданные системой значения для экземпляра U.

| Данные вершин    | C,U | D,U | E,U | F,U | G,U | H,U | I,U | J,U | K,U | L,U |
|----------------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| **VertexID**   | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   |
| **InstanceID** | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   |

 

Экземпляр полосы треугольников U имеет 3 примитива-треугольника, со следующими созданными системой значениями:

|                 |     |     |     |
|-----------------|-----|-----|-----|
| **PrimitiveID** | 0   | 1   | 2   |
| **InstanceID**  | 0   | 0   | 0   |

 

В следующих таблицах показаны созданные системой значения для экземпляра V.

| Данные вершин    | C,V | D,V | E,V | F,V | G,V | H,V | I,V | J,V | K,V | L,V |
|----------------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| **VertexID**   | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   |
| **InstanceID** | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   |

 

Экземпляр полосы треугольников V имеет 3 примитива-треугольника, со следующими созданными системой значениями:

|                 |     |     |     |
|-----------------|-----|-----|-----|
| **PrimitiveID** | 0   | 1   | 2   |
| **InstanceID**  | 1   | 1   | 1   |

 

[Этап сборщика входных данных (IA)](input-assembler-stage--ia-.md) создает идентификаторы (вершин, примитивов и экземпляров); также обратите внимание, что каждому экземпляру присваивается уникальный идентификатор экземпляра. Данные заканчиваются вырезанием полосы, которое разделяет экземпляры полосы треугольников.

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Статьи по теме


[Этап сборщика входных данных (IA)](input-assembler-stage--ia-.md)

 

 




