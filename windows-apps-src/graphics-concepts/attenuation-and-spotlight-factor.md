---
title: Коэффициент затухания и вспышки
description: Компоненты рассеянного и зеркального света глобального уравнения света содержат термины, описывающие затухание света и конус вспышки.
ms.assetid: F61D4ACB-09AB-4087-9E2D-224E472D6196
keywords:
- Коэффициент затухания и вспышки
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 8126ac8fa738a2b8a9680d215179fe23f77c5d44
ms.sourcegitcommit: d7613c791107f74b6a3dc12a372d9de916c0454b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2018
ms.locfileid: "8749610"
---
# <a name="attenuation-and-spotlight-factor"></a>Коэффициент затухания и вспышки


Компоненты рассеянного и зеркального света глобального уравнения света содержат термины, описывающие затухание света и конус вспышки. Эти термины описаны ниже.

## <a name="span-idattenuationspanspan-idattenuationspanspan-idattenuationspanattenuation"></a><span id="Attenuation"></span><span id="attenuation"></span><span id="ATTENUATION"></span>Затухание


Затухание света зависит от типа света и расстояния между светом и положением вершины. Чтобы вычислить затухание, используйте одну из следующих формул.

Atten = 1/( att0<sub>i</sub> + att1<sub>i</sub> \* d + att2<sub>i</sub> \* d²)

Где:

| Параметр        | Значение по умолчанию | Тип           | Описание                                     | Диапазон          |
|------------------|---------------|----------------|-------------------------------------------------|----------------|
| att0<sub>i</sub> | 0,0           | Число с плавающей запятой | Константный коэффициент затухания                     | от 0 до +∞ |
| att1<sub>i</sub> | 0,0           | Число с плавающей запятой | Линейный коэффициент затухания                       | от 0 до +∞ |
| att2<sub>i</sub> | 0,0           | Число с плавающей запятой | Квадратический коэффициент затухания                    | от 0 до +∞ |
| d                | Н/Д           | Число с плавающей запятой | Расстояние от положения вершины до положения света | Н/Д            |

 

-   Atten = 1, если свет является направленным светом.
-   Atten = 0, если расстояние между светом и вершиной превышает диапазон света.

Расстояние между светом и положением вершины всегда положительное.

d = | L<sub>dir</sub> |

Где:

| Параметр       | Значение по умолчанию | Тип                                             | Описание                                                 |
|-----------------|---------------|--------------------------------------------------|-------------------------------------------------------------|
| L<sub>dir</sub> | Н/Д           | Трехмерный вектор со значениями с плавающей запятой x, y и z | Вектор направления от положения вершины до положения света |

 

Если d больше диапазона света, Direct3D не выполняет дальнейшие расчеты затухания и не применяет никаких эффектов от света к вершине.

Константы затухания функционируют в качестве коэффициентов в формуле: можно создать несколько кривых затухания, внеся в них простые коррективы. Можно настроить значение Attenuation1 равным 1,0, чтобы создать свет, который не затухает, но все равно ограничен диапазоном. Либо можно экспериментировать с разными значениями для достижения разных эффектов затухания.

Затухание в максимальном диапазоне света не равно 0,0. Чтобы не допустить случайного отображения света при нахождении в диапазоне света, приложение может увеличить диапазон света. Либо приложение может настроить константы затухания так, чтобы коэффициент затухания был близок к 0,0 в диапазоне света. Значение затухания умножается на компоненты красного, зеленого и синего цветов света, чтобы регулировать интенсивность света как коэффициент расстояния, которое свет проходит до вершины.

## <a name="span-idspotlight-factorspanspan-idspotlight-factorspanspan-idspotlight-factorspanspotlight-factor"></a><span id="Spotlight-Factor"></span><span id="spotlight-factor"></span><span id="SPOTLIGHT-FACTOR"></span>Коэффициент вспышки


Следующее уравнение задает коэффициент вспышки.

![Уравнение с коэффициентом вспышки](images/dx8light9.png)

| Параметр         | Значение по умолчанию | Тип           | Описание                              | Диапазон                    |
|-------------------|---------------|----------------|------------------------------------------|--------------------------|
| rho<sub>i</sub>   | Н/Д           | Число с плавающей запятой | cosine(угол) для i света            | Н/Д                      |
| phi<sub>i</sub>   | 0,0           | Число с плавающей запятой | Угол мягкого затенения вспышки i в радиусе | \[theta<sub>i</sub>, pi) |
| theta<sub>i</sub> | 0,0           | Число с плавающей запятой | Угол полной тени вспышки i в радиусе    | \[0, pi)                 |
| снижение           | 0,0           | Число с плавающей запятой | Коэффициент снижения                           | (-∞ + ∞)   |

 

Где:

rho = norm(L<sub>dcs</sub>)<sup>.</sup>norm(L<sub>dir</sub>)

и:

| Параметр       | Значение по умолчанию | Тип                                             | Описание                                                 |
|-----------------|---------------|--------------------------------------------------|-------------------------------------------------------------|
| L<sub>dcs</sub> | Н/Д           | Трехмерный вектор со значениями с плавающей запятой x, y и z | Отрицательное значение направления света в пространстве камеры         |
| L<sub>dir</sub> | Н/Д           | Трехмерный вектор со значениями с плавающей запятой x, y и z | Вектор направления от положения вершины до положения света |

 

После вычисления затухания света для того, чтобы вычислить компоненты рассеивания и зеркального отражения для вершины, Direct3D также учитывает эффекты вспышки, если применимо; угол, под которым свет отражается с поверхности, и отражающую способность текущего материала. В статье [Типы света](light-types.md) см. раздел "Вспышка".

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Статьи по теме


[Математические аспекты освещения](mathematics-of-lighting.md)

 

 




