---
title: Непрозрачные и 1-разрядные альфа-текстуры
description: Формат текстур BC1 предназначен для непрозрачных текстур и текстур с одним прозрачным цветом.
ms.assetid: 8C53ACDD-72ED-4307-B4F3-2FCF9A9F53EC
keywords:
- Непрозрачные и 1-разрядные альфа-текстуры
author: michaelfromredmond
ms.author: mithom
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
ms.localizationpriority: medium
ms.openlocfilehash: 7b882c70701d2ea2f8abef14a7d3319616696ea4
ms.sourcegitcommit: 897a111e8fc5d38d483800288ad01c523e924ef4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/13/2018
ms.locfileid: "1044733"
---
# <a name="span-iddirect3dconceptsopaqueand1-bitalphatexturesspanopaque-and-1-bit-alpha-textures"></a><span id="direct3dconcepts.opaque_and_1-bit_alpha_textures"></span>Непрозрачные и 1-разрядные альфа-текстуры


Формат текстур BC1 предназначен для непрозрачных текстур и текстур с одним прозрачным цветом.

Для каждого непрозрачного или 1-разрядного альфа-блока сохраняются два 16-разрядных значения (формат RGB 5:6:5) и битовая карта 4 x 4 с 2 битами на пиксель. Это в сумме составляет 64 бита для 16 текселей или четыре бита на тексель. В битовой карте блока предусматриваются 2 бита на тексель для выбора из четырех цветов, два из которых хранятся в закодированных данных. Другие два цвета являются производными от эти сохраненных цветов путем линейной интерполяции. Этом макет показан на следующей схеме.

![схема битовой карты](images/colors1.png)

Формат 1-разрядного альфа-значения может быть отличен от формата непрозрачного цвета путем сравнения двух 16-разрядных значений цвета, сохраненных в блоке. Они обрабатываются как целые числа без знака. Если первый цвет больше, чем второй, подразумевается, что определены только непрозрачные тексели. Это означает, что для представления текселей используются четыре цвета. В четырехцветном кодировании существует два производных цвета, а все четыре цвета распределяются равномерно в цветовом пространстве RGB. Этот формат аналогичен формату RGB 5:6:5. В противном случае для 1-разрядной альфа-прозрачности используются три цвета, а четвертый резервируется для представления прозрачных текселей.

В кодировке тремя цветами существует один производный цвет, а четвертый 2-разрядный код резервируется для указания прозрачного текселя (данные альфа-канала). Этот формат аналогичен RGBA 5:5:5:1, где заключительный разряд используется для кодирования альфа-маски.

В следующем примере кода показан алгоритм определения того, выбрано ли трех- или четырехцветовое кодирование.

```
if (color_0 > color_1) 
{
    // Four-color block: derive the other two colors. 
    
    // 00 = color_0, 01 = color_1, 10 = color_2, 11 = color_3
    // These 2-bit codes correspond to the 2-bit fields 
    // stored in the 64-bit block.
    color_2 = (2 * color_0 + color_1 + 1) / 3;
    color_3 = (color_0 + 2 * color_1 + 1) / 3;
}    
else
{ 
    // Three-color block: derive the other color.
    // 00 = color_0,  01 = color_1,  10 = color_2,  
    // 11 = transparent.
    // These 2-bit codes correspond to the 2-bit fields 
    // stored in the 64-bit block. 
    color_2 = (color_0 + color_1) / 2;    
    color_3 = transparent;    

}
```

Перед наложением рекомендуется установить компоненты RGBA для пикселя прозрачности равными нулю.

В следующих таблицах показана схема памяти для 8-байтового блока. Предполагается, что первый индекс соответствует координате по оси Y, а второй соответствует координате по оси X. Например, Texel\[1\]\[2\] указывает на пиксель в карте текстуры с координатами (x,y) = (2,1).

Ниже приведена схема памяти для 8-байтового блока (64-разрядная версия).

| Адрес слова | 16-разрядное слово    |
|--------------|----------------|
| 0            | Color\_0       |
| 1            | Color\_1       |
| 2            | Bitmap Word\_0 |
| 3            | Bitmap Word\_1 |

 

Color\_0 и Color\_1, цвета на двух краях, приведены следующим образом.

| Биты        | Цвет                 |
|-------------|-----------------------|
| 4:0 (LSB\*) | Компонент синего цвета  |
| 10:5        | Компонент зеленого цвета |
| 15:11       | Компонент красного цвета   |

 

\*наименее значимый бит

Элемент Bitmap Word\_0 организован следующим образом.

| Биты          | Тексель           |
|---------------|-----------------|
| 1:0 (LSB)     | Texel\[0\]\[0\] |
| 3:2           | Texel\[0\]\[1\] |
| 5:4           | Texel\[0\]\[2\] |
| 7:6           | Texel\[0\]\[3\] |
| 9:8           | Texel\[1\]\[0\] |
| 11:10         | Texel\[1\]\[1\] |
| 13:12         | Texel\[1\]\[2\] |
| 15:14 (MSB\*) | Texel\[1\]\[3\] |

 

\*наиболее значимый бит (MSB)

Элемент Bitmap Word\_1 организован следующим образом.

| Биты        | Тексель           |
|-------------|-----------------|
| 1:0 (LSB)   | Texel\[2\]\[0\] |
| 3:2         | Texel\[2\]\[1\] |
| 5:4         | Texel\[2\]\[2\] |
| 7:6         | Texel\[2\]\[3\] |
| 9:8         | Texel\[3\]\[0\] |
| 11:10       | Texel\[3\]\[1\] |
| 13:12       | Texel\[3\]\[2\] |
| 15:14 (MSB) | Texel\[3\]\[3\] |

 

## <a name="span-idexampleofopaquecolorencodingspanspan-idexampleofopaquecolorencodingspanspan-idexampleofopaquecolorencodingspanexample-of-opaque-color-encoding"></a><span id="Example_of_Opaque_Color_Encoding"></span><span id="example_of_opaque_color_encoding"></span><span id="EXAMPLE_OF_OPAQUE_COLOR_ENCODING"></span>Пример кодирования непрозрачного цвета


В примере кодирования непрозрачного цвета предположим, что красный и черный цвета находятся на разных краях диапазона. Красный — color\_0, а черный — color\_1. Существует четыре интерполированных цвета, которые образуют равномерно распределенный между ними градиент. Чтобы определить значения для битовой карты 4 x 4, используются следующие расчеты.

```
00 ? color_0
01 ? color_1
10 ? 2/3 color_0 + 1/3 color_1
11 ? 1/3 color_0 + 2/3 color_1
```

Битовая карта выглядит согласно следующей схеме.

![схема развернутой битовой карты](images/colors2.png)

Это выглядит как следующий набор цветов на иллюстрации.

**Примечание**. В изображении пиксель (0,0) отображается в верхнем левом углу.

 

![иллюстрация непрозрачного закодированного градиента](images/redsquares.png)

## <a name="span-idexampleof1bitalphaencodingspanspan-idexampleof1bitalphaencodingspanspan-idexampleof1bitalphaencodingspanexample-of-1-bit-alpha-encoding"></a><span id="Example_of_1_Bit_Alpha_Encoding"></span><span id="example_of_1_bit_alpha_encoding"></span><span id="EXAMPLE_OF_1_BIT_ALPHA_ENCODING"></span>Пример кодирования 1-разрядного альфа-значения


Этот формат выбирается, когда 16-разрядное целое число без знака, color\_0, меньше, чем 16-разрядное целое число без знака, color\_1. Пример использования этого формата — листья на дереве на фоне голубого неба. Некоторые тексели могут быть отмечены как прозрачные, и в то же время три оттенка зеленого по-прежнему доступны для листьев. Два цвета располагаются по краям, а третий является интерполированным цветом.

Ниже приведена иллюстрация с примером такого рисунка.

![иллюстрация кодирования 1-разрядного альфа-значения](images/greenthing.png)

Там, где изображение выглядит белым, тексель будет закодирован как прозрачный. Компоненты RGBA прозрачных текселей должны быть установлены равными 0 перед началом наложения.

Кодировка битовой карты для цветов и прозрачности определяется с помощью следующих вычислений.

```
00 ? color_0
01 ? color_1
10 ? 1/2 color_0 + 1/2 color_1
11   ?   Transparent
```

Битовая карта выглядит согласно следующей схеме.

![схема развернутой битовой карты](images/colors3.png)

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Статьи по теме


[Ресурсы сжатых текстур](compressed-texture-resources.md)

 

 




