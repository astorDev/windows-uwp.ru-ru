---
title: Графический конвейер
description: Графический конвейер Direct3D предназначен для создания графики для игр, действие в которых разворачивается в реальном времени. Данные поступают с устройств ввода на устройства вывода, проходя через все настраиваемые или программируемые этапы.
ms.assetid: C9519AD0-5425-48BD-9FF4-AED8959CA4AD
keywords:
- Графический конвейер
- Этапы конвейера
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 55621cec768e0aac680c3a84fd803e591459a97d
ms.sourcegitcommit: d2517e522cacc5240f7dffd5bc1eaa278e3f7768
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/30/2018
ms.locfileid: "8351741"
---
# <a name="graphics-pipeline"></a>Графический конвейер


Графический конвейер Direct3D предназначен для создания графики для игр, действие в которых разворачивается в реальном времени. Данные поступают с устройств ввода на устройства вывода, проходя через все настраиваемые или программируемые этапы.

Все этапы можно настроить с помощью API Direct3D. Этапы с использованием общих ядер шейдеров (прямоугольные блоки со скругленными краями) можно программировать с помощью языка программирования [HLSL](https://msdn.microsoft.com/library/windows/desktop/bb509561). Это обеспечивает высочайшую гибкость и адаптивность конвейера.

Наиболее распространены этапы шейдера вершин (VS) и построителя текстуры (PS). Если не предоставить даже эти этапы шейдеров, используются холостая команда по умолчанию, сквозной шейдер вершин и построитель текстуры.

![схема потока данных в программируемом конвейере direct3d 11](images/d3d11-pipeline-stages.jpg)

## <a name="input-assembler-stage"></a>Этап сборщика входных данных

|-|-| | Назначение | [Этап сборщика входных данных (IA)](input-assembler-stage--ia-.md) поставляет данные о смежности и в конвейер, например треугольники, линии и точки, включая семантические идентификаторы, чтобы повысить эффективность шейдеров путем снижения объемов обработки до примитивов, которые еще не были уже обработанный. | | Ввод | Данные примитивов (треугольники, линии или точки) из заполняемых пользователем буферов в памяти. А также, возможно, данные смежности. Треугольник бы 3 вершины для каждого треугольника и возможно 3 вершины для данных о смежности на треугольник. | | Выходные данные | Примитивы с присоединенными созданными системой значениями (например, идентификатор примитива, идентификатор экземпляра или идентификатор вершины). |

## <a name="vertex-shader-stage"></a>Этап шейдера вершин

|-|-| | Назначение | [Этап шейдера вершин (VS)](vertex-shader-stage--vs-.md) обрабатывает вершины, обычно с выполнением операций, таких как преобразования, скиннинг и освещение. Шейдер вершин принимает одну входную вершину и создает одну выходную вершину. Операции с отдельной вершины, например преобразований, Skinning, Morphing и освещение вершины. | | Ввод | Одна вершина с VertexID и InstanceID системных значений. Каждая входная вершина шейдера вершин может состоять из 16 32-разрядных векторов (до 4 компонентов в каждом). | | Выходные данные | Одна вершина. Каждая выходная вершина может состоять из 16 32-разрядных четырехкомпонентных векторов. |
 
## <a name="hull-shader-stage"></a>Этап шейдера поверхностей
 
|-|-| | Назначение | На [этапе шейдера поверхностей (HS)](hull-shader-stage--hs-.md) — это один из этапов тесселяции, разбивается на множество треугольников одна поверхность модели. Шейдер поверхностей вызывается единожды для каждого участка и преобразует входные контрольные точки, определяющие поверхность низкого порядка, в контрольные точки, формирующие участок. Он также выполняет некоторые вычисления для каждого участка и содержат данные для этапа тесселяции (TS) и этап шейдера доменов (DS). | | Ввод | От 1 до 32 входных контрольных точек, которые вместе определяют поверхность низкого порядка. | | Выходные данные | От 1 до 32 выходных контрольных точек, которые вместе образуют участок. Шейдер поверхностей объявляет состояние для этапа тесселяции (TS), включая количество контрольных точек, тип поверхности участка и нужный тип секционирования при тесселяции. |

## <a name="tessellator-stage"></a>Этап тесселяции

|-|-| | Назначение | На [этапе тесселяции (TS)](tessellator-stage--ts-.md) создает шаблон выборки домена, который представляет преобразование геометрии и формирует набор меньших объектов (треугольников, точек или линий), которые соединяют эти выборки. | | Ввод | Тесселяция выполняется единожды для каждого участка с использованием факторов тесселяции (указывают тщательность части домена) и тип секционирования (указывает алгоритм разделения участка), переданных с предыдущего этапа шейдера поверхностей. | | Выходные данные | Тесселяция выводит uv (и при необходимости w) координаты и топологию поверхности для этапа шейдера доменов. |

## <a name="domain-shader-stage"></a>Этап шейдера доменов

|-|-| | Назначение | На [этапе шейдера доменов (DS)](domain-shader-stage--ds-.md) вычисляется положение вершины составной точки в выходном участке; вычисляется положение вершины, соответствующее каждой выборке домена. Шейдер доменов запускается после каждого этапа тесселяции выходную точку этапа выходному участку имеет доступ только для чтения для шейдера поверхности и константам выходного участка и координатам UV выходных данных этапа тесселяции. | | Ввод | Шейдер доменов использует выходные точки из [шейдера поверхностей (hs)](hull-shader-stage--hs-.md). Выходные данные шейдера доменов включают контрольные точки, данные констант участков и факторы тесселяции (факторы тесселяции могут включать значения, используемые тесселятором с фиксированными функциями, а также необработанные значения— перед округлением с помощью целочисленной тесселяции,— например для упрощения геоморфизма). Шейдер доменов вызывается единожды на каждую выходную координату [этапа тесселяции (TS)](tessellator-stage--ts-.md). | | Выходные данные | Этап шейдера доменов (DS) выводит положение вершины составной точки в выходном участке. |

## <a name="geometry-shader-stage"></a>Этап шейдера геометрии

|-|-| | Назначение | [Этап шейдера геометрии (GS)](geometry-shader-stage--gs-.md) обрабатывает целые примитивы: треугольники, линии и точки, а также смежные с ними вершины. Он поддерживает усложнение и упрощение геометрии. Он полезен для таких алгоритмов, как расширение спрайтов точек, динамические системы частиц, создание меха/"плавников", создание объемных теней, однопроходная отрисовка с использованием кубической карты, замена материалов по примитивам и настройка материалов по примитивам, включая создание барицентрических координат в качестве данных примитива, чтобы построитель текстуры мог выполнить настраиваемую интерполяцию атрибутов. | | Ввод | В отличие от шейдеров вершин, работающих с одной вершиной, входными данными шейдера геометрии являются вершины полного примитива (три вершины для треугольников, две вершины для линий или одна вершина для точек). | | Выходные данные | Этап шейдера геометрии (GS) может выводить несколько вершин, формирующих единую выбранную топологию. Доступны следующие выходные топологии шейдера геометрии: <strong>tristrip</strong>, <strong>linestrip</strong> и <strong>pointlist</strong>. Количество сгенерированных примитивов может свободно меняться при каждом вызове шейдера геометрии, но максимальное количество генерируемых вершин необходимо объявить статически. Длины полос, сгенерированных в результате вызова шейдера геометрии, могут быть произвольными, а новые полосы можно создавать с помощью функции [RestartStrip](https://msdn.microsoft.com/library/windows/desktop/bb509660) HLSL. |

## <a name="stream-output-stage"></a>Этап потокового вывода

|-|-| | Назначение | [Этап потокового вывода (SO)](stream-output-stage--so-.md) непрерывно выводит (или выполняет) данных вершин из предыдущего активного этапа в один или несколько буферов в памяти. Поток данных в памяти, выведенный можно снова вернуть в конвейер как входные данные или обратно считать из ЦП. | | Ввод | Данные вершин из предыдущего этапа конвейера. | | Выходные данные | Этап потокового вывода (SO) непрерывно выводит (или выполняет) данных вершин из предыдущего активного этапа, например, этапа шейдера геометрии (GS) в один или несколько буферов в памяти. Если этап шейдера геометрии (GS) неактивен, а этап потокового вывода (SO) активен, оно непрерывно выводит данные вершин из этапа шейдера доменов (DS) в буферы в памяти (или если DS также неактивен, из этапа шейдера вершин (VS)). |

## <a name="rasterizer-stage"></a>Этап растеризации

|-|-| | Назначение | [Этап средства программной прорисовки (RS)](rasterizer-stage--rs-.md) обрезает примитивы, которых нет в представлении, готовит их для этапа построителя текстуры (PS) и определяет, как вызывать эти шейдеры. Преобразует векторные данные (состоящие из фигур или примитивов) преобразуются в растровое изображение (состоящие из пикселей) для отображения трехмерной графики в режиме реального времени. | | Ввод | Вершины (x, y, z, w) поступающие в средство программной прорисовки этап считается, что находятся однородном пространстве обрезки. В этом пространстве координат точки оси X указывают вправо, точки Y и Z точки направлению от камеры. | | Выходные данные | Фактические пиксели для отрисовки. Включает некоторые атрибуты вершин для интерполяции построителем текстуры. |

## <a name="pixel-shader-stage"></a>Этап построителя текстуры
 
|-|-| | Назначение | На [этапе построителя текстуры (PS)](pixel-shader-stage--ps-.md) принимаются интерполированные данные для примитива и генерируются данные для пикселей, такие как цвет. | | Ввод | Если конвейер настроен без шейдера геометрии, построитель текстуры ограничивается 16, 32-разрядных, 4-компонентных входных данных. В противном случае шейдер пикселей может принимать до 32 32-разрядных, 4-компонентных входных данных. Входные данные шейдера пикселей включают атрибуты вершин (которые можно интерполировать с коррекцией перспективы или без нее) или могут рассматриваться как константы примитивов. Входные данные шейдера пикселей интерполируются на основе атрибутов вершин растеризуемого примитива в зависимости от объявленного режима интерполяции. Если примитив обрезается до растеризации, режим интерполяции также учитывается в процессе обрезки. | | Выходные данные | Построитель текстуры может вывести до 8 32-разрядных, 4-компонентных цветов или цвет не Если пиксель отклоняется. Компоненты регистрация выходных данных шейдера пикселей должны объявляться до их можно использовать; каждого регистра — это отдельная маска вывода записи. |

## <a name="output-merger-stage"></a>Этап слияния вывода
 
|-|-| | Назначение | На [этапе слияния и вывода (OM)](output-merger-stage--om-.md) различных типов выходные данные (значения пиксельного шейдера, информация о глубине и наборе элементов) объединяются с содержимое буферов глубины и набора элементов и целевого объекта отрисовки для создания окончательного результата конвейера. | | Ввод | Входные данные средства слияния вывода — это состояние конвейера, пиксельные данные, сгенерированные построителями текстур, содержимое целевых объектов отрисовки и буферов глубины и трафаретов. | | Выходные данные | Окончательный цвет отрисованных пикселей. |

## <a name="related-topics"></a>Статьи по теме

- [Обучающее руководство по графике Direct3D](index.md)

- [Конвейер вычислений](compute-pipeline.md)
