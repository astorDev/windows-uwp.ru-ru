---
title: Внешнее освещение
description: Внешнее освещение предоставляет постоянное освещение для сцены.
ms.assetid: C34FA65A-3634-4A4B-B183-4CDA89F4DC95
keywords:
- Внешнее освещение
author: michaelfromredmond
ms.author: mithom
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 87b5c72ef99e3802a348ddfd28951bc2865891e5
ms.sourcegitcommit: 93c0a60cf531c7d9fe7b00e7cf78df86906f9d6e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/22/2018
ms.locfileid: "7579741"
---
# <a name="ambient-lighting"></a>Внешнее освещение


Фоновое освещение обеспечивает постоянное освещение сцены. Оно освещает все вершины объекта одинаково, потому что не зависит ни от каких других факторов освещения, таких как нормали вершины, направление света, положение света, диапазон или затухание. Внешнее освещение является константой во всех направлениях и окрашивает все пиксели объекта одинаково. Вычислить такое освещение очень быстро, однако объекты выглядят плоскими и нереалистичными.

Внешнее освещение — это самый быстрый тип освещения, но он создает наименее реалистичные результаты. Direct3D содержит одно глобальное свойство внешнего освещения, которое можно использовать, не создавая никакого света. Кроме того, можно настроить любой объект освещения так, чтобы он обеспечивал внешнее освещение.

Внешнее освещение для сцены описывается в следующем уравнении.

Внешнее освещение = Cₐ\*\[Gₐ + sum(Atten<sub>i</sub>\*Spot<sub>i</sub>\*L<sub>ai</sub>)\]

Где:

| Параметр         | Значение по умолчанию | Тип          | Описание                                                                                                       |
|-------------------|---------------|---------------|-------------------------------------------------------------------------------------------------------------------|
| Cₐ                | (0,0,0,0)     | D3DCOLORVALUE | Внешний цвет материала                                                                                            |
| Gₐ                | (0,0,0,0)     | D3DCOLORVALUE | Глобальный внешний цвет                                                                                              |
| Atten<sub>i</sub> | (0,0,0,0)     | D3DCOLORVALUE | Затухание света i. См. раздел [Коэффициент затухания и вспышки](attenuation-and-spotlight-factor.md). |
| Spot<sub>i</sub>  | (0,0,0,0)     | D3DVECTOR     | Коэффициент вспышки света i. См. раздел [Коэффициент затухания и вспышки](attenuation-and-spotlight-factor.md).  |
| sum               | Н/Д           | Н/Д           | Сумма внешнего освещения                                                                                          |
| L<sub>ai</sub>    | (0,0,0,0)     | D3DVECTOR     | Внешний цвет света i                                                                              |

 

Значение Cₐ равно одному из следующих:

-   color1 вершины, если AMBIENTMATERIALSOURCE = D3DMCS\_COLOR1 и первый цвет вершины предоставляется в объявлении вершины.
-   color2 вершины, если AMBIENTMATERIALSOURCE = D3DMCS\_COLOR2 и второй цвет вершины предоставляется в объявлении вершины.
-   внешний цвет материала.

**Примечание**  Если используется любой параметр AMBIENTMATERIALSOURCE и цвет вершины не предоставляется, то используется внешний цвет материала.

 

Чтобы использовать внешний цвет материала, используйте свойство SetMaterial, как показано в примере кода ниже.

Gₐ— это глобальный внешний цвет. Он задается с помощью SetRenderState(D3DRS\_AMBIENT). В сцене Direct3D существует один глобальный внешний цвет. Этот параметр не связан с объектом света Direct3D.

L<sub>ai</sub>— это внешний цвет света i в сцене. Каждый свет Direct3D имеет набор свойств, одно из которых— внешний цвет. Термин sum(L<sub>ai</sub>) представляет собой сумму всех внешних цветов в сцене.

## <a name="span-idexamplespanspan-idexamplespanspan-idexamplespanexample"></a><span id="Example"></span><span id="example"></span><span id="EXAMPLE"></span>Пример.


В этом примере объект окрашен с помощью внешнего света сцены и внешнего цвета материала.

```
#define GRAY_COLOR  0x00bfbfbf

Ambient.r = 0.75f;
Ambient.g = 0.0f;
Ambient.b = 0.0f;
Ambient.a = 0.0f;
```

Согласно уравнению, получившийся цвет для вершин объекта— это сочетание цвета материала и цвета света.

На двух следующих рисунках показан цвет материала (серый) и цвет света (ярко-красный).

![иллюстрация серой сферы](images/amb1.jpg)![иллюстрация красной сферы](images/lightred.jpg)

Итоговая сцена показана на следующей иллюстрации. Единственный объект в сцене — сфера. Внешний свет освещает все вершины объекта одинаковым цветом. Это не зависит от нормали вершины или направления света. В результате сфера выглядит как двухмерный круг, поскольку затенение вокруг поверхности объекта одинаковое.

![иллюстрация сферы с внешним светом](images/lighta.jpg)

Чтобы объекты выглядели более реалистично, используйте помимо внешнего света еще рассеянный и зеркальный свет.

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Статьи по теме


[Математические аспекты освещения](mathematics-of-lighting.md)

 

 




