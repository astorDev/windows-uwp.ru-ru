---
title: Этап шейдера поверхностей (HS)
description: Этап шейдера поверхностей (HS)— один из этапов тесселяции, на котором одна поверхность модели фактически разбивается на множество треугольников.
ms.assetid: C62F6F15-CAD7-4C72-9735-00762E346C4C
keywords:
- Этап шейдера поверхностей (HS)
author: michaelfromredmond
ms.author: mithom
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: d2aed18d476f966e644fa095aa6a5a518ebbe959
ms.sourcegitcommit: 3257416aebb5a7b1515e107866806f8bd57845a8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2018
ms.locfileid: "7159924"
---
# <a name="hull-shader-hs-stage"></a>Этап шейдера поверхностей (HS)


Этап шейдера поверхностей (HS)— один из этапов тесселяции, на котором одна поверхность модели фактически разбивается на множество треугольников.. На этапе шейдера поверхностей (HS) генерируется участок геометрии (и константы участка), соответствующий каждому входному участку (четырехугольнику, треугольнику или линии). Шейдер поверхностей вызывается единожды для каждого участка и преобразует входные контрольные точки, определяющие поверхность низкого порядка, в контрольные точки, формирующие участок. Он также выполняет некоторые вычисления для каждого участка, чтобы предоставить данные для [этапа тесселяции (TS)](tessellator-stage--ts-.md) и [этапа шейдера доменов (DS)](domain-shader-stage--ds-.md).

## <a name="span-idpurposeandusesspanspan-idpurposeandusesspanspan-idpurposeandusesspanpurpose-and-uses"></a><span id="Purpose_and_uses"></span><span id="purpose_and_uses"></span><span id="PURPOSE_AND_USES"></span>Назначение и способы применения


![схема этапа шейдера поверхностей](images/d3d11-hull-shader.png)

Три этапа тесселяции выполняются совместно для преобразования поверхностей высшего порядка (которые поддерживают простую и эффективную модель) в большое число треугольников для детальной прорисовки на графическом конвейере. Этапы тесселяции включают этап шейдера поверхностей (HS), [этап тесселяции (TS)](tessellator-stage--ts-.md) и [этап шейдера доменов (DS)](domain-shader-stage--ds-.md).

Этап шейдера поверхностей (HS)— это программируемый этап шейдера. Шейдер поверхностей реализовывается с помощью функции HLSL.

Шейдер поверхностей работает в два этапа: этап контрольных точек и этап констант участков, которые выполняются оборудованием параллельно. Компилятор HLSL извлекает параллелизм в шейдере поверхностей и кодирует его в байт-код, управляющий оборудованием.

-   Этап контрольных точек выполняется единожды для каждой контрольной точки. При этом считываются контрольные точки для участка и создается одна выходная контрольная точка (определенная **ControlPointID**).
-   Этап констант участков выполняется единожды для каждого участка. При этом создаются факторы тесселяции ребер и другие константы отдельных участков. Внутри системы может одновременно выполняться множество этапов констант участков. Этап констант участков есть доступ только для чтения ко всем входным и выходным контрольным точкам.

## <a name="span-idinputspanspan-idinputspanspan-idinputspaninput"></a><span id="Input"></span><span id="input"></span><span id="INPUT"></span>Входные данные


От 1 до 32 входных контрольных точек, которые вместе определяют поверхность низкого порядка.

-   Шейдер поверхностей объявляет состояние, необходимое на [этапе тесселяции (TS)](tessellator-stage--ts-.md). Сюда входят такие сведения, как число контрольных точек, тип поверхности участка и тип секционирования при тесселяции. Эти сведения появляются в виде объявлений, как правило, в начале кода шейдера.
-   Факторы тесселяции определяют, на сколько частей делить каждый участок.

## <a name="span-idoutputspanspan-idoutputspanspan-idoutputspanoutput"></a><span id="Output"></span><span id="output"></span><span id="OUTPUT"></span>Выходные данные


От 1 до 32 выходных контрольных точек, которые вместе образуют участок.

-   Шейдер выводит от 1 до 32 контрольных точек независимо от количества факторов тесселяции. Выходные контрольные точки шейдера поверхностей могут использоваться на этапе шейдера доменов. Данные констант участков могут использоваться шейдером доменов. Факторы тесселяции могут использоваться на [этапе тесселяции (TS)](tessellator-stage--ts-.md) и [этапе шейдера доменов (DS)](domain-shader-stage--ds-.md).
-   Если шейдер поверхностей назначит фактору тесселяции какого-либо ребра значение, меньшее или равное нули, либо не число, участок будет пропущен. В результате, этап тесселяции может выполняться или не выполняться, шейдер доменов не будет выполняться, а для указанного участка не будет выдано видимых выходных данных.

## <a name="span-idexamplespanspan-idexamplespanspan-idexamplespanexample"></a><span id="Example"></span><span id="example"></span><span id="EXAMPLE"></span>Пример


```
[patchsize(12)]
[patchconstantfunc(MyPatchConstantFunc)]
MyOutPoint main(uint Id : SV_ControlPointID,
     InputPatch<MyInPoint, 12> InPts)
{
     MyOutPoint result;
     
     ...
     
     result = TransformControlPoint( InPts[Id] );

     return result;
}
```

См. раздел [Инструкции по созданию шейдера поверхностей](https://msdn.microsoft.com/library/windows/desktop/ff476338).

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Статьи по теме


[Графический конвейер](graphics-pipeline.md)

 

 




