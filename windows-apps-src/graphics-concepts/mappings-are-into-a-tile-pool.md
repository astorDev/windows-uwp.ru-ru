---
title: Сопоставления в пуле плиток
description: При создании ресурса в качестве потокового плитки, составляющие этот ресурс, поступают из указаний на расположения в пуле плиток. Пул плиток — это пул памяти (в фоновом режиме которого выполняется одно или несколько выделений, которые не видны приложению).
ms.assetid: 58B8DBD5-62F5-4B94-8DD1-C7D57A812185
keywords:
- Сопоставления в пуле плиток
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: a0474345e21161e76fbfeebe0086e5d433b2d219
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57607359"
---
# <a name="mappings-are-into-a-tile-pool"></a>Сопоставления в пуле плиток


При создании ресурса в качестве потокового плитки, составляющие этот ресурс, поступают из указаний на расположения в пуле плиток. Пул плиток — это пул памяти (в фоновом режиме которого выполняется одно или несколько выделений, которые не видны приложению). Операционная система и видеодрайвер управляют этим пулом памяти, а занятый в памяти участок легко понятен приложению. Ресурсы потоковой передачи сопоставляют области размером 64 КБ путем указания на расположения в пуле плиток. Один из недостатков такой конфигурации заключается в том, что она позволяет нескольким ресурсам совместно и многократно использовать одни и те же плитки, а также повторно использовать одни и те же плитки в различных расположениях в ресурсе, если это необходимо.

Цена, которую приходится платить за гибкость заполнения плиток для ресурсов из пула плиток, состоит в том, что ресурсу приходится выполнять работу по определению и поддержанию соответствия плиток в пуле плиткам, необходимым ресурсам. Сопоставления плиток можно изменить. Кроме того, не все плитки в ресурсе необходимо сопоставлять единовременно; ресурс может иметь сопоставления **NULL**. Сопоставление **NULL** определяет плитку как недоступную с точки зрения ресурса, осуществляющего доступ к ней.

Можно создать несколько пулов плиток, и любое количество ресурсов потоковой передачи может иметь сопоставление с любым пулом плиток в одно и то же время. Пулы плиток также можно расширять и сокращать. Дополнительные сведения см. в разделе [Изменение размера пула плиток](tile-pool-resizing.md). Существует одно ограничение, направленное на упрощение реализации видеодрайвера и среды выполнения, которое заключается в том, что любой потоковый ресурс может иметь сопоставления только с одним пулом плиток в определенный момент времени (то есть, не может иметь одновременные сопоставления с несколькими пулами плиток).

Объем памяти, который связан с самим потоковым ресурсом (то есть, независимо от памяти пула плиток), примерно пропорционален числу плиток, фактически сопоставленных в пуле в любой момент времени. Для оборудования этот факт сводится к масштабированию объема памяти для хранения таблицы страниц примерно в соответствии с количеством сопоставленных плиток (например, с помощью многоуровневой таблицы страниц, если это необходимо).

Пул плиток можно считать полностью программной абстракцией, которая позволяет приложениям Direct3D эффективно создавать таблицы страниц на графическом процессоре (GPU) без необходимости получения сведений о реализации на низком уровне (или работать непосредственно с адресами-указателями). Пулы плиток не добавляют каких-либо дополнительных уровней косвенного обращения в оборудовании. Оптимизация одноуровневой таблицы страниц с помощью таких конструкций, как каталоги страницы, не зависит от концепции пула плиток.

Рассмотрим, какой объем памяти может потребоваться самой таблице страницы в худшем случае (хотя на практике требуется объем памяти, примерно пропорциональный сопоставляемым объектам).

Предположим, что каждая запись таблицы страниц состоит из 64 бит.

Для таблицы худшего случая страницы размер попадания для единую поверхность, учитывая ограничения ресурсов в Direct3D 11, предположим, что потоковой передачи ресурсов создается в формате 128 бит каждого элемента (например, RGBA число с плавающей запятой), поэтому плитки 64 КБ содержит только 4096 пикселей. Максимальное число, поддерживаемое [ **массивы Texture2DArray** ](https://msdn.microsoft.com/library/windows/desktop/ff471526) размер 16384\*16384\*2048 (но с помощью только одного mipmap) потребуется около 1 ГБ хранилища в таблице страниц, если полностью заполнен (не включая MIP-карты) с помощью 64-разрядная версия записи таблицы. Добавление MIP-карт приведет к увеличению пространства для полностью сопоставленной (в худшем случае) таблицы страниц примерно на треть, то есть приблизительно до 1,3 ГБ.

В этом случае обеспечивается доступ к примерно 10,6 терабайт адресуемой памяти. Однако может существовать ограничение на объем адресуемой памяти, которое сократит эти объемы, возможно, до значений около одного терабайта.

Еще один случай, которые следует учитывать будет только один [ **Texture2D** ](https://msdn.microsoft.com/library/windows/desktop/ff471525) потоковой передачи ресурса 16384\*16384 с форматом 32 бит каждого элемента, в том числе MIP-карты. Место, необходимое в полностью заполненной таблице страниц, составит около 170 КБ при 64-битных записях в таблице.

Наконец, рассмотрим пример с использованием формата BC, скажем, BC7 со 128 битами на плитку размером 4 × 4 пикселя. Это составит один байт на пиксель. Объект [ **массивы Texture2DArray** ](https://msdn.microsoft.com/library/windows/desktop/ff471526) : 16384\*16384\*2048 в том числе MIP-карты потребуется приблизительно 85 МБ, чтобы полностью заполнить эту память в таблице страниц. Это совсем неплохо с учетом того, что это позволит одному потоковому ресурсу включать в себя 550 гигапикселей (512 ГБ памяти в данном случае).

На практике настолько полные сопоставления не определяются с учетом того, что объем физической памяти не позволит выполнить сопоставление и адресацию одновременно в подобных масштабах. Однако при работе с пулом плиток приложения могут повторно использовать плитки (в качестве простого примера мы можем повторно использовать плитку для заполнения крупных черных областей изображения), что позволяет эффективно применять пул плиток (то есть, сопоставления таблицы страниц) как средство для сокращения объемов памяти.

Начальное содержимое таблицы страниц — **NULL** для всех записей. Приложения также не могут передавать исходные данные для содержимого памяти для поверхности, поскольку они запускаются без резервирования памяти.

## <a name="span-idin-this-sectionspanin-this-section"></a><span id="in-this-section"></span>В этом разделе


<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Раздел</th>
<th align="left">Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p><a href="tile-pool-creation.md">Плитка создания пула</a></p></td>
<td align="left"><p>Приложения могут создавать один или несколько пулов плиток для каждого устройства Direct3D. Общий размер каждого пула плитки предназначен только для максимального размера ресурсов Direct3D 11, который составляет приблизительно 1/4 ОЗУ GPU.</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="tile-pool-resizing.md">Изменение размера пула плитки</a></p></td>
<td align="left"><p>Увеличьте размер пула плиток, если приложению требуется более широкий рабочий набор для сопоставленных потоковых ресурсов, или уменьшите его, если требуется меньше места.</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="hazard-tracking-versus-tile-pool-resources.md">Отслеживанием и плитки пула ресурсов</a></p></td>
<td align="left"><p>Для ресурсов, не относящихся к потоковым, Direct3D может предотвратить определенные опасности во время отрисовки, но, поскольку отслеживание рисков для потоковых ресурсов требовалось бы на уровне плиток, отслеживание рисков во время отрисовки потоковых ресурсов может быть слишком дорогим.</p></td>
</tr>
</tbody>
</table>

 

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Связанные разделы


[Создание потоковой передачи ресурсов](creating-streaming-resources.md)

 

 




