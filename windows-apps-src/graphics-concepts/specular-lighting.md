---
title: Отраженное освещение
description: Отраженное освещение определяет яркие блики, которые возникают когда свет падает на плоскость объекта и отражается обратно в камеру.
ms.assetid: 71F87137-B00F-48CE-8E6A-F98A139A742A
keywords:
- Отраженное освещение
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 7f28f1f46cfd34ee1aab614c57dc99019dbd6111
ms.sourcegitcommit: b5c9c18e70625ab770946b8243f3465ee1013184
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/29/2018
ms.locfileid: "7990277"
---
# <a name="specular-lighting"></a>Отраженное освещение


*Отраженное освещение* определяет яркие блики, которые возникают когда свет падает на поверхность объекта и отражается обратно в сторону камеры. Отраженное освещение более интенсивно, чем рассеянный свет, и быстрее ослабевает на поверхности объекта. На расчет отраженного освещения уходит больше времени чем на рассеянное освещение, однако его применение добавляет поверхности больше заметных деталей.

Для моделирования отражения света система должна знать направление перемещения света и направление на глаз наблюдателя. Система использует упрощенную версию модели отражения света Фонга, в которой применяется вектор полупути для аппроксимации интенсивности отраженного света.

В состоянии освещения по умолчанию блики отражения не рассчитываются.

## <a name="span-idspecularlightingequationspanspan-idspecularlightingequationspanspan-idspecularlightingequationspanspecular-lighting-equation"></a><span id="Specular_Lighting_Equation"></span><span id="specular_lighting_equation"></span><span id="SPECULAR_LIGHTING_EQUATION"></span>Уравнение отраженного света


Отраженный свет описывается следующим уравнением.

|                                                                             |
|-----------------------------------------------------------------------------|
| Отраженный свет = Cₛ \* sum\[Lₛ \* (N · H)<sup>P</sup> \* Atten \* Spot\] |

 

Переменные, их типы и диапазоны, задаются следующим образом.

| Параметр    | Значение по умолчанию | Тип                                                             | Описание                                                                                            |
|--------------|---------------|------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| Cₛ           | (0,0,0,0)     | Красный, зеленый, синий цвет и альфа-прозрачность (значения с плавающей запятой) | Отраженный цвет.                                                                                        |
| сумма          | Н/Д           | Н/Д                                                              | Суммирование каждого компонента отраженного света.                                                          |
| N            | Н/Д           | 3D-вектор (x, y и z ,значения с плавающей точкой)                    | Нормаль вершины.                                                                                         |
| H            | Н/Д           | 3D-вектор (x, y и z ,значения с плавающей точкой)                    | Вектор полупути. См. раздел по вектору полупути.                                                |
| <sup>P</sup> | 0.0           | Число с плавающей запятой                                                   | Сила отраженного света Диапазон от 0 до +бесконечность                                                     |
| Lₛ           | (0,0,0,0)     | Красный, зеленый, синий цвет и альфа-прозрачность (значения с плавающей запятой) | Цвет отраженного света.                                                                                  |
| Atten        | Н/Д           | Число с плавающей запятой                                                   | Значение ослабления света. См. [фактор ослабления и свечения](attenuation-and-spotlight-factor.md). |
| Spot         | Н/Д           | Число с плавающей запятой                                                   | Фактор свечения См. [фактор ослабления и свечения](attenuation-and-spotlight-factor.md).        |

 

Значение для Cₛ — либо:

-   цвет вершины 1, если источником материала отражения является цвет вершины рассеяния и цвет первой вершины указан в объявлении вершины.
-   цвет вершины 2, если источником материала отражения является цвет вершины отражения и цвет второй вершины указан в объявлении вершины.
-   цвет отражения материала

**Примечание**  Если используется любой параметр источником материала отражения и цвет вершины не предоставляется, то используется цвет отражения материала.

 

Компоненты отражения ужимаются до диапазона 0-255, после отдельной обработки и интерполяции всех источников света.

## <a name="span-idthehalfwayvectorspanspan-idthehalfwayvectorspanspan-idthehalfwayvectorspanthe-halfway-vector"></a><span id="The_Halfway_Vector"></span><span id="the_halfway_vector"></span><span id="THE_HALFWAY_VECTOR"></span>Вектор полупути


Вектор полупути (H) существует посередине между двумя векторами: вектором из вершины объекта к источнику света и вектором из вершины объекта к положению камеры. Direct3D предоставляет два способа расчета вектора полупути. Если включены блики, рассчитываемые относительно камеры (вместо ортогональных бликов), система вычисляет вектор полупути, используя позицию камеры и позицию вершины совместно с вектором направления света. Это демонстрируется в следующей формуле:

|                                           |
|-------------------------------------------|
| H = norm(norm(Cₚ - Vₚ) + L<sub>dir</sub>) |

 

| Параметр       | Значение по умолчанию | Тип                                          | Описание                                                  |
|-----------------|---------------|-----------------------------------------------|--------------------------------------------------------------|
| Cₚ              | Н/Д           | 3D-вектор (x, y и z ,значения с плавающей точкой) | Позиция камеры.                                             |
| Vₚ              | Н/Д           | 3D-вектор (x, y и z ,значения с плавающей точкой) | Положение вершины.                                             |
| L<sub>dir</sub> | Н/Д           | 3D-вектор (x, y и z ,значения с плавающей точкой) | Вектор направления из положения вершины к позиции источника освещения. |

 

Нахождение вектора полупути таким образом может быть затратно в плане вычислений. В случае когда применяются ортогональные блики (вместо бликов относительно камеры), система действует так, будто точка наблюдения бесконечно удалена по оси z. Это отражено в следующей формуле.

|                                     |
|-------------------------------------|
| H = norm((0,0,1) + L<sub>dir</sub>) |

 

Этот вариант требует меньше вычислений, но он гораздо менее точен, поэтому лучше всего применять его в приложениях с ортогональной проекцией.

## <a name="span-idexamplespanspan-idexamplespanspan-idexamplespanexample"></a><span id="Example"></span><span id="example"></span><span id="EXAMPLE"></span>Пример


В этом примере объект расцвечивается с помощью цвет отраженного света сцены и цвета отражения материала.

Согласно уравнению итоговый цвет для вершин объекта будет комбинацией цвета материала и цвета света.

На следующих двух иллюстрациях показан цвет отражения материала, серый, и цвет отраженного света, белый.

![Иллюстрация серого шара](images/amb1.jpg)![Иллюстрация белой сферы](images/lightwhite.jpg)

Итоговый блик показан на следующей иллюстрации.

![Иллюстрация блика](images/lights.jpg)

Объединение блика с рассеянным и общим светом дает следующий результат. Применение всех трех типов освещения дает более реалистичное изображение объекта.

![Иллюстрация сочетания бликов, общего и рассеянного света](images/lightads.jpg)

Отраженный свет требуют больше вычислительных ресурсов, чем рассеянный свет. Обычно он применяется для предоставления визуальных подсказок о материале поверхности. Блики варьируются по размеру и цвету для разных материалов поверхности.

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Статьи по теме


[Математические аспекты освещения](mathematics-of-lighting.md)

 

 




