---
title: Типы ресурсов
description: У различных типов ресурсов разный макет (или тип размещения в памяти).
ms.assetid: BCDDF227-1837-44DA-ABD4-E39BCFF2B8EF
keywords:
- Типы ресурсов
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 9712b4498b03460568d20d4c8e27172ad5c14360
ms.sourcegitcommit: ca1b5c3ab905ebc6a5b597145a762e2c170a0d1c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79210100"
---
# <a name="resource-types"></a>Типы ресурсов


У различных типов ресурсов разный макет (или тип размещения в памяти). Все ресурсы, используемые конвейером Direct3D, основаны на двух базовых типах: [буферах](#buffer-resources) и [текстурах](#texture-resources). Буфер — это коллекция необработанных данных (элементов); текстуры — это коллекция текселей (элементов текстуры).

Указать макет ресурса (тип размещения в памяти) можно двумя способами.

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Элемент</th>
<th align="left">Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p><span id="Typed"></span><span id="typed"></span><span id="TYPED"></span>Типизированный</p></td>
<td align="left"><p>Полное указание типа при создании ресурса.</p></td>
</tr>
<tr class="even">
<td align="left"><p><span id="Typeless"></span><span id="typeless"></span><span id="TYPELESS"></span>Бестиповыми</p></td>
<td align="left"><p>Тип указывается полностью, когда ресурс привязывается к конвейеру.</p></td>
</tr>
</tbody>
</table>

 

## <a name="span-idbuffer_resourcesspanspan-idbuffer_resourcesspanspan-idbuffer_resourcesspanspan-idbuffer-resourcesspanbuffer-resources"></a><span id="Buffer_Resources"></span><span id="buffer_resources"></span><span id="BUFFER_RESOURCES"></span><span id="buffer-resources"></span>Ресурсы буфера


Буферный ресурс — это коллекция полностью типизированных данных. Сам буфер содержит элементы. Элемент состоит из 1–4 компонентов. Примеры типов элементов данных: упакованное значение данных (например, R8G8B8A8), 8-разрядное целое число, четыре 32-разрядных числа с плавающей точкой. Эти типы используются для хранения таких данных, как позиционный вектор, вектор нормали, координата текстуры в буфере вершин, индекс в буфере индексов или состояние устройства.

Буфер создается как неструктурированный ресурс. Поскольку он неструктурированный, буфер не может содержать какие-либо уровни MIP, не может использовать фильтрацию при чтении и не может подвергаться множественной дискретизации.

### <a name="span-idbuffer_typesspanspan-idbuffer_typesspanspan-idbuffer_typesspanbuffer-types"></a><span id="Buffer_Types"></span><span id="buffer_types"></span><span id="BUFFER_TYPES"></span>Типы буферов

-   [Буфер вершин](#vertex-buffer)
-   [Буфер индексов](#index-buffer)
-   [Буфер констант](#shader-constant-buffer)

### <a name="span-idvertex_bufferspanspan-idvertex_bufferspanspan-idvertex_bufferspanspan-idvertex-bufferspanvertex-buffer"></a><span id="Vertex_Buffer"></span><span id="vertex_buffer"></span><span id="VERTEX_BUFFER"></span><span id="vertex-buffer"></span>Буфер вершин

Буфер — это коллекция элементов, а буфер вершин содержит данные вершин. Самый простой пример — это буфер вершин, который содержит один тип данных, например данные о положении. Его можно изобразить, как на следующем рисунке.

![иллюстрация буфера вершин, который содержит данные положения](images/d3d10-resources-single-element-vb2.png)

Чаще всего буфер вершин содержит все данные, необходимые для полного описания трехмерных вершин. Примером этого может быть буфер вершин, который содержит положение, нормаль и координаты текстуры для каждой вершины. Эти данные обычно упорядочены в виде наборов элементов для каждой вершины, как показано на следующем рисунке.

![иллюстрация буфера вершин, который содержит данные положения, нормали и текстуры](images/d3d10-vertex-buffer-element.png)

Этот буфер вершин содержит данные для восьми вершин. Каждая вершина хранит три элемента (положение, нормаль и координаты текстуры). Положение и нормаль обычно задаются с помощью трех 32-разрядных значений с плавающей запятой, а координаты текстуры — с помощью двух 32-разрядных значений с плавающей запятой.

Для доступа к данным из буфера вершин необходимо знать, к какой вершине требуется доступ, и следующие параметры буфера:

-   *Offset* — число байтов от начала буфера до данных для первой вершины;
-   *BaseVertexLocation* — количество байтов от смещения до первой вершины, используемой с помощью соответствующего вызова рисования.

Для создания буфера вершин необходимо определить его макет, создав объект макета входных данных. После создания объекта макета входных данных привяжите его к этапу сборщика входных данных (IA).

### <a name="span-idindex_bufferspanspan-idindex_bufferspanspan-idindex_bufferspanspan-idindex-bufferspanindex-buffer"></a><span id="Index_Buffer"></span><span id="index_buffer"></span><span id="INDEX_BUFFER"></span><span id="index-buffer"></span>Буфер индексов

Буфер индексов содержит последовательный набор 16-разрядных или 32-разрядных индексов; каждый индекс используется для идентификации вершины в буфере вершин. Использование буфера индексов с одним или несколькими буферами вершин для передачи данных этапу IA называется индексированием. Буфер индексов можно изобразить, как на следующем рисунке.

![иллюстрация буфера индексов](images/d3d10-index-buffer.png)

Последовательные индексы, хранящиеся в буфере индексов, обнаруживаются по следующим параметрам:

-   *Offset* — количество байтов от начала буфера до первого индекса;
-   *StartIndexLocation* — количество байтов от смещения до первой вершины, используемой с помощью соответствующего вызова рисования;
-   *IndexCount* — число индексов для отрисовки.

Буфер индексов может объединить несколько линий или полос треугольников ([топологий примитивов](primitive-topologies.md)), разделяя каждый элемент индексом вырезания полосы. Индекс вырезания полосы позволяет нарисовать несколько линий или полос треугольников в одном вызове. Индекс вырезания полосы — это максимальное возможное значение индекса (0xffff для 16-разрядного индекса и 0xffffffff — для 32-разрядного). Индекс вырезания полос сбрасывает порядок поворота в индексированных примитивах и позволяет отказаться от вырожденных треугольников, которые в противном случае могут потребоваться для обеспечения правильной порядка поворота в полосе треугольников. Ниже представлен пример полоса индекса вырезания полосы.

![иллюстрация индекса вырезания полосы](images/d3d10-ia-strips-cut-value.png)

### <a name="span-idshader_constant_bufferspanspan-idshader_constant_bufferspanspan-idshader_constant_bufferspanspan-idshader-constant-bufferspanconstant-buffer"></a><span id="Shader_Constant_Buffer"></span><span id="shader_constant_buffer"></span><span id="SHADER_CONSTANT_BUFFER"></span><span id="shader-constant-buffer"></span>Буфер констант

В Direct3D есть буфер для предоставления констант шейдера, который называются буфером констант шейдера или просто буфером констант. Он выглядит как буфер вершин с одним элементом, как показано на следующем рисунке.

![иллюстрация буфера констант шейдера](images/d3d10-shader-resource-buffer.png)

Каждый элемент хранит определяемую форматом данных константу с числом компонентов от 1 до 4.

Буферы констант уменьшают пропускную способность, необходимую для обновления констант шейдера, позволяя сгруппировать и обработать их одновременно, без отдельных вызовов для обработки каждой константы.

Шейдер продолжает считывать переменные в буфере констант напрямую по имени переменной, как и переменные, которые не входят в буфера констант.

На каждом этапе шейдера можно определить до 15 буферов констант шейдера, причем каждый буфер может содержать до 4096 констант.

Буфер констант можно использовать для хранения результатов этапа вывода потока.

Пример объявления буфера констант в шейдере см. в разделе [Константы шейдера (DirectX HLSL)](https://docs.microsoft.com/windows/desktop/direct3dhlsl/dx-graphics-hlsl-constants).

## <a name="span-idtexture_resourcesspanspan-idtexture_resourcesspanspan-idtexture_resourcesspanspan-idtexture-resourcesspantexture-resources"></a><span id="Texture_Resources"></span><span id="texture_resources"></span><span id="TEXTURE_RESOURCES"></span><span id="texture-resources"></span>Ресурсы текстуры


Текстурный ресурс — это структурированный набор данных, предназначенный для хранения текселей. В отличие от буферов текстуры можно фильтровать по дискретизаторам текстур во время их считывания блоками шейдера. Тип текстуры влияет на способ ее фильтрации. Тексель представляет собой наименьший элемент текстуры, который может использоваться конвейером для чтения или записи. Каждый шаг текселя содержит от 1 до 4 компонентов, расположенных в одном из форматов DXGI (см. [ **\_ный формат**](https://docs.microsoft.com/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format)DXGI).

Текстуры создаются как структурированные ресурсы, чтобы их размер был известен. Однако каждая текстура может быть типизированной или не иметь типа при создании ресурса, если тип полностью задается с помощью представления при привязке текстуры к конвейеру.

-   [Типы текстур](#texture-types)
-   [Подресурсов](#subresources)
-   [Строгая и слабая типизация](#typed)

### <a name="span-idtexture_typesspanspan-idtexture_typesspanspan-idtexture_typesspanspan-idtexture-typesspantexture-types"></a><span id="Texture_Types"></span><span id="texture_types"></span><span id="TEXTURE_TYPES"></span><span id="texture-types"></span>Типы текстур

Существует несколько типов текстур: одно-, двух-, и трехмерный; каждый из них может быть создан с использованием MIP-карт и без них. Direct3D также поддерживает массивы текстур и текстуры с множественной дискретизацией.

-   [Текстура 1D](#texture1d-resource)
-   [массив одномерной текстуры](#texture1d-array-resource)
-   [Двухмерная текстура и массив двумерных текстур](#texture2d-resource)
-   [Трехмерная текстура](#texture3d-resource)

### <a name="span-idtexture1d_resourcespanspan-idtexture1d_resourcespanspan-idtexture1d_resourcespanspan-idtexture1d-resourcespan1d-texture"></a><span id="Texture1D_Resource"></span><span id="texture1d_resource"></span><span id="TEXTURE1D_RESOURCE"></span><span id="texture1d-resource"></span>Текстура 1D

Одномерная текстура в самом простом своем виде содержит данные текстуры, к которым можно обращаться по одной координате текстуры; ее можно отобразить как массив текселей, как показано на следующем рисунке.

![иллюстрация одномерной текстуры](images/d3d10-1d-texture.png)

Каждый тексель содержит несколько цветовых компонентов в зависимости от формата хранимых данных. Повышая сложность, можно создать одномерную текстуру с уровнями MIP-карт, как показано на следующем рисунке.

![иллюстрация одномерной текстуры с уровнями MIP-карт](images/d3d10-resource-texture1d.png)

Уровень MIP-карты — это текстура, которая меньше вышестоящего уровня на число, соответствующее степени двух. Самый верхний уровень содержит наиболее больше всего деталей, а для каждого последующего уровня детализация уменьшается. Для одномерной MIP-1карты наименьший уровень содержит один тексель. Различные уровни определяются с помощью индекса LOD (уровень детализации). Вы можете можно использовать LOD для доступа к более мелким текстурам при отрисовке геометрических фигур, которые далеко от камеры.

### <a name="span-idtexture1d_array_resourcespanspan-idtexture1d_array_resourcespanspan-idtexture1d_array_resourcespanspan-idtexture1d-array-resourcespan1d-texture-array"></a><span id="Texture1D_Array_Resource"></span><span id="texture1d_array_resource"></span><span id="TEXTURE1D_ARRAY_RESOURCE"></span><span id="texture1d-array-resource"></span>массив одномерной текстуры

В Direct3D 10 также есть новая структура данных для массива текстур. Массив одномерных текстур концептуально выглядит как на следующем рисунке.

![иллюстрация массива одномерных текстур](images/d3d10-resource-texture1darray.png)

Этот массив текстур содержит три текстуры. Ширина всех трех текстур равна 5 (это число элементов на первом уровне). Каждая текстура также содержит трехуровневую MIP-карту.

Все массивы текстур в Direct3D однородные, это означает, что у каждой текстуры в массиве должна быть одинаковый формат данных и размер (в том числе ширина текстуры и количество уровней MIP). Вы можете создавать массивы текстур различных размеров при условии, что все текстуры в отдельном массиве соответствуют друг другу по размеру.

### <a name="span-idtexture2d_resourcespanspan-idtexture2d_resourcespanspan-idtexture2d_resourcespanspan-idtexture2d-resourcespan2d-texture-and-2d-texture-array"></a><span id="Texture2D_Resource"></span><span id="texture2d_resource"></span><span id="TEXTURE2D_RESOURCE"></span><span id="texture2d-resource"></span>Двухмерная текстура и массив двумерных текстур

Ресурс Texture2D содержит двухмерную сетку текселей. На каждый тексель указывает вектор u, v. Поскольку это текстурный ресурс, он может содержать уровни MIP и подресурсы. Полностью заполненный ресурс двухмерных текстур соответствует изображению на следующем рисунке.

![иллюстрация ресурса двухмерной текстуры](images/d3d10-resource-texture2d.png)

Этот текстурный ресурс содержит одну текстуру 3 x 5 с тремя уровнями MIP.

Ресурс Texture2DArray — это однородный массив двухмерных текстур (формат данных и размер всех текстур, включая уровни MIP, совпадают). Макет этого ресурса похож на макет одномерной текстуры за исключением того, что текстуры теперь содержат двухмерные данные, поэтому ресурс выглядит, как на следующем рисунке.

![иллюстрация массива ресурсов двухмерных текстур](images/d3d10-resource-texture2darray.png)

Этот массив текстур содержит три текстуры; каждая текстура имеет размер 3 x 5 и два уровня MIP.

### <a name="span-idtexture2darray_resource_as_a_texture_cubespanspan-idtexture2darray_resource_as_a_texture_cubespanspan-idtexture2darray_resource_as_a_texture_cubespanusing-a-texture2darray-as-a-texture-cube"></a><span id="Texture2DArray_Resource_as_a_Texture_Cube"></span><span id="texture2darray_resource_as_a_texture_cube"></span><span id="TEXTURE2DARRAY_RESOURCE_AS_A_TEXTURE_CUBE"></span>Использование Texture2DArray в качестве куба текстуры

Куб текстур — это массив двухмерных текстур, содержащий 6 текстур, по одной на каждую грань куба. Полностью заполненный куб текстур выглядит, как изображение на следующем рисунке.

![иллюстрация массива ресурсов двухмерных текстур, представляющих куб текстур](images/d3d10-resource-texturecube.png)

Чтение массива двухмерных текстур, содержащего 6 текстур, может производиться из шейдеров со встроенными функциями карт куба, после их привязки к конвейеру с представлением кубической текстуры. Обращение к кубам текстур производится из шейдера с трехмерным вектором, направленным от центра куба текстур.

### <a name="span-idtexture3d_resourcespanspan-idtexture3d_resourcespanspan-idtexture3d_resourcespanspan-idtexture3d-resourcespan3d-texture"></a><span id="Texture3D_Resource"></span><span id="texture3d_resource"></span><span id="TEXTURE3D_RESOURCE"></span><span id="texture3d-resource"></span>Трехмерная текстура

Ресурс Texture3D (или объемная текстура) содержит трехмерный объем текселей. Поскольку это ресурс текстуры, он может содержать уровни MIP. Полностью заполненная трехмерная текстура выглядит, как изображение на следующем рисунке.

![иллюстрация ресурса трехмерной текстуры](images/d3d10-resource-texture3d.png)

При привязке фрагмента MIP-карты трехмерной текстуры в качестве целевых выходных данных отрисовки (с использованием представления целевого объекта отрисовки) трехмерная текстура ведет себя аналогично массиву двухмерных текстур с n фрагментами. Конкретный фрагмент отрисовки выбирается из этапа шейдера геометрии.

Понятие массива трехмерных текстур не существует, соответственно, подресурс трехмерной текстуры — это один уровень MIP-карты.

### <a name="span-idsubresourcesspanspan-idsubresourcesspanspan-idsubresourcesspansubresources"></a><span id="Subresources"></span><span id="subresources"></span><span id="SUBRESOURCES"></span>Подресурсов

Direct3D API ссылается на все ресурсы или подмножества ресурсов. Указание часть ресурсов, в Direct3D введен термин *подресурс*, который означает подмножество ресурса.

Буфер определяется как один подресурс. Текстуры немного более сложны, так как существует несколько типов текстур (одномерные, двухмерные и т. д.), некоторые из которых поддерживают уровни MIP или массивы текстур. Самый простой случай — это одномерная текстура, которая определяется как один подресурс (см. следующий рисунок).

![иллюстрация одномерной текстуры](images/d3d10-1d-texture.png)

Это означает, что массив текселей, из которых состоит одномерная текстура, содержится в одном подресурсе.

Если развернуть одномерную текстуру с тремя уровнями MIP, ее можно показать следующим образом.

![иллюстрация одномерной текстуры с уровнями MIP-карт](images/d3d10-resource-texture1d.png)

Это можно представить как одну текстуру, которая состоит из трех подтекстур. Каждый подтекстура считается подресурсом, поэтому эта одномерная текстура содержит три подресурса. Подтекстура (или подресурс) может индексироваться с помощью уровня детализации (LOD) одной текстуры. При использовании массива текстур для доступа к определенной подтекстуре требуется LOD и конкретная текстура. Или же API объединяет эти два фрагмента информации в один начинающийся с нуля индекс подресурса, как показано здесь.

![иллюстрация начинающегося с нуля индекса подресурса](images/d3d10-resource-texture1darray-sub-indexing.png)

### <a name="span-idselecting_subresourcesspanspan-idselecting_subresourcesspanspan-idselecting_subresourcesspanselecting-subresources"></a><span id="Selecting_Subresources"></span><span id="selecting_subresources"></span><span id="SELECTING_SUBRESOURCES"></span>Выбор подресурсов

Некоторые API обращаются к ресурсу целиком, а другие — только к части ресурса. Последние API обычно используют описание представления для указаниях нужных подресурсов.

На этих рисунках показаны термины, используемые в описание представления при доступе к массиву текстур.

### <a name="span-idarray_slicespanspan-idarray_slicespanspan-idarray_slicespanarray-slice"></a><span id="Array_Slice"></span><span id="array_slice"></span><span id="ARRAY_SLICE"></span>Срез массива

В массиве текстур, где у каждой текстуры есть MIP-карты, срез массива (представленный белым прямоугольником) содержит одну текстуру и все ее подтекстуры, как показано на следующем рисунке.

![иллюстрация среза массива](images/d3d10-resource-array-slice.png)

### <a name="span-idmip_slicespanspan-idmip_slicespanspan-idmip_slicespanmip-slice"></a><span id="Mip_Slice"></span><span id="mip_slice"></span><span id="MIP_SLICE"></span>Срез MIP

Срез MIP (представленный белым прямоугольником) содержит один уровень MIP-карты для каждой текстуры в массиве, как показано на следующем рисунке.

![иллюстрация среза MIP](images/d3d10-resource-mip-slice.png)

### <a name="span-idselecting_a_single_subresourcespanspan-idselecting_a_single_subresourcespanspan-idselecting_a_single_subresourcespanselecting-a-single-subresource"></a><span id="Selecting_a_Single_Subresource"></span><span id="selecting_a_single_subresource"></span><span id="SELECTING_A_SINGLE_SUBRESOURCE"></span>Выбор одного подресурса

Эти два типа срезов можно использовать для выбора одного подресурса, как показано на следующем рисунке.

![иллюстрация выбора подресурса с помощью среза массива и среза MIP](images/d3d10-resource-subresources-1.png)

### <a name="span-idselecting_multiple_subresourcesspanspan-idselecting_multiple_subresourcesspanspan-idselecting_multiple_subresourcesspanselecting-multiple-subresources"></a><span id="Selecting_Multiple_Subresources"></span><span id="selecting_multiple_subresources"></span><span id="SELECTING_MULTIPLE_SUBRESOURCES"></span>Выбор нескольких подресурсов

Или можно использовать эти два типа срезов с количеством уровней MIP-карты или числом текстур, чтобы выбрать несколько подресурсов.

![иллюстрация выбора нескольких подресурсов](images/d3d10-resource-subresources-2.png)

Независимо от типа текстуры (с MIP-картами или без, с массивом текстур или без) часто существуют вспомогательные функции для вычисления индекса конкретного подресурса.

### <a name="span-idtypedspanspan-idtypedspanspan-idtypedspanstrong-vs-weak-typing"></a><span id="Typed"></span><span id="typed"></span><span id="TYPED"></span>Строгая и слабая типизация

При создании полностью типизированного ресурса он может использовать только тот формат, с которым был создан. Это позволяет среде выполнения оптимизировать доступ, особенно если ресурс создается с флагами, указывающими, что приложение не может его сопоставить. Ресурсы, создаваемые с помощью определенного типа, не могут интерпретироваться с помощью механизма представления.

В нетипизированном ресурсе тип данных при его создании неизвестен. Приложению необходимо выбрать один из доступных нетипизированных форматов. Вам следует указать размер выделяемой области памяти и то, потребуется ли среде выполнения создать подтекстуры в MIP-карте.

Однако формат данных, который определяет, будет ли память интерпретироваться как целые числа, значения с плавающей запятой, беззнаковые целые числа и т. д., не определен, пока ресурс не будет привязан к конвейеру с представлением. Так как формат текстуры остается произвольным до привязки текстуры к конвейеру, ресурс называется хранилищем с нестрогой типизацией. Преимущество такого типа хранилища заключается в том, что его можно повторно использовать или интерпретировать (в другом формате), пока компонентный бит формата соответствует разрядности старого формата.

Один ресурс можно привязать к нескольким этапам конвейера, если у каждой из них есть уникального представление, которое полностью квалифицирует форматы в каждом расположении. Например, ресурс, созданный в формате без типа, можно одновременно использовать как тип FLOAT и UINT в разных местах в конвейере.

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>См. также


[Ресурсы](resources.md)
