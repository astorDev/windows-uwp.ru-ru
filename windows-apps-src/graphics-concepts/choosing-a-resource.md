---
title: Выбор ресурса
description: Ресурс — это коллекция данных, используемых трехмерным конвейером.
ms.assetid: 6BAD6287-2930-42F8-BF51-69A379D1D2C3
keywords:
- Выбор ресурса
author: michaelfromredmond
ms.author: mithom
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 8ddac5d69ce0c562129255832adfc49380946510
ms.sourcegitcommit: e38b334edb82bf2b1474ba686990f4299b8f59c7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2018
ms.locfileid: "6847858"
---
# <a name="choosing-a-resource"></a>Выбор ресурса


Ресурс — это коллекция данных, используемых в 3D-конвейере. Создание ресурсов и определение их поведения — первый этап программирования вашего приложения. В этом руководстве рассматриваются основные темы по выбору ресурсов, необходимых для приложения.

## <a name="span-ididentifybindingspanspan-ididentifybindingspanspan-ididentifybindingspanidentify-pipeline-stages-that-need-resources"></a><span id="Identify_Binding"></span><span id="identify_binding"></span><span id="IDENTIFY_BINDING"></span>Определение этапов конвейера, которым требуются ресурсы


Первый шаг — выбор этапа (или этапов) [графического конвейера](graphics-pipeline.md), который будет использовать ресурс. То есть необходимо определить каждый этап, который будет считывать данные из ресурса, а также этапы, которые будут записывать данные в ресурс. Знание этапов конвейера, на которых будут использоваться ресурсы, определяет API, которые будут вызываться, чтобы привязать ресурс к этапу.

В этой таблице перечислены типы ресурсов, которые могут быть привязаны к каждому этапу конвейера. Здесь указано, может ли ресурс быть привязан как входные или выходные данные.

| Этап конвейера  | В/Из | Ресурс               | Тип ресурса                           |
|-----------------|--------|------------------------|-----------------------------------------|
| Сборщик входных данных | В     | Буфер вершин          | Буфер                                  |
| Сборщик входных данных | В     | Буфер индексов           | Буфер                                  |
| Этапы шейдера   | В     | Представление ресурсов шейдера    | Буфер, Texture1D, Texture2D, Texture3D |
| Этапы шейдера   | В     | Буфер констант шейдера | Буфер                                  |
| Выходной поток   | Из    | Буфер                 | Буфер                                  |
| Средство слияния выхода   | Из    | Представление целевого объекта отрисовки     | Буфер, Texture1D, Texture2D, Texture3D |
| Средство слияния выхода   | Из    | Представления глубины/трафарета     | Texture1D, Texture2D                    |

 

## <a name="span-ididentifyusagespanspan-ididentifyusagespanspan-ididentifyusagespanidentify-how-each-resource-will-be-used"></a><span id="Identify_Usage"></span><span id="identify_usage"></span><span id="IDENTIFY_USAGE"></span>Определение способа использования каждого ресурса


Выбрав этапы конвейера, которые будут использоваться приложением (и, следовательно, ресурсы, которые потребуются на каждом этапе), необходимо определить, как будет использоваться каждый ресурс, то есть будет ли к нему осуществляться доступ с ЦП или графического процессора.

Оборудование, на котором выполняется ваше приложение, будет иметь как минимум один ЦП и один графический процессор. Чтобы выбрать значение использования, подумайте, какой тип процессора из представленных здесь вариантов должен выполнять чтение или запись в ресурс.

| Использование ресурсов | Возможность обновления                    | Частота обновления |
|----------------|--------------------------------------|---------------------|
| По умолчанию        | Графический процессор                                  | редко        |
| Динамическое        | ЦП                                  | часто          |
| Промежуточное        | Графический процессор                                  | Неприменимо                 |
| Постоянное      | ЦП (только во время создания ресурсов) | Неприменимо                 |

 

Использование по умолчанию следует использовать для ресурса, который, как ожидается, будет обновляться ЦП достаточно редко (реже, чем раз в кадр). В идеале ЦП никогда не будет выполнять прямую запись в ресурс с использованием по умолчанию, чтобы избежать возможного снижения производительности.

Динамическое использование следует использовать для ресурса, который ЦП обновляет достаточно часто (раз в кадр или чаще). Типичный сценарий для динамического ресурса заключается в создании динамических буферов вершин и индексов, которые во время выполнения будут заполняться данными о геометрии, видимой с точки обзора пользователя каждого кадра. Эти буферы будут использоваться исключительно для отрисовки геометрии, видимой пользователю этого кадра.

Промежуточное использование должно использоваться для копирования данных в другие ресурсы и из них. Типичный сценарий заключается в копировании данных из ресурса с использованием по умолчанию (недоступного для ЦП) в ресурс с промежуточным использованием (доступный для ЦП).

Неизменяемые ресурсы следует использовать, если данные в ресурсе не будут меняться никогда.

Ситуацию можно рассмотреть и с другой точки зрения— с точки зрения того, какие действия приложение будет выполнять с ресурсом.

| Использование ресурса приложением     | Использование ресурсов       |
|---------------------------------------|----------------------|
| Однократная загрузка, отсутствие обновлений            | Неизменяемое или по умолчанию |
| Приложение многократно заполняет ресурс | Динамическое              |
| Отрисовка в текстуру                     | По умолчанию              |
| Доступ ЦП к данным графического процессора                | Промежуточное              |

 

Если вы не уверены, какое использование выбрать, начните с использования по умолчанию, поскольку это самый распространенный сценарий. Буфер констант шейдера — это тип ресурса, который должен всегда иметь использование по умолчанию.

## <a name="span-idresourcetypesandpipelinestagesspanspan-idresourcetypesandpipelinestagesspanspan-idresourcetypesandpipelinestagesspanbinding-resources-to-pipeline-stages"></a><span id="Resource_Types_and_Pipeline_stages"></span><span id="resource_types_and_pipeline_stages"></span><span id="RESOURCE_TYPES_AND_PIPELINE_STAGES"></span>Привязка ресурсов к этапам конвейера


Ресурс можно привязать к нескольким этапам конвейера одновременно при условии, что ограничения, заданные при создании ресурса, соблюдены. Эти ограничения указаны как флаги использования, флаги привязки или флаги доступа ЦП. В частности, ресурс можно привязать как входной и выходной объект одновременно, при условии что запись и чтение ресурса не могут осуществляться одновременно.

При привязке ресурса подумайте о том, как ЦП и графический процессор будет осуществлять доступ к ресурсу. Ресурсы, которые предназначены для одной цели (без множественного использования, привязок и флагов доступа ЦП), в большинстве случаев обеспечивают более высокую производительность

Например, рассмотрим случай с однобуферной прорисовкой, используемой в качестве текстуры несколько раз. Возможно, работа пойдет быстрее с двумя ресурсами: однобуферной прорисовкой и текстурой, используемой в качестве ресурса шейдера. Каждый ресурс будет использовать только один флаг привязки, обозначающий "однобуферная прорисовка" или "ресурс шейдера". Данные будут копироваться из текстуры однобуферной прорисовки в текстуру шейдера.

Метод, описанный в этом примере, может способствовать повышению производительности путем изоляции записи в однобуферную прорисовку от чтения из текстуры шейдера. Единственный способ гарантировать это— это реализовать оба подхода и измерять разницу с производительности конкретного приложения.

## <a name="span-idrelated-topicsspanrelated-topics"></a><span id="related-topics"></span>Статьи по теме


[Ресурсы](resources.md)

 

 




