---
author: normesta
ms.assetid: 23FE28F1-89C5-4A17-A732-A722648F9C5E
title: Асинхронное программирование
description: В этом разделе описывается асинхронное программирование на универсальной платформы Windows (UWP), а также его представление в C#, Microsoft Visual Basic.NET, C++ и JavaScript.
ms.author: normesta
ms.date: 05/14/2018
ms.topic: article
keywords: windows 10, uwp, асинхронный
ms.localizationpriority: medium
ms.openlocfilehash: 04d91fc7166812f53e8b2238b1a47c8aeb9c425f
ms.sourcegitcommit: f2c9a050a9137a473f28b613968d5782866142c6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/09/2018
ms.locfileid: "6252059"
---
# <a name="asynchronous-programming"></a>Асинхронное программирование
В этом разделе описывается асинхронное программирование на универсальной платформы Windows (UWP), а также его представление в C#, Microsoft Visual Basic.NET, C++ и JavaScript.

Использование асинхронного программирования позволит вашему приложению отвечать на запросы во время выполнения длительных операций. Например, приложение, скачивающее содержимое из Интернета, может ожидать получения данных несколько секунд. Если для получения содержимого вы использовали синхронный метод в потоке пользовательского интерфейса, приложение блокируется до момента возврата из метода. Приложение при этом не будет отвечать на действия пользователя и будет казаться зависшим, что может вызвать раздражение пользователя. В такой ситуации гораздо эффективнее использовать асинхронное программирование, которое позволит приложению работать и отвечать на запросы пользовательского интерфейса, одновременно ожидая завершения операции.

Для методов, выполняющихся в течение длительного времени, применение асинхронного программирования является нормой, и в этом смысле UWP — не исключение. JavaScript, C#, Visual Basic и C++ каждого этих языках есть поддержка асинхронных методов.

## <a name="asynchronous-programming-in-the-uwp"></a>Асинхронное программирование в UWP
Многие компоненты UWP, такие как [**MediaCapture**](https://msdn.microsoft.com/library/windows/apps/BR241124) API-интерфейсы и [**StorageFile**](https://msdn.microsoft.com/library/windows/apps/BR227171) API, представлены в виде асинхронных API. По соглашению имена асинхронных API заканчиваются словом «Async» для указания, что их частично вероятнее всего вступит в силу после элемента управления возвращаемый вызывающей стороне.

При использовании асинхронных API в коде вашего приложения UWP согласованно выполняются неблокирующие вызовы. Если вы будете применять эти асинхронные шаблоны в собственных определениях API, вызывающие объекты будут предсказуемо интерпретировать и использовать ваш код.

Вот несколько распространенных задач, требующих вызова асинхронных API UWP.

-   Отображение окна сообщения

-   Работа с файловой системой, с отображением средства выбора файлов

-   Отправка и получение данных из Интернета

-   Использование сокетов, потоков, подключений

-   Работа со встречами, контактами, календарем

-   Работа с типами файлов, например открытие PDF-файлов, декодирование форматов изображений или мультимедиа

-   Взаимодействие с устройством или службой

При использовании асинхронной модели UWP вам, возможно, вовсе не придется явным образом управлять потоками. В каждом языке программирования имеется свой способ поддержки асинхронной модели для UWP.

| Язык программирования | Асинхронное представление           |
|----------------------|---------------------------------------|
| C#                   | ключевое слово **async**, оператор **await** |
| Visual Basic         | ключевое слово **Async**, оператор **Await** |
| C++/WinRT            | сопрограммы и оператор **co_await**  |
| C++/CX               | класс **task**, метод **.then**      |
| JavaScript           | объект Promise, функция **then**     |

## <a name="asynchronous-patterns-in-uwp-using-c-and-visual-basic"></a>Асинхронные шаблоны в UWP на C# и Visual Basic
Обычно код, написанный на C# или Visual Basic, выполняется синхронно, то есть выполнение кода предыдущей строки завершается перед началом выполнения следующей. Для асинхронного выполнения кода использовались прошлые модели программирования Microsoft .NET, но большая часть результирующего кода была посвящена реализации асинхронности, а не задаче, которая решалась с помощью этого кода. В UWP, .NET Framework и компиляторах C# и Visual Basic существуют дополнительные компоненты, которые выделяют из кода асинхронные механизмы. Для .NET и UWP вы можете написать асинхронный код, ориентированный на задачу, а не на способ или время ее выполнения. Асинхронный код в целом схож с синхронным. Подробнее см. в разделе [Вызов асинхронных API в C# и Visual Basic](call-asynchronous-apis-in-csharp-or-visual-basic.md).

## <a name="asynchronous-patterns-in-uwp-with-cwinrt"></a>Асинхронные шаблоны в UWP с помощью C + +/ WinRT
С помощью C + +/ WinRT, использовать сопрограммы и оператор **co_await** . Дополнительные сведения и примеры кода, см. в разделе [асинхронное программирование на C + +/ WinRT](../cpp-and-winrt-apis/concurrency.md).

## <a name="asynchronous-patterns-in-uwp-with-ccx"></a>Асинхронные шаблоны в UWP с помощью C + +/ CX
В C++/CX асинхронное программирование основано на классе [**task class**](https://msdn.microsoft.com/library/windows/apps/xaml/hh750113.aspx) и относящемся к нему методе [**then method**](https://msdn.microsoft.com/library/windows/apps/xaml/hh750044.aspx). Синтаксис похож на синтаксис объектов Promise в JavaScript. Класс **task class** и связанные с ним типы также предоставляют возможности отмены и управления контекстом потока. Дополнительные сведения см. в разделе [асинхронное программирование на C + +/ CX](asynchronous-programming-in-cpp-universal-windows-platform-apps.md).

Функция [**create\_async function**](https://msdn.microsoft.com/library/windows/apps/xaml/hh750102.aspx) обеспечивает поддержку создания асинхронных API, которые можно использовать в JavaScript или других языках, поддерживающих UWP. Дополнительные сведения см. в разделе [Создание асинхронных операций на C + +/ CX](https://msdn.microsoft.com/library/windows/apps/xaml/hh750082.aspx).

## <a name="asynchronous-patterns-in-uwp-using-javascript"></a>Асинхронные шаблоны в UWP на JavaScript
В JavaScript асинхронное программирование следует предложенному стандарту [Common JS Promises/A](http://wiki.commonjs.org/wiki/Promises/A), в соответствии с которым асинхронные методы возвращают объекты Promise. Объекты Promise используются в UWP и в библиотеке Windows для JavaScript.

Объект Promise представляет собой значение, которое будет сформировано в будущем. В UWP вы получаете объект Promise из функции фабрики, которая по правилам имеет имя, оканчивающееся словом «Async».

Во многих случаях вызов асинхронной функции так же прост, как и вызов обычной функции. Различие в том, что вам нужно использовать метод [**then**](https://msdn.microsoft.com/library/windows/apps/BR229728) или [**done**](https://msdn.microsoft.com/library/windows/apps/Hh701079), чтобы назначить обработчики для формирования результата, обработки ошибок и запуска операции.

## <a name="related-topics"></a>Еще по теме
* [Вызов асинхронных API в C# и Visual Basic](call-asynchronous-apis-in-csharp-or-visual-basic.md)
* [Асинхронное программирование с использованием Async и Await (C# и Visual Basic)](http://msdn.microsoft.com/library/hh191443(vs.110).aspx)
* [Особенности сценариев для образца Reversi: асинхронный код](https://msdn.microsoft.com/library/windows/apps/xaml/jj712233.aspx#async)
