---
ms.assetid: 23FE28F1-89C5-4A17-A732-A722648F9C5E
title: Асинхронное программирование
description: В этом разделе описывается асинхронное программирование в универсальной платформы Windows (UWP) и его представление в C#, Microsoft Visual Basic .NET, C++ и JavaScript.
ms.date: 05/14/2018
ms.topic: article
keywords: windows 10, uwp, асинхронный
ms.localizationpriority: medium
ms.openlocfilehash: 63772a4ee9ea98ca6a45dde45b728d4fedd988d7
ms.sourcegitcommit: 6f32604876ed480e8238c86101366a8d106c7d4e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/21/2019
ms.locfileid: "67320500"
---
# <a name="asynchronous-programming"></a>Асинхронное программирование
В этом разделе описывается асинхронное программирование в универсальной платформы Windows (UWP) и его представление в C#, Microsoft Visual Basic .NET, C++ и JavaScript.

Использование асинхронного программирования позволит вашему приложению отвечать на запросы во время выполнения длительных операций. Например, приложение, скачивающее содержимое из Интернета, может ожидать получения данных несколько секунд. Если для получения содержимого вы использовали синхронный метод в потоке пользовательского интерфейса, приложение блокируется до момента возврата из метода. Приложение при этом не будет отвечать на действия пользователя и будет казаться зависшим, что может вызвать раздражение пользователя. В такой ситуации гораздо эффективнее использовать асинхронное программирование, которое позволит приложению работать и отвечать на запросы пользовательского интерфейса, одновременно ожидая завершения операции.

Для методов, выполняющихся в течение длительного времени, применение асинхронного программирования является нормой, и в этом смысле UWP — не исключение. JavaScript, C#, Visual Basic и C++ каждого предоставляют языковую поддержку для асинхронных методов.

## <a name="asynchronous-programming-in-the-uwp"></a>Асинхронное программирование в UWP
Множество возможностей универсальной платформы Windows, таких как [ **MediaCapture** ](https://docs.microsoft.com/uwp/api/Windows.Media.Capture.MediaCapture) API-интерфейсы и [ **StorageFile** ](https://docs.microsoft.com/uwp/api/Windows.Storage.StorageFile) API-интерфейсы, доступны в виде асинхронных интерфейсов API. По соглашению имена асинхронных интерфейсов API заканчиваться «Async», часть их выполнения является скорее всего, должно выполняться после возврата управления вызывающему объекту.

При использовании асинхронных API в коде вашего приложения UWP согласованно выполняются неблокирующие вызовы. Если вы будете применять эти асинхронные шаблоны в собственных определениях API, вызывающие объекты будут предсказуемо интерпретировать и использовать ваш код.

Вот несколько распространенных задач, требующих вызова асинхронных API UWP.

-   Отображение окна сообщения

-   Работа с файловой системой, с отображением средства выбора файлов

-   Отправка и получение данных из Интернета

-   Использование сокетов, потоков, подключений

-   Работа со встречами, контактами, календарем

-   Работа с типами файлов, например открытие PDF-файлов, декодирование форматов изображений или мультимедиа

-   Взаимодействие с устройством или службой

При использовании асинхронной модели UWP вам, возможно, вовсе не придется явным образом управлять потоками. В каждом языке программирования имеется свой способ поддержки асинхронной модели для UWP.

| Язык программирования | Асинхронное представление           |
|----------------------|---------------------------------------|
| C#                   | оператор **async** keyword, **await** |
| Visual Basic         | ключевое слово **Async**, оператор **Await** |
| C++/WinRT            | сопрограммы, и **co_await** оператор  |
| C++/CX               | класс **task**, метод **.then**      |
| JavaScript           | объект Promise, функция **then**     |

## <a name="asynchronous-patterns-in-uwp-using-c-and-visual-basic"></a>Асинхронные шаблоны в UWP на C# и Visual Basic
Обычно код, написанный на C# или Visual Basic, выполняется синхронно, то есть выполнение кода предыдущей строки завершается перед началом выполнения следующей. Для асинхронного выполнения кода использовались прошлые модели программирования Microsoft .NET, но большая часть результирующего кода была посвящена реализации асинхронности, а не задаче, которая решалась с помощью этого кода. В UWP, .NET Framework и компиляторах C# и Visual Basic существуют дополнительные компоненты, которые выделяют из кода асинхронные механизмы. Для .NET и UWP вы можете написать асинхронный код, ориентированный на задачу, а не на способ или время ее выполнения. Асинхронный код в целом схож с синхронным. Подробнее см. в разделе [Вызов асинхронных API в C# и Visual Basic](call-asynchronous-apis-in-csharp-or-visual-basic.md).

## <a name="asynchronous-patterns-in-uwp-with-cwinrt"></a>Асинхронные шаблоны в UWP с помощью C++/WinRT
С помощью C++/WinRT, используйте сопрограммы и **co_await** оператор. Дополнительные сведения и примеры кода см. в разделе [асинхронное программирование в C++/WinRT](../cpp-and-winrt-apis/concurrency.md).

## <a name="asynchronous-patterns-in-uwp-with-ccx"></a>Асинхронные шаблоны в UWP с помощью C++/CX
В C++/CX асинхронное программирование основано на классе [**task class**](https://docs.microsoft.com/cpp/parallel/concrt/reference/task-class) и относящемся к нему методе [**then method**](https://docs.microsoft.com/cpp/parallel/concrt/reference/task-class?view=vs-2017). Синтаксис похож на синтаксис объектов Promise в JavaScript. Класс **task class** и связанные с ним типы также предоставляют возможности отмены и управления контекстом потока. Дополнительные сведения см. в разделе [асинхронное программирование в C++/CX](asynchronous-programming-in-cpp-universal-windows-platform-apps.md).

[ **Создать\_асинхронной функции** ](https://docs.microsoft.com/cpp/parallel/concrt/reference/concurrency-namespace-functions?view=vs-2017) обеспечивает поддержку для создания асинхронных интерфейсов API, который можно использовать из JavaScript или любом другом языке, который поддерживает UWP. Дополнительные сведения см. в разделе [создание асинхронных операций в C++/CX](https://docs.microsoft.com/cpp/parallel/concrt/creating-asynchronous-operations-in-cpp-for-windows-store-apps).

## <a name="asynchronous-patterns-in-uwp-using-javascript"></a>Асинхронные шаблоны в UWP на JavaScript
В JavaScript асинхронное программирование следует предложенному стандарту [Common JS Promises/A](https://wiki.commonjs.org/wiki/Promises/A), в соответствии с которым асинхронные методы возвращают объекты Promise. Объекты Promise используются в UWP и в библиотеке Windows для JavaScript.

Объект Promise представляет собой значение, которое будет сформировано в будущем. В UWP вы получаете объект Promise из функции фабрики, которая по правилам имеет имя, оканчивающееся словом «Async».

Во многих случаях вызов асинхронной функции так же прост, как и вызов обычной функции. Различие в том, что вам нужно использовать метод [**then**](https://docs.microsoft.com/previous-versions/windows/apps/br229728(v=win.10)) или [**done**](https://docs.microsoft.com/previous-versions/windows/apps/hh701079(v=win.10)), чтобы назначить обработчики для формирования результата, обработки ошибок и запуска операции.

## <a name="related-topics"></a>См. также
* [Вызов асинхронных API в C# или Visual Basic](call-asynchronous-apis-in-csharp-or-visual-basic.md)
* [Асинхронное программирование с помощью Async и Await (C# и Visual Basic)](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2012/hh191443(v=vs.110))
* [Функция Реверси примеры: асинхронный код](https://docs.microsoft.com/previous-versions/windows/apps/jj712233(v=win.10))
