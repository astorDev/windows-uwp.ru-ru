---
author: DelfCo
Description: "Разработайте свое приложение таким образом, чтобы оно поддерживало макеты и шрифты различных языков, в том числе с написанием справа налево."
title: "Настройка макета и шрифтов, добавление поддержки написания справа налево"
ms.assetid: F2522B07-017D-40F1-B3C8-C4D0DFD03AC3
label: Adjust layout and fonts, and support RTL
template: detail.hbs
translationtype: Human Translation
ms.sourcegitcommit: 5255da14ccdd0aed3852c41fa662de63a7160fba
ms.openlocfilehash: b45029156a28afdb37d7ac1402d1e6ae845b0e63

---

# Настройка макета и шрифтов, добавление поддержки написания справа налево





Разработайте свое приложение таким образом, чтобы оно поддерживало макеты и шрифты различных языков, в том числе с написанием справа налево.

## Руководство по макетам


В некоторых языках (например, немецком и финском) для размещения текста требуется больше места, чем в английском языке. Шрифты некоторых языков, например японского, требуют больше места по вертикали. Для некоторых языков (например, арабского и иврита) необходимо, чтобы макеты текста и приложения читались справа налево.

Используйте гибкие механизмы макета вместо абсолютного позиционирования и фиксированной ширины или высоты. При необходимости отдельные элементы пользовательского интерфейса можно настраивать в зависимости от языка.

### XAML

Укажите идентификатор **Uid** для элемента.

```XML
<TextBlock x:Uid="Block1">
```

Убедитесь, что файл ResW вашего приложения имеет ресурс для свойства Block1.Width, которое можно задать для каждого языка, на который осуществляется локализация.

В приложениях Магазина Windows на C++, C\# или Visual Basic, для которых нужно обеспечить локализацию макетов с другим направлением письма, используйте свойство [**FlowDirection**](https://msdn.microsoft.com/library/windows/apps/br208716) с симметричными полями и заполнением.

Элементы управления макета XAML, например [**Сетка**](https://msdn.microsoft.com/library/windows/apps/br242704), автоматически масштабируются и зеркально отражаются с помощью свойства [**FlowDirection**](https://msdn.microsoft.com/library/windows/apps/br208716). Предоставьте свое собственное свойство **FlowDirection** в приложении в качестве ресурса для специалистов по локализации.

Укажите идентификатор **Uid** для главной страницы приложения.

```XML
<Page x:Uid="MainPage">
```

Убедитесь, что файл **ResW** вашего приложения имеет ресурс для свойства MainPage.FlowDirection, которое можно задать для каждого языка, на который осуществляется локализация.

### HTML

Для приложений Магазина Windows на JavaScript применяйте такие механизмы макета [каскадных таблиц стилей (CSS)](https://msdn.microsoft.com/library/ms531209), как [-ms-grid](https://msdn.microsoft.com/en-us/library/windows/apps/hh465453.aspx#g_section) и [–ms-box](https://msdn.microsoft.com/en-us/library/windows/apps/hh465453.aspx#f_section). Используйте симметричные поля и заполнение для локализации различных направлений макета.

В приложении также можно использовать селектор псевдокласса [**:-ms-lang()**](https://msdn.microsoft.com/library/cc848867), чтобы настраивать свойства CSS, например ширину, для конкретных элементов в зависимости от языка приложения. Для включения этой возможности хост приложений присваивает атрибуту **lang** корневого элемента значение языка приложения.

**CSS**
```CSS
.item:-ms-lang(de, fi) { width: 350px; }
```

Приложения Магазина Windows на JavaScript, в которых применяются таблицы стилей ui-light.css или ui-dark.css, имеют автоматически установленное направление текста макета, соответствующее языку приложения. Следующая таблица CSS находится в файлах ui-light.css и ui-dark.css, и вам не нужно создавать ее самостоятельно.

**CSS**
```CSS
body:-ms-lang(ar,he…) { direction: rtl;}
```

Это означает, что большая часть макетов приложений установлена правильно, если в системе используется язык с написанием справа налево.

Подобно элементам управления [WinJS.UI](https://msdn.microsoft.com/library/windows/apps/br229782) в приложении можно использовать селектор псевдокласса [**:-ms-lang()**](https://msdn.microsoft.com/library/cc848867) для настройки физических свойств CSS, таких как **margin** и **padding**. Не требуют настройки логические свойства CSS, в которых используются ключевые слова, например **после** и **до**.

Не и используйте атрибут или свойство **align**в HTML. Вместо этого для управления выравниванием конкретных компонентов воспользуйтесь свойством **direction**.

Для поддержки вертикальных текстовых макетов в CSS используйте свойство [**writing-mode**](https://msdn.microsoft.com/library/ms531187).

## Зеркальное отображение изображений


### XAML

Если приложение содержит изображения, которые должны быть отражены (то есть, можно просто отразить то же самое изображение) для написания справа налево, можно использовать свойство [**FlowDirection**](https://msdn.microsoft.com/library/windows/apps/br208716).

```XML
<!-- en-US\localized.xaml -->
<Image ... FlowDirection="LeftToRight" />

<!-- ar-SA\localized.xaml -->
<Image ... FlowDirection="RightToLeft" />
```

### HTML

Если приложение содержит изображения, которые должны быть отражены (то есть, можно просто отразить то же самое изображение) для написания справа налево, можно воспользоваться преобразованиями CSS, чтобы зеркально отразить изображения во время отрисовки, добавив класс .mirrorable к элементам, а также следующего класса CSS:

```CSS
.mirrorable { transform: scaleX(-1); }
```

**И для XAML, и для HTML:** если вашему приложению требуется другое изображение для правильного отражения, можно использовать систему управления ресурсами с [квалификатором layoutdir](https://msdn.microsoft.com/library/windows/apps/xaml/hh965324). Система выбирает изображение с именем file.layoutdir-rtl.png, когда в качестве [языка приложения](manage-language-and-region.md) задан язык с написанием справа налево. Этот подход может применяться, если одна часть изображения зеркально отражается, а другая— нет.

## Шрифты


**И для XAML, и для HTML:** используйте API сопоставления шрифтов [**LanguageFont**](https://msdn.microsoft.com/library/windows/apps/br206864) для программного доступа к рекомендуемому семейству, размеру, насыщенности и стилю шрифта определенного языка. Объект **LanguageFont** предоставляет доступ к нужной информации о шрифте для различных категорий содержимого, включая заголовки, уведомления, текст пользовательского интерфейса и шрифты доступных для редактирования текстов.

### HTML

Приложения Магазина Windows на JavaScript, в которых применяются таблицы стилей ui-light.css или ui-dark.css, имеют автоматически установленный наиболее подходящий шрифт, соответствующий языку приложения. Хост приложений устанавливает для атрибута **lang** корневого элемента значение языка приложения.

Приложения, которые на одной странице отображают текст на нескольких языках, должны устанавливать атрибут **lang** для каждой части текста, написанной на одном языке. Селектор псевдокласса [**:-ms-lang()**](https://msdn.microsoft.com/library/cc848867) выбирает правильный шрифт для каждой части страницы.

## Рекомендации для работы с языками, которые используют написание справа налево (RTL)

Если приложение локализуется для языков с написанием справа налево (RTL), используйте API, чтобы задать направление текста по умолчанию для RootFrame. В результате все элементы управления, содержащиеся в этом RootFrame, будут соответствующим образом реагировать на направление текста по умолчанию.  Если поддерживается несколько языков, используйте LayoutDirection для предпочитаемого языка, чтобы задать значение свойства FlowDirection. Большинство элементов управления в Windows уже используют FlowDirection. Если вы реализуете собственные элементы управления, они должны использовать свойство FlowDirection для соответствующего изменения макета для языков с написанием справа налево и слева направо.

C#
```csharp    
// For bidirectional languages, determine flow direction for RootFrame and all derived UI.

    string resourceFlowDirection = ResourceContext.GetForCurrentView().QualifierValues["LayoutDirection"];
    if (resourceFlowDirection == "LTR")
    {
       RootFrame.FlowDirection = FlowDirection.LeftToRight;
    }
    else
    {
       RootFrame.FlowDirection = FlowDirection.RightToLeft;
    }
```
C++:
```cpp
    // Get preferred app language
    m_language = Windows::Globalization::ApplicationLanguages::Languages->GetAt(0);
     
    // Set flow direction accordingly
    m_flowDirection = ResourceManager::Current->DefaultContext->QualifierValues->Lookup("LayoutDirection") != "LTR" ? 
       FlowDirection::RightToLeft : FlowDirection::LeftToRight;
```


### ВОПРОСЫ И ОТВЕТЫ О ЯЗЫКАХ С НАПИСАНИЕМ СПРАВА НАЛЕВО 

<dl>
  <dt> <p><b>Вопрос.</b> Задается ли <b>FlowDirection</b> в зависимости от текущего языка? Например, если выбрать английский язык, будет ли текст отображаться слева направо, а если выбрать арабский, будет ли текст отображаться справа налево?</p></dt>

  <dd><p><b>Ответ. Свойство</b> <b>FlowDirection</b> не учитывает язык. Вы задали <b>FlowDirection</b> для языка, который сейчас отображается. См. пример кода выше.</p></dd> 

  <dt> <p><b>Вопрос.</b> Я не знаком с локализацией. Ресурсы уже содержат направление текста? Можно ли определить направление текста по текущему языку?</p></dt>

  <dd> <p><b>Ответ.</b> Если вы используете текущие рекомендации, ресурсы не содержат направление текста. Вам необходимо определить направление текста для текущего языка. Это можно сделать двумя способами. </p>
   <p>Рекомендуется использовать LayoutDirection для предпочитаемого языка, чтобы установить свойство FlowDirection объекта RootFrame. Все элементы управления в RootFrame наследуют свойство FlowDirection от RootFrame.</p>
   <p>Другой способ — задать FlowDirection в RESW-файле для нужных языков с написанием справа налево. Например, у вас может быть RESW-файл для арабского языка и RESW-файл для иврита. В этих файлах можно использовать атрибут x:UID для установки FlowDirection. Этот метод более восприимчив к ошибкам, чем программный метод.</p></dd>
</dl>


## Связанные статьи
[FlowDirection](https://msdn.microsoft.com/library/windows/apps/xaml/windows.ui.xaml.frameworkelement.flowdirection.aspx)



<!--HONumber=Aug16_HO3-->


