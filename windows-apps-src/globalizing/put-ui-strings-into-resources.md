---
author: DelfCo
Description: "Добавьте строковые ресурсы для своего пользовательского интерфейса в файлы ресурсов. После этого вы сможете ссылаться на эти строки из кода или разметки."
title: "Размещение строк пользовательского интерфейса в ресурсах"
ms.assetid: E420B9BB-C0F6-4EC0-BA3A-BA2875B69722
label: Put UI strings into resources
template: detail.hbs
ms.author: bobdel
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: windows 10, uwp
ms.openlocfilehash: a3e224fc51245a5f91c29da2d745a3740029cda9
ms.sourcegitcommit: 11664964e548a2af30d6e176c515cdbf330934ac
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2017
---
# <a name="put-ui-strings-into-resources"></a>Размещение строк пользовательского интерфейса в ресурсах
<link rel="stylesheet" href="https://az835927.vo.msecnd.net/sites/uwp/Resources/css/custom.css">

Добавьте строковые ресурсы для своего пользовательского интерфейса в файлы ресурсов. После этого вы сможете ссылаться на эти строки из кода или разметки.

<div class="important-apis" >
<b>Важные API</b><br/>
<ul>
<li>[**ApplicationModel.Resources.ResourceLoader**](https://msdn.microsoft.com/library/windows/apps/br206014)</li>
<li>[**WinJS.Resources.processAll**](https://msdn.microsoft.com/library/windows/apps/br211864)</li>
</ul>
</div>


В этом разделе описаны действия, которые позволяют добавлять строковые ресурсы на нескольких языках в универсальные приложения для Windows и быстро их тестировать.

## <a name="put-strings-into-resource-files-instead-of-putting-them-directly-in-code-or-markup"></a>Размещайте строки в файлах ресурсов, а не в коде или разметке.


1.  Откройте свое приложение (или создайте новое) в Visual Studio.

2.  Откройте файл package.appxmanifest в Visual Studio, перейдите на вкладку **Приложение** и установите en-US (английский, США) языком по умолчанию для данного примера. Если в вашем приложении имеется несколько файлов package.appxmanifest, выполните эти действия для каждого из них.
    <br>**Примечание.** Это позволит задать язык проекта по умолчанию. Ресурсы языка по умолчанию используются, если предпочитаемый язык пользователя или языки интерфейса не соответствуют языковым ресурсам, представленным в приложении.
3.  Создайте папку для размещения файлов ресурсов.
    1.  В обозревателе решений щелкните правой кнопкой мыши на проекте ("Общий проект", если ваше приложение включает несколько проектов) и выберите **Добавить** &gt; **Новая папка**.
    2.  Назовите новую папку Strings (Строки).
    3.  Если новая папка не отображается в обозревателе решений, выберите **Проект** &gt; **Показать все файлы** из меню Microsoft Visual Studio (проект должен быть выбран).

4.  Создайте вложенную папку и файл ресурсов для английского языка (США).
    1.  Щелкните правой кнопкой мыши на папке Strings (Строки) и создайте в ней новую папку. Присвойте ей имя en-US. Файл ресурсов необходимо поместить в папку, которая названа в соответствии со спецификацией языковых тегов [BCP-47](http://go.microsoft.com/fwlink/p/?linkid=227302). Дополнительные сведения о различных языковых квалификаторах и список распространенных языковых тегов приводятся в разделе [Именование ресурсов с помощью квалификаторов](https://msdn.microsoft.com/library/windows/apps/xaml/hh965324).
    2.  Щелкните правой кнопкой мыши папку en-US и выберите команду **Добавить** &gt; **Новый элемент...**.
    3.  Выберите "Файл ресурсов" (.resw).

    4.  Нажмите кнопку **Добавить**. Будет добавлен файл ресурсов с именем по умолчанию: Resources.resw. Рекомендуется использовать имя файла по умолчанию. Приложение может разделить свои ресурсы и разместить их в других файлах, но вам следует специально позаботиться о том, чтобы ссылки на них были правильными (см. раздел [Загрузка строковых ресурсов](https://msdn.microsoft.com/library/windows/apps/xaml/hh965323)).
    5.  Если от предыдущих проектов .NET остались RESX-файлы, содержащие только строковые ресурсы, выберите команду **Добавить** &gt; **Существующий элемент…**, добавьте RESX-файл и измените его расширение на RESW.
    6.  Откройте файл и с помощью редактора добавьте следующие ресурсы.


        Strings/en-US/Resources.resw ![добавить ресурс, английский](images/addresource-en-us.png) В этом примере Greeting.Text и Farewell обозначают отображаемые строки. Greeting.Width обозначает свойство Width строки Greeting. В комментариях удобно размещать специальные указания для переводчиков, которые локализуют строки на другие языки.

## <a name="associate-controls-to-resources"></a>Свяжите элементы управления с ресурсами.

Каждый элемент управления, для которого необходим локализованный текст, нужно сопоставить с RESW-файлом. Для этого используйте атрибут **x:Uid** в элементах XAML следующим образом.

```XML
<TextBlock x:Uid="Greeting" Text="" />
```

Для имени ресурса нужно присвоить значение атрибута **Uid** и указать свойство для получения переведенной строки (в нашем случае — свойство Text). Для других языков можно указать другие свойства или значения, например Greeting.Width, но с такими свойствами, связанными с макетом, следует быть осторожнее. Нужно стремиться к динамическому расположению элементов управления на экране устройства.

Обратите внимание, что присоединенные свойства, такие как AutomationProperties.Name, по-разному обрабатываются в файлах .resw. Необходимо явно прописать пространство имен следующим образом.

```XML
MediumButton.[using:Windows.UI.Xaml.Automation]AutomationProperties.Name
```

## <a name="add-string-resource-identifiers-to-code-and-markup"></a>Добавьте идентификаторы строковых ресурсов в код и разметку.

В коде можно ссылаться на строки динамически.

**C#**
```CSharp
var loader = new Windows.ApplicationModel.Resources.ResourceLoader();
var str = loader.GetString("Farewell");
```

**C++**
```cpp
auto loader = ref new Windows::ApplicationModel::Resources::ResourceLoader();
auto str = loader->GetString("Farewell");
```


## <a name="add-folders-and-resource-files-for-two-additional-languages"></a>Добавьте папки и файлы ресурсов для дополнительных языков.


1.  Добавьте в папку Strings (Строки) еще одну папку для немецкого языка. Присвойте папке имя de-DE для языка «немецкий (Германия)».
2.  Создайте еще один файл ресурсов в папке de-DE и добавьте следующее.

    strings/de-DE/Resources.resw

    ![Добавление ресурса (немецкий язык)](images/addresource-de-de.png)


3.  Создайте еще одну папку с именем fr-FR для языка "французский (Франция)". Создайте новый файл ресурсов и добавьте следующее.

    strings/fr-FR/Resources.resw
    
    ![Добавление ресурса (французский язык)](images/addresource-fr-fr.png)

## <a name="build-and-run-the-app"></a>Выполните сборку и запустите приложение.


Протестируйте приложение для языка интерфейса по умолчанию.

1.  Чтобы выполнить сборку и запустить приложение, нажмите клавишу F5.
2.  Обратите внимание, что приветствие и прощание отображаются на выбранном пользователем языке.
3.  Закройте приложение.

Протестируйте приложение для других языков.

1.  Откройте **Параметры** на своем устройстве.
2.  Выберите **Время и язык**.
3.  Выберите **Язык и региональные стандарты** (**Язык** на телефоне или эмуляторе телефона).
4.  Обратите внимание, что язык, который отображался при запуске приложения (т.е. английский, немецкий или французский), является первым языком в списке. Если первый язык в списке не является ни одним из этих трех, приложение переходит к следующему языку, который оно поддерживает.
5.  Если на вашем компьютере отсутствует какой-либо из этих трех языков, добавьте отсутствующий язык в список с помощью команды **Добавить язык**.
6.  Чтобы протестировать использование другого языка в приложении, выберите язык в списке и нажмите **По умолчанию**. На телефоне или эмуляторе телефона нажмите и удерживайте язык в списке, а затем коснитесь **Переместить вверх**, чтобы переместить его в верх списка. После этого запустите приложение.

## <a name="related-topics"></a>Связанные разделы


* [Как присваивать имена ресурсам с помощью квалификаторов](https://msdn.microsoft.com/library/windows/apps/xaml/hh965324)
* [Загрузка строковых ресурсов](https://msdn.microsoft.com/library/windows/apps/xaml/hh965323)
* [Тег языка по стандарту BCP-47](http://go.microsoft.com/fwlink/p/?linkid=227302)
 

 



