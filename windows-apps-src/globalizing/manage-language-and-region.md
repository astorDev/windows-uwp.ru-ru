---
Description: Управляйте процессом выбора Windows ресурсов пользовательского интерфейса и форматирования элементов пользовательского интерфейса приложения с помощью различных языковых и региональных параметров, предоставляемых Windows.
title: Управление языковыми и региональными параметрами
ms.assetid: 22D3A937-736A-4121-8285-A55DED56E594
label: Управление языковыми и региональными параметрами
template: detail.hbs
---

# Управление языковыми и региональными параметрами


\[ Обновлено для приложений UWP в Windows 10. Статьи о Windows 8.x см. в [архиве](http://go.microsoft.com/fwlink/p/?linkid=619132) \]


**Важные API**

-   [**Windows.Globalization**](https://msdn.microsoft.com/library/windows/apps/br206813)
-   [**Windows.ApplicationModel.Resources**](https://msdn.microsoft.com/library/windows/apps/br206022)
-   [**Пространство имен WinJS.Resources**](https://msdn.microsoft.com/library/windows/apps/br229779)

Управляйте процессом выбора Windows ресурсов пользовательского интерфейса и форматирования элементов пользовательского интерфейса приложения с помощью различных языковых и региональных параметров, предоставляемых Windows.

## <span id="Introduction"></span><span id="introduction"></span><span id="INTRODUCTION"></span>Введение


Пример приложения, управляющего языковыми и региональными параметрами, приведен в разделе [Пример ресурсов и локализации приложения](http://go.microsoft.com/fwlink/p/?linkid=231501).

Пользователю Windows не нужно выбирать из ограниченного набора языков единственный язык. Вместо этого он может указать Windows, что он говорит на каком-либо языке мира, даже если сама система Windows не переведена на этот язык. Пользователь может даже указать, что говорит на нескольких языках.

Пользователь Windows может указать свое местоположение — любой регион мира. Кроме того, пользователь может указать любой язык и любое местоположение. Местоположение и язык не зависят друг от друга. Тот факт, что пользователь говорит по-французски, не означает, что он находится во Франции, а если пользователь находится во Франции, это не говорит о том, что он предпочитает говорить на французском языке.

Пользователь может выполнять приложения, язык которых отличается от языка Windows. Например, приложение выполняется на испанском языке, в то время как Windows — на английском.

В случае приложений Магазина Windows язык представлен [языковым тегом BCP-47](http://go.microsoft.com/fwlink/p/?linkid=227302). Большинство API в среде выполнения Windows, HTML и XAML могут возвращать или принимать строковые представления языковых тегов BCP-47. См. также [Список языков IANA](http://go.microsoft.com/fwlink/p/?linkid=227303).

Список тегов языков, специально поддерживаемых Магазином Windows, см. в разделе [Поддерживаемые языки](https://msdn.microsoft.com/library/windows/apps/jj657969).

## <span id="Tasks"></span><span id="tasks"></span><span id="TASKS"></span>Задачи


### <span id="Users_can_set_their_language_preferences."></span><span id="users_can_set_their_language_preferences."></span><span id="USERS_CAN_SET_THEIR_LANGUAGE_PREFERENCES."></span>Пользователи могут задавать собственные языковые настройки.

Список языковых настроек представляет собой перечень языков, отсортированный в порядке, предпочтительном для пользователя.

Этот список пользователь задает, выбрав **Параметры** &gt; **Время и язык** &gt; **Язык и региональные стандарты**. Также пользователь может выбрать **Панель управления** &gt; **Часы, язык и регион**.

Список языковых настроек пользователя может включать несколько языков и региональных или других специальных вариантов. Например, пользователь может предпочитать язык fr-CA, но также понимать en-GB.

### <span id="Specify_the_supported_languages_in_the_app_s_manifest."></span><span id="specify_the_supported_languages_in_the_app_s_manifest."></span><span id="SPECIFY_THE_SUPPORTED_LANGUAGES_IN_THE_APP_S_MANIFEST."></span>Укажите поддерживаемые языки в манифесте программы.

Определите список поддерживаемых приложением языков в элементе [**Resources element**](https://msdn.microsoft.com/library/windows/apps/dn934770) в файле манифеста приложения (обычно Package.appxmanifest), или Visual Studio автоматически создаст список языков в файле манифеста на основе найденных в проекте языков. В манифесте поддерживаемые языки должны точно описываться с соответствующим уровнем детализации. Языки, перечисленные в манифесте, отображаются для пользователей в Магазине Windows.

### <span id="Specify_the_default_language."></span><span id="specify_the_default_language."></span><span id="SPECIFY_THE_DEFAULT_LANGUAGE."></span>Определите язык по умолчанию.

Откройте package.appxmanifest в Visual Studio, перейдите на вкладку **Приложение** и задайте в качестве языка по умолчанию язык, на котором создано приложение.

Приложение использует язык по умолчанию, если не поддерживает языки, выбранные пользователем. Visual Studio использует язык по умолчанию при добавлении метаданных в ресурсы для этого языка. Это позволяет выбирать соответствующие ресурсы в среде выполнения.

Кроме того, чтобы правильно установить язык программы (см. ниже шаг «Создайте список языков приложения»), свойство языка по умолчанию должно соответствовать первому языку в манифесте. Ресурсы языка по умолчанию все равно должны иметь квалификатор языка (например, en-US/logo.png). Язык по умолчанию не указывает неявный язык неопределенных ресурсов. Дополнительные сведения см. в разделе [Присвоение имен ресурсам с помощью квалификаторов](https://msdn.microsoft.com/library/windows/apps/xaml/hh965324).

### <span id="Qualify_resources_with_their_language."></span><span id="qualify_resources_with_their_language."></span><span id="QUALIFY_RESOURCES_WITH_THEIR_LANGUAGE."></span>Задайте квалификаторы языка для ресурсов.

Тщательно изучите свою аудиторию, а также язык и местоположение пользователей, для которых вы разрабатываете программу. Часто люди, живущие в каком-либо регионе, предпочитают не основной язык этого региона, а какой-либо другой. Например, в миллионах семей в Соединенных Штатах основным языком является испанский.

Чтобы задать квалификатор языка для ресурсов:

-   Включите сценарий, в котором для языка не определено значение сценария подавления. Сведения о языковых тегах см. в [реестре подтегов языков IANA](http://go.microsoft.com/fwlink/p/?linkid=227303). Например, используйте zh-Hant, zh-Hant-TW или zh-Hans, но не zh-CN или zh-TW.
-   Пометьте все лингвистическое содержание определенными языковыми тегами. Свойство языка по умолчанию в проекте не определяет язык для непомеченных ресурсов (то есть нейтральный язык). Оно указывает, какой помеченный языковой ресурс необходимо выбирать при отсутствии другого ресурса, соответствующего предпочтениям пользователя.

Пометьте ресурсы с помощью точного представления содержимого.

-   Windows выполняет сложный анализ, включающий региональные варианты (например, en-US и en-GB), поэтому приложения могут сами помечать ресурсы точным представлением содержимого для соответствующего пользователя, и оставить Windows задачу сопоставления для каждого пользователя.
-   Магазин Windows показывает содержимое манифеста пользователям, просматривающим программу.
-   Имейте в виду, что некоторые инструменты и другие компоненты, такие как средства машинного перевода, могут находить специальные языковые теги, например информацию о региональном диалекте, необходимую для понимания данных.
-   Не забудьте пометить ресурсы, предоставив всю информацию, особенно при наличии нескольких вариантов. Например, пометьте ресурс как en-US и en-GB, если оба языка характерны для этого региона.
-   Для языков, имеющих единый стандарт, регион добавлять не требуется. В некоторых ситуациях, таких как отметка ресурсов языковым тегом ja вместо ja-JP, можно использовать общие теги.

Иногда возникают ситуации, когда необходимо локализовать не все ресурсы.

-   Пометьте такие ресурсы, как строки пользовательского интерфейса, предоставляющиеся на всех языках, соответствующим языковым тегом и обязательно предоставьте все эти ресурсы для языка по умолчанию. Нейтральный ресурс указывать не нужно (он не помечается языковым тегом).
-   Для ресурсов, которые предоставляются не для всего набора языков приложения (частичная локализация), определите набор языков и обязательно предоставьте все эти ресурсы для языка по умолчанию. Windows подбирает наиболее подходящий язык для пользователя, учитывая все языки, на которых он говорит, в порядке их предпочтения. Например, не все пользовательские интерфейсы приложения могут быть переведены на каталанский, если приложение содержит полный набор ресурсов на испанском языке. Для пользователей, которые говорят на каталанском и на испанском языке, но предпочитают каталанский, недоступные на каталанском языке ресурсы отображаются на испанском.
-   Ресурсы, которые отличаются по языку от всех остальных, сопоставляются с общим ресурсом; ресурс, используемый для всех языков, должен отмечаться тегом неопределенного языка «und». Windows интерпретирует тег языка «und» подобно символу «\*», отдавая предпочтение основному языку приложения при отсутствии точного совпадения. Например, если несколько ресурсов (например, ширина элемента) для финского языка отличаются, а остальные ресурсы одинаковы для всех языков, финский ресурс необходимо отметить языковым тегом финского языка, а остальные — тегом «und».
-   Для ресурсов, которые основываются не на языке, а на сценарии языка, таких как шрифт или высота текста, используйте неопределенный языковой тег с указанным сценарием: «und-&lt;script&gt;». Например, для латинских шрифтов используйте und-Latn\\fonts.css, а для кириллических — und-Cryl\\fonts.css.

### <span id="Create_the_application_language_list."></span><span id="create_the_application_language_list."></span><span id="CREATE_THE_APPLICATION_LANGUAGE_LIST."></span>Создайте список языков приложения.

Во время выполнения система определяет настройки языка пользователя, о поддержке которых приложение объявляет в своем манифесте, и создает *список языков приложения*. С его помощью система определяет язык, используемый программой. Этот список определяет языки, которые используются для ресурсов, дат, времени, чисел и других компонентов приложения и системы. Например, система управления ресурсами ([**Windows.ApplicationModel.Resources**](https://msdn.microsoft.com/library/windows/apps/br206022), [**Windows.ApplicationModel.Resources.Core**](https://msdn.microsoft.com/library/windows/apps/br225039) и [**пространство имен WinJS.Resources**](https://msdn.microsoft.com/library/windows/apps/br229779)) загружает ресурсы пользовательского интерфейса в соответствии с языком приложения. [**Windows.Globalization**](https://msdn.microsoft.com/library/windows/apps/br206813) также выбирает форматы на основе списка языков приложения. Доступ к этому списку обеспечивается с помощью [**Windows.Globalization.ApplicationLanguages.Languages**](https://msdn.microsoft.com/library/windows/apps/hh972396).

Сопоставлять языки с ресурсами сложно. Рекомендуется, чтобы сопоставление осуществляла ОС Windows, потому что в языковом теге существует много необязательных компонентов, которые влияют на приоритет сопоставления, и с ними можно столкнуться на практике.

Примеры необязательных компонентов в языковом теге:

-   Сценарий для языков со сценариями подавления. Например, en-Latn-US соответствует en-US.
-   Регион. Например, en-US соответствует en.
-   Варианты Например, de-DE-1996 соответствует de-DE.
-   -x и другие расширения. Например, en-US-x-Pirate соответствует en-US.

Кроме того, в языковом теге есть множество компонентов, вид которых отличается от xx и xx-yy, и не все из них соответствуют друг другу.

-   zh-Hant не соответствует zh-Hans.

Windows расставляет приоритеты при сопоставлении стандартным и хорошо известным способом. Например, en-US соответствует en-US, en, en-GB и т. д. (в порядке приоритета).

-   Windows может выполнять межрегиональное сопоставление. Например, en-US соответствует en-US, затем en, а затем en-\*.
-   В Windows есть дополнительные данные для сопоставления по сходным признакам в регионе, например основной регион для языка. Например, fr-FR лучше, чем fr-CA, подходит к fr-BE.
-   Все последующие улучшения в языковом сопоставлении в Windows будут предоставляться бесплатно при использовании Windows API.

Сопоставление с первым языком в списке выполняется до сопоставления со вторым языком даже для других региональных вариантов. Например, ресурс для en-GB выбирается прежде, чем ресурс для fr-CA, если язык приложения en-US. Ресурс для fr-CA выбирается, только если нет ресурсов для формы en.

Список языков программы задается в соответствии с региональным вариантом пользователя, даже если этот вариант отличается от регионального варианта приложения. Например, если пользователь говорит на языке en-GB, а программа поддерживает en-US, в список языков приложения будет входить en-GB. Это гарантирует, что формат дат, времени и чисел будет лучше соответствовать предпочтениям пользователя (en-GB), но ресурсы пользовательского интерфейса все равно будут загружаться на языке, поддерживаемом приложением (en-US).

Список языков приложения состоит из следующих элементов:

1.  **(Дополнительно.) Переопределение основного языка.** [**PrimaryLanguageOverride**](https://msdn.microsoft.com/library/windows/apps/hh972398) — это простой параметр переопределения для приложений, которые предоставляют пользователям возможность независимого выбора языка или имеют серьезную причину переопределять языки, выбранные по умолчанию. Подробнее см. в [Примере ресурсов и локализации приложения](http://go.microsoft.com/fwlink/p/?linkid=231501).
2.  **Языки пользователя, поддерживаемые приложением.** Это список предпочитаемых пользователем языком в порядке убывания. Этот список фильтруется в соответствии со списком поддерживаемых языков в манифесте приложения. Фильтрация языков пользователя по языкам, поддерживаемым приложением, обеспечивает согласованность между пакетами средств разработки программного обеспечения (SDK), библиотеками классов, зависимыми пакетами платформ и приложением.
3.  **Если элементы 1 и 2 пусты, то язык по умолчанию или первый язык, поддерживаемый приложением.** Если пользователь не говорит ни на одном языке из тех, которые поддерживает приложение, выбирается первый язык, поддерживаемый приложением.

См. примеры ниже в разделе «Примечания».

### <span id="Set_the_HTTP_Accept_Language_header."></span><span id="set_the_http_accept_language_header."></span><span id="SET_THE_HTTP_ACCEPT_LANGUAGE_HEADER."></span>Установите заголовок, определяющий допустимый язык для HTTP.

При создании HTTP-запросов в приложениях Магазина Windows и классических приложениях (обычные веб-запросы и запросы XMLHttpRequest (XHR)) используется стандартный заголовок HTTP Accept-Language. По умолчанию этот заголовок HTTP задается в соответствии с пользовательскими настройками языка. Применяется предпочтительный для пользователя порядок, указанный в разделе **Параметры** &gt; **Время и язык** &gt; **Язык и региональные стандарты**. Каждый язык в списке дополнительно раскрывается, отображая язык, который не зависит от региона, и весовой коэффициент (q). Например, список языков пользователя fr-FR и en-US в заголовке, определяющем допустимый язык для HTTP (HTTP Accept-Language), раскрывается соответственно: fr-FR, fr; en-US, en («fr-FR,fr;q=0.8,en-US;q=0.5,en;q=0.3»).

### <span id="Use_the_APIs_in_the_Windows.Globalization_namespace."></span><span id="use_the_apis_in_the_windows.globalization_namespace."></span><span id="USE_THE_APIS_IN_THE_WINDOWS.GLOBALIZATION_NAMESPACE."></span>Используйте API в пространстве имен Windows.Globalization.

Обычно для определения языка элементы API в пространстве имен [**Windows.Globalization**](https://msdn.microsoft.com/library/windows/apps/br206813) используют список языков приложения. Если ни один из языков не имеет совпадающего формата, используются региональные параметры пользователя. Это тот же самый язык, который применяется в системных часах. Региональные параметры пользователя доступны в меню **Параметры** &gt; **Время и язык** &gt; **Язык и региональные стандарты** &gt; **Дополнительные параметры даты и времени, региональные параметры** &gt; **Регион: изменить формат даты, времени или чисел**. Кроме того, API **Windows.Globalization** позволяют переопределить список языков приложения.

Также [**Windows.Globalization**](https://msdn.microsoft.com/library/windows/apps/br206813) содержит объект [**Language**](https://msdn.microsoft.com/library/windows/apps/br206804), который предоставляется как вспомогательный объект. Это дает возможность приложениям получать такие подробные сведения о языке, как сценарий языка, отображаемое и исходное имя.

### <span id="Use_geographic_region_when_appropriate."></span><span id="use_geographic_region_when_appropriate."></span><span id="USE_GEOGRAPHIC_REGION_WHEN_APPROPRIATE."></span>Используйте географический регион, когда это необходимо.

Чтобы выбрать содержимое для показа на экране, вместо языка можно использовать параметр домашнего географического региона пользователя. Например, новостное приложение может по умолчанию отображать содержимое из домашнего местоположения пользователя, заданного при установке Windows и доступного в пользовательском интерфейсе Windows в меню **Регион: изменить формат даты, времени или чисел**, как описано в предыдущей задаче. Вы можете получить текущее значение домашнего региона пользователя с помощью [**Windows.System.UserProfile.GlobalizationPreferences.HomeGeographicRegion**](https://msdn.microsoft.com/library/windows/apps/br241829).

Также [**Windows.Globalization**](https://msdn.microsoft.com/library/windows/apps/br206813) содержит объект [**GeographicRegion**](https://msdn.microsoft.com/library/windows/apps/br206795), который предоставляется как вспомогательный объект. Это позволяет получить подробные сведения о регионе, такие как его отображаемое и исходное имя, а также используемые валюты.

## <span id="Remarks"></span><span id="remarks"></span><span id="REMARKS"></span>Примечания


В следующей таблице приводятся примеры того, как пользователь мог бы увидеть различные параметры языка и региона в пользовательском интерфейсе приложения.

<table border="1">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Языки, поддерживаемые приложением (определяются в манифесте)</th>
<th align="left">Настройки языка пользователя (устанавливается на панели управления)</th>
<th align="left">Переопределение основного языка приложения (необязательно)</th>
<th align="left">Языки приложения</th>
<th align="left">Что пользователь видит в приложении</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Английский (Великобритания) (по умолчанию); немецкий (Германия)</td>
<td align="left">Английский (Великобритания)</td>
<td align="left">нет</td>
<td align="left">Английский (Великобритания)</td>
<td align="left">Пользовательский интерфейс: английский (Великобритания)<br>Даты/время/числа: английский (Великобритания)</td>
</tr>
<tr>
<td align="left">Немецкий (Германия) (по умолчанию); французский (Франция); итальянский (Италия)</td>
<td align="left">Французский (Австрия)</td>
<td align="left">нет</td>
<td align="left">Французский (Австрия)</td>
<td align="left">Пользовательский интерфейс: французский (Франция) (запасной вариант для французского языка (Австрия))<br>Даты/время/числа: французский (Австрия)</td>
</tr>
<tr>
<td align="left">Английский (США) (по умолчанию); французский (Франция); английский (Великобритания)</td>
<td align="left">Английский (Канада); французский (Канада)</td>
<td align="left">нет</td>
<td align="left">Английский (Канада); французский (Канада)</td>
<td align="left">Пользовательский интерфейс: английский (США) (запасной вариант для английского языка (Канада))<br>Даты/время/числа: английский (Канада)</td>
</tr>
<tr>
<td align="left">Испанский (Испания) (по умолчанию); испанский (Мексика); испанский (Латинская Америка); португальский (Бразилия)</td>
<td align="left">Английский (США)</td>
<td align="left">нет</td>
<td align="left">Испанский (Испания)</td>
<td align="left">Пользовательский интерфейс: испанский (Испания) (используется язык по умолчанию, так как запасного варианта для английского языка нет)<br>Даты/время/числа: испанский (Испания)</td>
</tr>
<tr>
<td align="left">Каталанский (по умолчанию); испанский (Испания); французский (Франция)</td>
<td align="left">Каталанский; французский (Франция)</td>
<td align="left">нет</td>
<td align="left">Каталанский; французский (Франция)</td>
<td align="left">Пользовательский интерфейс: в основном каталанский, местами французский (Франция), так как не все строки представлены на каталанском языке<br>Даты/время/числа: каталанский</td>
</tr>
<tr>
<td align="left">Английский (Великобритания) (по умолчанию); французский (Франция); немецкий (Германия)</td>
<td align="left">Немецкий (Германия); английский (Великобритания)</td>
<td align="left">Английский (Великобритания) (выбранный пользователем в пользовательском интерфейсе программы)</td>
<td align="left">Английский (Великобритания); немецкий (Германия)</td>
<td align="left">Пользовательский интерфейс: английский (Великобритания) (переопределение языка)<br>Даты/время/числа: английский (Великобритания)</td>
</tr>
</tbody>
</table>

 

## <span id="related_topics"></span>Ссылки по теме


* [Тег языка BCP-47](http://go.microsoft.com/fwlink/p/?linkid=227302)
* [Список языков IANA](http://go.microsoft.com/fwlink/p/?linkid=227303)
* [Пример ресурсов и локализации приложения](http://go.microsoft.com/fwlink/p/?linkid=231501)
* [Поддерживаемые языки](https://msdn.microsoft.com/library/windows/apps/jj657969)
 

 





<!--HONumber=Mar16_HO1-->


